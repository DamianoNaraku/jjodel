{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.html","./src/guiElements/console/console.component.html","./src/guiElements/dam-context-menu/dam-context-menu.component.html","./src/guiElements/graph-tab-html/graph-tab-html.component.html","./src/guiElements/isidebar/isidebar.component.html","./src/guiElements/m-graph-html/m-graph-html.component.html","./src/guiElements/mm-graph-html/mm-graph-html.component.html","./src/guiElements/mminput/mminput.component.html","./src/guiElements/mmsidebar/mmsidebar.component.html","./src/guiElements/msidebar/msidebar.component.html","./src/guiElements/property-barr/property-barr.component.html","./src/guiElements/style-editor/style-editor.component.html","./src/guiElements/top-bar/top-bar.component.html","./node_modules/tslib/tslib.es6.js","./src/Database/LocalStorage.ts","./src/GuiStyles/viewpoint.ts","./src/Model/EAnnotation.ts","./src/Model/EAnnotationDetail.ts","./src/Model/MetaMetaModel.ts","./src/Model/MetaModel.ts","./src/Model/Model.ts","./src/Model/iModel.ts","./src/Model/mPackage/MMPackage.ts","./src/Model/mPackage/MPackage.component.ts","./src/Model/mPackage/iPackage.ts","./src/Model/modelPiece.ts","./src/app/app.component.css","./src/app/app.component.ts","./src/app/app.module.ts","./src/common/Database.ts","./src/common/Joiner.ts","./src/common/StringSimilarity.js","./src/common/prj_json2xml.js","./src/common/prj_xml2json.js","./src/common/util.ts","./src/environments/environment.ts","./src/guiElements/console/console.component.css","./src/guiElements/console/console.component.ts","./src/guiElements/dam-context-menu/dam-context-menu.component.css","./src/guiElements/dam-context-menu/dam-context-menu.component.ts","./src/guiElements/graph-tab-html/graph-tab-html.component.css","./src/guiElements/graph-tab-html/graph-tab-html.component.ts","./src/guiElements/isidebar/isidebar.component.css","./src/guiElements/isidebar/isidebar.component.ts","./src/guiElements/m-graph-html/m-graph-html.component.css","./src/guiElements/m-graph-html/m-graph-html.component.ts","./src/guiElements/mGraph/Edge/EdgePoint.ts","./src/guiElements/mGraph/Edge/ExtEdge.ts","./src/guiElements/mGraph/Edge/edgeStyle.ts","./src/guiElements/mGraph/Edge/iEdge.ts","./src/guiElements/mGraph/Field/iField.ts","./src/guiElements/mGraph/Vertex/iVertex.ts","./src/guiElements/mGraph/iGraph.ts","./src/guiElements/mm-graph-html/mm-graph-html.component.css","./src/guiElements/mm-graph-html/mm-graph-html.component.ts","./src/guiElements/mminput/mminput.component.css","./src/guiElements/mminput/mminput.component.ts","./src/guiElements/mmsidebar/mmsidebar.component.css","./src/guiElements/mmsidebar/mmsidebar.component.ts","./src/guiElements/msidebar/msidebar.component.css","./src/guiElements/msidebar/msidebar.component.ts","./src/guiElements/property-barr/property-barr.component.css","./src/guiElements/property-barr/property-barr.component.ts","./src/guiElements/propertyBar/propertyBar.ts","./src/guiElements/style-editor/style-editor.component.css","./src/guiElements/style-editor/style-editor.component.ts","./src/guiElements/top-bar/top-bar.component.css","./src/guiElements/top-bar/top-bar.component.ts","./src/mClass/EEnum.ts","./src/mClass/IClassifier.ts","./src/mClass/MClass.ts","./src/mClass/classChild/ELiteral.ts","./src/mClass/classChild/Features/Attributes/MAttribute.ts","./src/mClass/classChild/Features/Attributes/iAttribute.ts","./src/mClass/classChild/Features/Attributes/mmAttribute.ts","./src/mClass/classChild/Features/References/M2Reference.ts","./src/mClass/classChild/Features/References/MReference.ts","./src/mClass/classChild/Features/References/iReference.ts","./src/mClass/classChild/Features/iFeature.ts","./src/mClass/classChild/Operations/eOperation.ts","./src/mClass/classChild/Operations/eParameter.ts","./src/mClass/classChild/Type.ts","./src/mClass/classChild/Typedd.ts","./src/mClass/iClass.ts","./src/mClass/m2Class.ts","./src/main.ts"],"names":[],"mappings":"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A;;AAEA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,SAAS;AAC/C;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACjFA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;;;;;;;;;;;;AC5CA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,+BAA+B;AAC/B;AACA,4BAA4B,yBAAyB;AACrD;AACA,iCAAiC;AACjC;AACA,yCAAyC,GAAG;AAC5C;AACA,6FAA6F;AAC7F,uDAAuD;AACvD;AACA;AACA,wDAAwD;AACxD;AACA,+CAA+C,GAAG;AAClD;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,+CAA+C,GAAG;AAClD;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,oCAAoC,KAAK;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,IAAI,6FAA6F;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,uBAAuB;AACtD;AACA;AACA;AACA,6CAA6C,GAAG;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","export default \"\"","export default \"<p style=\\\"display:none;\\\">test console</p>\\r\\n\"","export default \"<div id=\\\"damContextMenuTemplateContainer\\\" class=\\\"contextMenuRoot\\\">\\r\\n    <ul class=\\\"vertex contextMenu\\\">\\r\\n      <li class=\\\"Vertex delete\\\">Delete Vertex</li>\\r\\n      <li class=\\\"Vertex duplicate\\\">Duplicate Vertex</li>\\r\\n      <li class=\\\"m1hide Vertex extend\\\">Extend</li>\\r\\n      <li class=\\\"Feature delete\\\">Delete Feature</li>\\r\\n      <li class=\\\"Feature duplicate\\\">Duplicate Feature</li>\\r\\n      <li class=\\\"Reference reflistparent\\\">References\\r\\n        <ul class=\\\"reflist\\\">\\r\\n          <li class=\\\"refli template\\\" data-index=\\\"-1\\\"><span class=\\\"index\\\"></span><span class=\\\"text\\\"></span><button class=\\\"refli delete btn btn-sm btn-danger\\\">X</button></li>\\r\\n          <li class=\\\"refli todo\\\"><button class=\\\"firstempty btn btn-sm btn-outline-primary\\\">Select first empty</button></li>\\r\\n          <li class=\\\"refli todo\\\"><label><input class=\\\"byindex\\\" type=\\\"number\\\" value=\\\"0\\\" min=\\\"0\\\" max=\\\"-10\\\" step=\\\"1\\\"><button class=\\\"byindex btn btn-sm btn-outline-primary\\\">Select by index</button></label></li>\\r\\n        </ul>\\r\\n      </li>\\r\\n      <li class=\\\"separator\\\"></li>\\r\\n      <li class=\\\"Vertex up\\\">Push vertex Up (Z-order)</li>\\r\\n      <li class=\\\"Vertex down\\\">Push vertex Down (Z-order)</li>\\r\\n      <li class=\\\"todo Feature autofixinstances m2hide\\\">Autofix instances</li>\\r\\n      <li class=\\\"todo Feature autofix\\\">Autofix conformity</li>\\r\\n      <li class=\\\"Feature up\\\">Move feature Up</li>\\r\\n      <li class=\\\"Feature down\\\">Move feature Down</li>\\r\\n    </ul>\\r\\n    <ul class=\\\"extedge contextMenu\\\">\\r\\n      <li class=\\\"edge delete\\\">Delete generalization</li>\\r\\n      <li class=\\\"edge change\\\">Edit generalization</li>\\r\\n    </ul>\\r\\n    <ul class=\\\"edge contextMenu\\\">\\r\\n      <li class=\\\"edge delete\\\">Delete reference</li>\\r\\n      <li class=\\\"edge change\\\">Edit reference</li>\\r\\n    </ul>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"UtabContainer main\\\" data-selectedTab=\\\"1\\\">\\r\\n  <ul class=\\\"UtabHeaderContainer main\\\">\\r\\n    <li class=\\\"UtabHeader main\\\" data-target=\\\"1\\\">MetaModel</li>\\r\\n    <li class=\\\"UtabHeader main\\\" data-target=\\\"2\\\">Model</li>\\r\\n  </ul>\\r\\n  <div class=\\\"UtabContentContainer\\\">\\r\\n    <div class=\\\"UtabContent main\\\" data-target=\\\"1\\\"><app-mm-graph-html></app-mm-graph-html></div>\\r\\n    <div class=\\\"UtabContent main\\\" data-target=\\\"2\\\"><app-m-graph-html></app-m-graph-html></div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<p>\\r\\n  isidebar works!\\r\\n</p>\\r\\n\"","export default \"<div class=\\\"verticalFillingContainer\\\">\\r\\n  <div class=\\\"verticalFiller horizontalFillingContainer\\\">\\r\\n    <div class=\\\"sidebarShell resizableBorder\\\" data-resizableRight=\\\"true\\\">\\r\\n    <div id='model_sidebar'></div>\\r\\n  </div>\\r\\n    <div class=\\\"editorShell horizontalFiller\\\">\\r\\n      <ul class =\\\"viewpointShell\\\">\\r\\n        <h6>Viewpoints</h6>\\r\\n        <li class=\\\"viewpointrow default\\\">\\r\\n          <label class=\\\"name\\\">\\r\\n            <input type=\\\"radio\\\" checked>\\r\\n            <input class=\\\"name form-control-sm\\\" type=\\\"text\\\" value=\\\"Default\\\" readonly><button class=\\\"duplicate\\\"></button>\\r\\n          </label>\\r\\n        </li>\\r\\n        <li class=\\\"viewpointrow template\\\">\\r\\n          <label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\"></label>\\r\\n          <label class=\\\"name\\\"><input class=\\\"name form-control-sm\\\" type=\\\"text\\\">\\r\\n            <span class=\\\"buttons\\\">\\r\\n            <button class=\\\"duplicate\\\"></button><button class=\\\"edit\\\"></button><button class=\\\"remove\\\"></button>\\r\\n          </span>\\r\\n          </label>\\r\\n        </li>\\r\\n      </ul>\\r\\n      <svg class=\\\"graph\\\" id='model_editor'>\\r\\n        <g class=\\\"gridContainer\\\">\\r\\n          <defs></defs>\\r\\n          <rect class=\\\"grid\\\"></rect>\\r\\n        </g>\\r\\n      </svg>\\r\\n      <div id='model_navigatorOutlineContainer'></div>\\r\\n    </div>\\r\\n    <!-- style of propertybar must be inline for resizableBorder js -->\\r\\n    <div class=\\\"UtabContainer propertyBarContainer resizableBorder\\\" data-resizableLeft=\\\"true\\\" data-selectedTab=\\\"2\\\" style=\\\"width:20%\\\">\\r\\n    <ul class=\\\"UtabHeaderContainer\\\">\\r\\n      <li class=\\\"UtabHeader\\\" data-target=\\\"1\\\">Style</li>\\r\\n      <li class=\\\"UtabHeader\\\" data-target=\\\"2\\\">Structured</li>\\r\\n      <li class=\\\"UtabHeader\\\" data-target=\\\"3\\\">Raw</li>\\r\\n    </ul>\\r\\n    <div class=\\\"UtabContentContainer\\\">\\r\\n      <div class=\\\"UtabContent\\\" data-target=\\\"1\\\"><app-style-editor></app-style-editor></div>\\r\\n      <div class=\\\"UtabContent\\\" data-target=\\\"2\\\"><app-property-barr></app-property-barr></div>\\r\\n      <div class=\\\"UtabContent\\\" data-target=\\\"3\\\">\\r\\n        <div class=\\\"rawContainer\\\">\\r\\n          <h2 class=\\\"rawTitle\\\">Raw eCore fragment</h2>\\r\\n          <textarea class=\\\"rawecore\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  </div>\\r\\n  <div class=\\\"mconsole resizableBorder\\\" data-resizableTop=\\\"true\\\"></div>\\r\\n  <div class=\\\"MDefaultStyles customized\\\"></div>\\r\\n  <div class=\\\"MDefaultStyles immutable\\\">\\r\\n    <foreignobject class=\\\"template Class\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"200\\\" height=\\\"40\\\">\\r\\n      <div class=\\\"Class Vertex vertexShell\\\" style=\\\"background:white; min-width:200px; height:auto; width:100%; overflow: auto;\\\" data-autosize=\\\"1\\\">\\r\\n        <div class=\\\"VertexHeader\\\" style=\\\"height:20px; width:100%; text-align:center; display:flex;\\\">\\r\\n          <div style=\\\"text-align:center; order:2; flex-grow:1; flex-shrink:1; flex-basis:10px; color:dodgerblue; margin:auto; padding-left:4px;\\\">($##metaParent.name$)</div>\\r\\n        </div>\\r\\n        <div class=\\\"specialjs AttributeContainer\\\" style=\\\"display: flex; flex-direction: column;\\\"></div>\\r\\n        <div class=\\\"specialjs ReferenceContainer\\\" style=\\\"display: flex; flex-direction: column;\\\"></div>\\r\\n        <div class=\\\"specialjs OperationContainer\\\" style=\\\"display: flex; flex-direction: column;\\\"></div>\\r\\n      </div>\\r\\n    </foreignobject>\\r\\n\\r\\n    <div class=\\\"template Reference\\\" style=\\\"height:22px; width: 100%; display:flex; margin:auto; box-sizing:content-box;\\\">\\r\\n      <span style=\\\"display:flex; order:0; flex-grow:1; flex-shrink:1; margin:auto; color:darkorange;\\\">*$##metaParent.type.printablename$</span>\\r\\n      <span style=\\\"display:flex; order:1; flex-basis:10px; flex-grow:2; flex-shrink:2; min-width:3px; margin:auto;\\\">$##metaParent.name$</span>\\r\\n      <button class=\\\"LinkVertex\\\" style=\\\"order:3; width:22px; height:22px; padding:0; margin:auto;\\\">-></button>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"template Attribute\\\" style=\\\"height:22px; width:100%; display:flex; box-sizing:content-box;\\\">\\r\\n      <span style=\\\"order:0; flex-basis:10px; flex-grow:2; flex-shrink:2; min-width:3px; margin:auto; color:darkorange;\\\">$##metaParent.type.printablename$</span>\\r\\n      <span style=\\\"order:1; flex-basis:10px; flex-grow:3; flex-shrink:3; min-width:3px; margin:auto;\\\">$##metaParent.name$&nbsp;=&nbsp;</span>\\r\\n      <input type=\\\"text\\\" placeholder=\\\"empty string\\\" value=\\\"$##valuesStr$\\\" style=\\\"border: none; order:2; flex-basis:10px; flex-grow:3; flex-shrink:3; min-width:3px;\\\">\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"template Operation\\\" style=\\\"height: 22px; width: 100%; display:flex; box-sizing:content-box;\\\">\\r\\n      <div class=\\\"specialjs signature\\\" data-maxargumentchars=\\\"10\\\" data-maxarguments=\\\"2\\\" style=\\\"min-width:100%\\\"></div>\\r\\n      <div class=\\\"specialjs operationDetail\\\" style=\\\"margin:2px; padding:2px; order:2; border: 3px solid #28a745; border-top-color: transparent; margin-top:0;\\\">\\r\\n        <div style=\\\"display: flex; width: 100%;\\\">\\r\\n          <select disabled data-primitive=\\\"true\\\" data-enum=\\\"true\\\" data-class=\\\"true\\\" data-void=\\\"true\\\" style=\\\"border:none; display:flex; order:2; flex-grow:2; flex-shrink:2; flex-basis:3px; min-width:3px; text-align: right;\\\"></select>\\r\\n          <input disabled type=\\\"text\\\" placeholder=\\\"Operation Name\\\" pattern=\\\"[A-Za-z0-9_$]+\\\" value=\\\"$##name$\\\" style=\\\"border:none; display: flex; order: 1; flex-basis:10px; flex-grow:3; flex-shrink:3; min-width:3px;\\\">\\r\\n        </div>\\r\\n        <div class=\\\"parameterList\\\" style=\\\"display: flex; width: 100%;\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"template Parameter\\\" style=\\\"height: 22px; width: 100%; display:flex; box-sizing:content-box;\\\">\\r\\n      <select disabled data-primitive=\\\"true\\\" data-enum=\\\"true\\\" data-class=\\\"true\\\" style=\\\"border:none;display:flex; order:2; flex-grow:2; flex-shrink:2; flex-basis:3px; min-width:3px; text-align: right;\\\"></select>\\r\\n      <input disabled type=\\\"text\\\" placeholder=\\\"Parameter Name\\\" pattern=\\\"[A-Za-z0-9_$]*\\\" value=\\\"$##name$\\\" style=\\\"border:none; display: flex; order: 1; flex-basis:10px; flex-grow:3; flex-shrink:3; min-width:3px;\\\">\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\"","export default \"<div class=\\\"verticalFillingContainer\\\">\\r\\n  <div class=\\\"verticalFiller horizontalFillingContainer\\\">\\r\\n    <div class=\\\"sidebarShell resizableBorder\\\" data-resizableRight=\\\"true\\\">\\r\\n    <div id='metamodel_sidebar'></div>\\r\\n  </div>\\r\\n    <div class=\\\"editorShell horizontalFiller\\\">\\r\\n      <ul class =\\\"viewpointShell\\\">\\r\\n        <h6>Viewpoints</h6>\\r\\n        <li class=\\\"viewpointrow default\\\">\\r\\n          <label class=\\\"name\\\">\\r\\n            <input type=\\\"radio\\\" checked>\\r\\n            <input class=\\\"name form-control-sm\\\" type=\\\"text\\\" value=\\\"Default\\\" readonly><button class=\\\"duplicate\\\"></button>\\r\\n          </label>\\r\\n        </li>\\r\\n        <li class=\\\"viewpointrow template\\\">\\r\\n          <label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\"></label>\\r\\n          <label class=\\\"name\\\"><input class=\\\"name form-control-sm\\\" type=\\\"text\\\">\\r\\n            <span class=\\\"buttons\\\">\\r\\n            <button class=\\\"duplicate\\\"></button><button class=\\\"edit\\\"></button><button class=\\\"remove\\\"></button>\\r\\n          </span>\\r\\n          </label>\\r\\n        </li>\\r\\n      </ul>\\r\\n      <svg class=\\\"graph\\\" id='metamodel_editor'>\\r\\n        <g class=\\\"gridContainer\\\">\\r\\n          <defs></defs>\\r\\n          <rect class=\\\"grid\\\"></rect>\\r\\n        </g>\\r\\n      </svg>\\r\\n      <div id='metamodel_navigatorOutlineContainer'></div>\\r\\n    </div>\\r\\n    <!-- style of propertybar must be inline for resizableBorder js -->\\r\\n    <div class=\\\"UtabContainer propertyBarContainer resizableBorder\\\" data-resizableLeft=\\\"true\\\" data-selectedTab=\\\"2\\\" style=\\\"width:20%\\\">\\r\\n    <ul class=\\\"UtabHeaderContainer\\\">\\r\\n      <li class=\\\"UtabHeader\\\" data-target=\\\"1\\\">Style</li>\\r\\n      <li class=\\\"UtabHeader\\\" data-target=\\\"2\\\">Structured</li>\\r\\n      <li class=\\\"UtabHeader\\\" data-target=\\\"3\\\">Raw</li>\\r\\n    </ul>\\r\\n    <div class=\\\"UtabContentContainer\\\">\\r\\n      <div class=\\\"UtabContent\\\" data-target=\\\"1\\\"><app-style-editor></app-style-editor></div>\\r\\n      <div class=\\\"UtabContent\\\" data-target=\\\"2\\\"><app-property-barr></app-property-barr></div>\\r\\n      <div class=\\\"UtabContent\\\" data-target=\\\"3\\\">\\r\\n        <div class=\\\"rawContainer\\\">\\r\\n          <h2 class=\\\"rawTitle\\\">Raw eCore fragment</h2>\\r\\n          <textarea class=\\\"rawecore\\\"></textarea>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  </div>\\r\\n  <div class=\\\"mmconsole resizableBorder\\\" data-resizableTop=\\\"true\\\"></div>\\r\\n  <div class=\\\"MMDefaultStyles customized\\\"></div>\\r\\n  <div class=\\\"MMDefaultStyles immutable\\\">\\r\\n    <foreignobject class=\\\"template Class\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"200\\\" height=\\\"40\\\">\\r\\n      <div class=\\\"Class Vertex vertexShell\\\" style=\\\"background:white; min-width:200px; height:auto; width:100%; overflow: auto;\\\" data-autosize=\\\"1\\\">\\r\\n        <div class=\\\"VertexHeader\\\" style=\\\"height:20px; width:100%; text-align:center; display:flex;\\\">\\r\\n          <input value=\\\"$##name$\\\" placeholder=\\\"Object name\\\" pattern=\\\"[A-Za-z0-9_$]+\\\" style=\\\"border:none; text-align:right; order:1; flex-grow:1; flex-shrink:1; flex-basis:10px; min-width:10px; color:black; border:none; padding-right:4px;\\\">\\r\\n          <div style=\\\"text-align:left; order:2; flex-grow:1; flex-shrink:1; flex-basis:10px; color:dodgerblue; margin:auto; padding-left:4px;\\\">(Class)</div>\\r\\n        </div>\\r\\n        <div class=\\\"specialjs AttributeContainer\\\" style=\\\"display: flex; flex-direction: column;\\\"></div>\\r\\n        <div class=\\\"specialjs ReferenceContainer\\\" style=\\\"display: flex; flex-direction: column;\\\"></div>\\r\\n        <div class=\\\"specialjs OperationContainer\\\" style=\\\"display: flex; flex-direction: column;\\\"></div>\\r\\n        <div class=\\\"addFieldButtonContainer\\\" style=\\\"width: 100%; text-align: center;\\\">\\r\\n          <span style=\\\"display:flex; margin:auto;\\\">Add</span>\\r\\n          <style id=\\\"addfieldcss_class\\\">\\r\\n            .addFieldButtonContainer{ display: flex; max-height: 20px; min-height: 20px; overflow: hidden;}\\r\\n            .addFieldButtonContainer{ opacity: 0; padding-top: 20px; }\\r\\n            .Vertex:hover .addFieldButtonContainer{ opacity: 1; padding-top: 0; }\\r\\n          </style>\\r\\n          <select class=\\\"AddFieldSelect\\\" style=\\\"display:flex; margin:auto;\\\">\\r\\n            <optgroup label=\\\"FeatureType\\\">\\r\\n              <option value=\\\"Attribute\\\" selected=\\\"\\\">Attribute</option>\\r\\n              <option value=\\\"Reference\\\">Reference</option>\\r\\n              <option value=\\\"Operation\\\">Operation</option>\\r\\n            </optgroup>\\r\\n          </select>\\r\\n          <span style=\\\"display:flex; margin:auto;\\\">field</span>\\r\\n          <button class=\\\"addFieldButton\\\">Go</button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </foreignobject>\\r\\n\\r\\n    <foreignobject class=\\\"template EEnum\\\" x=\\\"0\\\" y=\\\"0\\\" width=\\\"200\\\" height=\\\"40\\\">\\r\\n      <div class=\\\"Class Vertex vertexShell EEnum\\\" style=\\\"background:white; height:auto; min-width:200px; width:100%; overflow: auto;\\\" data-autosize=\\\"1\\\">\\r\\n        <div class=\\\"VertexHeader\\\" style=\\\"height:20px; width:100%; text-align:center; display:flex;\\\">\\r\\n          <input value=\\\"$##name$\\\" placeholder=\\\"Object name\\\" pattern=\\\"[A-Za-z0-9_$]+\\\" style=\\\"border:none; text-align:right; order:1; flex-grow:1; flex-shrink:1; flex-basis:10px; min-width:10px; color:black; border:none; padding-right:4px;\\\">\\r\\n          <div style=\\\"text-align:left; order:2; flex-grow:1; flex-shrink:1; flex-basis:10px; color:red; margin:auto; padding-left:4px;\\\">(Enum)</div>\\r\\n        </div>\\r\\n        <div class=\\\"specialjs LiteralContainer\\\" style=\\\"display: flex; flex-direction: column;\\\"></div>\\r\\n        <div class=\\\"addFieldButtonContainer\\\" style=\\\"width: 100%; text-align: center;\\\">\\r\\n          <style id=\\\"addfieldcss_enum\\\">\\r\\n            .addFieldButtonContainer{ display: flex; max-height: 20px; min-height: 20px; overflow: hidden;}\\r\\n            .addFieldButtonContainer{ opacity: 0; padding-top: 20px; }\\r\\n            .Vertex:hover .addFieldButtonContainer{ opacity: 1; padding-top: 0; }\\r\\n          </style>\\r\\n          <span style=\\\"display:flex; margin:auto;\\\">Add</span>\\r\\n          <select class=\\\"AddFieldSelect\\\" disabled style=\\\"display:flex; margin:auto;\\\">\\r\\n            <optgroup label=\\\"FeatureType\\\">\\r\\n              <option value=\\\"Literal\\\" selected=\\\"\\\">Literal</option>\\r\\n            </optgroup>\\r\\n          </select>\\r\\n          <span style=\\\"display:flex; margin:auto;\\\">field</span>\\r\\n          <button class=\\\"addFieldButton\\\">Go</button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </foreignobject>\\r\\n\\r\\n    <div class=\\\"template Reference\\\" style=\\\"height: 22px; width: 100%; display:flex; box-sizing:content-box;\\\">\\r\\n      <select data-class=\\\"true\\\" style=\\\"border:none; display:flex; order:3; flex-grow:1; flex-basis:0; min-width:0;\\\"></select>\\r\\n      <input type=\\\"text\\\" placeholder=\\\"Reference Name\\\" pattern=\\\"[A-Za-z0-9_$]+\\\" value=\\\"$##name$\\\" style=\\\"border:none; order: 1; flex-basis:10px; flex-grow:2; flex-shrink:2; min-width:3px;\\\">\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"template Attribute EString EInteger\\\" style=\\\"height:22px; width:100%; display:flex; box-sizing:content-box;\\\">\\r\\n      <select data-primitive=\\\"true\\\" data-enum=\\\"true\\\" style=\\\"border:none; display:flex; order:2; flex-grow:2; flex-shrink:2; flex-basis:3px; min-width:3px; text-align: right;\\\"></select>\\r\\n      <input type=\\\"text\\\" placeholder=\\\"Attribute Name\\\" pattern=\\\"[A-Za-z0-9_$]+\\\" value=\\\"$##name$\\\" style=\\\"border:none; display: flex; order: 1; flex-basis:10px; flex-grow:3; flex-shrink:3; min-width:3px;\\\">\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"template ELiteral\\\" style=\\\"height:22px; width:100%; display:flex; box-sizing:content-box;\\\">\\r\\n      <input class=\\\"value\\\" type=\\\"number\\\" placeholder=\\\"auto\\\" value=\\\"$##ordinal$\\\" style=\\\"border:none; display: flex; width: 30px;\\\">\\r\\n      <input class=\\\"name\\\" type=\\\"text\\\" placeholder=\\\"name\\\" value=\\\"$##name$\\\" pattern=\\\"[A-Za-z0-9_$]+\\\" style=\\\"border:none; display:flex; flex-grow:1; flex-shrink:1; flex-basis:3px; min-width:3px;\\\">\\r\\n      <input class=\\\"literal\\\" type=\\\"text\\\" placeholder=\\\"literal\\\" value=\\\"$$#literal$\\\" style=\\\"border:none; display:flex; flex-grow:1; text-align: right; flex-basis:3px; min-width:3px;\\\">\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"template Operation\\\" style=\\\"width:100%; display:flex; box-sizing:content-box; flex-flow:column;\\\">\\r\\n      <div class=\\\"specialjs signature\\\" data-maxargumentchars=\\\"10\\\" data-maxarguments=\\\"2\\\" style=\\\"height:21px; min-width:100%\\\"></div>\\r\\n      <div class=\\\"specialjs operationDetail\\\" style=\\\"margin:2px; padding:2px; order:2; border: 3px solid #28a745; border-top-color: transparent; margin-top:0;\\\">\\r\\n        <div style=\\\"display: flex; width: 100%;\\\">\\r\\n          <select data-primitive=\\\"true\\\" data-enum=\\\"true\\\" data-class=\\\"true\\\" data-void=\\\"true\\\" style=\\\"border:none; display:flex; order:2; flex-grow:2; flex-shrink:2; flex-basis:3px; min-width:3px; text-align: right;\\\"></select>\\r\\n          <input disabled type=\\\"text\\\" placeholder=\\\"Return Type\\\" pattern=\\\"[A-Za-z0-9_$]+\\\" value=\\\"Return type\\\" style=\\\"border:none; display: flex; order: 1; flex-basis:10px; flex-grow:3; flex-shrink:3; min-width:3px;\\\">\\r\\n        </div>\\r\\n        <div class=\\\"parameterList\\\" style=\\\"display: flex; width: 100%; flex-flow:column;\\\">\\r\\n          <button class=\\\"addParameterButton btn btn-sm btn-success\\\" style=\\\"width: 100%; height: 22px; padding:0; text-align: center\\\">+</button>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"template Parameter\\\" style=\\\"height: 22px; width: 100%; border-bottom: 1px solid lightgray; display:flex; box-sizing:content-box;\\\">\\r\\n       <select data-primitive=\\\"true\\\" data-enum=\\\"true\\\" data-class=\\\"true\\\" style=\\\"border:none; display:flex; order:2; flex-grow:1; flex-shrink:1; flex-basis:3px; min-width:3px; text-align: right;\\\"></select>\\r\\n       <input type=\\\"text\\\" placeholder=\\\"Parameter Name\\\" pattern=\\\"[A-Za-z0-9_$]*\\\" value=\\\"$##name$\\\" style=\\\"border:none; display: flex; order: 1; flex-basis:10px; flex-grow:1; flex-shrink:1; min-width:3px;\\\">\\r\\n       <button style=\\\"order: 3; padding:0 5px;\\\">X</button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<!-- <input id=\\\"MM_INPUT\\\" value = \\\"<?xml version='1.0' encoding='UTF-8'?>\\r\\n<ecore:EPackage xmi:version='2.0' xmlns:xmi='http://www.omg.org/XMI' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'\\r\\n    xmlns:ecore='http://www.eclipse.org/emf/2002/Ecore' name='bowling' nsURI='http://org/eclipse/example/bowling' nsPrefix='org.eclipse.example.bowling'>\\r\\n  <eClassifiers xsi:type='ecore:EClass' name='Player'>\\r\\n    <eStructuralFeatures xsi:type='ecore:EAttribute' name='name' eType='ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString'/>\\r\\n  </eClassifiers>\\r\\n  <eClassifiers xsi:type='ecore:EClass' name='League'>\\r\\n    <eStructuralFeatures xsi:type='ecore:EAttribute' name='name' eType='ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString'/>\\r\\n    <eStructuralFeatures xsi:type='ecore:EReference' name='players' upperBound='-1'\\r\\n        eType='#//Player' containment='true'/>\\r\\n  </eClassifiers>\\r\\n</ecore:EPackage>\\\"> -->\\r\\n\\r\\n<input id=\\\"MM_INPUT\\\" value = '{\\r\\n  \\\"ecore:EPackage\\\": {\\r\\n    \\\"@xmlns:xmi\\\": \\\"http://www.omg.org/XMI\\\",\\r\\n    \\\"@xmlns:xsi\\\": \\\"http://www.w3.org/2001/XMLSchema-instance\\\",\\r\\n    \\\"@xmlns:ecore\\\": \\\"http://www.eclipse.org/emf/2002/Ecore\\\",\\r\\n    \\\"@xmi:version\\\": \\\"2.0\\\",\\r\\n    \\\"@name\\\": \\\"bowling\\\",\\r\\n    \\\"@nsURI\\\": \\\"http://org/eclipse/example/bowling\\\",\\r\\n    \\\"@nsPrefix\\\": \\\"org.eclipse.example.bowling\\\",\\r\\n    \\\"eClassifiers\\\": [\\r\\n      {\\r\\n        \\\"@xsi:type\\\": \\\"ecore:EClass\\\",\\r\\n        \\\"@name\\\": \\\"Player\\\",\\r\\n        \\\"eStructuralFeatures\\\": {\\r\\n          \\\"@xsi:type\\\": \\\"ecore:EAttribute\\\",\\r\\n          \\\"@name\\\": \\\"name\\\",\\r\\n          \\\"@eType\\\": \\\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString\\\"\\r\\n        }\\r\\n      },\\r\\n      {\\r\\n        \\\"@xsi:type\\\": \\\"ecore:EClass\\\",\\r\\n        \\\"@name\\\": \\\"League\\\",\\r\\n        \\\"eStructuralFeatures\\\": [\\r\\n          {\\r\\n            \\\"@xsi:type\\\": \\\"ecore:EAttribute\\\",\\r\\n            \\\"@name\\\": \\\"name\\\",\\r\\n            \\\"@eType\\\": \\\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"@xsi:type\\\": \\\"ecore:EReference\\\",\\r\\n            \\\"@name\\\": \\\"players\\\",\\r\\n            \\\"@upperBound\\\": \\\"@1\\\",\\r\\n            \\\"@eType\\\": \\\"#//Player\\\",\\r\\n            \\\"@containment\\\": \\\"true\\\"\\r\\n          }\\r\\n        ]\\r\\n      }\\r\\n    ]\\r\\n  }\\r\\n}'>\\r\\n\\r\\n\\r\\n\"","export default \"<p>\\r\\n  mmsidebar works!\\r\\n</p>\\r\\n\"","export default \"<p>\\r\\n  msidebar works!\\r\\n</p>\\r\\n\"","export default \"<div class=\\\"property_sidebar\\\">\\r\\n  <div class=\\\"propertySidebarCurrentContent\\\"></div>\\r\\n  <div class=\\\"propertySidebarTemplates template\\\">\\r\\n    <div class=\\\"minimizer single\\\"></div>\\r\\n    <div class=\\\"content\\\">\\r\\n      <label class=\\\"model\\\">URI:<input class = \\\"uri m1disable\\\" pattern=\\\"^[a-zA-Z_$][a-zA-Z_$0-9]*$\\\"></label>\\r\\n      <label class=\\\"model\\\">Namespace:<input class = \\\"namespace m1disable\\\" pattern=\\\"^[a-zA-Z_$][a-zA-Z_$0-9]*$\\\"></label>\\r\\n      <label class=\\\"class m2hide\\\">Is Root<input type=\\\"checkbox\\\" class=\\\"isRoot\\\"></label>\\r\\n      <label class=\\\"operation\\\">Access modifier:<select class=\\\"specialjs visibilitySelector m1disable\\\"></select></label>\\r\\n      <label class=\\\"literal\\\">Ordinal:<input class=\\\"value\\\" type=\\\"number\\\"></label>\\r\\n      <label>Name:<input class=\\\"name m1disable\\\" placeholder=\\\"nameless\\\" pattern=\\\"^[a-zA-Z_$][a-zA-Z_$0-9]*$\\\"></label>\\r\\n      <label class=\\\"literal\\\">Literal:<input class=\\\"literal\\\" placeholder=\\\"will inherit from name\\\" pattern=\\\"^[a-zA-Z_$][a-zA-Z_$0-9]*$\\\"></label>\\r\\n      <label class=\\\"parameter\\\">Type:<select class=\\\"m1disable\\\" data-primitive=\\\"true\\\" data-enum=\\\"true\\\" data-class=\\\"true\\\"></select></label>\\r\\n      <label class=\\\"attribute\\\">Type:<select class=\\\"m1disable\\\" data-primitive=\\\"true\\\" data-enum=\\\"true\\\"></select></label>\\r\\n      <label class=\\\"reference\\\">Target Type:<select class=\\\"m1disable\\\" data-class=\\\"true\\\"></select></label>\\r\\n      <label class=\\\"attribute m2hide\\\">Value:<input type=\\\"text\\\" class=\\\"attributeValue\\\" placeholder=\\\"[ empty ]\\\"></label>\\r\\n      <label class=\\\"reference\\\">Is containment:<input type=\\\"checkbox\\\" class=\\\"referenceContainment m1disable\\\"></label>\\r\\n      <label class=\\\"parameter\\\">Is ordered:<input type=\\\"checkbox\\\" class=\\\"ordered m1disable\\\"></label>\\r\\n      <label class=\\\"parameter\\\">Values are unique:<input type=\\\"checkbox\\\" class=\\\"unique m1disable\\\"></label>\\r\\n      <label class=\\\"attribute reference parameter\\\">LowerBound:<input type=\\\"number\\\" step=\\\"1\\\" min=\\\"-1\\\" class=\\\"lowerbound m1disable\\\" placeholder=\\\"-1\\\"></label>\\r\\n      <label class=\\\"attribute reference parameter\\\">UpperBound:<input type=\\\"number\\\" step=\\\"1\\\" min=\\\"-1\\\" class=\\\"upperbound m1disable\\\" placeholder=\\\"-1\\\"></label>\\r\\n      <label class=\\\"operation\\\">Exceptions:<input class=\\\"exceptions\\\" placeholder=\\\"throwable exceptions, comma-separated.\\\"></label>\\r\\n      <div class=\\\"replaceVarOn model\\\"><label>Packages: ($##childrens.length$)</label>\\r\\n        <div class=\\\"wastemplate list\\\"><div class=\\\"minimizer\\\"></div><div class=\\\"content list packageList\\\"></div></div></div>\\r\\n      <div class=\\\"replaceVarOn package\\\"><label>Classes: ($##classes.length$)</label>\\r\\n        <div class=\\\"wastemplate list\\\"><div class=\\\"minimizer\\\"></div><div class=\\\"content classList\\\"></div></div></div>\\r\\n      <div class=\\\"replaceVarOn package\\\"><label>Enumerations: ($##enums.length$)</label>\\r\\n        <div class=\\\"wastemplate list\\\"><div class=\\\"minimizer\\\"></div><div class=\\\"content enumList\\\"></div></div></div>\\r\\n      <div class=\\\"replaceVarOn class\\\"><label>Attributes: ($##attributes.length$)</label>\\r\\n        <div class=\\\"wastemplate list\\\"><div class=\\\"minimizer\\\"></div><div class=\\\"content attributeList\\\"></div></div></div>\\r\\n      <div class=\\\"replaceVarOn class\\\"><label>References: ($##references.length$)</label>\\r\\n        <div class=\\\"wastemplate list\\\"><div class=\\\"minimizer\\\"></div><div class=\\\"content referenceList\\\"></div></div></div>\\r\\n      <div class=\\\"replaceVarOn class\\\"><label>Operations: ($##operations.length$)</label>\\r\\n        <div class=\\\"wastemplate list\\\"><div class=\\\"minimizer\\\"></div><div class=\\\"content operationList\\\"></div></div></div>\\r\\n      <div class=\\\"replaceVarOn operation\\\"><label>Parameters: ($##childrens.length$ + 1)</label>\\r\\n        <div class=\\\"wastemplate list\\\"><div class=\\\"minimizer\\\"></div><div class=\\\"content parameterList\\\"></div></div></div>\\r\\n      <div class=\\\"replaceVarOn enum\\\"><label>Literals: ($##childrens.length$)</label>\\r\\n        <div class=\\\"wastemplate list\\\"><div class=\\\"minimizer\\\"></div><div class=\\\"content literalList\\\"></div></div></div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<div class=\\\"styleContainer\\\">\\r\\n  <div class=\\\"StyleEditorDisplay\\\">\\r\\n\\r\\n  </div>\\r\\n  <div class=\\\"styleTemplates styleEditor\\\">\\r\\n    <div class=\\\"template model\\\">\\r\\n      <table><tbody>\\r\\n      <tr>\\r\\n        <td>Grid</td>\\r\\n        <td>X: <input type=\\\"number\\\" class=\\\"gridX\\\" min=\\\"0\\\" step=\\\"1\\\" placeholder=\\\"off\\\"> Y: <input type=\\\"number\\\" class=\\\"gridY\\\" min=\\\"0\\\" step=\\\"1\\\"  placeholder=\\\"off\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Zoom</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"zoomX\\\" min=\\\"0.0001\\\" step=\\\"0.1\\\" placeholder=\\\"1\\\"></td>\\r\\n        <td style=\\\"display: none\\\">X: <input type=\\\"number\\\" class=\\\"zoomXOLD\\\" min=\\\"0.0001\\\" step=\\\"0.1\\\" placeholder=\\\"1\\\"> Y: <input type=\\\"number\\\" class=\\\"zoomY\\\" min=\\\"0.0001\\\" step=\\\"0.1\\\" placeholder=\\\"1\\\"></td>\\r\\n      </tr>\\r\\n      <tr><td colspan=\\\"2\\\"><label><input type=\\\"checkbox\\\" class=\\\"showGrid\\\">Show grid</label></td></tr>\\r\\n      <tr><td colspan=\\\"2\\\"><label><input type=\\\"color\\\" class=\\\"graphColor\\\">Background color</label></td></tr>\\r\\n      </tbody></table>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"template htmlstyle\\\">\\r\\n      <div class=\\\"top\\\">\\r\\n        <label class=\\\"colChild\\\">\\r\\n          <div class=\\\"roww\\\">\\r\\n            <h6 class=\\\"vertexStyle separator htmllevel\\\"></h6>\\r\\n          </div>\\r\\n          <div class=\\\"colChild\\\">\\r\\n            <span class=\\\"stylelabel\\\">Applied view:</span>\\r\\n            <select class=\\\"stylename\\\"></select>\\r\\n          </div>\\r\\n        </label>\\r\\n        <button class=\\\"helpButton btn btn-info\\\" matTooltip=\\\"todo: explain .EndPoint, .TypeSelector, .ClassSelector...\\\">?</button>\\r\\n      </div>\\r\\n      <label class=\\\"allowEdit\\\">This style is being inherited and cannot be modified here.<br>You need a local copy to allow Edit.<button class=\\\"allowEdit btn btn-secondary\\\">Make it</button></label>\\r\\n      <div contenteditable=\\\"true\\\" class=\\\"html\\\" placeholder=\\\"Html for $##name$ (m2 class).\\\"></div>\\r\\n\\r\\n      <div class=\\\"roww nowrap detailButtonContainer\\\">\\r\\n        <button target=\\\"div.detail.measurable\\\" class=\\\"detail measurable btn btn-primary\\\">\\r\\n            <span class=\\\"closed\\\">\\r\\n              <label class=\\\"measurable\\\">\\r\\n                <input type=\\\"checkbox\\\">\\r\\n                <span>Measurable</span>\\r\\n              </label>\\r\\n              <div class=\\\"HorizontalContainer\\\"><span class=\\\"HorizontalChild\\\">⮟</span><span class=\\\"HorizontalChild\\\">⮟</span><span class=\\\"HorizontalChild\\\">⮟</span></div>\\r\\n            </span>\\r\\n          <span class=\\\"opened\\\">\\r\\n              <div class=\\\"HorizontalContainer\\\"><span class=\\\"HorizontalChild\\\">⮝</span><span class=\\\"HorizontalChild\\\">⮝</span><span class=\\\"HorizontalChild\\\">⮝</span></div>\\r\\n            </span>\\r\\n        </button>\\r\\n        <button target=\\\"div.detail.save\\\" class=\\\"detail save btn btn-primary\\\">\\r\\n          <span class=\\\"closed\\\">Save detail</span>\\r\\n          <span class=\\\"opened\\\">\\r\\n              <div class=\\\"HorizontalContainer\\\"><span class=\\\"HorizontalChild\\\">⮝</span><span class=\\\"HorizontalChild\\\">⮝</span><span class=\\\"HorizontalChild\\\">⮝</span></div>\\r\\n            </span>\\r\\n        </button>\\r\\n      </div>\\r\\n      <div class=\\\"detail measurable\\\" style=\\\"display: none\\\">\\r\\n        <!--\\r\\n                          left\\t  right\\t  eval\\r\\n\\r\\n          r_\\t\\t      str\\t    any\\t    /     <-- add dataset to name input.\\r\\n          d_\\t\\t      str\\t    any\\t    /\\r\\n          _\\t\\t        /\\t      js\\t    any\\r\\n          _rule\\t\\t    $##a$  \\tjs\\t    any\\r\\n          _export\\t\\t  jq\\t    js\\t    any\\r\\n          _chainFinal\\texport\\r\\n          _chain\\t\\t  export\\r\\n          _constraint\\tsize\\t  js\\t    bool\\tinequality\\r\\n          _dstyle\\t\\t  /\\t      js->css\\tstr\\r\\n          _import\\t\\t  size\\t  js\\t    any\\r\\n        -->\\r\\n        <div class=\\\"template measurable _root roww columnContainer\\\">\\r\\n          <button class=\\\"deleteRule columnChild btn btn-danger\\\">X</button>\\r\\n          <div class=\\\"columnChild\\\">\\r\\n            <div class=\\\"roww hideOn r_ d_\\\">\\r\\n              <label>\\r\\n                <span>Name</span>\\r\\n                <span class=\\\"nameprefix\\\">_</span>\\r\\n                <input class=\\\"fill name\\\" type=\\\"text\\\" placeholder=\\\"attribute name\\\" pattern=\\\"[.]+\\\">\\r\\n              </label>\\r\\n            </div>\\r\\n            <label class=\\\"expressionRoot\\\">\\r\\n              <input class=\\\"leftside hideOn _ _dstyle _chain _chainFinal\\\" type=\\\"text\\\" placeholder=\\\"Left side\\\">\\r\\n              <span class=\\\"operatortext hideOn _constraint _ _dstyle operator\\\">=</span>\\r\\n              <select class=\\\"hideOn _ _dstyle operator\\\"><optgroup label=\\\"operator\\\">\\r\\n                <option value=\\\"<=\\\">&lt;=</option>\\r\\n                <option value=\\\"=\\\">=</option>\\r\\n                <option value=\\\">=\\\">&gt;=</option>\\r\\n              </optgroup></select>\\r\\n              <input class=\\\"rightside hideon_chain _chainFinal \\\" type=\\\"text\\\" placeholder=\\\"Right side\\\">\\r\\n            </label>\\r\\n            <div class=\\\"roww hideOn r_ d_\\\">\\r\\n              <label>\\r\\n                <span>Relative target</span>\\r\\n                <input class=\\\"fill relativetarget\\\" type=\\\"text\\\" placeholder=\\\"jQuery selector\\\">\\r\\n              </label>\\r\\n            </div>\\r\\n            <div class=\\\"roww hideOn r_ d_\\\">\\r\\n              <label>\\r\\n                <span>Evaluation (debug)</span>\\r\\n                <input readonly class=\\\"fill evaluation\\\" type=\\\"text\\\" placeholder=\\\"empty string\\\">\\r\\n              </label>\\r\\n            </div>\\r\\n            <a class=\\\"roww outputerror left\\\"></a>\\r\\n            <a class=\\\"roww outputerror right\\\"></a>\\r\\n          </div>\\r\\n        </div>\\r\\n        <!-- TEMPLATES END -->\\r\\n        <h6 class=\\\"addHeader\\\">\\r\\n          <button class=\\\"btn btn-secondary addmeasurable\\\">Add</button>\\r\\n          <select class=\\\"attributetypeadd\\\"><optgroup label=\\\"Attribute type\\\">\\r\\n            <option value=\\\"d_\\\">jQueryUI drag option</option>\\r\\n            <option value=\\\"r_\\\">jQueryUI resize option</option>\\r\\n            <option value=\\\"_rule\\\">_rule</option>\\r\\n            <option value=\\\"_dstyle\\\">_dstyle</option>\\r\\n            <option value=\\\"_export\\\">_export</option>\\r\\n            <option value=\\\"_constraint\\\">_constraint</option>\\r\\n            <option value=\\\"_import\\\">_import</option>\\r\\n            <option value=\\\"_chain\\\">_chain</option>\\r\\n            <option value=\\\"_chainFinal\\\">_chainFinal</option>\\r\\n            <option value=\\\"_\\\">_ (Pseudo-variable)</option>\\r\\n          </optgroup></select>\\r\\n        </h6>\\r\\n\\r\\n        <h6>_D</h6>\\r\\n        <div class=\\\"d_Container\\\"></div>\\r\\n        <h6>_R</h6>\\r\\n        <div class=\\\"r_Container\\\"></div>\\r\\n        <h6>_ (Pseudo-variables)</h6>\\r\\n        <div class=\\\"_Container\\\"></div>\\r\\n        <h6>_Rule</h6>\\r\\n        <div class=\\\"_ruleContainer\\\"></div>\\r\\n        <h6>_Export</h6>\\r\\n        <div class=\\\"_exportContainer\\\"></div>\\r\\n        <h6>_Constraint</h6>\\r\\n        <div class=\\\"_constraintContainer\\\"></div>\\r\\n        <h6>_Dstyle</h6>\\r\\n        <div class=\\\"_dstyleContainer\\\"></div>\\r\\n        <h6>_Import</h6>\\r\\n        <div class=\\\"_importContainer\\\"></div>\\r\\n        <h6>_Chain</h6>\\r\\n        <div class=\\\"_chainContainer\\\"></div>\\r\\n        <h6>_ChainFinal</h6>\\r\\n        <div class=\\\"_chainFinalContainer\\\"></div>\\r\\n      </div>\\r\\n      <div class=\\\"detail save\\\" style=\\\"display: none\\\">\\r\\n        <div class=\\\"saveasrow\\\">\\r\\n          <button class=\\\"delete btn btn-secondary\\\">Delete</button>\\r\\n          <button class=\\\"saveas btn btn-secondary\\\">Save as</button>\\r\\n          <input class=\\\"saveas form-control\\\" placeholder=\\\"new style name\\\">\\r\\n        </div>\\r\\n        <h6>Style is compatible with:</h6>\\r\\n        <div class=\\\"compatibleRow\\\">\\r\\n          <label><span>M2 Elements</span><input class=\\\"metamodel\\\" type=\\\"checkbox\\\"></label>\\r\\n          <label><span>M1 Elements</span><input class=\\\"model\\\" type=\\\"checkbox\\\"></label>\\r\\n        </div>\\r\\n        <h6>And appliable to:</h6>\\r\\n        <div class=\\\"compatibleRow\\\">\\r\\n          <label><span>Class</span><input class=\\\"class\\\" type=\\\"checkbox\\\"></label>\\r\\n          <label><span>Attributes</span><input class=\\\"attribute\\\" type=\\\"checkbox\\\"></label>\\r\\n          <label><span>References</span><input class=\\\"reference\\\" type=\\\"checkbox\\\"></label>\\r\\n          <label><span>Operations</span><input class=\\\"operation\\\" type=\\\"checkbox\\\"></label>\\r\\n          <label><span>Parameters</span><input class=\\\"parameter\\\" type=\\\"checkbox\\\"></label>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <!-- <div class=\\\"separatorShell\\\">\\r\\n        <h6 class=\\\"vertexStyle separator\\\">\\r\\n          <label><span>Preview&nbsp;of&nbsp;</span>\\r\\n            <select class=\\\"previewselector\\\"></select>\\r\\n          </label></h6>\\r\\n        <button class=\\\"helpButton vertex btn btn-info\\\" matTooltip=\\\"todo: explain .EndPoint, .TypeSelector, .ClassSelector...\\\">?</button>\\r\\n      </div> -->\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"template modelpiece\\\">\\r\\n      <!-- https://www.key-shortcut.com/en/writing-systems/35-symbols/arrows -->\\r\\n      <div class=\\\"arrowContainer\\\">\\r\\n        <button class=\\\"arrow up btn btn-primary\\\">⇪</button>\\r\\n        <h6 class=\\\"tsclass\\\">TS_Class</h6>\\r\\n        <button class=\\\"arrow down btn btn-primary\\\">⇩</button>\\r\\n      </div>\\r\\n      <label class=\\\"m1 iclass\\\">\\r\\n        <input type=\\\"checkbox\\\" class=\\\"showAsEdge\\\">\\r\\n        <span class=\\\"showAsEdgeText\\\">#####</span>\\r\\n      </label>\\r\\n      <div class=\\\"style own colContainer\\\"></div>\\r\\n      <div class=\\\"separatorShell\\\"></div>\\r\\n      <div class=\\\"roww nowrap detailButtonContainer\\\">\\r\\n        <button target=\\\"div.detail.style.inherited\\\" class=\\\"detail inherited btn btn-primary\\\">\\r\\n          <span class=\\\"closed\\\">Inherited Style</span> <!-- Behequated -->\\r\\n          <span class=\\\"opened\\\">\\r\\n              <div class=\\\"HorizontalContainer\\\"><span class=\\\"HorizontalChild\\\">⮝</span><span class=\\\"HorizontalChild\\\">⮝</span><span class=\\\"HorizontalChild\\\">⮝</span></div>\\r\\n            </span>\\r\\n        </button>\\r\\n        <button target=\\\"div.detail.style.inheritable\\\" class=\\\"detail inheritable btn btn-primary\\\">\\r\\n          <span class=\\\"closed\\\">Inheritable Style</span>\\r\\n          <span class=\\\"opened\\\">\\r\\n              <div class=\\\"HorizontalContainer\\\"><span class=\\\"HorizontalChild\\\">⮝</span><span class=\\\"HorizontalChild\\\">⮝</span><span class=\\\"HorizontalChild\\\">⮝</span></div>\\r\\n            </span>\\r\\n        </button>\\r\\n      </div>\\r\\n      <!-- detail style instances colContainer ... -->\\r\\n\\r\\n      <div class=\\\"detail style inheritable colContainer\\\"></div>\\r\\n      <div class=\\\"detail style inherited colContainer\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"template edge\\\">\\r\\n      <h1>Edge style</h1>\\r\\n      <table><tbody>\\r\\n      <tr>\\r\\n        <td>Style</td>\\r\\n        <td><select class=\\\"edgeStyle\\\"><optgroup label=\\\"Edge style\\\">\\r\\n          <option value=\\\"straight\\\" title=\\\"./img/icons/edge/straight.jpg\\\">Straight</option>\\r\\n          <option value=\\\"angular23Auto\\\" title=\\\"./img/icons/edge/angular23.jpg\\\">Angulated (auto)</option>\\r\\n          <option value=\\\"angular2\\\" title=\\\"./img/icons/edge/angular2.jpg\\\">Angulated (2)</option>\\r\\n          <option value=\\\"angular3\\\" title=\\\"./img/icons/edge/angular3.jpg\\\">Angulated (3)</option>\\r\\n        </optgroup></select></td>\\r\\n      </tr>\\r\\n      <tr><td colspan=\\\"2\\\" class=\\\"title\\\">On normal status</td></tr>\\r\\n      <tr>\\r\\n        <td>Color</td>\\r\\n        <td><input type=\\\"color\\\" class=\\\"edgeColor common\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Width</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"edgeWidth common\\\" min=\\\"0\\\" step=\\\"0.1\\\" placeholder=\\\"0\\\"></td>\\r\\n      </tr>\\r\\n      <tr><td colspan=\\\"2\\\" class=\\\"title\\\">On highlight preview</td></tr>\\r\\n      <tr>\\r\\n        <td>Color</td>\\r\\n        <td><input type=\\\"color\\\" class=\\\"edgeColor highlight\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Width</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"edgeWidth highlight\\\" min=\\\"0\\\" step=\\\"0.1\\\" placeholder=\\\"0\\\"></td>\\r\\n      </tr>\\r\\n      <tr><td colspan=\\\"2\\\" class=\\\"title\\\">On selection</td></tr>\\r\\n      <tr>\\r\\n        <td>Color</td>\\r\\n        <td><input type=\\\"color\\\" class=\\\"edgeColor selected\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Width</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"edgeWidth selected\\\" min=\\\"0\\\" step=\\\"0.1\\\" placeholder=\\\"0\\\"></td>\\r\\n      </tr>\\r\\n      </tbody></table>\\r\\n      <h1>EdgePoint style</h1>\\r\\n      <table><tbody>\\r\\n      <tr><td colspan=\\\"2\\\" class=\\\"title\\\">On normal status</td></tr>\\r\\n      <tr>\\r\\n        <td>Radius</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"edgePoint radius\\\" min=\\\"0\\\" step=\\\"0.1\\\" placeholder=\\\"0\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Border Width</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"edgePoint strokeW\\\" min=\\\"0\\\" step=\\\"0.1\\\" placeholder=\\\"0\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Border Color</td>\\r\\n        <td><input type=\\\"color\\\" class=\\\"edgePoint stroke\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Fill Color</td>\\r\\n        <td><input type=\\\"color\\\" class=\\\"edgePoint fill\\\"></td>\\r\\n      </tr>\\r\\n      <tr><td colspan=\\\"2\\\" class=\\\"title\\\">On bounding preview</td></tr>\\r\\n      <tr>\\r\\n        <td>Radius</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"edgePointPreview radius\\\" min=\\\"0\\\" step=\\\"0.1\\\" placeholder=\\\"0\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Border Width</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"edgePointPreview strokeW\\\" min=\\\"0\\\" step=\\\"0.1\\\" placeholder=\\\"0\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Border Color</td>\\r\\n        <td><input type=\\\"color\\\" class=\\\"edgePointPreview stroke\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Fill Color</td>\\r\\n        <td><input type=\\\"color\\\" class=\\\"edgePointPreview fill\\\"></td>\\r\\n      </tr>\\r\\n      <tr><td colspan=\\\"2\\\" class=\\\"title\\\">While moving</td></tr>\\r\\n      <tr>\\r\\n        <td>Radius</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"edgePointSelected radius\\\" min=\\\"0\\\" step=\\\"0.1\\\" placeholder=\\\"0\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Border Width</td>\\r\\n        <td><input type=\\\"number\\\" class=\\\"edgePointSelected strokeW\\\" min=\\\"0\\\" step=\\\"0.1\\\" placeholder=\\\"0\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Border Color</td>\\r\\n        <td><input type=\\\"color\\\" class=\\\"edgePointSelected stroke\\\"></td>\\r\\n      </tr>\\r\\n      <tr>\\r\\n        <td>Fill Color</td>\\r\\n        <td><input type=\\\"color\\\" class=\\\"edgePointSelected fill\\\"></td>\\r\\n      </tr>\\r\\n      </tbody></table>\\r\\n      <div contenteditable=\\\"true\\\" class=\\\"edgeStyle label html\\\" placeholder=\\\"Label of link. Not filled means without label.\\\"></div>\\r\\n      <div class=\\\"separatorShell\\\">\\r\\n        <h6 class=\\\"edgeStyle separator\\\">Preview:</h6>\\r\\n        <button class=\\\"helpButton edgeLabel\\\" matTooltip=\\\"todo: explain .EndPoint, .TypeSelector, .ClassSelector...\\\">?</button>\\r\\n      </div>\\r\\n      <div class=\\\"edgeStyle preview\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","export default \"<div id='topbarShell'>\\r\\n  <div id='topbar'>\\r\\n    <div class=\\\"dropdownContainer\\\">\\r\\n      <button class=\\\"todo dropdownTitle\\\">User</button>\\r\\n      <ul class=\\\"dropdownContent\\\">\\r\\n        <li class=\\\"dropdownContent\\\"><div class=\\\"todo dropdownpadding\\\">Logout</div></li>\\r\\n        <li class=\\\"dropdownContent\\\"><div class=\\\"todo dropdownpadding\\\">Preferences</div></li>\\r\\n        <li class=\\\"dropdownContent\\\"><div class=\\\"todo dropdownpadding\\\">Account</div></li>\\r\\n      </ul>\\r\\n    </div>\\r\\n    <div class=\\\"dropdownContainer\\\">\\r\\n      <button class=\\\"dropdownTitle\\\">Meta-Metamodel</button>\\r\\n      <ul class=\\\"dropdownContent\\\">\\r\\n        <li class=\\\"dropdownContent\\\"><div class=\\\"dropdownpadding TypeMapping\\\">Type mapping</div></li>\\r\\n        <li class=\\\"dropdownContent\\\"><div class=\\\"todo dropdownpadding VertexStyle\\\">Vertex Style</div></li>\\r\\n        <li class=\\\"dropdownContent\\\"><div class=\\\"todo dropdownpadding EdgeStyle\\\">Edge Style</div></li>\\r\\n      </ul>\\r\\n    </div>\\r\\n    <div class=\\\"dropdownContainer metamodel\\\">\\r\\n      <button class=\\\"dropdownTitle\\\">Metamodel</button>\\r\\n      <ul class=\\\"dropdownContent\\\">\\r\\n        <li class=\\\"dropdownContent\\\"><div class=\\\"dropdownpadding save\\\">Save</div></li>\\r\\n        <li class=\\\"dropdownContent\\\">\\r\\n          <div class=\\\"dropdownContainer right\\\">\\r\\n            <div class=\\\"dropdownTitle right\\\">Recent</div>\\r\\n            <ul class=\\\"dropdownContent right recentSaveContainer\\\">\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding recentsave\\\">example 1</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding recentsave\\\">example 2</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding recentsave\\\">example 3</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding recentsave\\\">example 4</div></li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"dropdownContent\\\">\\r\\n          <div class=\\\"dropdownContainer right\\\">\\r\\n            <div class=\\\"dropdownTitle right\\\">Export</div>\\r\\n            <ul class=\\\"dropdownContent right\\\">\\r\\n              <li class=\\\"dropdownContent right\\\">\\r\\n                <div class=\\\"dropdownpadding download_JSON_String\\\">To eCore/JSON string</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\">\\r\\n                <div class=\\\"dropdownpadding download_JSON\\\">Download eCore/JSON file</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\">\\r\\n                <div class=\\\"dropdownpadding download_XMI\\\">Download eCore/XMI file</div></li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"dropdownContent\\\">\\r\\n          <div class=\\\"dropdownContainer right\\\">\\r\\n            <div class=\\\"dropdownTitle right\\\">Import</div>\\r\\n            <ul class=\\\"dropdownContent right\\\">\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding loadEmpty\\\">New empty metamodel</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding loadFile\\\">From file (eCore/XMI)</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding loadTxt\\\">From text (eCore/JSON)</div></li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </li>\\r\\n      </ul>\\r\\n    </div>\\r\\n    <div class=\\\"dropdownContainer model\\\">\\r\\n      <button class=\\\"dropdownTitle\\\">Model</button>\\r\\n      <ul class=\\\"dropdownContent\\\">\\r\\n        <li class=\\\"dropdownContent\\\"><div class=\\\"dropdownpadding save\\\">Save</div></li>\\r\\n        <li class=\\\"dropdownContent\\\">\\r\\n          <div class=\\\"dropdownContainer right\\\">\\r\\n            <div class=\\\"dropdownTitle right\\\">Recent</div>\\r\\n            <ul class=\\\"dropdownContent right recentSaveContainer\\\">\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding recentsave\\\">example 1</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding recentsave\\\">example 2</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding recentsave\\\">example 3</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding recentsave\\\">example 4</div></li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"dropdownContent\\\">\\r\\n          <div class=\\\"dropdownContainer right\\\">\\r\\n            <div class=\\\"dropdownTitle right\\\">Export</div>\\r\\n            <ul class=\\\"dropdownContent right\\\">\\r\\n              <li class=\\\"dropdownContent right\\\">\\r\\n                <div class=\\\"dropdownpadding download_JSON_String\\\">To eCore/JSON string</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\">\\r\\n                <div class=\\\"dropdownpadding download_JSON\\\">Download eCore/JSON file</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\">\\r\\n                <div class=\\\"dropdownpadding download_XMI\\\">Download eCore/XMI file</div></li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </li>\\r\\n        <li class=\\\"dropdownContent\\\">\\r\\n          <div class=\\\"dropdownContainer right\\\">\\r\\n            <div class=\\\"dropdownTitle right\\\">Import</div>\\r\\n            <ul class=\\\"dropdownContent right\\\">\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding loadEmpty\\\">New empty model</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding loadFile\\\">From file (eCore/XMI)</div></li>\\r\\n              <li class=\\\"dropdownContent right\\\"><div class=\\\"dropdownpadding loadTxt\\\">From text (eCore/JSON)</div></li>\\r\\n            </ul>\\r\\n          </div>\\r\\n        </li>\\r\\n      </ul>\\r\\n    </div>\\r\\n    <div class=\\\"dropdownContainer graph\\\">\\r\\n      <button class=\\\"dropdownTitle\\\">Graph</button>\\r\\n      <ul class=\\\"dropdownContent\\\">\\r\\n        <li class=\\\"buttonGridContainer\\\">\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid\\\">Mono-Select</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid todo\\\">Multi-Select</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid\\\">Drag</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid\\\">Mono-Select</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid todo\\\">Multi-Select</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid\\\">Drag</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid\\\">Mono-Select</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid todo\\\">Multi-Select</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid\\\">Drag</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid\\\">Mono-Select</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid todo\\\">Multi-Select</div></div>\\r\\n          <div class=\\\"dropdownpadding buttonGridMinMargin\\\"><div class=\\\"buttonGrid\\\">Drag</div></div>\\r\\n\\r\\n        </li>\\r\\n      </ul>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div id=\\\"TypeMapper\\\" class=\\\"screenWideShadow\\\" data-closebuttontarget=\\\"1\\\">\\r\\n    <div id=\\\"TypeMapperContent\\\" class=\\\"popupContent\\\">\\r\\n      <h1>M3 Type mapping</h1>\\r\\n      <button class=\\\"closeButton\\\" data-closebuttontarget=\\\"1\\\">X</button>\\r\\n      <br>\\r\\n      <div class=\\\"TypeList\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {IModel, Json, TopBar, U, InputPopup, ViewRule, ViewPoint, Dictionary, GraphSize} from '../common/Joiner';\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\nimport KeyDownEvent = JQuery.KeyDownEvent;\r\nimport BlurEvent = JQuery.BlurEvent;\r\n\r\nexport class SaveListEntry {\r\n  static vertexPos = new SaveListEntry('_LastOpenedVertexPos', 'VertexPos', '_SaveListVertexPos');\r\n  static view = new SaveListEntry('_LastOpenedView', 'ViewRule', '_SaveListView');\r\n  static model = new SaveListEntry('_LastOpened', '', '_SaveList');\r\n  lastopened: string;\r\n  prefix: string;\r\n  listname: string;\r\n\r\n  constructor(lastopened: string, prefix: string, listname: string) {\r\n    this.lastopened = lastopened;\r\n    this.prefix = prefix;\r\n    this.listname = listname; }\r\n}\r\n\r\nexport class LocalStorage {\r\n  private static reservedprefix: string = '_';\r\n  prefix: string = '' + '';\r\n  print = true;\r\n  popupTmp: InputPopup = null;\r\n  private model: IModel = null;\r\n  private isAutosavetmp: boolean;\r\n  private saveAstmp: boolean;\r\n  private vertexSaveStr: string;\r\n\r\n  static getLastOpened(modelNumber: 1 | 2): {model: string, vertexpos: string, view: string} {\r\n    const ret: {model: string, vertexpos: string, view: string} = {model: null, vertexpos: null, view: null};\r\n    ret.model = localStorage.getItem(LocalStorage.reservedprefix + 'm' + modelNumber + '_' + SaveListEntry.model.lastopened);\r\n    ret.view = localStorage.getItem(LocalStorage.reservedprefix + 'm' + modelNumber + '_' + SaveListEntry.view.lastopened);\r\n    ret.vertexpos = localStorage.getItem(LocalStorage.reservedprefix + 'm' + modelNumber + '_' + SaveListEntry.vertexPos.lastopened);\r\n    return ret; }\r\n\r\n  static deleteLastOpened(modelNumber: 1 | 2): void { this.setLastOpened(modelNumber, null, null, null); }\r\n\r\n  static setLastOpened(modelNumber: 1 | 2, model: string = null, view: string = null, vertex: string = null): void {\r\n    const prefix = LocalStorage.reservedprefix + 'm' + modelNumber + '_';\r\n    if (model) localStorage.setItem(prefix + SaveListEntry.model.lastopened, model);\r\n    else localStorage.removeItem(prefix +  SaveListEntry.model.lastopened);\r\n    if (view) localStorage.setItem(prefix + SaveListEntry.view.lastopened, view);\r\n    else localStorage.removeItem(prefix +  SaveListEntry.view.lastopened);\r\n    if (vertex) localStorage.setItem(prefix + SaveListEntry.vertexPos.lastopened, vertex);\r\n    else localStorage.removeItem(prefix +  SaveListEntry.vertexPos.lastopened); }\r\n\r\n  getViewPoints(): {view: string, vertexPos: string} {\r\n    const m: IModel = this.model;\r\n    const ret = {view: null, vertexPos: null};\r\n    if (!m.name) return ret;\r\n    ret.view = this.get(m.name, SaveListEntry.view);\r\n    ret.vertexPos = this.get(m.name, SaveListEntry.vertexPos);\r\n    return ret; }\r\n\r\n  constructor(model: IModel) {\r\n    this.model = model;\r\n    this.prefix = model.getPrefixNum() + '_'; }\r\n\r\n  private addToList(key: string, listname: string): void {\r\n    const saveKeyList: string[] = this.getKeyList(listname, null);\r\n    if (U.arrayContains(saveKeyList, key)) return;\r\n    saveKeyList.push(key);\r\n    this.overwriteList(listname, saveKeyList); }\r\n\r\n  private removeFromList(key: string, listname: string): void {\r\n    const saveKeyList: string[] = this.getKeyList(listname, null);\r\n    if (!U.arrayContains(saveKeyList, key)) return;\r\n    U.arrayRemoveAll(saveKeyList, key);\r\n    this.overwriteList(listname, saveKeyList); }\r\n\r\n  private overwriteList(listname: string, value: string[]): void {\r\n    U.pe(!Array.isArray(value), 'recent savelist must be an array.');\r\n    localStorage.setItem(LocalStorage.reservedprefix + this.prefix + listname, JSON.stringify(value));\r\n    TopBar.topbar.updateRecents(); }\r\n\r\n  getKeyList(listname: string, limit: number = null): string[] {\r\n    const ret: string[] = JSON.parse(localStorage.getItem(LocalStorage.reservedprefix + this.prefix + listname));\r\n    if (!ret) { return []; }\r\n    U.pe(!Array.isArray(ret), 'savelist got is not an array:', ret);\r\n    return isNaN(limit) ? ret : ret.splice(limit); }\r\n\r\n  add(key: string = null, val: string, saveList: SaveListEntry): void {\r\n    U.pe(val !== '' + val, 'parameter should be string:', val);\r\n    if (val !== '' + val) { val = JSON.stringify(val); }\r\n    key = key ? this.prefix + saveList.prefix + key : null;\r\n    if (val !== 'null' && val !== 'undefined') localStorage.setItem(LocalStorage.reservedprefix + this.prefix + saveList.lastopened, val);\r\n    else localStorage.removeItem(LocalStorage.reservedprefix + this.prefix + saveList.lastopened);\r\n    if (!key) { return; }\r\n    this.addToList(key, saveList.listname);\r\n    localStorage.setItem(key, val);\r\n  }\r\n\r\n  remove(oldKey: string, saveList: SaveListEntry): void {\r\n    if (!oldKey) return;\r\n    oldKey = this.prefix + saveList.prefix + oldKey;\r\n    this.removeFromList(oldKey, saveList.listname);\r\n    localStorage.removeItem(oldKey); }\r\n\r\n  get(key: string, saveList: SaveListEntry): string {\r\n    key = this.prefix + saveList.prefix + key;\r\n    return localStorage.getItem(key); }\r\n\r\n  rename(oldKey: string, newKey: string, saveList: SaveListEntry): void {\r\n    const oldVal: any = this.get(oldKey, saveList);\r\n    this.remove(oldKey, saveList);\r\n    this.add(newKey, oldVal, saveList); }\r\n\r\n  p(arg1: any, ...restArgs: any[]): void { U.pif(this.print, arg1, ...restArgs); }\r\n\r\n  private finishSave(saveVal: string): void {\r\n    const m: IModel = this.model;\r\n    if (this.popupTmp) { this.popupTmp = this.popupTmp.destroy(); }\r\n    U.pe(!m.name, 'model name should be filled with a validated user input.');\r\n\r\n    // must be recalculated, model.name might have been changed by user input (saveas or un-named model being given a name)\r\n    let viewpointSave: string = JSON.stringify(m.generateViewPointSaveArr());\r\n    this.add(m.name, saveVal, SaveListEntry.model);\r\n    this.add(m.name, viewpointSave, SaveListEntry.view);\r\n    this.add(m.name, this.vertexSaveStr, SaveListEntry.vertexPos);\r\n    this.p(m.name + ' VertexPositions saved:', saveVal);\r\n    this.p(m.name + ' ViewPoints saved:', viewpointSave);\r\n    this.p(m.name + ' Model saved:', this.vertexSaveStr);\r\n  }\r\n\r\n  private save_BlurEvent(e: BlurEvent | KeyDownEvent, saveVal: string): void {\r\n    const input: HTMLInputElement = e.currentTarget as HTMLInputElement;\r\n    if (!+input.getAttribute('valid')) return;\r\n    this.finishSave(saveVal); }\r\n\r\n  private save_OnKeyDown(e: KeyDownEvent, saveVal: string): void {\r\n    // this.save_OnChange(e, popup, model);\r\n    if (e.key !== 'return') { return; }\r\n    this.save_BlurEvent(e, saveVal); }\r\n\r\n  private save_OnChange(e: ChangeEvent, model: IModel): void {\r\n    this.p('onchange');\r\n    const input: HTMLInputElement = e.currentTarget as HTMLInputElement;\r\n    let error: boolean = false;\r\n    try { model.setName(input.value); } catch (e) { error = true; } finally {}\r\n    if (error || input.value !== model.name) {\r\n      this.popupTmp.setPostText('invalid or already registered name, a fix');\r\n      input.setAttribute('valid', '0');\r\n      if (model.name) { input.value = model.name; }\r\n      return; }\r\n    input.setAttribute('valid', '1'); }\r\n\r\n  saveModel(isAutosave: boolean, saveAs: boolean = false): void {\r\n    U.pe(!!this.popupTmp, 'should not be allowed to have 2 popup for the same Storage. this would lead to a conflict mixing data.');\r\n    this.isAutosavetmp = isAutosave;\r\n    this.saveAstmp = saveAs;\r\n    const model: IModel = this.model;\r\n    const ecoreJSONStr: string = model.generateModelString();\r\n    this.vertexSaveStr = JSON.stringify(model.generateVertexPositionSaveArr() as Dictionary<string, GraphSize>);\r\n    const name = model.name;\r\n    const viepointJSONStr: string = JSON.stringify(model.generateViewPointSaveArr() as Json[]);\r\n    this.p('save ' + this.prefix + 'Model[' + name + '] = ', ecoreJSONStr, 'viewpoints:', viepointJSONStr);\r\n\r\n    this.add(null, ecoreJSONStr, SaveListEntry.model);\r\n    this.add(null, viepointJSONStr, SaveListEntry.view);\r\n    this.add(null, this.vertexSaveStr, SaveListEntry.vertexPos);\r\n\r\n    let popup: InputPopup;\r\n    const onblur = (e: BlurEvent) => { this.save_BlurEvent(e, ecoreJSONStr); };\r\n    const onkeydown = (e: KeyDownEvent) => { this.save_OnKeyDown(e, ecoreJSONStr); };\r\n    const onchange = (e: any) => { this.save_OnChange(e, model); };\r\n    this.p('isAutosave:', isAutosave, 'saveAs:', saveAs, 'model.name:', model.name);\r\n\r\n    // save with a name.\r\n    if (name && name !== '') { this.finishSave(ecoreJSONStr); return; }\r\n    // autosave without a name.\r\n    if (isAutosave) { return; }\r\n    // saveas without a name.\r\n    if (saveAs) {\r\n      popup = new InputPopup('Choose a name for the ' + model.friendlyClassName(),\r\n        '', '', [['change', onchange], ['keydown', onkeydown], ['blur', onblur]],\r\n        'Viewpoint', model.friendlyClassName() + ' name', '');\r\n      popup.show(); return; }\r\n    // user clicked save without a name\r\n  }\r\n\r\n  pushToServer(): void {}\r\n\r\n  autosave(turn: boolean, permanendNotImplemented: boolean = false): void {\r\n    localStorage.setItem('autosave', '' + turn);\r\n  }\r\n\r\n}\r\n\r\nexport class LocalStorageM {\r\n\r\n\r\n}\r\nexport class LocalStorageM3 extends LocalStorageM {\r\n\r\n}\r\nexport class LocalStorageM2 extends LocalStorageM {\r\n\r\n}\r\nexport class LocalStorageM1 extends LocalStorageM {\r\n\r\n}\r\n\r\nexport class LocalStorageStyles extends LocalStorage {\r\n\r\n}\r\n","import {\r\n  IAttribute,\r\n  M2Class,\r\n  IEdge,\r\n  IModel,\r\n  IPackage,\r\n  IReference,\r\n  ModelPiece,\r\n  PropertyBarr,\r\n  Status,\r\n  U,\r\n  IClass,\r\n  EdgeModes,\r\n  EOperation,\r\n  EParameter,\r\n  Database,\r\n  Size,\r\n  AttribETypes,\r\n  Dictionary,\r\n  // Options,\r\n  Point,\r\n  GraphPoint,\r\n  IVertex, GraphSize, EdgeStyle, Json, StyleComplexEntry, IClassifier,\r\n} from '../common/Joiner';\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\nimport BlurEvent = JQuery.BlurEvent;\r\nimport KeyDownEvent = JQuery.KeyDownEvent;\r\nimport KeyboardEventBase = JQuery.KeyboardEventBase;\r\nimport KeyUpEvent = JQuery.KeyUpEvent;\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport SelectEvent = JQuery.SelectEvent;\r\n\r\nexport class StyleVisibility {\r\n  public static _public: string = 'public';\r\n  public static _private: string = 'private';\r\n  // approccio estendibile ai gruppi senza neanche creare nuove tabelle.\r\n  public static _publicExceptUserList: string = 'crea una relationship table key=tutto= (owner+stylename+utenteCheNONPuòVedere)';\r\n  public static _privateExceptUserList: string = 'crea una relationship table key=tutto= (owner+stylename+utenteChePuòVedere)';  // lo vede nessuno tranne...\r\n  visibility: string;\r\n}\r\n\r\nexport class ViewHtmlSettings{\r\n  name: string;\r\n  styleVisibility: StyleVisibility;\r\n  userOwner: string;\r\n  imgPreviewBase64: string;\r\n  elementStylingCount: number;\r\n  userImportingThis: number;\r\n  forkCounter: number;\r\n  ForkedFromStr_user: string;\r\n  ForkedFromStr_name: string;\r\n  AllowedOnM2: boolean;\r\n  AllowedOnM1: boolean;\r\n  allowedOnClass: boolean;\r\n  allowedOnAttribute: boolean;\r\n  allowedOnReference: boolean;\r\n  allowedOnOperation: boolean;\r\n  allowedOnParameter: boolean;\r\n  featuredependency: {template: string, namesArray: string, typesArray: string}[] = []; // dot separated. \"Class\" as typeof (m1class | m2class) instead of the name\r\n  protected html: Element = null;\r\n  private htmlstr: string;\r\n\r\n  toJSON(nameOrIndex: string): Json {\r\n    this.updateHtmlMetaData();\r\n    const copy0: any = {};\r\n    for (let key in this) { copy0[key] = this[key]; }\r\n    const copy: ViewHtmlSettings = copy0;\r\n    copy.htmlstr = this.html.outerHTML;\r\n    delete copy.html;\r\n    return copy; }\r\n\r\n  toString(): string { return JSON.stringify(this); }\r\n\r\n  updateHtml(): void {\r\n    this.html = U.toHtml(this.htmlstr);\r\n    // todo: inserisci tutti gli attributi metadata nell html.\r\n  }\r\n  updateHtmlMetaData(): void {\r\n    this.htmlstr = this.html.outerHTML;\r\n    const $meta = $(this.html).find('meta');\r\n    const setValue = (jq: JQuery<HTMLElement | SVGElement>): string => { return jq.length === 0 ? '' : jq[0].innerHTML; };\r\n    const isTrue = (jq: JQuery<HTMLElement | SVGElement>): boolean => { return jq.length > 0 && jq[0].innerHTML  === '1' || jq[0].innerHTML === 'true'; };\r\n    $meta.find('owner').text(this.userOwner);\r\n    $meta.find('name').text(this.name);\r\n    $meta.find('isM1').text(this.AllowedOnM1);\r\n    $meta.find('isM2').text(this.AllowedOnM2);\r\n    $meta.find('isClass').text(this.allowedOnClass);\r\n    $meta.find('isAttribute').text(this.allowedOnAttribute);\r\n    $meta.find('isReference').text(this.allowedOnReference);\r\n    $meta.find('isOperation').text(this.allowedOnOperation);\r\n    $meta.find('isParameter').text(this.allowedOnParameter);\r\n    $meta.find('preview').html(this.imgPreviewBase64);\r\n    let featuredependencystr: string = '';\r\n    let i: number;\r\n    for (i = 0; i < this.featuredependency.length; i++) {\r\n      const f = this.featuredependency[i];\r\n      featuredependencystr += '<dependency><template>' + f.template + '</template><names>' + f.namesArray + '</names><types>' + f.typesArray + '</types></template>';\r\n    }\r\n    $meta.find('featuredependencyList').html(featuredependencystr);\r\n  }\r\n\r\n  public setHtml(html: Element): void { return this.setHtml0(html, null); }\r\n  public setHtmlStr(html: string): void { return this.setHtml0(null, html); }\r\n  private setHtml0(html: Element, htmlstr: string): void {\r\n    // U.pe(!html && !htmlstr, 'both html and htmlstr are null.');\r\n    // U.pe(true, this, html, htmlstr, !html, !htmlstr, !html && !htmlstr);\r\n    if (!html) { html = U.toHtml(htmlstr); }\r\n    if (!htmlstr) { htmlstr = html ? html.outerHTML : null; }\r\n    U.pe(!html || !htmlstr, this, 'html is null:', html, 'htmlstr:', htmlstr, 'html?', !html, 'htmlstr?', !htmlstr, 'html && htmlstr?', !html && !htmlstr);\r\n    U.pe(!!html.parentElement || !!html.parentNode, 'parentElement shuld be null here:', html, this);\r\n    this.html = html;\r\n    const $meta: JQuery<Element> = $(html).find('meta');\r\n    const getValue = (jq: JQuery<Element>): string => { return jq.length === 0 ? '' : jq[0].innerHTML; };\r\n    const isTrue = (jq: JQuery<Element>): boolean => { return jq.length > 0 && (jq[0].innerHTML  === '1' || jq[0].innerHTML === 'true'); };\r\n    this.userOwner = getValue($meta.find('owner'));\r\n    this.name = getValue($meta.find('name'));\r\n    this.AllowedOnM1 = isTrue($meta.find('isM1'));\r\n    this.AllowedOnM2 = isTrue($meta.find('isM2'));\r\n    this.allowedOnClass = isTrue($meta.find('isClass'));\r\n    this.allowedOnAttribute = isTrue($meta.find('isAttribute'));\r\n    this.allowedOnReference = isTrue($meta.find('isReference'));\r\n    this.allowedOnOperation = isTrue($meta.find('isOperation'));\r\n    this.allowedOnParameter = isTrue($meta.find('isParameter'));\r\n    const $tmp: JQuery<HTMLElement> = $meta.find('preview') as JQuery<HTMLElement>;\r\n    this.imgPreviewBase64 = $tmp.length > 0 ? $tmp[0].innerText : U.toBase64Image(U.toHtml('<div>Select a instance to initializeFromModel' +\r\n      ' the preview.</div>')); }\r\n  public getHtml(): Element { return this.html; }\r\n  public getHtmlstr(): string { return this.html.outerHTML; }\r\n\r\n  clone(json: ViewHtmlSettings) {\r\n    this.allowedOnClass = json.allowedOnClass;\r\n    this.allowedOnAttribute = json.allowedOnAttribute;\r\n    this.allowedOnReference = json.allowedOnReference;\r\n    this.allowedOnOperation = json.allowedOnOperation;\r\n    this.allowedOnParameter = json.allowedOnParameter;\r\n    this.AllowedOnM1 = json.AllowedOnM1;\r\n    this.AllowedOnM2 = json.AllowedOnM2;\r\n    this.elementStylingCount = json.elementStylingCount;\r\n    this.featuredependency = json.featuredependency;\r\n    this.forkCounter = json.forkCounter;\r\n    this.ForkedFromStr_name = json.ForkedFromStr_name;\r\n    this.ForkedFromStr_user = json.ForkedFromStr_user;\r\n    //this.htmlstr = json.htmlstr;\r\n    if (json.htmlstr) this.html = U.toHtml(json.htmlstr);\r\n    U.pe(!(this.html instanceof Element), 'invalid htmlstr:', json.htmlstr, json);\r\n  }\r\n\r\n  setDependencyArray(featuredependency: {template: string, namesArray: string, typesArray: string}[]): void {\r\n    // todo: insert metadata into html, copy from ModelPieceStyleEntry\r\n  }\r\n\r\n  saveToDB() {\r\n    \r\n  }\r\n}\r\n\r\nexport class ViewRule {\r\n  static allByID: Dictionary<number, ViewRule> = {};\r\n  static maxID: number = 0;\r\n  public id: number;\r\n  public viewpoint: ViewPoint;\r\n  public target: ModelPiece = null;\r\n  protected targetStr: string = null;\r\n  htmlo: ViewHtmlSettings = null;\r\n  htmli: ViewHtmlSettings = null;\r\n  /// for classes\r\n  public displayAsEdge: boolean = false;\r\n  public vertexSize: GraphSize = null;\r\n  /// for classes or references\r\n  public edgeViews: EdgeViewRule[] = [];\r\n  protected viewpointstr: string;\r\n\r\n  static getbyID(id: number): ViewRule { return ViewRule.allByID[id]; }\r\n  static getbyHtml(html0: Element): ViewRule {\r\n    let html: HTMLElement | SVGElement = html0 as HTMLElement | SVGElement;\r\n    while (html && html.dataset && !html.dataset.styleid) html = html.parentNode as HTMLElement | SVGElement;\r\n    return ViewRule.getbyID(html && html.dataset ? +html.dataset.styleid : null); }\r\n\r\n  constructor(owner: ViewPoint, target: ModelPiece = null) {\r\n    ViewRule[this.id = ViewRule.maxID++] = this;\r\n    if (owner) owner.views.push(this);\r\n    this.viewpoint = owner;\r\n    this.target = target;\r\n    this.setTargetStr();\r\n  }\r\n\r\n  // will be called by JSON.serialize() before starting, replacing the original parameter.\r\n  toJSON(nameOrIndex: string): Json{\r\n    const copy0: any = {};\r\n    this.setViewpointStr();\r\n    this.setTargetStr();\r\n    for (let key in this) { copy0[key] = this[key]; }\r\n    const copy: ViewRule = copy0;\r\n    if (this.target instanceof IClassifier) this.vertexSize = this.target.getVertex().getSize();\r\n    delete copy.id;\r\n    delete copy.target;\r\n    delete copy.viewpoint;\r\n    return copy; }\r\n\r\n  // redundant explicit call toJSON just to make the IDE realize i'm using it.\r\n  toJsonString(): string { return JSON.stringify(this.toJSON(null)); }\r\n\r\n  setViewpointStr(): void { this.viewpointstr = this.viewpoint ? this.viewpoint.name : null; }\r\n  setTargetStr(): void {\r\n    this.targetStr = this.target ? this.target.getKeyStr() : null;\r\n    U.pe(!this.targetStr && !!this.target, 'failed to get targetstr from:', this.target);\r\n  }\r\n\r\n  updateViewpoint(vp: ViewPoint = null): void {\r\n    this.viewpoint = vp || ViewPoint.get(this.viewpointstr);\r\n    const arr = this.edgeViews ? this.edgeViews : [];\r\n    let i: number;\r\n    for (i = 0; i < arr.length; i++) { arr[i].updateViewpoint(vp); } }\r\n\r\n  updateTarget(): void {\r\n    const root: IModel = this.viewpoint.target;\r\n    const path: number[] = JSON.parse(this.targetStr);\r\n    const realindexfollowed: {indexFollowed: string[] | number[], debugArr: {index: string | number, elem: any}[]} = {indexFollowed: [], debugArr:[]};\r\n    this.target = ModelPiece.getByKey(path, realindexfollowed);\r\n    if (realindexfollowed.indexFollowed.length !== path.length) {\r\n      U.pw(true, 'unable to find target of view:', this, ' search output:', realindexfollowed);\r\n      this.target = null; }\r\n  }\r\n  clone(json: ViewRule): void {\r\n    if(json.setViewpointStr) { json.setViewpointStr(); }\r\n    for(let key in json) {\r\n      switch (key){\r\n      default: U.pe(true, 'unexpected key', key, json); break;\r\n      case 'id': case 'target': break;\r\n      case 'targetStr': this.targetStr = json[key]; break;\r\n      case 'htmlo':\r\n        if (!json.htmlo) { this.htmlo = null; break; }\r\n        if (!this.htmlo) { this.htmlo = new ViewHtmlSettings(); }\r\n        this.htmlo.clone(json.htmlo); break;\r\n      case 'htmli':\r\n        if (!json.htmli) { this.htmli = null; break; }\r\n        if (!this.htmli) { this.htmli = new ViewHtmlSettings(); }\r\n        this.htmli.clone(json.htmli); break;\r\n      case 'displayAsEdge': this.displayAsEdge = json.displayAsEdge; break;\r\n      case 'vertexSize': this.vertexSize = json.vertexSize ? new GraphSize().clone(json.vertexSize) : null; break;\r\n      case 'edgeViews':\r\n        this.edgeViews = [];\r\n        const arr = json.edgeViews ? json.edgeViews : [];\r\n        let i: number;\r\n        for (i = 0; i < arr.length; i++) {\r\n          U.ArrayAdd(this.edgeViews, new EdgeViewRule(this.viewpoint).clone(arr[i]));\r\n        }\r\n        break;\r\n      case 'viewpointstr': this.viewpointstr = json.viewpointstr; break; }\r\n    }\r\n    this.updateViewpoint();\r\n    this.updateTarget();\r\n  }\r\n\r\n  duplicate(): ViewRule {\r\n    const duplicate = new ViewRule(null);\r\n    duplicate.clone(this);\r\n    return duplicate; }\r\n\r\n  isEmpty(): boolean { return this.equals(new ViewRule(this.viewpoint)); }\r\n  equals(other: ViewRule): boolean { return this.toString() === other.toString(); }\r\n  // should only be called from ViewPoint\r\n  apply(target: ModelPiece = null): void {\r\n    this.target = target || this.target || ModelPiece.getByKeyStr(this.targetStr);\r\n    console.log(this);\r\n    this.viewpoint.viewsDictionary[this.target.id] = this;\r\n    U.ArrayAdd(this.target.views, this);\r\n  }\r\n  // should only be called from ViewPoint\r\n  detach() {\r\n    // if (!this.target) return; target must never be deleted in Viewww.\r\n    U.arrayRemoveAll(this.target.views, this);\r\n    U.ArrayAdd(this.target.detachedViews, this);\r\n    delete this.viewpoint.viewsDictionary[this.target.id];\r\n    this.setTargetStr();\r\n    // this.target = null; target must never be deleted in ViewRule\r\n  }\r\n\r\n  getViewPoint(): ViewPoint { return this.viewpoint; }\r\n\r\n  delete(): void {\r\n    console.log('modelview.delete() todo.' +\r\n      'non posso invece di implementarla lasciarla \"orfana\" senza target e la faccio ignorare dal loader.' +\r\n      'altrimenti non potrei cancellare la view senza cancellare il modelpiece, o forse basta settare tutto a null e mollarla lì?');\r\n  }\r\n}\r\n//todo: nuova idea:\r\n//  creo un set di View[] dentro un ViewPoint.\r\n//  ogni View ha un target: ModelPiece, e un private targetStr: string usato solo per la serializzazione e de-serializzazione.\r\n//  la targetStr deve essere presa da ModelPiece.getKey()\r\nexport class ViewPoint extends ViewRule{\r\n  static allnames: Dictionary<string, ViewPoint> = {};\r\n  target: IModel;\r\n  name: string;\r\n  views: ViewRule[];\r\n  viewsDictionary: Dictionary<number, ViewRule>;\r\n  zoom: Point;\r\n  scroll: GraphPoint;\r\n  gridShow: boolean;\r\n  grid: GraphPoint;\r\n  isApplied: boolean = false;\r\n\r\n  static getAppliedViews_TOMOVE(m: ModelPiece): ViewRule[] {\r\n    let i: number;\r\n    const arr: ViewRule[] = [];\r\n    for (let name in ViewPoint.allnames) {\r\n      const vp: ViewPoint = ViewPoint.allnames[name];\r\n      const v: ViewRule = vp.getMpStyle(m);\r\n      if (v) arr.push(v);\r\n    }\r\n    return arr; }\r\n\r\n  static get(value: string): ViewPoint {\r\n    return ViewPoint.allnames[value];\r\n  }\r\n  // abstract _isApplied(): boolean;\r\n  constructor(target: IModel, name: string = null) {\r\n    super(null);\r\n    this.scroll = new Point(0, 0);\r\n    this.zoom = new Point(1, 1);\r\n    this.grid = new Point(20, 20);\r\n    this.viewsDictionary = {};\r\n    this.views = [];\r\n    this.setname(name);\r\n    this.updateTarget(target); }\r\n\r\n  updateTarget(m: IModel = null): void { this.apply(m, true); }\r\n\r\n  getMpStyle(m: ModelPiece): ViewRule { return this.viewsDictionary[m.id]; }\r\n  setname(s: string) {\r\n    if (!s) s = 'ViewPoint 1';\r\n    if (s === this.name) return;\r\n    if (ViewPoint.allnames[this.name] === this) { delete ViewPoint.allnames[this.name]; }\r\n    while (s in ViewPoint.allnames) { s = U.increaseEndingNumber(s); }\r\n    ViewPoint.allnames[this.name = s] = this; }\r\n\r\n  toJSON(nameOrIndex: string): Json {\r\n    const copy0: any = {};\r\n    this.setTargetStr();\r\n    for (let key in this) { copy0[key] = this[key]; }\r\n    const copy: ViewPoint = copy0;\r\n    delete copy.viewpoint;\r\n    delete copy.viewpointstr;\r\n    delete copy.viewsDictionary;\r\n    delete copy.target;\r\n    return copy; }\r\n\r\n  // toString(): string { return JSON.stringify(this); }\r\n  // should only be called from ViewPointShell\r\n  apply(m: IModel = null, onlyAttach: boolean = false, debug: boolean = false): void {\r\n    if (m !== this.target) this.detach();\r\n    this.target = m = (m || this.target);\r\n    U.pe(!this.target, 'called ViewPoint.apply() without a target.', this);\r\n    U.pif(debug, 'add() PRE:', this.target.viewpoints.map((vp) => vp.name), this.target.viewpoints);\r\n    U.arrayRemoveAll(this.target.viewpoints, this);\r\n    U.pif(debug, 'add() MID:', this.target.viewpoints.map((vp) => vp.name), this.target.viewpoints, this.target.viewpoints.indexOf(this));\r\n    U.pif(debug, this.target.viewpoints);\r\n    // U.pw(true, 'stopped');\r\n    // todo: il browser chrome è impazzito e mi fa il sort per nome ogni volta che faccio push.\r\n    this.target.viewpoints.push(this); // NON usare U.ArrayAdd(), la rimozione è necessaria per garantire che venga sempre aggiunto in fondo.\r\n    U.pif(debug, this.target.viewpoints);\r\n    U.pif(debug, 'add() POST:', this.target.viewpoints.map((vp) => vp.name), this.target.viewpoints);\r\n    if (onlyAttach) return;\r\n    let i: number;\r\n    for (i  = 0; i < this.views.length; i++) {\r\n      let v: ViewRule = this.views[i];\r\n      v.apply();\r\n    }\r\n    this.isApplied = true;\r\n\r\n    // U.pe(true, 'stopped here still works');\r\n  }\r\n  // should only be called from ViewPointShell\r\n  detach(): void {\r\n    if (!this.isApplied) return;\r\n    // NB: don't remove from model.viewPoints, just de-apply it.\r\n    for(let istr in this.viewsDictionary) {\r\n      let i: number = +istr;\r\n      let v: ViewRule = this.viewsDictionary[i];\r\n      v.detach();\r\n    }\r\n    this.isApplied = false;\r\n  }\r\n  // should only be called from ViewPointShell\r\n  delete() {\r\n    this.detach();\r\n    U.arrayRemoveAll(this.target.viewpoints, this);\r\n    this.target = null;\r\n  }\r\n\r\n  clone(json: ViewPoint): void {\r\n    if (json.target && json.setTargetStr) json.setTargetStr();\r\n    let i: number;\r\n    for(let key in json) {\r\n      switch (key){\r\n      default: U.pe(true, 'unexpected key:', key, json); break;\r\n      case 'id': case 'target': case 'viewpoint': break;\r\n      case 'htmlo':\r\n        if (!json.htmlo) { this.htmlo = null; continue; }\r\n        if (!this.htmlo) this.htmlo = new ViewHtmlSettings();\r\n        this.htmlo.clone(json.htmlo);\r\n        break;\r\n      case 'htmli':\r\n        if (!json.htmli) { this.htmli = null; continue; }\r\n        if (!this.htmli) this.htmli = new ViewHtmlSettings();\r\n        this.htmli.clone(json.htmli as ViewHtmlSettings);\r\n        break;\r\n      case 'isApplied': this.isApplied = json.isApplied; break;\r\n      case 'name': this.setname(json.name); break;\r\n      case 'targetStr':\r\n        if (!json.targetStr) break;\r\n        this.targetStr = json.targetStr;\r\n        const m: IModel = ModelPiece.getByKeyStr(this.targetStr) as IModel;\r\n        U.pe(!m, 'failed to find VP.target:', this, this.targetStr, Status.status);\r\n        this.updateTarget(m); break;\r\n      case 'edgeViews':\r\n        this.edgeViews = [];\r\n        if (!json.edgeViews) continue;\r\n        for (i = 0; i < json.edgeViews.length; i++) {\r\n          const v: EdgeViewRule = new EdgeViewRule(this);\r\n          v.clone(json.edgeViews[i]);\r\n          U.ArrayAdd(this.edgeViews, v); } break;\r\n      case 'views':\r\n        this.views = [];\r\n        if (!json.views) continue;\r\n        for (i = 0; i < json.views.length; i++) {\r\n          const v: ViewRule = new ViewRule(this);\r\n          v.clone(json.views[i]);\r\n          U.ArrayAdd(this.views, v); } break;\r\n      case 'grid': this.grid = new Point(json.grid.x, json.grid.y); break;\r\n      case 'gridShow': this.gridShow = json.gridShow; break;\r\n      case 'scroll': this.scroll = new GraphPoint(json.scroll.x, json.scroll.y); break;\r\n      case 'zoom': this.zoom = new GraphPoint(json.zoom.x, json.zoom.y);  break;\r\n      case 'vertexSize': this.vertexSize = json.vertexSize ? new GraphSize(json.vertexSize.x, json.vertexSize.y) : null; break;\r\n      case 'displayAsEdge': this.displayAsEdge = json.displayAsEdge; break;\r\n      }\r\n    }\r\n  }\r\n\r\n  duplicate(): ViewRule {\r\n    const duplicate = new ViewPoint(null);\r\n    duplicate.clone(this);\r\n    return duplicate; }\r\n\r\n  isEmpty(): boolean {\r\n    const SingleLinkedTempVp = new ViewPoint(null);\r\n    SingleLinkedTempVp.target = this.target;\r\n    // NB: il target deve essere settato così \"raw\" non tramite costruttore e funzioni perchè non deve inserirlo nei viewpoints[] del target.\r\n    return this.equals(SingleLinkedTempVp, true); }\r\n\r\n  equals(other: ViewPoint, ignoreName: boolean = true): boolean {\r\n    const tmp = this.name;\r\n    if (ignoreName) this.name = other.name;\r\n    const ret: boolean = this.toString() === other.toString();\r\n    this.name = tmp;\r\n    return ret; }\r\n}\r\n\r\nexport class EdgeViewRule extends ViewRule {\r\n  public common: EdgeStyle;\r\n  public highlight: EdgeStyle;\r\n  public selected: EdgeStyle;\r\n  public midPoints: EdgePointView[];\r\n  public edgeIndex: number;\r\n\r\n  clone(obj0: Json): EdgeViewRule {\r\n    return this;\r\n  }\r\n}\r\n\r\nexport class EdgePointView extends ViewRule {\r\n  clone(obj0: Json): void { }\r\n\r\n\r\n}\r\n","import {\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  Json,\r\n  U,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  IReference,\r\n  Status,\r\n  DetectZoom,\r\n  Model,\r\n  ECoreAttribute,\r\n  ECoreClass,\r\n  ECorePackage,\r\n  ECoreReference,\r\n  ECoreRoot,\r\n  Point,\r\n  GraphPoint,\r\n  IModel,\r\n  Size,\r\n  MAttribute,\r\n  MReference,\r\n  MClass,\r\n  M2Class,\r\n  EdgeStyle,\r\n  M2Reference,\r\n  M2Attribute,\r\n  M3Package,\r\n  M3Reference,\r\n  M3Attribute,\r\n  M3Feature,\r\n  EdgeModes,\r\n  EdgePointStyle, EOperation, EParameter, Typedd, Type, IClassifier, ECoreAnnotation, EAnnotationDetail\r\n} from '../common/Joiner';\r\n\r\nexport class EAnnotation extends ModelPiece {\r\n  childrens: EAnnotationDetail[];\r\n  referencesStr: string;\r\n  references: ModelPiece;\r\n\r\n  constructor(parent: ModelPiece, json: Json){\r\n    super(parent, null);\r\n    if (this.parent) { U.arrayRemoveAll(this.parent.childrens, this); this.parent.annotations.push(this); }\r\n    this.parse(json); }\r\n\r\n  duplicate(nameAppend?: string, newParent?: ModelPiece): ModelPiece {\r\n    return undefined; // todo\r\n  }\r\n\r\n  fullname(): string { return this.parent.fullname() + '//' + this.name; }\r\n\r\n  setReferencesStr(): void {\r\n    // todo?? se è il main package diventa \"#//\"\r\n  }\r\n\r\n  prepareSerialize(): void { this.setReferencesStr(); }\r\n\r\n  generateModel(): Json {\r\n    const json: Json = {};\r\n    this.prepareSerialize();\r\n    let i: number;\r\n    const childarr: Json[] = [];\r\n    for (i = 0; i < this.childrens.length; i++) { childarr.push(this.childrens[i].generateModel()); }\r\n    Json.write(json, ECoreAnnotation.source, this.name);\r\n    Json.write(json, ECoreAnnotation.references, this.referencesStr);\r\n    Json.write(json, ECoreAnnotation.details, childarr);\r\n    return json; }\r\n\r\n\r\n  getVertex(): IVertex { return this.parent.getVertex(); }\r\n\r\n  parse(json: Json, destructive?: boolean): void {\r\n    let key: string;\r\n    this.childrens = [];\r\n    if (!json) { json = {}; }\r\n    for(key in json){\r\n      const value = json[key];\r\n      switch (key) {\r\n      default: U.pe(true, 'unexpected field in EAnnotation:  ' + key + ' => |' + value + '|'); break;\r\n      case ECoreAnnotation.details: break;\r\n      case ECoreAnnotation.references: break;\r\n      case ECoreAnnotation.source: break;\r\n      }\r\n    }\r\n    this.referencesStr = Json.read(json, ECoreAnnotation.source, '#/');\r\n    this.setName(Json.read(json, ECoreAnnotation.name, 'EAnnotation_1'));\r\n\r\n    const details: Json[] = Json.getDetails(json);\r\n    for (let i = 0; i < details.length; i++) { new EAnnotationDetail(this, details[i]); }\r\n  }\r\n\r\n  refreshGUI_Alone(debug?: boolean): void {\r\n    const v: IVertex = this.getVertex();\r\n    if (v) v.refreshGUI(); }\r\n\r\n}\r\n","import {\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  Json,\r\n  U,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  IReference,\r\n  Status,\r\n  DetectZoom,\r\n  Model,\r\n  ECoreAttribute,\r\n  ECoreClass,\r\n  ECorePackage,\r\n  ECoreReference,\r\n  ECoreRoot,\r\n  Point,\r\n  GraphPoint,\r\n  IModel,\r\n  Size,\r\n  MAttribute,\r\n  MReference,\r\n  MClass,\r\n  M2Class,\r\n  EdgeStyle,\r\n  M2Reference,\r\n  M2Attribute,\r\n  M3Package,\r\n  M3Reference,\r\n  M3Attribute,\r\n  M3Feature,\r\n  EdgeModes,\r\n  EdgePointStyle, EOperation, EParameter, Typedd, Type, IClassifier, ECoreAnnotation, EAnnotation\r\n}                    from '../common/Joiner';\r\nimport {ECoreDetail} from './iModel';\r\n\r\nexport class EAnnotationDetail extends ModelPiece {\r\n  parent: EAnnotation;\r\n  value: string;\r\n\r\n  constructor(parent: ModelPiece, json: Json){\r\n    super(parent, null);\r\n    this.parse(json); }\r\n\r\n  duplicate(nameAppend?: string, newParent?: ModelPiece): ModelPiece {\r\n    return undefined; // todo\r\n  }\r\n\r\n  fullname(): string { return this.parent.fullname() + '.' + this.name; }\r\n\r\n  generateModel(): Json {\r\n    const json: Json = {};\r\n    if (this.name !== null) Json.write(json, ECoreDetail.key, this.name);\r\n    if (this.value !== null) Json.write(json, ECoreDetail.value, this.value);\r\n    return json; }\r\n\r\n  getVertex(): IVertex { return this.parent.getVertex(); }\r\n\r\n  parse(json: Json, destructive?: boolean): void {\r\n    let key: string;\r\n    this.childrens = [];\r\n    if (!json) { json = {}; }\r\n    for(key in json){\r\n      const value = json[key];\r\n      switch (key) {\r\n        default: U.pe(true, 'unexpected field in EDetail:  ' + key + ' => |' + value + '|'); break;\r\n        case ECoreDetail.key: break;\r\n        case ECoreDetail.value: break; }\r\n    }\r\n    this.value = Json.read(json, ECoreDetail.value, '');\r\n    this.setName(Json.read(json, ECoreDetail.key, 'DetailKey1'));\r\n  }\r\n\r\n  refreshGUI_Alone(debug?: boolean): void { return this.parent.refreshGUI_Alone(); }\r\n}\r\n","import {\r\n  AttribETypes,\r\n  Dictionary, EOperation, EParameter,\r\n  IAttribute,\r\n  IModel,\r\n  Json, M3Attribute,\r\n  M3Class,\r\n  M3Package,\r\n  M3Reference,\r\n  MetaModel,\r\n  ModelPiece, PropertyBarr,\r\n  ShortAttribETypes,\r\n  Status,\r\n  U\r\n} from '../common/Joiner';\r\n\r\nexport class MetaMetaModel extends IModel {\r\n  static emptyMetaMetaModel: string = '' + 'empty Meta-MetaModel: todo'; // todo\r\n  childrens: M3Package[];\r\n  metaParent: MetaMetaModel;\r\n  instances: MetaModel[];\r\n\r\n  constructor(json?: Json) { super(null); this.parse(json, true); }\r\n\r\n  conformability(metaparent: MetaMetaModel, outObj: any = null, debug: boolean = false): number { return 1; }\r\n\r\n  getAllClasses(): M3Class[] { return super.getAllClasses() as M3Class[]; }\r\n  getAllReferences(): M3Reference[] { return super.getAllReferences() as M3Reference[]; }\r\n\r\n\r\n  generateModel(): Json { return undefined; }\r\n\r\n  getPrefix(): string { return 'mmm'; }\r\n  getPrefixNum(): string { return 'm3'; }\r\n  isM1(): boolean { return false; }\r\n  isM2(): boolean { return false; }\r\n  isM3(): boolean { return true; }\r\n\r\n  parse(json: Json, destructive?: boolean): void {\r\n    this.name = 'Meta-Metamodel';\r\n    const useless = new M3Package(this, null); }\r\n\r\n  refreshGUI_Alone(debug: boolean = true): void { }\r\n\r\n  getDefaultPackage(): M3Package {\r\n    if (this.childrens.length !== 0) { return this.childrens[0]; }\r\n    U.ArrayAdd(this.childrens, new M3Package(this, null));\r\n    return this.childrens[0]; }\r\n\r\n  getPackage(): M3Package { return this.getDefaultPackage(); }\r\n\r\n  getClass(fullname: string = null, throwErr: boolean = true, debug: boolean = true): M3Class { return this.getDefaultPackage().classes[0]; }\r\n\r\n  getAttribute(): M3Attribute { return this.getClass().attributes[0]; }\r\n  getReference(): M3Reference { return this.getClass().references[0]; }\r\n  getOperation(): EOperation { return this.getClass().getOperations()[0]; }\r\n  getParameter(): EParameter { return this.getOperation().childrens[0]; }\r\n  duplicate(nameAppend: string = '_Copy'): MetaMetaModel { U.pe(true, 'invalid operation: m3.duplicate();'); return this; }\r\n}\r\n","import {\r\n  Json,\r\n  U,\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  MetaMetaModel,\r\n  IModel,\r\n  ModelNone,\r\n  MPackage,\r\n  Model,\r\n  M2Package,\r\n  IReference,\r\n  MReference,\r\n  M2Reference,\r\n  M3Package,\r\n  ECoreRoot,\r\n  M3Class,\r\n  M3Reference,\r\n  Status,\r\n  ViewPoint,\r\n  Type, Dictionary\r\n}                    from '../common/Joiner';\r\nimport {EAnnotation} from './EAnnotation';\r\n\r\n\r\nexport class MetaModel extends IModel {\r\n  static emptyModel: string = '{}';\r\n  static emptyModelOld: string =\r\n  '{ \"ecore:EPackage\": {\\n' +\r\n  '    \"@xmlns:xmi\": \"http://www.omg.org/XMI\",\\n' +\r\n  '    \"@xmlns:xsi\": \"http://www.w3.org/2001/XMLSchema-instance\",\\n' +\r\n  '    \"@xmlns:ecore\": \"http://www.eclipse.org/emf/2002/Ecore\",\\n' +\r\n  '    \"@xmi:version\": \"2.0\",\\n' +\r\n  '    \"eClassifiers\": []' +\r\n  '  }' +\r\n  '}';\r\n\r\n  metaParent: MetaMetaModel;\r\n  instances: Model[];\r\n  childrens: M2Package[];\r\n\r\n  constructor(json: Json, metaParent: MetaMetaModel) { super(metaParent); this.parse(json, true); }\r\n\r\n  getAllClasses(): M2Class[] { return super.getAllClasses() as M2Class[]; }\r\n  getAllReferences(): M2Reference[] { return super.getAllReferences() as M2Reference[]; }\r\n  getClass(fullname: string, throwErr: boolean = true, debug: boolean = true): M2Class {\r\n    return super.getClass(fullname, throwErr, debug) as M2Class; }\r\n\r\n  getClassFromEcoreStr(targetstr: string): M2Class {\r\n    U.pe(!targetstr || targetstr.indexOf(Type.classTypePrefix) !== 0, 'getClassFromString(): not a ecore class name:', targetstr);\r\n    const classes: M2Class[] = this.getAllClasses();\r\n    let i: number;\r\n    for (i = 0; i < classes.length; i++) { if(classes[i].getEcoreTypeName() === targetstr) return classes[i]; }\r\n    return null; }\r\n\r\n  getEcoreStr_Class_Dictionary(): Dictionary<string, M2Class> {\r\n    const classes: M2Class[] = this.getAllClasses();\r\n    let i: number;\r\n    const dic: Dictionary<string, M2Class> = {};\r\n    for (i = 0; i < classes.length; i++) { dic[classes[i].getEcoreTypeName()] = classes[i]; }\r\n    return dic; }\r\n\r\n  getClassByNameSpace(fullnamespace: string, caseSensitive: boolean = false, canThrow: boolean = false): M2Class {\r\n    const classes: M2Class[] = this.getAllClasses();\r\n    let i: number;\r\n    if (caseSensitive) { fullnamespace = fullnamespace.toLowerCase(); }\r\n    let justNameMatchFallback: M2Class = null;\r\n    let namestr: string = fullnamespace.substr(fullnamespace.lastIndexOf(':') + 1);\r\n    if (!caseSensitive) { namestr = namestr.toLowerCase(); }\r\n    for (i = 0; i < classes.length; i++) {\r\n      const mmclass: M2Class = classes[i];\r\n      if ( (caseSensitive ? mmclass.name : mmclass.name.toLowerCase()) === namestr) { justNameMatchFallback = mmclass; }\r\n      let mmclassNS = mmclass.getNamespaced();\r\n      if (!mmclassNS) { continue; }\r\n      if (caseSensitive) { mmclassNS = mmclassNS.toLowerCase(); }\r\n      if (mmclassNS === fullnamespace) { return mmclass; } }\r\n    U.pe(!justNameMatchFallback, 'class |' + fullnamespace + '| not found. classArr:', classes);\r\n    return justNameMatchFallback; }\r\n/*\r\n  fixReferences(): void {\r\n    const arr: M2Reference[] = this.getAllReferences();\r\n    let i = -1;\r\n    while (++i < arr.length) {\r\n      arr[i].linkClass();\r\n      U.pe(!arr[i].classType, arr[i], Status.status.loadedLogic);\r\n    } }*/\r\n\r\n\r\n  parse(json: Json, destructive: boolean = true): void {\r\n    if (destructive) { this.childrens = []; }\r\n    const childrens = Json.getChildrens(json);\r\n    const annotations = Json.getAnnotations(json);\r\n    let i;\r\n    for (i = 0; i < annotations.length; i++) {\r\n      const child = annotations[i];\r\n      // metaParent = U.findMetaParentP(this, child);\r\n      if (destructive) { new EAnnotation(this, child); continue; }\r\n      U.pe(true, 'Non-destructive m2-model parse: to do');\r\n    }\r\n    for (i = 0; i < childrens.length; i++) {\r\n      const child = childrens[i];\r\n      const metaParent: M3Package = null;\r\n      // metaParent = U.findMetaParentP(this, child);\r\n      if (destructive) { new M2Package(this, child); continue; }\r\n      U.pe(true, 'Non-destructive m2-model parse: to do');\r\n    }\r\n  }\r\n\r\n  generateModel(): Json {\r\n    const packageArr = [];\r\n    let i;\r\n    for (i = 0; i < this.childrens.length; i++) {\r\n      const pkg = this.childrens[i];\r\n      packageArr.push(pkg.generateModel());\r\n    }\r\n    const model = new Json(null);\r\n    model[ECoreRoot.ecoreEPackage] = packageArr;\r\n    return model; }\r\n\r\n  getDefaultPackage(): M2Package {\r\n    if (this.childrens.length !== 0) { return this.childrens[0]; }\r\n    U.ArrayAdd(this.childrens, new M2Package(this, null) );\r\n    return this.childrens[0]; }\r\n\r\n  conformability(metaparent: MetaMetaModel, outObj?: any, debug?: boolean): number { return 1; }\r\n\r\n  getPrefix(): string { return 'mm'; }\r\n  getPrefixNum(): string { return 'm2'; }\r\n  isM1(): boolean { return false; }\r\n  isM2(): boolean { return true; }\r\n  isM3(): boolean { return false; }\r\n\r\n  duplicate(nameAppend: string = '_Copy'): MetaModel {\r\n    const m = new MetaModel(null, null);\r\n    m.copy(this);\r\n    m.refreshGUI();\r\n    return m; }\r\n\r\n}\r\n","import {\r\n  IModel,\r\n  Json,\r\n  IPackage,\r\n  M2Class,\r\n  IFeature,\r\n  IAttribute,\r\n  IReference,\r\n  MetaModel,\r\n  U,\r\n  IVertex,\r\n  IEdge,\r\n  EdgeStyle, MPackage,\r\n  ModelPiece, Status, MClass, ECoreClass, ModelNone, M3Class, M3Reference, M2Package, MReference\r\n} from '../common/Joiner';\r\n\r\nexport class Model extends IModel {\r\n  public static emptyModel = '{}';\r\n  metaParent: MetaModel;\r\n  // instances: ModelNone[];\r\n  childrens: MPackage[];\r\n  classRoot: MClass = null;\r\n\r\n  constructor(json: Json, metaModel: MetaModel) {\r\n    super(metaModel);\r\n    this.parse(json, true); }\r\n\r\n  // fixReferences(): void {/*useless here? or useful in loops?*/}\r\n\r\n  getClassRoot(): MClass {\r\n    if (this.classRoot) { return this.classRoot; }\r\n    const classes = this.getAllClasses();\r\n    if (classes.length) U.pw(true, 'Failed to get m1 class root.<br>You need to select a root class in M1\\'s structured editor', this);\r\n\r\n    if (classes.length && classes[0]) {\r\n      classes[0].setRoot(true);\r\n      U.ps(true, 'Class root automatically selected.'); }\r\n    return null; }\r\n\r\n  parse(json: Json, destructive: boolean, metamodel: MetaModel = null): void {\r\n    if (!metamodel) {metamodel = Status.status.mm; }\r\n    U.pe(!metamodel, 'parsing a model requires a metamodel linked');\r\n    U.pw(json === '' + json, 'ModelPiece.parse() parameter must be a parsed ECORE/json. autofixed.');\r\n    if (json === '' + json) json = JSON.parse(json + '');\r\n    if (destructive) { this.childrens = []; }\r\n    let key: string;\r\n    for (key in json) {\r\n      if (!json.hasOwnProperty(key)) { continue; }\r\n      const namespacedclass: string = key;\r\n      const mmclass: M2Class = this.metaParent.getClassByNameSpace(namespacedclass, false, true);\r\n      const value: Json = json[key];\r\n      new MClass(this.getDefaultPackage(), value, mmclass);\r\n    }\r\n\r\n    /*\r\n    {\r\n      \"org.eclipse.example.bowling:League\": { <-- :classroot\r\n        \"-xmlns:xmi\": \"http://www.omg.org/XMI\",\r\n        \"-xmlns:org.eclipse.example.bowling\": \"https://org/eclipse/example/bowling\",\r\n        \"-xmi:version\": \"2.0\",\r\n        \"Players\": [\r\n          { \"-name\": \"tizio\" },\r\n          { \"-name\": \"asd\" }\r\n        ]\r\n      }\r\n    }\r\n    */\r\n  }\r\n  // parse(deep: boolean) { super.parse(deep); }\r\n\r\n  getAllClasses(): MClass[] { return super.getAllClasses() as MClass[]; }\r\n  getAllReferences(): MReference[] { return super.getAllReferences() as MReference[]; }\r\n  getClass(fullname: string, throwErr: boolean = true, debug: boolean = true): MClass {\r\n    return super.getClass(fullname, throwErr, debug) as MClass; }\r\n\r\n  generateModel(): Json {\r\n    const json: Json =  {};\r\n    const classRoot: MClass = this.getClassRoot();\r\n    if (!classRoot) return Model.emptyModel;\r\n    json[classRoot.metaParent.getNamespaced()] = classRoot.generateModel(true);\r\n    return json; }\r\n\r\n  // namespace(set: string = null): string { return this.metaParent.namespace(set); }\r\n\r\n  getDefaultPackage(): MPackage {\r\n    if (this.childrens.length !== 0) { return this.childrens[0]; }\r\n    new MPackage(this, null, this.metaParent.getDefaultPackage());\r\n    return this.childrens[0]; }\r\n\r\n\r\n  conformability(metaparent: MetaModel, outObj?: any, debug?: boolean): number {\r\n    U.pw(true, 'm1.conformability(): to do.');\r\n    return 1;\r\n  }\r\n\r\n\r\n  getPrefix(): string { return 'm'; }\r\n  getPrefixNum(): string { return 'm1'; }\r\n  isM1(): boolean { return true; }\r\n  isM2(): boolean { return false; }\r\n  isM3(): boolean { return false; }\r\n\r\n  duplicate(nameAppend: string = '_Copy'): Model {\r\n    const m = new Model(null, null);\r\n    m.copy(this);\r\n    m.refreshGUI();\r\n    return m; }\r\n}\r\n","import {\r\n  Status,\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  Json,\r\n  U,\r\n  ModelPiece,\r\n  ISidebar,\r\n  MetaMetaModel,\r\n  LocalStorage,\r\n  IGraph,\r\n  IReference,\r\n  MetaModel,\r\n  MClass,\r\n  TopBar,\r\n  ModelNone,\r\n  IClass,\r\n  Model,\r\n  M3Package,\r\n  M3Class,\r\n  ViewPoint,\r\n  EEnum,\r\n  IClassifier,\r\n  GraphSize,\r\n  Dictionary,\r\n  SaveListEntry, //, Options\r\n}             from '../common/Joiner';\r\nimport {Meta} from '@angular/platform-browser';\r\n\r\nexport abstract class IModel extends ModelPiece {\r\n  parent: ModelNone;\r\n  childrens: IPackage[];\r\n  metaParent: IModel;\r\n  instances: IModel[];\r\n\r\n  graph: IGraph = null;\r\n  sidebar: ISidebar = null;\r\n  storage: LocalStorage = null;\r\n  namespaceVar: string = null;\r\n  uriVar: string = null;\r\n  viewpoints: ViewPoint[] = [];\r\n  // viewpoint: ViewPoint;\r\n  /*\r\n  constructor(json: Json, metaParent: MetaModel, skipParse: boolean = false) {\r\n    super(null, metaParent);\r\n    // todo: mi sa che chiama parse a ripetizione: Modelpiece.parse, IFeature.parse, IAttribute.parse, M2Attribute.parse...\r\n    if (!skipParse) { this.parse(json, true); }\r\n  }*/\r\n  static isValidURI(str: string): boolean { return str.indexOf(' ') !== -1 && true; }\r\n  static removeInvalidNameChars(name: string): string { return U.multiReplaceAll(name, [' '], ['']); }\r\n  // abstract conformsTo(meta: IModel): boolean;\r\n  abstract generateModel(): Json;\r\n  abstract conformability(metaparent: IModel, outObj?: any/*.refPermutation, .attrPermutation*/, debug?: boolean): number;\r\n\r\n  constructor(metaVersion?: IModel) {\r\n    super(null, metaVersion);\r\n    this.storage = new LocalStorage(this); }\r\n\r\n  uri(str: string = null): string {\r\n    if (str) { if (IModel.isValidURI(str)) { return this.uriVar = str; } else { return null; } }\r\n    if (this.uriVar) { return this.uriVar; }\r\n    return this.uriVar = 'http://default/uri/to/change'; }\r\n\r\n  namespace(value: string = null): string {\r\n    let pos: number;\r\n    if (value) {\r\n      this.namespaceVar = value;\r\n      pos = this.namespaceVar.lastIndexOf(':');\r\n      this.namespaceVar = pos === -1 ? this.namespaceVar : this.namespaceVar.substring(0, pos);\r\n    }\r\n    const ns: string = this.namespaceVar;\r\n    if (!ns) { return this.namespace('default.namespace.to.change'); }\r\n    pos = ns.lastIndexOf(':');\r\n    return pos === -1 ? ns : ns.substring(0, pos); }\r\n\r\n  getAllClasses(): IClass[] {\r\n    const arr: IClass[] = [];\r\n    const packages: IPackage[] = this.childrens;\r\n    let i;\r\n    for (i = 0; i < packages.length; i++) { packages[i].classes.forEach( (elem: IClass) => {arr.push(elem); } ); }\r\n    return arr; }\r\n\r\n  getAllEnums(): EEnum[] {\r\n    const arr: EEnum[] = [];\r\n    const packages: IPackage[] = this.childrens;\r\n    let i;\r\n    for (i = 0; i < packages.length; i++) { packages[i].enums.forEach( (elem: EEnum) => {arr.push(elem); } ); }\r\n    return arr; }\r\n\r\n  fullname(): string { return this.name; }\r\n\r\n  getVertex(): IVertex { U.pe(true, 'IModel.getVertex();', this); return undefined; }\r\n\r\n  getAllReferences(): IReference[] {\r\n    const arr: IReference[] = [];\r\n    const classes: IClass[] = this.getAllClasses();\r\n    let i;\r\n    for (i = 0; i < classes.length; i++) {\r\n      classes[i].references.forEach( (elem: IReference) => {arr.push(elem); } );\r\n    }\r\n    return arr; }\r\n\r\n  getPackage(fullname: string, throwErr: boolean = true): IPackage {\r\n    if (fullname.indexOf('.') !== -1) { U.pe(throwErr, 'not a package name:', fullname); return null; }\r\n    let i;\r\n    for ( i = 0; i < this.childrens.length; i++) { if (this.childrens[i].name === fullname) { return this.childrens[i]; } }\r\n    if (fullname.indexOf('.') !== -1) { U.pe(throwErr, 'valid a package name, but package does not exist:', fullname); return null; }\r\n    return null; }\r\n\r\n  getClass(fullname: string, throwErr: boolean = true, debug: boolean = true): IClass {\r\n    const tks: string[] = fullname.split('.');\r\n    if (tks.length !== 2) { U.pe(throwErr, 'not a full class name:', fullname); return null; }\r\n    const classes: IClass[] = this.getAllClasses();\r\n    let i = -1;\r\n    while (++i < classes.length) {\r\n      const currentFname = classes[i].fullname();\r\n      U.pif(debug, 'fllname: |' + fullname + '| =?= |' + currentFname + '| = ' + currentFname === fullname);\r\n      if (currentFname === fullname) { return classes[i]; }\r\n    }\r\n    const name: string = fullname.substr(fullname.indexOf('.') + 1);\r\n    i = -1;\r\n    while (++i < classes.length) {\r\n      U.pif(debug, 'name: |' + name + '| =?= |' + classes[i].name + '| = ' + classes[i].name === name);\r\n      if (classes[i].name === name) { return classes[i]; }\r\n    }\r\n    U.pe(throwErr, 'valid name but unable to find it. fullname:', fullname, 'classes:', classes);\r\n    return null;\r\n    // let i;\r\n    // for ( i = 0; i < pkg.childrens.length; i++) { if (pkg.childrens[i].name === fullname) { return pkg.childrens[i] as M2Class; } }\r\n  }\r\n\r\n\r\n  // fieldChanged(e: JQuery.ChangeEvent) { U.pe(true, 'should never happen', e); }\r\n\r\n  abstract duplicate(nameAppend?: string): IModel;\r\n\r\n  getEmptyModel(): string {\r\n    if (this instanceof MetaMetaModel) return MetaMetaModel.emptyMetaMetaModel;\r\n    if (this instanceof MetaModel) return MetaModel.emptyModel;\r\n    if (this instanceof Model) return Model.emptyModel;\r\n    return null; }\r\n\r\n  delete(): void {\r\n    this.storage.remove(this.name, SaveListEntry.model);\r\n    // set empty (meta)model as most recent anonymous savefile and next to be opened.\r\n    LocalStorage.deleteLastOpened(this instanceof MetaModel ? 2 : 1);\r\n    /*this.storage.add(null, null, SaveListEntry.model);\r\n    this.storage.add(null, null, SaveListEntry.view);\r\n    this.storage.add(null, null, SaveListEntry.vertexPos);*/\r\n    U.refreshPage(); }\r\n\r\n  refreshGUI_Alone(debug: boolean = true): void {\r\n    let i: number;\r\n    for (i = 0; i < this.childrens.length; i++ ) { this.childrens[i].refreshGUI_Alone(debug); } }\r\n\r\n  isNameTaken(name: string): boolean { return !!this.storage.get(name, SaveListEntry.model); }\r\n\r\n  setName(value: string, refreshGUI: boolean = false): string {\r\n    const oldname: string = this.name;\r\n    if (this.isNameTaken(value)) { U.pw(true, 'tried to saveToDB a model with a name already in use'); return oldname; }\r\n    super.setName(value);\r\n    this.storage.rename(oldname, this.name, SaveListEntry.model);\r\n    this.graph.propertyBar.refreshGUI();\r\n    return this.name; }\r\n\r\n  save(isAutosave: boolean, saveAs: boolean = false): void {\r\n    this.storage.saveModel(isAutosave, saveAs); }\r\n\r\n  abstract getDefaultPackage(): IPackage;\r\n  abstract isM3(): boolean;\r\n  abstract isM2(): boolean;\r\n  abstract isM1(): boolean;\r\n\r\n  isMMM(): boolean { return this.isM3(); }\r\n  isMM(): boolean { return this.isM2(); }\r\n  isM(): boolean { return this.isM1(); }\r\n\r\n  abstract getPrefix(): string;\r\n  abstract getPrefixNum(): string;\r\n\r\n  addClass(parent: IPackage = null, meta: IClass = null): IClass {\r\n    if (!parent) { parent = this.getDefaultPackage(); }\r\n    return parent.addEmptyClass(meta); }\r\n\r\n  friendlyClassName(toLower: boolean = true): string {\r\n    if (this instanceof MetaMetaModel) { return 'Meta-metamodel'.toLowerCase(); }\r\n    if (this instanceof MetaModel) { return 'Metamodel'.toLowerCase(); }\r\n    if (this instanceof Model) { return 'Model'.toLowerCase(); }\r\n    U.pe(true, 'unexpected'); return 'error'; }\r\n\r\n    getLastView(): ViewPoint {\r\n      let i: number;\r\n      for (i = this.viewpoints.length; --i >= 0; ) {\r\n        const vp: ViewPoint = this.viewpoints[i];\r\n        if (vp.isApplied) return vp; }\r\n      return null;\r\n    }\r\n\r\n  public static getByName(name: string): IModel {\r\n    if (Status.status.mmm.fullname() === name) return Status.status.mmm;\r\n    if (Status.status.mm.fullname() === name) return Status.status.mm;\r\n    if (Status.status.m.fullname() === name) return Status.status.m;\r\n    return null; }\r\n\r\n  readVertexPositionSaveArr(dic: Dictionary<string, GraphSize>): void {\r\n    for (let key in dic) {\r\n      const value: GraphSize = new GraphSize().clone(dic[key]);\r\n      const mp = ModelPiece.getByKeyStr(key);\r\n      if (!mp) { U.pw(true, 'invalid vertex save, failed to get targetmodelpiece: ', key, dic, this); continue; }\r\n      mp.getVertex().setSize(value);\r\n    }\r\n  }\r\n  generateVertexPositionSaveArr(): Dictionary<string, GraphSize> {\r\n    let i: number;\r\n    let j: number;\r\n    let ret: Dictionary<string, GraphSize> = {};\r\n    let arr: IClassifier[][] = [this.getAllEnums(), this.getAllClasses()];\r\n    for (j = 0; j < arr.length; j++)\r\n      for (i = 0; i < arr[j].length; i++) { ret[arr[j][i].getKeyStr()] = arr[j][i].getVertex().getSize(); }\r\n    return ret; }\r\n\r\n  generateViewPointSaveArr(): Json[] {\r\n    /*let i: number;\r\n    let tmp: any = [];\r\n    for (i = 0; i < this.viewpoints.length; i++) { tmp.push(this.viewpoints[i].toJSON()); }\r\n    return tmp;*/\r\n    return this.viewpoints; }\r\n}\r\n\r\n\r\nexport class ECoreRoot {\r\n  static ecoreEPackage: string;\r\n  public static initializeAllECoreEnums(): void {\r\n    ECoreRoot.ecoreEPackage = 'ecore:EPackage';\r\n\r\n    ECorePackage.eAnnotations = ECoreClass.eAnnotations = ECoreEnum.eAnnotations = EcoreLiteral.eAnnotations =\r\n      ECoreReference.eAnnotations = ECoreAttribute.eAnnotations = ECoreOperation.eAnnotations = ECoreParameter.eAnnotations = 'eAnnotations';\r\n\r\n    ECoreAnnotation.source = Status.status.XMLinlineMarker + 'source';\r\n    ECoreAnnotation.references = Status.status.XMLinlineMarker + 'references'; // \"#/\" for target = package.\r\n    ECoreAnnotation.details = 'details'; // arr\r\n    ECoreDetail.key = Status.status.XMLinlineMarker + 'key'; // can have spaces\r\n    ECoreDetail.value = Status.status.XMLinlineMarker + 'value';\r\n\r\n    ECorePackage.eClassifiers = 'eClassifiers';\r\n    ECorePackage.xmlnsxmi = Status.status.XMLinlineMarker + 'xmlns:xmi'; // typical value: http://www.omg.org/XMI\r\n    ECorePackage.xmlnsxsi = Status.status.XMLinlineMarker + 'xmlns:xsi'; // typical value: http://www.w3.org/2001/XMLSchema-instance\r\n    ECorePackage.xmiversion = Status.status.XMLinlineMarker + 'xmi:version'; // typical value: \"2.0\"\r\n    ECorePackage.xmlnsecore = Status.status.XMLinlineMarker + 'xmlns:ecore';\r\n    ECorePackage.nsURI = Status.status.XMLinlineMarker + 'nsURI'; // typical value: \"http://org/eclipse/example/bowling\"\r\n    ECorePackage.nsPrefix = Status.status.XMLinlineMarker + 'nsPrefix'; // typical value: org.eclipse.example.bowling\r\n    ECorePackage.namee = Status.status.XMLinlineMarker + 'name';\r\n\r\n    ECoreClass.eStructuralFeatures = 'eStructuralFeatures';\r\n    ECoreClass.eOperations = 'eOperations';\r\n    ECoreClass.xsitype = Status.status.XMLinlineMarker + 'xsi:type'; // \"ecore:EClass\"\r\n    ECoreClass.namee = ECorePackage.namee;\r\n    ECoreClass.eSuperTypes = Status.status.XMLinlineMarker + 'eSuperTypes'; // space separated: \"#name1 #name2\"...\r\n    ECoreClass.instanceTypeName = Status.status.XMLinlineMarker + 'instanceTypeName';  // raw str\r\n    ECoreClass.instanceTypeName = Status.status.XMLinlineMarker + 'instanceTypeName';\r\n    ECoreClass.abstract = Status.status.XMLinlineMarker + 'abstract'; // bool\r\n    ECoreClass.interface = Status.status.XMLinlineMarker + 'interface'; // bool\r\n\r\n    ECoreEnum.instanceTypeName = ECoreClass.instanceTypeName;\r\n    ECoreEnum.serializable = 'serializable'; // \"false\", \"true\"\r\n    ECoreEnum.xsitype = ECoreClass.xsitype; // \"ecore:EEnum\"\r\n    ECoreEnum.eLiterals = 'eLiterals';\r\n    ECoreEnum.namee = ECorePackage.namee;\r\n\r\n    EcoreLiteral.literal = 'literal';\r\n    EcoreLiteral.namee = ECorePackage.namee;\r\n    EcoreLiteral.value = 'value'; // any integer (-inf, +inf), not null. limiti = a type int 32 bit?\r\n\r\n    ECoreReference.xsitype = Status.status.XMLinlineMarker + 'xsi:type'; // \"ecore:EReference\"\r\n    ECoreReference.eType = Status.status.XMLinlineMarker + 'eType'; // \"#//Player\"\r\n    ECoreReference.containment = Status.status.XMLinlineMarker + 'containment'; // \"true\"\r\n    ECoreReference.upperbound = Status.status.XMLinlineMarker + 'upperBound'; // \"@1\"\r\n    ECoreReference.lowerbound = Status.status.XMLinlineMarker + 'lowerBound'; // does even exists?\r\n    ECoreReference.namee = Status.status.XMLinlineMarker + 'name';\r\n\r\n    ECoreAttribute.xsitype = Status.status.XMLinlineMarker + 'xsi:type'; // \"ecore:EAttribute\",\r\n    ECoreAttribute.eType = Status.status.XMLinlineMarker + 'eType'; // \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString\"\r\n    ECoreAttribute.namee = Status.status.XMLinlineMarker + 'name';\r\n\r\n\r\n    ECoreOperation.eParameters = 'eParameters';\r\n    ECoreOperation.namee = Status.status.XMLinlineMarker + 'name'; // \"EExceptionNameCustom\",\r\n    ECoreOperation.ordered = Status.status.XMLinlineMarker + 'ordered'; // \"false\",\r\n    ECoreOperation.unique = Status.status.XMLinlineMarker + 'unique'; // \"false\",\r\n    ECoreOperation.lowerBound = Status.status.XMLinlineMarker + 'lowerBound'; // \"5\", ma che senso ha su una funzione?? è il return?\r\n    ECoreOperation.upperBound = Status.status.XMLinlineMarker + 'upperBound';\r\n    ECoreOperation.eType = Status.status.XMLinlineMarker + 'eType'; // \"#//Classname\",\r\n    ECoreOperation.eexceptions = Status.status.XMLinlineMarker + 'eExceptions';\r\n    // \"#//ClassnameException1 #//ClassNameException2 (also custom classes) ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt\r\n\r\n    ECoreParameter.namee = Status.status.XMLinlineMarker + 'name';\r\n    ECoreParameter.ordered = Status.status.XMLinlineMarker + 'ordered'; // \"false\";\r\n    ECoreParameter.unique = Status.status.XMLinlineMarker + 'unique'; // \"false\"\r\n    ECoreParameter.lowerBound = Status.status.XMLinlineMarker + 'lowerBound'; // \"1\"\r\n    ECoreParameter.upperBound = Status.status.XMLinlineMarker + 'upperBound'; // \"2\"\r\n    ECoreParameter.eType = Status.status.XMLinlineMarker + 'eType'; // \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDoubl\r\n\r\n    XMIModel.type = Status.status.XMLinlineMarker + 'type';\r\n    XMIModel.namee = Status.status.XMLinlineMarker + 'name'; }\r\n}\r\n\r\nexport class ECoreAnnotation {\r\n  static source: string;\r\n  static references: string;\r\n  static details: string;}\r\n\r\nexport class ECoreDetail {\r\n  static key: string;\r\n  static value: string; }\r\n\r\nexport class ECorePackage {\r\n  static eAnnotations: string;\r\n  static eClassifiers: string;\r\n  static xmlnsxmi: string;\r\n  static xmlnsxsi: string;\r\n  static xmiversion: string;\r\n  static xmlnsecore: string;\r\n  static nsURI: string;\r\n  static nsPrefix: string;\r\n  static namee: string;\r\n}\r\n\r\nexport class ECoreClass {\r\n  static eAnnotations: string;\r\n  static eStructuralFeatures: string;\r\n  static xsitype: string;\r\n  static namee: string;\r\n  static eOperations: string;\r\n  static instanceTypeName: string;\r\n  static eSuperTypes: string;\r\n  static abstract: string;\r\n  static interface: string;\r\n\r\n  // static defaultValue = Status.status.XMLinlineMarker + 'defaultValue';  // visualizzato in ecore ma mai salvato dentro il file. inutilizzato\r\n  // nelle classi, assume il valore di \"[name] = [NumericValue]\" senza le [] negli enum.\r\n}\r\n\r\nexport class ECoreEnum {\r\n  static eAnnotations: string;\r\n  static xsitype: string;\r\n  static namee: string;\r\n  static instanceTypeName: string;\r\n  static serializable: string;\r\n  static eLiterals: string;\r\n}\r\n\r\nexport class EcoreLiteral {\r\n  static eAnnotations: string;\r\n  static namee: string;\r\n  static value: string;\r\n  static literal: string;\r\n}\r\n\r\n\r\nexport class ECoreReference {\r\n  static eAnnotations: string;\r\n  static xsitype: string;\r\n  static eType: string;\r\n  static containment: string;\r\n  static upperbound: string;\r\n  static lowerbound: string;\r\n  static namee: string; }\r\n\r\nexport class ECoreAttribute {\r\n  static eAnnotations: string;\r\n  static xsitype: string;\r\n  static eType: string;\r\n  static namee: string;\r\n}\r\n\r\nexport class ECoreOperation {\r\n  static eAnnotations: string;\r\n  static eType: string;\r\n  static eexceptions: string;\r\n  static upperBound: string;\r\n  static lowerBound: string;\r\n  static unique: string;\r\n  static ordered: string;\r\n  static namee: string;\r\n  static eParameters: string; }\r\n\r\nexport class ECoreParameter {\r\n  static eAnnotations: string;\r\n  static namee: string;\r\n  static ordered: string;\r\n  static unique: string;\r\n  static lowerBound: string;\r\n  static upperBound: string;\r\n  static eType: string;\r\n  }\r\n\r\nexport class XMIModel {\r\n  static type: string;\r\n  static namee: string; }\r\n","import {\r\n  Json,\r\n  U,\r\n  IField,\r\n  IEdge,\r\n  IVertex,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  ModelPiece,\r\n  MetaModel,\r\n  ISidebar,\r\n  IGraph,\r\n  IModel,\r\n  ECorePackage,\r\n  ECoreClass,\r\n  GraphPoint,\r\n  Status,\r\n  IReference,\r\n  IClass,\r\n  MPackage,\r\n  IPackage,\r\n  M3Package,\r\n  M3Reference,\r\n  M3Class,\r\n  ViewPoint, EEnum, Type\r\n} from '../../common/Joiner';\r\n\r\nexport class M2Package extends IPackage {\r\n  metaParent: M3Package;\r\n  instances: MPackage[];\r\n  parent: MetaModel;\r\n  childrens: (M2Class | EEnum)[];\r\n\r\n  constructor(mm: MetaModel, json: Json) {\r\n    super(mm, json, Status.status.mmm.getPackage());\r\n    this.parse(json, true); }\r\n\r\n  getClass(name: string, caseSensitive: boolean = false, throwErr: boolean = true, debug: boolean = true): M2Class {\r\n    return super.getClass(name, caseSensitive, throwErr, debug) as M2Class; }\r\n\r\n  addEmptyClass(): M2Class {\r\n    const c = new M2Class(this, null);\r\n    if (Status.status.loadedLogic) { c.generateVertex(); }\r\n    console.log('addEmptyClass(); package:', this, 'classe:', c);\r\n    Type.updateTypeSelectors(null, false, false, true);\r\n    return c; }\r\n\r\n  parse(json: Json, destructive: boolean = true): void {\r\n    // if (!json) { return; }\r\n    /*\r\n    json[ECorePackage.xmiversion] // '2.0';\r\n    json[ECorePackage.xmlnsxmi] // 'http://www.omg.org/XMI';\r\n    json[ECorePackage.xmlnsxsi] // 'http://www.w3.org/2001/XMLSchema-instance';\r\n    json[ECorePackage.xmlnsecore] // 'http://www.eclipse.org/emf/2002/Ecore';\r\n    json[ECorePackage.name];\r\n    json[ECorePackage.eClassifiers]; */\r\n    /// own attributes.\r\n    const name: string = Json.read<string>(json, ECorePackage.namee, 'defaultPackage');\r\n    if (name) this.setName(name);\r\n    const uri: string = Json.read<string>(json, ECorePackage.nsURI, null);\r\n    const nsPrefix: string = Json.read<string>(json, ECorePackage.nsPrefix, null);\r\n    this.parent.uri(uri);\r\n    this.parent.namespace(nsPrefix);\r\n    /// childrens\r\n    const childs = Json.getChildrens(json);\r\n    if (destructive) { this.childrens = []; }\r\n    let i: number;\r\n    for (i = 0; i < childs.length; i++) {\r\n      const child = childs[i];\r\n      if (!child) { U.pw(true, 'invalid m2Package in ecore input. found a null classifier, it will be ignored.'); continue; }\r\n      // metaParent = U.findMetaParentC(this, child);\r\n      switch (child[ECoreClass.xsitype]) {\r\n        default: U.pe(true, 'unexpected xsitype:', child[ECoreClass.xsitype], ' found in jsonfragment:', child, ', in json:', json, ' package:', this); break;\r\n        case 'ecore:EClass': new M2Class(this, child); break;\r\n        case 'ecore:EEnum': new EEnum(this, child); break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /*parse(deep) {\r\n    let i;\r\n    if (deep) {\r\n      if (this.childrens) { while (this.childrens.length !== 0) { this.childrens[0].delete(); } }\r\n      this.childrens = [];\r\n    }\r\n    let field1;\r\n    for (field1 in this.json) {\r\n      if (!this.json.hasOwnProperty(field1)) { continue; } // il compilatore mi rompe per metterlo, non toglierlo se non da problemi.\r\n      let val1 = Json.read<any>(this.json, field1);\r\n      switch (field1) {\r\n        default:\r\n          U.pe(true, 'unexpected tag at jsonInput package: ' , field1 , ' = ', val1);\r\n          break;\r\n        case 'logical':\r\n        case ECorePackage.xmlnsxsi:\r\n        case ECorePackage.xmlnsxmi:\r\n        case ECorePackage.xmlnsecore:\r\n        case ECorePackage.nsPrefix:\r\n        case ECorePackage.nsURI:\r\n        case ECorePackage.xmiversion: break;\r\n        case ECorePackage.name: break;\r\n        case ECorePackage.eClassifiers:\r\n          val1 = Json.getChildrens(this.json);\r\n          for (i = 0; i < val1.length; i++) {\r\n            if (deep) {\r\n              U.pe ( !val1[i], 'val1[' + i + '] = ', val1[i], 'field:', field1, 'json:', this.json);\r\n              const classe = new M2Class(this, val1[i]);\r\n              this.childrens.push(classe as ModelPiece);\r\n            }\r\n          }\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  generateVertex(location: GraphPoint): IVertex {\r\n    const v: IVertex = new IVertex();\r\n    v.constructorPkg(this);\r\n    v.draw();\r\n    v.moveTo(location);\r\n    return v; }\r\n    */\r\n\r\n  generateModel(): Json {\r\n    const classarr = [];\r\n    const enumarr = [];\r\n    let i: number;\r\n    for (i = 0; i < this.classes.length; i++) { classarr.push(this.classes[i].generateModel()); }\r\n    for (i = 0; i < this.enums.length; i++) { enumarr.push(this.enums[i].generateModel()); }\r\n    const classifiers: Json[] = Array.prototype.concat.call(classarr, enumarr);\r\n    const model = new Json(null);\r\n    model[ECorePackage.xmiversion] = '2.0';\r\n    model[ECorePackage.xmlnsxmi] = 'http://www.omg.org/XMI';\r\n    model[ECorePackage.xmlnsxsi] = 'http://www.w3.org/2001/XMLSchema-instance';\r\n    model[ECorePackage.xmlnsecore] = 'http://www.eclipse.org/emf/2002/Ecore';\r\n    model[ECorePackage.namee] = this.name;\r\n    model[ECorePackage.nsURI] = this.parent.uri();\r\n    model[ECorePackage.nsPrefix] = this.getModelRoot().namespace();\r\n    model[ECorePackage.eClassifiers] = classifiers;\r\n    /*\r\n   \"_xmi:version\": \"2.0\",\r\n   \"_xmlns:xmi\": \"http://www.omg.org/XMI\",\r\n   \"_xmlns:xsi\": \"http://www.w3.org/2001/XMLSchema-instance\",\r\n   \"_xmlns:ecore\": \"http://www.eclipse.org/emf/2002/Ecore\",\r\n   \"_name\": \"bowling\",\r\n   \"_nsURI\": \"http://org/eclipse/example/bowling\",\r\n   \"_nsPrefix\": \"org.eclipse.example.bowling\"*/\r\n    return model; }\r\n\r\n}\r\n\r\n","import {\r\n  Json,\r\n  U,\r\n  IField,\r\n  IEdge,\r\n  IVertex,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  ModelPiece,\r\n  MetaModel,\r\n  ISidebar,\r\n  IGraph,\r\n  IModel,\r\n  Status,\r\n  IReference,\r\n  EdgeStyle,\r\n  IPackage,\r\n  Model,\r\n  Dictionary,\r\n  MClass,\r\n  ModelNone,\r\n  M2Package,\r\n  IClass,\r\n  M3Attribute,\r\n  M3Class, ViewRule, ViewPoint\r\n} from '../../common/Joiner';\r\n\r\n\r\nexport class MPackage extends IPackage {\r\n  metaParent: M2Package;\r\n  // instances: ModelNone[];\r\n  parent: Model;\r\n  childrens: MClass[];\r\n  name: string;\r\n\r\n  constructor(model: Model, json: Json, metaparent: IPackage) {\r\n    super(model, json, metaparent);\r\n    // todo: nel parse il json viene ignorato, cerca come vengono costruite le classi.\r\n    // return;\r\n    // this.setName(name);\r\n    // this.setJson(json);\r\n    this.parse(json, true);\r\n  }\r\n\r\n  getClass(name: string, caseSensitive: boolean = false, throwErr: boolean = true, debug: boolean = true): MClass {\r\n    return super.getClass(name, caseSensitive, throwErr, debug) as MClass; }\r\n\r\n  addEmptyClass(metaVersion: M2Class): MClass {\r\n    const c: MClass = new MClass(this, null, metaVersion);\r\n    if (Status.status.loadedLogic) c.generateVertex();\r\n    console.log('addEmptyClass(); package:', this, '; metaVersion: ', metaVersion, 'classe:', c);\r\n    return c; }\r\n\r\n  generateModel(): Json { return this.parent.generateModel(); }\r\n  /*\r\n  generateModel(rootClass: MClass): Json {\r\n    const key: string = U.toDottedURI(this.uri) + ':' + rootClass.name;\r\n    const xmlnsuri = '@xmlns:org.eclipse.example.' + this.name;\r\n    const value: Json = {\r\n      '@xmlns:xmi': 'http://www.omg.org/XMI',\r\n      xmlnsuri : U.toHttpsURI(this.uri), // \"-xmlns:org.eclipse.example.bowling\": \"https://org/eclipse/example/bowling\",\r\n      '-xmi:version': '2.0',\r\n    };\r\n    let i: number;\r\n    for (i = 0, i < this.childrens.length; i++) {\r\n      const cl: MClass = this.childrens[i];\r\n      value[cl.name] = wrongggg!!! non è nemmeno un package, è una cosa del tipo:\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  getInfo(toLower?: boolean): any {\r\n  }\r\n\r\n  LinkToMetaParent(meta: IPackage): void {\r\n  }\r\n*/\r\n  parse(json: Json, destructive: boolean = true, uri: string = null, name: string = null): void {\r\n    /* e se c'è un riferimento circolare?\r\n      <league (rootclass)>\r\n        <players (attribute)>\r\n          <player>...</player>\r\n        </players>\r\n      </league>\r\n\r\n    \"org.eclipse.example.bowling:League\": {\r\n      \"-xmlns:xmi\": \"http://www.omg.org/XMI\",\r\n      \"-xmlns:org.eclipse.example.bowling\": \"https://org/eclipse/example/bowling\",\r\n      \"-xmi:version\": \"2.0\",\r\n      \"Players\": [\r\n          { \"-name\": \"tizio\" },\r\n          { \"-name\": \"asd\" } ]\r\n  }*/\r\n    let i: number;/*\r\n    this.views = [];\r\n    for(i = 0; i < this.parent.viewpoints.length; i++) {\r\n      const vp: ViewPoint = this.parent.viewpoints[i];\r\n      const v = new PackageView(vp.modelView);\r\n      this.views.push(v);\r\n      vp.modelView.packageViews.push(v); }*/\r\n  }\r\n\r\n}\r\n","import {\r\n  Json,\r\n  U,\r\n  IField,\r\n  IEdge,\r\n  IVertex,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  ModelPiece,\r\n  MetaModel,\r\n  ISidebar,\r\n  IGraph,\r\n  IModel, MetaMetaModel,\r\n  Status, IReference, IClass, ModelNone, M3Class, M2Package, EEnum, Type\r\n} from '../../common/Joiner';\r\nimport {IClassifier} from '../../mClass/IClassifier';\r\n\r\nexport abstract class IPackage extends ModelPiece {\r\n  metaParent: IPackage;\r\n  instances: IPackage[];\r\n  parent: IModel;\r\n  childrens: IClassifier[];\r\n  classes: IClass[];\r\n  enums: EEnum[];\r\n\r\n  constructor(mm: IModel, json: Json, metaParent: IPackage) {\r\n    super(mm, metaParent);\r\n    this.classes = [];\r\n    this.enums = [];\r\n  }\r\n\r\n  abstract parse(json: Json, destructive?: boolean): void;\r\n  abstract addEmptyClass(metaVersion: IClass): IClass;\r\n\r\n  addEmptyEnum(): EEnum {\r\n    const c = new EEnum(this, null);\r\n    if (this instanceof M3Package || !Status.status.loadedLogic) return;\r\n    c.generateVertex();\r\n    Type.updateTypeSelectors(null, false, true, false);\r\n    return c; }\r\n\r\n  // conformability(metaparent: IPackage, outObj?: any, debug?: boolean): number { return 1; }\r\n  fullname(): string { return this.name; }\r\n  getVertex(): IVertex { return undefined; }\r\n\r\n\r\n  getEnum(name: string, caseSensitive: boolean = false, throwErr: boolean = true, debug: boolean = true): EEnum {\r\n    let i: number;\r\n    if (!caseSensitive) { name = name.toLowerCase(); }\r\n    for (i = 0; i < this.enums.length; i++) {\r\n      let classname: string = this.enums[i].name;\r\n      if (!caseSensitive) { classname = classname.toLowerCase(); }\r\n      if (name === classname) { return this.enums[i]; }\r\n    }\r\n    return null; }\r\n\r\n  getClass(name: string, caseSensitive: boolean = false, throwErr: boolean = true, debug: boolean = true): IClass {\r\n    let i: number;\r\n    if (!caseSensitive) { name = name.toLowerCase(); }\r\n    for (i = 0; i < this.classes.length; i++) {\r\n      let classname: string = this.classes[i].name;\r\n      if (!caseSensitive) { classname = classname.toLowerCase(); }\r\n      if (name === classname) { return this.classes[i]; }\r\n    }\r\n    return null; }\r\n\r\n  duplicate(nameAppend: string = '_Copy', newParent: ModelPiece = null): ModelPiece {\r\n    U.pe(true, 'Package duplicate to do.');\r\n    return undefined; }\r\n\r\n  // todo:\r\n  refreshGUI_Alone(debug?: boolean): void {\r\n    let i: number;\r\n    for (i = 0; i < this.childrens.length; i++) { this.childrens[i].refreshGUI_Alone(debug); } }\r\n/*\r\n  LinkToMetaParent(meta: IPackage) {\r\n    U.pe(true, 'linkToMetaParent: todo.');\r\n    const outObj: any = {};\r\n    const comformability: number = this.comformability(meta, outObj);\r\n    if (comformability !== 1) {\r\n      U.pw(true, 'iPackage: ' + this.name + ' not fully conform to ' + meta.name +\r\n        '. Compatibility = ' + comformability * 100 + '%;', outObj );\r\n      return; }\r\n    this.metaParent = meta;\r\n    let i: number;\r\n    const classPermutation: number[] = outObj.classPermutation;\r\n    i = -1;\r\n    console.log(outObj);\r\n    while (++i < classPermutation.length) {\r\n      this.childrens[i].linkToMetaParent(meta.childrens[classPermutation[i]]); }\r\n  }* /\r\n  comformability(meta: IPackage, outObj: any = null/*.classPermutation* /): number {\r\n    // return 1;\r\n    // todo: sbloccalo facendo Mpackage.name conforme a MMPackage.name e abilitando package multipli\r\n    if (this.childrens > meta.childrens) { return 0; }\r\n    const classLenArray: number[] = [];\r\n    let i;\r\n    let j;\r\n    // find best references permutation compability\r\n    i = -1;\r\n    while (++i < meta.childrens.length) { classLenArray.push(i); }\r\n    const classPermut: number[][] = U.permute(classLenArray);\r\n    console.log('possible Package.classes permutations[' + meta.childrens.length + '!]:', classLenArray, ' => ', classPermut);\r\n    const allClassPermutationConformability: number[] = [];\r\n    i = -1;\r\n    let bestClassPermutation: number[] = null;\r\n    let bestClassPermutationValue: number = Number.NEGATIVE_INFINITY;\r\n    while (++i < classPermut.length) {\r\n      j = -1;\r\n      const permutation = classPermut[i];\r\n      let permutationComformability = 0;\r\n      while (++j < permutation.length) {\r\n        const Mclass: IClass = this.childrens[j];\r\n        const MMclass: IClass = meta.childrens[permutation[j]];\r\n        const classComf = !Mclass ? 0 : Mclass.conformability(MMclass);\r\n        permutationComformability += classComf / permutation.length; }\r\n\r\n      allClassPermutationConformability.push(permutationComformability);\r\n      if (permutationComformability > bestClassPermutationValue) {\r\n        bestClassPermutation = permutation;\r\n        bestClassPermutationValue = permutationComformability; }\r\n      if (permutationComformability === 1) { break; }\r\n    }\r\n\r\n    const total = meta.childrens.length + 1; // + name\r\n    let nameComformability = StringSimilarity.compareTwoStrings(this.name, meta.name) / total;\r\n    bestClassPermutationValue = Math.max(0, bestClassPermutationValue * (meta.childrens.length / total));\r\n    if (outObj) {\r\n      outObj.classPermutation = bestClassPermutation;\r\n    }\r\n    nameComformability = 1 / total;\r\n    const ret = nameComformability + bestClassPermutationValue;\r\n    console.log('PKG.comform(', this.name, {0: this}, ', ', meta.name, {0: meta}, ') = ', ret);\r\n    return ret; }*/\r\n}\r\n\r\nexport class M3Package extends IPackage {\r\n  metaParent: M3Package;\r\n  instances: M2Package[];\r\n  parent: MetaMetaModel;\r\n  childrens: M3Class[];\r\n  classes: M3Class[];\r\n\r\n  constructor(model: MetaMetaModel, json: Json) { super(model, json, null); this.parse(json, true); }\r\n\r\n  getClass(name: string, caseSensitive: boolean = false, throwErr: boolean = true, debug: boolean = true): M3Class {\r\n    return super.getClass(name, caseSensitive, throwErr, debug) as M3Class; }\r\n\r\n  addEmptyClass(metaVersion?: M3Class): M3Class {\r\n    const c = new M3Class(this, null);\r\n    return c; }\r\n\r\n  generateModel(): Json {\r\n    return undefined;\r\n  }\r\n\r\n\r\n  parse(json: Json, destructive: boolean = true): void {\r\n    this.name = 'Package';\r\n    this.addEmptyClass(null);\r\n    this.addEmptyEnum();\r\n    this.enums[0].setName('Enumeration');\r\n  }\r\n\r\n  refreshGUI_Alone(debug: boolean = true): void { }\r\n\r\n}\r\n","import {\r\n  Dictionary,\r\n  EdgePointStyle,\r\n  EdgeStyle,\r\n  GraphSize,\r\n  EdgeModes,\r\n  IAttribute,\r\n  M2Class,\r\n  IEdge,\r\n  IFeature,\r\n  IModel,\r\n  IPackage,\r\n  IReference,\r\n  IVertex,\r\n  Json,\r\n  Model,\r\n  Status,\r\n  U,\r\n  IClass,\r\n  MClass,\r\n  MetaModel,\r\n  MetaMetaModel,\r\n  EOperation,\r\n  EParameter,\r\n  MAttribute,\r\n  MReference,\r\n  ViewHtmlSettings,\r\n  M3Reference,\r\n  M2Attribute,\r\n  M3Attribute, M3Class, M2Reference, M3Package, MPackage, M2Package, Type, ELiteral, EEnum, EAnnotation\r\n} from '../common/Joiner';\r\n\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport MouseMoveEvent = JQuery.MouseMoveEvent;\r\nimport MouseDownEvent = JQuery.MouseDownEvent;\r\nimport MouseUpEvent = JQuery.MouseUpEvent;\r\nimport {ViewRule} from '../GuiStyles/viewpoint';\r\nimport {Style}    from '@angular/cli/lib/config/schema';\r\nexport type StyleComplexEntry = {html: Element, htmlobj:ViewHtmlSettings, view: ViewRule, ownermp: ModelPiece, isownhtml: boolean, isinstanceshtml: boolean, isGlobalhtml: boolean};\r\nexport class Info {\r\n  static forConsole(obj: any): any {}\r\n\r\n  static setraw(baseJson: object, k: string, v: any, toLower: boolean = true): string { return Info.set(baseJson, k, v, '', toLower); }\r\n  static setc(baseJson: object, k: string, v: any, toLower: boolean = true): string { return Info.set(baseJson, k, v, '@', toLower); }\r\n  static seti(baseJson: object, k: string, v: any, toLower: boolean = true): string  { return Info.set(baseJson, k, v, '#', toLower); }\r\n  static set(baseJson: object, k: string, v: any, prefixc: string = '_', toLower: boolean = true): string {\r\n    k = toLower ? k.toLowerCase() : k;\r\n    let prefix = prefixc;\r\n    // U.pw(baseJson[prefix + k], 'setinfo() name altready set: ', k, baseJson);\r\n    while (baseJson[prefix + k]) { prefix += prefixc === '' ? '*' : prefixc; }\r\n    baseJson[prefix + k] = v;\r\n    // if (prefix === '') { baseJson[prefixc + k] = v; }\r\n    return prefix + k; }\r\n\r\n  static unsetraw(baseJson: object, k: string, toLower: boolean = true): void { return Info.unset(baseJson, k, '', toLower); }\r\n  static unsetc(baseJson: object, k: string, toLower: boolean = true): void { return Info.unset(baseJson, k, '@', toLower); }\r\n  static unseti(baseJson: object, k: string, toLower: boolean = true): void { return Info.unset(baseJson, k, '#', toLower); }\r\n  static unset(baseJson: object, k: string, prefixc: string = '_', toLower: boolean = true): void {\r\n    k = prefixc + (toLower ? k.toLowerCase() : k);\r\n    delete baseJson[k]; }\r\n\r\n  static renameraw(o: object, k1: string, k2: string, toLower: boolean = true): void { return Info.rename(o, k1, k2, '', toLower); }\r\n  static renamec(o: object, k1: string, k2: string, toLower: boolean = true): void { return Info.rename(o, k1, k2, '@', toLower); }\r\n  static renamei(o: object, k1: string, k2: string, toLower: boolean = true): void  { return Info.rename(o, k1, k2, '#', toLower); }\r\n  static rename(baseJson: object, k1: string, k2: string, prefixc: string = '_', toLower: boolean = true): void {\r\n    k1 = prefixc + (toLower ? k1.toLowerCase() : k2);\r\n    k2 = prefixc + (toLower ? k1.toLowerCase() : k2);\r\n    const old: any = baseJson[k1];\r\n    delete baseJson[k1];\r\n    baseJson[k2] = old; }\r\n\r\n  static merge(info: Info, targetinfo: Info, prefixc: string = '->'): void {\r\n    let key: string;\r\n    if (!targetinfo) { return; }\r\n    for (key in targetinfo) {\r\n      if (!targetinfo.hasOwnProperty(key)) { continue; }\r\n      if (!prefixc) { switch (key[0]) {\r\n      default: prefixc = ''; break;\r\n      case '#': case '_': case '@': prefixc = key[0]; break; } }\r\n      // console.log('Info.set(' + info + ', ' + key + ', ' + targetinfo[key] + ', ' + prefixc);\r\n      Info.set(info, key, targetinfo[key], prefixc); }\r\n  }\r\n}\r\n\r\nexport abstract class ModelPiece {\r\n  private static idToLogic = {};\r\n  private static idMax = 0;\r\n  id: number = null;\r\n  parent: ModelPiece = null;\r\n  childrens: ModelPiece[] = [];\r\n  metaParent: ModelPiece = null;\r\n  instances: ModelPiece[] = [];\r\n  name: string = null;\r\n  // styleOfInstances:Element = null;\r\n  // customStyleToErase: Element = null;\r\n//  styleobj: ModelPieceStyleEntry = null;\r\n  key: number[] = null;\r\n  views: ViewRule[] = null;\r\n  annotations: EAnnotation[] = [];\r\n  detachedViews: ViewRule[] = []; // required to delete modelpiece\r\n\r\n  static GetStyle(model: IModel, tsClass: string, checkCustomizedFirst: boolean = true): HTMLElement | SVGElement {\r\n    let rootSelector: string;\r\n    if (model.isM()) { rootSelector = '.MDefaultStyles';\r\n    } else if (model.isMM()) { rootSelector = '.MMDefaultStyles';\r\n    } else { U.pe(true, 'm3 objects should not call getStyle()'); }\r\n\r\n    let $html: JQuery<HTMLElement | SVGElement>;\r\n    const $root: JQuery<HTMLElement | SVGElement> = $((checkCustomizedFirst ? '.customized' : '.immutable') + rootSelector);\r\n    if (tsClass.indexOf('m1') === 0 || tsClass.indexOf('m2') === 0) { tsClass = tsClass.substr(2); }\r\n    switch (tsClass) {\r\n    default: U.pe(true, 'unrecognized TS Class: ' + tsClass); return null;\r\n    case 'EEnum': $html = $root.find('.template.EEnum'); break;\r\n    case 'ELiteral': $html = $root.find('.template.ELiteral'); break;\r\n    case 'Class': $html = $root.find('.template.Class'); break;\r\n    case 'Attribute': $html = $root.find('.template.Attribute'); break;\r\n    case 'Reference': $html = $root.find('.template.Reference'); break;\r\n    case 'EOperation': $html = $root.find('.template.Operation'); break;\r\n    case 'EParameter': $html = $root.find('.template.Parameter'); break; }\r\n    U.pw(checkCustomizedFirst && $html.length > 1,\r\n      'found more than one match for custom global style, should there be only 0 or 1.', $html, $root, this, tsClass);\r\n    if (checkCustomizedFirst && $html.length === 0) { return ModelPiece.GetStyle(model, tsClass, false); }\r\n    /*console.log('class?' + (this instanceof IClass), $root.find('.Template'), $root.find('.Class'),\r\n      $root.find('.Template.Class'));\r\n    console.log('condition:', !customizeds, ' && ', $html.length !== -1);*/\r\n    U.pe(!checkCustomizedFirst && $html.length !== 1,\r\n      'expected exactly 1 match for the un-customized global style, found instead ' + $html.length + ':', $html, $root, this);\r\n    const ret: HTMLElement | SVGElement = U.cloneHtml($html[0], true);\r\n    ret.classList.remove('template');\r\n    ret.classList.remove('Customized');\r\n    return ret; }\r\n\r\n  public static getByKey(path: number[], realindexfollowed: {indexFollowed: string[] | number[], debugArr: {index: string | number, elem: any}[]} = null): ModelPiece {\r\n    U.pe(!Array.isArray(path), 'ModelPiece.getByKey() should only be called with an array as key:', path);\r\n    U.pe(path.length < 1, 'ModelPiece.getByKey() path array must have >= 1 elements:', path);\r\n    const tmpRoot = {'childrens': [Status.status.m, Status.status.mm, Status.status.mmm]};\r\n    let ret = U.followIndexesPath(tmpRoot, path, 'childrens', realindexfollowed, true);\r\n    U.pe(!(ret instanceof ModelPiece), 'ModelPiece.getByKey failed: ', ret, realindexfollowed);\r\n    return ret; }\r\n\r\n  public static getByKeyStr(key: string, realindexfollowed: {indexFollowed: string[] | number[], debugArr: {index: string | number, elem: any}[]} = null): ModelPiece {\r\n    return ModelPiece.getByKey(JSON.parse(key), realindexfollowed); }\r\n\r\n  static get(e: JQuery.ChangeEvent | ClickEvent | MouseMoveEvent | MouseDownEvent | MouseUpEvent): ModelPiece {\r\n    return ModelPiece.getLogic(e.target); }\r\n\r\n  public static getLogicalRootOfHtml(html0: Element): Element {\r\n    let html: HTMLElement | SVGElement = html0 as any;\r\n    if (!html) { return null; }\r\n    while ( html && (!html.dataset || !html.dataset.modelPieceID)) { html = html.parentNode as HTMLElement | SVGElement; }\r\n    return html; }\r\n\r\n  static getLogic(html: HTMLElement | SVGElement): ModelPiece {\r\n    html = this.getLogicalRootOfHtml(html) as any;\r\n    const ret: ModelPiece = html ? ModelPiece.getByID(+html.dataset.modelPieceID) : null;\r\n    // U.pe(!(ret instanceof T), 'got logic with unexpected class type:', this);\r\n    return ret; }\r\n\r\n  static getByID(id: number): ModelPiece { return ModelPiece.idToLogic[id]; }\r\n\r\n  constructor(parent: ModelPiece, metaVersion: ModelPiece) {\r\n    this.assignID();\r\n    this.parent = parent;\r\n    this.metaParent = metaVersion;\r\n    this.instances = [];\r\n    this.childrens = [];\r\n    this.views = [];\r\n    if (this.parent) { U.ArrayAdd(this.parent.childrens, this); }\r\n    if (this.metaParent) { U.ArrayAdd(this.metaParent.instances, this); }\r\n  }\r\n\r\n  assignID(): number {\r\n    this.id = ModelPiece.idMax++;\r\n    ModelPiece.idToLogic[this.id] = this;\r\n    return this.id; }\r\n\r\n  //todo: devo stare attento ogni volta che aggiungo-elimino un elemento a chiamare updateKey()\r\n  // le views si salvano perchè usano la chiave all avvio e poi la rigenerano ad ogni salvataggio e non la usano ulteriormente se non per generare\r\n  // la savestring.\r\n  getKey(): number[] { return this.key ? this.key : this.updateKey(); }\r\n  getKeyStr(): string { return JSON.stringify(this.getKey()); }\r\n\r\n  updateKey(): number[] {\r\n    const m = this.getModelRoot();\r\n    const mnum = m.isM3() ? 2 : (m.isM2() ? 1 : 0);\r\n    const pathIndex: number[] = U.getIndexesPath(this, 'parent', 'childrens');\r\n    return this.key = [mnum, ...pathIndex]; }\r\n\r\n  replaceVarsSetup(): void { return; }\r\n\r\n  linkToLogic<T extends HTMLElement | SVGElement>(html: T): void {\r\n    if (this.id === null || this.id === undefined) { U.pw(true, 'undefined id:', this); return; }\r\n    html.dataset.modelPieceID = '' + this.id; }\r\n\r\n  getm2(): MetaModel {\r\n    const root: IModel = this.getModelRoot();\r\n    if (root instanceof Model) { return root.metaParent; }\r\n    if (root instanceof MetaModel) { return root; }\r\n    if (root instanceof MetaMetaModel) { return root.instances[0]; }\r\n    U.pe(true, 'failed to get root.'); }\r\n\r\n  getModelRoot(): IModel {\r\n    let p: ModelPiece = this;\r\n    let i = 0;\r\n    while (p.parent && p !== p.parent && i++ < 6) { p = p.parent; }\r\n    U.pe(!p  || !(p instanceof IModel), 'failed to get model root:', this, 'm lastParent:', p);\r\n    return p as any as IModel; }\r\n\r\n  isChildNameTaken(s: string): boolean {\r\n    let i;\r\n    for (i = 0; i < this.childrens.length; i++) { if (s === this.childrens[i].name) { return true; } }\r\n    return false; }\r\n\r\n  shouldBeDisplayedAsEdge(set: boolean = null): boolean {\r\n    if (set !== null) {\r\n      U.pe( !(this instanceof IClass), 'shouldBeDisplayedAsEdge(' + set + ') should only be set on M2Class instances');\r\n      (this as any as IClass).shouldBeDisplayedAsEdgeVar = set;\r\n      Type.updateTypeSelectors(null, false, false, true);\r\n      return set; }\r\n    if (this instanceof IModel) { return false; }\r\n    if (this instanceof IPackage) { return false; }\r\n    if (this instanceof EEnum) { return false; }\r\n    if (this instanceof IClass) { return (this as IClass).shouldBeDisplayedAsEdgeVar; }\r\n    if (this instanceof IAttribute) { return false; }\r\n    if (this instanceof IReference) { return true; }\r\n    if (this instanceof EOperation) { return false; }\r\n    if (this instanceof EParameter) { return false; }\r\n    if (this instanceof ELiteral) { return false; }\r\n    U.pe(true, 'unrecognized class:', this);\r\n  }\r\n\r\n  refreshGUI(debug: boolean = false): void {\r\n    if (!Status.status.loadedLogic) { return; }\r\n    let model: IModel = this.getModelRoot();\r\n    const thingsToRefresh: ModelPiece[] = [this];\r\n    let i: number;\r\n\r\n    if (Status.status.refreshModeAll) {\r\n      U.ArrayAdd(thingsToRefresh, Status.status.mmm);\r\n      U.ArrayAdd(thingsToRefresh, Status.status.mm);\r\n      U.ArrayAdd(thingsToRefresh, Status.status.m); }\r\n    if (Status.status.refreshModelAndInstances && model) {\r\n      U.ArrayAdd(thingsToRefresh, model);\r\n      for (i = 0; model.instances && i < model.instances.length; i++) { U.ArrayAdd(thingsToRefresh, model.instances[i]); }\r\n      return; }\r\n    if (Status.status.refreshModelAndParent && model && model.metaParent) {\r\n      model = model.metaParent;\r\n      U.ArrayAdd(thingsToRefresh, model);\r\n      for (i = 0; model.instances && i < model.instances.length; i++) { U.ArrayAdd(thingsToRefresh, model.instances[i]); }\r\n      return; }\r\n    if (Status.status.refreshInstancesToo) {\r\n      for (i = 0; this.instances && i < this.instances.length; i++) { U.ArrayAdd(thingsToRefresh, this.instances[i]); } }\r\n    if (Status.status.refreshModel && model) { U.ArrayAdd(thingsToRefresh, model); }\r\n    if (Status.status.refreshMetaParentToo && this.metaParent) { U.ArrayAdd(thingsToRefresh, this.metaParent); }\r\n    if (Status.status.refreshParentToo && this.parent) { U.ArrayAdd(thingsToRefresh, this.parent); }\r\n\r\n    for (i = 0; i < thingsToRefresh.length; i++) {\r\n      const mp: ModelPiece = thingsToRefresh[i];\r\n      if (mp) { mp.refreshGUI_Alone(debug); }\r\n    }\r\n  }\r\n\r\n  refreshInstancesGUI(): void {\r\n    let i = 0;\r\n    U.pe(!this.instances, '', this);\r\n    while (i < this.instances.length) {\r\n      try { this.instances[i++].refreshGUI_Alone(false); } catch (e) {} finally {}\r\n    }\r\n  }\r\n\r\n  mark(markb: boolean, key: string, color: string = 'red', radiusX: number = 10, radiusY: number = 10,\r\n       width: number = 5, backColor: string = 'none', extraOffset: GraphSize = null): void {\r\n    const vertex: IVertex = this.getVertex();\r\n    // const edge: IEdge[] = (this as any as IReference | IClass).getEdges();\r\n    if (vertex && vertex.isDrawn()) { vertex.mark(markb, key, color, radiusX, radiusY, width, backColor, extraOffset); }\r\n    let edges: IEdge[] = null;\r\n    if (this instanceof IClass && this.shouldBeDisplayedAsEdge()) { edges = (this as IClass).getEdges(); }\r\n    if (this instanceof IReference) { edges = (this as IReference).getEdges(); }\r\n    let i: number;\r\n    for (i = 0; edges && i < edges.length; i++) { edges[i].mark(markb, key, color); }\r\n  }\r\n  generateModelString(): string {\r\n    const json: Json = this.generateModel();\r\n    // console.log('genmodelstring:', json, 'this:',  this);\r\n    return JSON.stringify(json, null, 4);\r\n  }\r\n\r\n  abstract refreshGUI_Alone(debug?: boolean): void;\r\n  abstract fullname(): string;\r\n  endingName(valueMaxLength: number = 10): string { return ''; }\r\n\r\n  public printableName(valueMaxLength: number = 5): string {\r\n    if (this.name !== null) { return this.fullname(); }\r\n    const ending: String = this.endingName(valueMaxLength);\r\n    return this.metaParent.fullname() + ':' + this.id + (ending && ending !== '' ? ':' + ending : ''); }\r\n\r\n  public printableNameshort(valueMaxLength: number = 5): string {\r\n    if (this.name !== null) { return this.fullname(); }\r\n    const ending: String = this.endingName(valueMaxLength);\r\n    return this.metaParent.name + ':' + this.id + (ending && ending !== '' ? ':' + ending : ''); }\r\n\r\n  abstract parse(json: Json, destructive?: boolean): void;\r\n  abstract getVertex(): IVertex;\r\n  abstract generateModel(): Json;\r\n  abstract duplicate(nameAppend?: string, newParent?: ModelPiece): ModelPiece;\r\n  // abstract conformability(metaparent: ModelPiece, outObj?: any/*.refPermutation, .attrPermutation*/, debug?: boolean): number;\r\n  setName0(value: string, refreshGUI: boolean = false, warnDuplicateFix: boolean = true, key: string, allowEmpty: boolean): string {\r\n    const valueOld: string = this['' + key];\r\n    const valueInputError = value;\r\n    value = value !== null && value !== undefined ? '' + value.trim() : null;\r\n    if (!allowEmpty && (!value || value === '')) { U.pw(true, key + ' cannot be empty.'); return valueOld; }\r\n    if (value === valueOld) { return valueOld; }\r\n    const regexp: RegExp = new RegExp((allowEmpty ? '^$|' : '') + '^[a-zA-Z_$][a-zA-Z_$0-9]*$');\r\n//    console.log('set' + key + '.valid ? ' + regexp.test(value) + ' |' + value + '|');\r\n    if (!regexp.test(value)) {\r\n      value = value.replace(/([^a-zA-Z_$0-9])/g, '');\r\n      let i: number = 0;\r\n      while (value[i] && value[i] >= '0' && value[i] <= '9') i++;\r\n      value = value.substr(i);\r\n      let remainder: string = value;\r\n      let firstChar: string = '' || '';\r\n      while (remainder.length > 0 && firstChar === '') {\r\n        firstChar = remainder[0].replace('[^a-zA-Z_$]', '');\r\n        remainder = remainder.substring(1); }\r\n      value = firstChar + remainder;\r\n      U.pw(true, 'a valid ' + key + ' must be match this regular expression: ' + regexp.compile().toString()\r\n        + '; trying autofix: |' + valueInputError + '| --> + |' + value + '|');\r\n      return this['set' + U.firstToUpper(key)](value, true || refreshGUI); }\r\n\r\n\r\n    if (value !== '') {\r\n      let nameFixed: boolean = false;\r\n      while (this.parent && this.parent['isChild' +  U.firstToUpper(key) + 'Taken'](value)) {\r\n        nameFixed = true;\r\n        value = U.increaseEndingNumber(value, false, false); }\r\n      U.pe(nameFixed && (valueInputError === value), 'increaseEningNumber failed:', value, this, this.parent ? this.parent.childrens : null);\r\n      U.pw(nameFixed && warnDuplicateFix, 'that ' + key + ' is already used in this context, trying autofix: |'\r\n        + valueInputError + '| --> + |' + value + '|'); }\r\n\r\n    this['' + key] = value;\r\n    if (refreshGUI) { this.refreshGUI(); }\r\n    return this['' + key]; }\r\n\r\n  // meant to be called from user js.\r\n  getChildren(name: string, caseSensitive: boolean = false): ModelPiece {\r\n    let i: number;\r\n    U.pe(!name || name !== '' + name, 'ModelPiece.getChildren() name must be a non-empty string, found: |' + name + '|', name);\r\n    if (!caseSensitive) name = name.toLowerCase();\r\n    const m: IModel = this.getModelRoot();\r\n    const ism1: boolean = m.isM1();\r\n    for (i = 0; i < this.childrens.length; i++){\r\n      const mp: ModelPiece = this.childrens[i];\r\n      let name2: string = (ism1 ? mp.metaParent.name : mp.name);\r\n      if (!caseSensitive) name2 = name2 && name2.toLowerCase();\r\n      if (name === name2) return mp;\r\n    }\r\n    return null; }\r\n\r\n  setName(value: string, refreshGUI: boolean = false, warnDuplicateFix: boolean = true): string { return this.setName0(value, refreshGUI, warnDuplicateFix, 'name', false); }\r\n  setNameOld(value: string, refreshGUI: boolean = false, warnDuplicateFix: boolean = true): string {\r\n    const valueOld: string = this.name;\r\n    const valueInputError = value;\r\n    value = value ? '' + value.trim() : null;\r\n    if (!value || value === '') { U.pw(true, 'name cannot be empty.'); return valueOld; }\r\n    if (value === valueOld) { return valueOld; }\r\n    const regexp: RegExp = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\r\n    // console.log('setName.valid ? ' + regexp.test(value) + ' |' + value + '|');\r\n    if (!regexp.test(value)) {\r\n      value = value.replace(/([^a-zA-Z_$0-9])/g, '');\r\n      let i: number = 0;\r\n      while (value[i] && value[i] >= '0' && value[i] <= '9') i++;\r\n      value = value.substr(i);\r\n      let remainder: string = value;\r\n      let firstChar: string = '' || '';\r\n      while (remainder.length > 0 && firstChar === '') {\r\n        firstChar = remainder[0].replace('[^a-zA-Z_$]', '');\r\n        remainder = remainder.substring(1); }\r\n      value = firstChar + remainder;\r\n      U.pw(true, 'a valid name must be match this regular expression: ' + regexp.compile().toString()\r\n        + '; trying autofix: |' + valueInputError + '| --> + |' + value + '|');\r\n      return this.setName(value, true || refreshGUI); }\r\n\r\n    let nameFixed: boolean = false && false;\r\n    while (this.parent && this.parent.isChildNameTaken(value)) {\r\n      nameFixed = true;\r\n      value = U.increaseEndingNumber(value, false, false); }\r\n    U.pe(nameFixed && (valueInputError === value), 'increaseEningNumber failed:', value, this, this.parent ? this.parent.childrens : null);\r\n    U.pw(nameFixed && warnDuplicateFix, 'that name is already used in this context, trying autofix: |'\r\n      + valueInputError + '| --> + |' + value + '|');\r\n    this.name = value;\r\n    const model: IModel = this.parent ? this.getModelRoot() : null;\r\n    let i: number;\r\n    // for (i = 0; model && i < model.instances.length; i++) { model.instances[i].sidebar.fullnameChanged(valueOld, this.name); }\r\n    if (refreshGUI) { this.refreshGUI(); }\r\n    Type.updateTypeSelectors(null, false, false, true);\r\n    return this.name; }\r\n\r\n  fieldChanged(e: JQuery.ChangeEvent): void {\r\n    // todo: fix for m2 too. i need to enable custom input in custom viewpoints.\r\n    // U.pe(true, U.getTSClassName(this) + '.fieldChanged() should never be called.');\r\n  }\r\n\r\n  copy(other: ModelPiece, nameAppend: string = '_Copy', newParent: ModelPiece = null): void {\r\n    this.setName(other.name + nameAppend);\r\n    let i: number;\r\n    this.views = [];\r\n    for (i = 0; i < other.views.length; i++) {\r\n      const v: ViewRule = other.views[i];\r\n      U.ArrayAdd(this.views, v.duplicate());\r\n    }\r\n    this.parent = newParent ? newParent : other.parent;\r\n    if (this.parent) { U.ArrayAdd(this.parent.childrens, this); }\r\n\r\n    this.childrens = [];\r\n    for (i = 0; i < other.childrens.length; i++) { this.childrens.push(other.childrens[i].duplicate('', this)); }\r\n    this.metaParent = other.metaParent;\r\n    if (this.metaParent) { U.ArrayAdd(this.metaParent.instances, this); }\r\n    this.instances = [];\r\n    this.refreshGUI(); }\r\n\r\n  delete(): void {\r\n    if (this.parent) {\r\n      U.arrayRemoveAll(this.parent.childrens, this);\r\n      this.parent = null; }\r\n    if (this.metaParent) {\r\n      U.arrayRemoveAll(this.metaParent.instances, this);\r\n      this.metaParent = null; }\r\n    let i: number;\r\n    let arr: any = U.shallowArrayCopy<ViewRule>(this.views);\r\n    for (i = 0; arr && i < arr.length; i++) { arr[i].delete(); }\r\n    arr = U.shallowArrayCopy<ViewRule>(this.detachedViews);\r\n    for (i = 0; arr && i < arr.length; i++) { arr[i].delete(); }\r\n    arr = U.shallowArrayCopy<ModelPiece>(this.childrens);\r\n    for (i = 0; arr && i < arr.length; i++) { arr[i].delete(); }\r\n    arr = U.shallowArrayCopy<ModelPiece>(this.instances);\r\n    for (i = 0; arr && i < arr.length; i++) { arr[i].delete(); }\r\n  }\r\n\r\n  validate(): boolean {\r\n    const names: Dictionary<string, ModelPiece> = {};\r\n    let i: number;\r\n    if (!U.isValidName(name)) { this.mark(true, 'Invalid name'); return false; }\r\n    for (i = 0; i < this.childrens.length; i++) {\r\n      const child: ModelPiece = this.childrens[i];\r\n      const name: string = child.name;\r\n      if (names.hasOwnProperty(name)) { child.mark(true, 'Duplicate children name'); return false; }\r\n      child.validate();\r\n      names[name] = child; }\r\n    return true; }\r\n  /*\r\n    setStyle_SelfLevel_1(html: Element): void { this.customStyleToErase = html; }\r\n    setStyle_InstancesLevel_2(html: Element): void { this.styleOfInstances = html; }\r\n    setStyle_GlobalLevel_3(html: HTMLElement | SVGElement): void {\r\n      const oldCustomStyle: HTMLElement | SVGElement = this.getGlobalLevelStyle(true);\r\n      if (oldCustomStyle) { oldCustomStyle.parentNode.removeChild(oldCustomStyle); }\r\n      const model: IModel = this.getModelRoot();\r\n      let rootSelector: string;\r\n      if (model.isM()) { rootSelector = '.MDefaultStyles';\r\n      } else if (model.isMM()) { rootSelector = '.MMDefaultStyles';\r\n      } else { U.pe(true, 'm3 objects should not call getStyle()'); }\r\n      let selectorClass: string = '' + '_ERROR_';\r\n      if (false && false) {\r\n      } else if (this instanceof IClass) { selectorClass = ('Class');\r\n      } else if (this instanceof IReference) { selectorClass = ('Reference');\r\n      } else if (this instanceof IAttribute) { selectorClass = ('Attribute'); }\r\n\r\n      let $root: JQuery<HTMLElement | SVGElement>;\r\n      $root = $('.customized' + rootSelector);\r\n      const container: HTMLElement | SVGElement = $root[0];\r\n      html.classList.add('Template', selectorClass, (this instanceof IClass ? 'Vertex' : ''));\r\n      container.appendChild(html); }*/\r\n\r\n  getGlobalLevelStyle(checkCustomizedFirst: boolean = true): HTMLElement | SVGElement {\r\n    let tsClass: string = this.getClassName();/*\r\n    if (false && false ) {\r\n    } else if (this instanceof IClass) { tsClass = 'Class';\r\n    } else if (this instanceof IAttribute) { tsClass = 'Attribute';\r\n    } else if (this instanceof IReference) { tsClass = 'Reference';\r\n    } else if (this instanceof EOperation) { tsClass = 'EOperation';\r\n    } else if (this instanceof EParameter) { tsClass = 'EParameter';\r\n    } else { tsClass = 'ERROR: ' + U.getTSClassName(this); }*/\r\n    return ModelPiece.GetStyle(this.getModelRoot(), tsClass, checkCustomizedFirst); }\r\n\r\n\r\n  getInheritableStyle(): StyleComplexEntry {\r\n    let i: number;\r\n    const ret: StyleComplexEntry = {html:null, htmlobj:null, view:null, ownermp:null, isownhtml:null, isinstanceshtml:null, isGlobalhtml:null};\r\n    for (i = this.views.length; --i >= 0;) {\r\n      let v: ViewRule = this.views[i];\r\n      // if (!v.viewpoint.isApplied) continue;\r\n      if (!v.htmli || !v.htmli.getHtml()) continue;\r\n      ret.html = v.htmli.getHtml();\r\n      ret.htmlobj = v.htmli;\r\n      ret.view = v;\r\n      ret.ownermp = this;\r\n      ret.isGlobalhtml = false;\r\n      ret.isinstanceshtml = true;\r\n      ret.isownhtml = false;\r\n      return ret; }\r\n    return null; }\r\n\r\n  getInheritedStyle(): StyleComplexEntry { return this.metaParent ? this.metaParent.getInheritableStyle() : null; }\r\n  getStyle(): StyleComplexEntry {\r\n    let j: number;\r\n    let i: number;\r\n    const ret: StyleComplexEntry = {html:null, htmlobj:null, view:null, ownermp:null, isownhtml:null, isinstanceshtml:null, isGlobalhtml:null};\r\n    for (j = this.views.length; --j >=0 ;){\r\n      const v: ViewRule = this.views[j];\r\n      if (!v.htmlo || !v.htmlo.getHtml()) continue;\r\n      ret.html = v.htmlo.getHtml();\r\n      ret.htmlobj = v.htmlo;\r\n      ret.view = v;\r\n      ret.ownermp = this;\r\n      ret.isGlobalhtml = false;\r\n      ret.isinstanceshtml = false;\r\n      ret.isownhtml = true;\r\n      return ret; }\r\n    const tmpret = this.getInheritedStyle();\r\n    if (tmpret) return tmpret;\r\n    ret.html = this.getGlobalLevelStyle();\r\n    ret.htmlobj = null;\r\n    ret.view = null;\r\n    ret.ownermp = null;\r\n    ret.isGlobalhtml = true;\r\n    ret.isinstanceshtml = false;\r\n    ret.isownhtml = false;\r\n    return ret; }\r\n\r\n  /*\r\n  getStyleOld(): ViewHtmlSettings { return this.views.getHtml(this); }\r\n  getStyleOldOld(): Element { return this.views.getHtml(this); }\r\n  getStyleOldissimo(debug: boolean = true): Element {\r\n    // prima precedenza: stile personale.\r\n    let ret: Element;\r\n    if (this.customStyleToErase) { ret = this.customStyleToErase; ret.id = '' + this.id; return ret; }\r\n    // seconda precedenza: stile del meta-parent.\r\n    const metap1 = this.metaParent;\r\n    if (metap1 && metap1.styleOfInstances) { ret = metap1.styleOfInstances; ret.id = '' + this.id; return ret; }\r\n    // terzo e quarto livello: search for customized third-override-css-like global styles; or immutable fourth global styles.\r\n    ret = this.getGlobalLevelStyle(true);\r\n    ret.id = '' + this.id;\r\n    return ret; }\r\n    getStyleObj(): ModelPieceStyleEntry {\r\n      if (this.styleobj) { return this.styleobj; }\r\n      return this.styleobj = ModelPieceStyleEntry.load(this.getStyle(), null); }*/\r\n\r\n  getInfo(toLower: boolean = false): Info {\r\n    let i: number;\r\n    const info: any = new Info();\r\n    const instancesInfo: any = {};\r\n    const childrenInfo: any = {};\r\n    const model: IModel = this.getModelRoot();\r\n    Info.set(info, 'tsClass', U.getTSClassName(this));\r\n    Info.set(info, 'this', this);\r\n    if (!(this instanceof IModel)) { Info.set(info, 'parent', this.parent); }\r\n    if (!(this instanceof IFeature)) { Info.set(info, 'childrens', childrenInfo); }\r\n    if (model.isMM()) {\r\n      Info.set(info, 'instance', instancesInfo);\r\n      Info.set(info, 'name', this.name);\r\n    } else { Info.set(info, 'metaParent', this.metaParent); }\r\n    for (i = 0; this.childrens && i < this.childrens.length; i++) {\r\n      const child = this.childrens[i];\r\n      let name = model.isM1() && child.metaParent ? child.metaParent.name : child.name;\r\n      U.pw(!name, 'getInfo() getName error: probably some metaparent is null.', this, child);\r\n      if (!name) name = '';\r\n      Info.setc(info, name.toLowerCase(), child);\r\n      Info.setraw(childrenInfo, name.toLowerCase(), child); }\r\n    for (i = 0; this.instances && i < this.instances.length; i++) { Info.seti(instancesInfo,  '' + i, this.instances[i]); }\r\n    return info; }\r\n\r\n  getHtmlOnGraph(): HTMLElement | SVGElement {\r\n    if (this instanceof IPackage) return null;\r\n    let html: HTMLElement | SVGElement = this.getVertex().getHtml();\r\n    if (this instanceof IClass) return html;\r\n    html = $(html).find('*[data-modelPieceID=\"' + this.id + '\"]')[0];\r\n    return html ? html : null; }\r\n\r\n  getLastViewWith(fieldname: string): ViewRule {\r\n    let i: number = this.views.length;\r\n    while (--i >= 0) {\r\n      const v: ViewRule = this.views[i];\r\n      const val: any = v['' + fieldname];\r\n      // U.pe(fieldname in v, 'property |' + fieldname + '| does not exist in ViewRule. Field name has changed without changing the string\r\n      // accordingly.');\r\n      if (val !== undefined && val !== null) return v;\r\n    }\r\n    if (!this.metaParent) return null;\r\n    i = this.metaParent.views.length;\r\n    while (--i >= 0) {\r\n      const v: ViewRule = this.metaParent.views[i];\r\n      const val: any = v['' + fieldname];\r\n      // U.pe(fieldname in v, 'property |' + fieldname + '| does not exist in ViewRule. Field name has changed without changing the string\r\n      // accordingly.(2)');\r\n      if (val !== undefined && val !== null) return v;\r\n    }\r\n    return null; }\r\n\r\n  getLastView(): ViewRule { return this.views[this.views.length - 1]; }\r\n/*\r\n  addView(v: ViewRule): void {\r\n    // if (!v.viewpoint.viewsDictionary[this.id]) {  v.viewpoint.viewsDictionary[this.id] = []; }\r\n    v.viewpoint.viewsDictionary[this.id] = v;\r\n    U.ArrayAdd(this.views, v); }\r\n  resetViews(): void { this.views = []; }\r\n*/\r\n  getClassName(): string {\r\n    if(this instanceof M3Class) { return 'm3Class'; }\r\n    if(this instanceof M2Class) { return 'm2Class'; }\r\n    if(this instanceof MClass) { return 'm1Class'; }\r\n    if(this instanceof EEnum) { return 'EEnum'; }\r\n    if(this instanceof M3Attribute) { return 'm3Attribute'; }\r\n    if(this instanceof M2Attribute) { return 'm2Attribute'; }\r\n    if(this instanceof MAttribute) { return 'm1Attribute'; }\r\n    if(this instanceof M3Reference) { return 'm3Reference'; }\r\n    if(this instanceof M2Reference) { return 'm2Reference'; }\r\n    if(this instanceof MReference) { return 'm1Reference'; }\r\n    if(this instanceof M3Package) { return 'm3Package'; }\r\n    if(this instanceof M2Package) { return 'm2Package'; }\r\n    if(this instanceof MPackage) { return 'm1Package'; }\r\n    if(this instanceof MetaMetaModel) { return 'm3Model'; }\r\n    if(this instanceof MetaModel) { return 'm2Model'; }\r\n    if(this instanceof Model) { return 'm1Model'; }\r\n    if(this instanceof EOperation) { return 'EOperation'; }\r\n    if(this instanceof EParameter) { return 'EParameter'; }\r\n    if(this instanceof ELiteral) { return 'ELiteral'; }\r\n    U.pe(true, 'failed to find class:', this);\r\n  }\r\n  getInstanceClassName(): string {\r\n    let ret = this.getClassName();\r\n    if (ret.indexOf('m1') !== -1) return null;\r\n    return ret.replace('m2', 'm1').replace('m3', 'm2'); }\r\n\r\n  pushUp(): void {\r\n    if (!this.parent) { return; }\r\n    let arr: ModelPiece[];\r\n    let parent: any = this.parent;\r\n    let i: number;\r\n    if ((arr = parent.childrens) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i - 1, this); }\r\n    if ((arr = parent.enums) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i - 1, this); }\r\n    if ((arr = parent.classes) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i - 1, this); }\r\n    if ((arr = parent.attributes) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i - 1, this); }\r\n    if ((arr = parent.references) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i - 1, this); }\r\n    if ((arr = parent.operations) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i - 1, this); }\r\n    this.updateKey();\r\n  }\r\n  pushDown(): void {\r\n    if (!this.parent) { return; }\r\n    let arr: ModelPiece[];\r\n    let parent: any = this.parent;\r\n    let i: number;\r\n    if ((arr = parent.childrens) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i - 1, this); }\r\n    if ((arr = parent.enums) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i + 1, this); }\r\n    if ((arr = parent.classes) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i + 1, this); }\r\n    if ((arr = parent.attributes) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i + 1, this); }\r\n    if ((arr = parent.references) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i + 1, this); }\r\n    if ((arr = parent.operations) && (i = arr.indexOf(this)) !== -1){\r\n      U.arrayRemoveAll(arr, this);\r\n      U.arrayInsertAt(arr, i + 1, this); }\r\n    this.updateKey();\r\n  }\r\n}\r\nexport abstract class ModelNone extends ModelPiece {}\r\n","export default \"::ng-deep :root  {/* css variables */\\r\\n  --topbarH: 40px;\\r\\n  --sidebarW: 20vw;\\r\\n  --mainFontColor: whiteSmoke;\\r\\n  --mainBackgroundColor: #1a1a1c;/*whiteSmoke;*/\\r\\n  --mainBorderWidth: 5px;\\r\\n  --mainBorderColor: #2e2f34;/*#e5e5e5;*/\\r\\n  --secondaryBorderColor: #3c3c44;/*#c5c5c5;*/\\r\\n  --mainBorder: var(--mainBorderColor) solid var(--mainBorderWidth);\\r\\n  --scrollbarW: 0px;\\r\\n  --tabH: 30px;\\r\\n}\\r\\n::ng-deep *{\\r\\n  box-sizing: border-box;\\r\\n  scrollbar-base-color: transparent;\\r\\n  scrollbar-3dlight-color: transparent;\\r\\n  scrollbar-highlight-color: rgba(93,95,104,0);\\r\\n  scrollbar-track-color: rgba(93,95,104,0);\\r\\n  scrollbar-arrow-color: #000;\\r\\n  scrollbar-shadow-color: rgba(93,95,104,0);\\r\\n  scrollbar-darkshadow-color: rgba(93,95,104,0);\\r\\n  /* -moz-appearance: none !important; */\\r\\n}\\r\\n/*::-webkit-scrollbar {\\r\\n    display: none;\\r\\n}*/\\r\\n*:disabled { cursor: not-allowed !important; }\\r\\ninput[type=checkbox]{ -moz-appearance: checkbox !important; }\\r\\ninput[type=radio]{ -moz-appearance: radio !important; }\\r\\ninput:disabled{\\r\\n  opacity : .75;\\r\\n  filter  : alpha(opacity=75); /* IE<9 */\\r\\n}\\r\\n::ng-deep .styleEditorSelected{\\r\\n  outline: 3px dashed red !important;\\r\\n}\\r\\n/*olds*/\\r\\n/****************** attributeEditor.css */\\r\\n.attributeEditor, .styleEditor{\\r\\n  /*display:inline-box;*/\\r\\n  position: absolute;\\r\\n  width: -moz-fit-content;\\r\\n  padding:8px;\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  border: var(--mainBorder);\\r\\n  max-width: 100vw;\\r\\n  max-height:100vh;\\r\\n  overflow: auto;\\r\\n}\\r\\n.styleEditor{\\r\\n  left: var(--sidebarW);\\r\\n  top: calc(var(--topbarH) + var(--tabH));\\r\\n  /*voglio che sia diversa perchè di solito parte con altezza pari a topbar.h e voglio che sia scrollabile senza spostarla*/\\r\\n  max-height: calc(100vh - calc(var(--topbarH) + var(--tabH)));\\r\\n}\\r\\nbutton.attributeEditorConfirm, button.styleEditorConfirm{\\r\\n  margin-left: calc(50% - 50px);\\r\\n  /* width:100px;\\r\\n   height:30px;*/\\r\\n}\\r\\ntable.attributeTable .attributeEditorFieldName, table.styleTable .styleEditorFieldName{\\r\\n  max-width:150px;\\r\\n  max-height:150px;\\r\\n  overflow:auto;\\r\\n}\\r\\n.styleTable{\\r\\n  margin-top:10px;\\r\\n  text-align: center;\\r\\n}\\r\\n.styleTable td{\\r\\n  max-width: 300px;\\r\\n}\\r\\n.attributeEditorTitle, .styleEditorTitle{\\r\\n  text-align: center;\\r\\n}\\r\\n.edgeRow{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n}\\r\\n.edgeRow>*{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  margin: 0px;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n          flex-flow: column;\\r\\n  text-align: center;\\r\\n  padding: 4px;\\r\\n  flex-basis: 0px;\\r\\n  -webkit-box-flex: 0;\\r\\n          flex-grow: 0;\\r\\n  white-space: nowrap;\\r\\n}\\r\\n.isCompoundEdge{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  margin: auto;\\r\\n}\\r\\n.styleCompoundWrapper{\\r\\n  -webkit-box-flex: 1;\\r\\n          flex-grow: 1;\\r\\n}\\r\\n.compoundEdgeStart, .compoundEdgeEnd{\\r\\n  text-align: center;\\r\\n  width: 100%;\\r\\n}\\r\\n.SidebarStyleHtml, .GraphStyleHtml{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  -webkit-box-pack: center;\\r\\n          justify-content: center;\\r\\n}\\r\\n/*\\r\\ntable.attributeTable {\\r\\n    border:none;\\r\\n    border-collapse: collapse;\\r\\n}\\r\\n\\r\\ntable.attributeTable td {\\r\\n    border-left: 1px solid #000;\\r\\n    border-right: 1px solid #000;\\r\\n}\\r\\n\\r\\ntable.attributeTable td:first-child {\\r\\n    border-left: none;\\r\\n}\\r\\n\\r\\ntable.attributeTable td:last-child {\\r\\n    border-right: none;\\r\\n}*/\\r\\n.attributeEditorTitle input[type=\\\"checkbox\\\"], .styleEditorTitle input[type=\\\"radio\\\"]{\\r\\n  margin: 4px;\\r\\n}\\r\\n.ReferenceSelector{\\r\\n  float: right;\\r\\n}\\r\\n.rowModelDetail, .vertexModelDetail{\\r\\n  float: right;\\r\\n  border-radius: 50%;\\r\\n  width: 33px;\\r\\n  height: 33px;\\r\\n  padding-top: 2px;\\r\\n}\\r\\n.vertexModelDetail{\\r\\n  margin-left: 10px;\\r\\n  float:none;\\r\\n}\\r\\n/*//////////////////////////////////////////////////  css.css nothing of this should work*/\\r\\n/*\\r\\n.sidebarShell, .editorShell, .property_sidebar{\\r\\n  display: inline-block;/*flex;* /\\r\\n  /* height: calc(100vh - (var(--topbarH) + var(--tabH)));* /\\r\\n  overflow: hidden;\\r\\n  flex-wrap: wrap;}\\r\\n.sidebarShell{\\r\\n  flex-grow: 0;\\r\\n  flex-basis: calc(var(--sidebarW));\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n}\\r\\n#property_sidebar{\\r\\n  flex-grow: 0;\\r\\n  flex-basis: calc(var(--sidebarW));\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n}\\r\\n.editorShell{\\r\\n  flex-basis: 0px;\\r\\n  flex-grow: 1;\\r\\n  width: calc(100vw - var(--sidebarW));\\r\\n}\\r\\n*/\\r\\n#metamodel_tab, #model_tab{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: horizontal;\\r\\n  -webkit-box-direction: normal;\\r\\n          flex-direction: row;\\r\\n  flex-wrap: wrap;\\r\\n  -webkit-box-pack: justify;\\r\\n          justify-content: space-between;\\r\\n  -webkit-box-align: start;\\r\\n          align-items: flex-start;\\r\\n  align-content: flex-start;\\r\\n  width: 100vw;}\\r\\n#metamodel_editor, #model_editor{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  flex-basis: 0px;\\r\\n  -webkit-box-flex: 1;\\r\\n          flex-grow: 1;\\r\\n  /*width: calc(100vw - var(--sidebarW) - var(--scrollbarW));/*NB: TO DO: quando nascondi l'hiddeninput */\\r\\n  height: calc(100vh - calc(var(--topbarH) + var(--tabH)));\\r\\n  background-color: #44444c;/*lightgoldenrodyellow;*/\\r\\n}\\r\\n#input{\\r\\n  display:none;\\r\\n  width: 100vw;\\r\\n  height: 300px;\\r\\n  overflow-y:scroll;\\r\\n}\\r\\ntable.noBorder{\\r\\n  border: none;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsa0JBQWtCLGtCQUFrQjtFQUNsQyxlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLDJCQUEyQjtFQUMzQiw4QkFBOEIsQ0FBQyxjQUFjO0VBQzdDLHNCQUFzQjtFQUN0QiwwQkFBMEIsQ0FBQyxXQUFXO0VBQ3RDLCtCQUErQixDQUFDLFdBQVc7RUFDM0MsaUVBQWlFO0VBQ2pFLGlCQUFpQjtFQUNqQixZQUFZO0FBQ2Q7QUFDQTtFQUNFLHNCQUFzQjtFQUN0QixpQ0FBaUM7RUFDakMsb0NBQW9DO0VBQ3BDLDRDQUE0QztFQUM1Qyx3Q0FBd0M7RUFDeEMsMkJBQTJCO0VBQzNCLHlDQUF5QztFQUN6Qyw2Q0FBNkM7RUFDN0Msc0NBQXNDO0FBQ3hDO0FBQ0E7O0VBRUU7QUFDRixhQUFhLDhCQUE4QixFQUFFO0FBQzdDLHNCQUFzQixvQ0FBb0MsRUFBRTtBQUM1RCxtQkFBbUIsaUNBQWlDLEVBQUU7QUFDdEQ7RUFDRSxhQUFhO0VBQ2IsMkJBQTJCLEVBQUUsU0FBUztBQUN4QztBQUNBO0VBQ0Usa0NBQWtDO0FBQ3BDO0FBQ0EsT0FBTztBQUVQLHlDQUF5QztBQUN6QztFQUNFLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsdUJBQXVCO0VBQ3ZCLFdBQVc7RUFDWCw0Q0FBNEM7RUFDNUMseUJBQXlCO0VBQ3pCLGdCQUFnQjtFQUNoQixnQkFBZ0I7RUFDaEIsY0FBYztBQUNoQjtBQUNBO0VBQ0UscUJBQXFCO0VBQ3JCLHVDQUF1QztFQUN2Qyx5SEFBeUg7RUFDekgsNERBQTREO0FBQzlEO0FBQ0E7RUFDRSw2QkFBNkI7RUFDN0I7Z0JBQ2M7QUFDaEI7QUFDQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsYUFBYTtBQUNmO0FBQ0E7RUFDRSxlQUFlO0VBQ2Ysa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0FBQ2Y7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLFdBQVc7RUFDWCw0QkFBaUI7RUFBakIsNkJBQWlCO1VBQWpCLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLGVBQWU7RUFDZixtQkFBWTtVQUFaLFlBQVk7RUFDWixtQkFBbUI7QUFDckI7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLFlBQVk7QUFDZDtBQUNBO0VBQ0UsbUJBQVk7VUFBWixZQUFZO0FBQ2Q7QUFDQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0FBQ2I7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLHdCQUF1QjtVQUF2Qix1QkFBdUI7QUFDekI7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFpQkU7QUFFRjtFQUNFLFdBQVc7QUFDYjtBQUNBO0VBQ0UsWUFBWTtBQUNkO0FBRUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxpQkFBaUI7RUFDakIsVUFBVTtBQUNaO0FBR0EsMEZBQTBGO0FBQzFGOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FxQkM7QUFDRDtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLDhCQUFtQjtFQUFuQiw2QkFBbUI7VUFBbkIsbUJBQW1CO0VBQ25CLGVBQWU7RUFDZix5QkFBOEI7VUFBOUIsOEJBQThCO0VBQzlCLHdCQUF1QjtVQUF2Qix1QkFBdUI7RUFDdkIseUJBQXlCO0VBQ3pCLFlBQVksQ0FBQztBQUdmO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0VBQ2IsZUFBZTtFQUNmLG1CQUFZO1VBQVosWUFBWTtFQUNaLHVHQUF1RztFQUN2Ryx3REFBd0Q7RUFDeEQseUJBQXlCLENBQUMsd0JBQXdCO0FBQ3BEO0FBQ0E7RUFDRSxZQUFZO0VBQ1osWUFBWTtFQUNaLGFBQWE7RUFDYixpQkFBaUI7QUFDbkI7QUFNQTtFQUNFLFlBQVk7QUFDZCIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOjpuZy1kZWVwIDpyb290ICB7LyogY3NzIHZhcmlhYmxlcyAqL1xyXG4gIC0tdG9wYmFySDogNDBweDtcclxuICAtLXNpZGViYXJXOiAyMHZ3O1xyXG4gIC0tbWFpbkZvbnRDb2xvcjogd2hpdGVTbW9rZTtcclxuICAtLW1haW5CYWNrZ3JvdW5kQ29sb3I6ICMxYTFhMWM7Lyp3aGl0ZVNtb2tlOyovXHJcbiAgLS1tYWluQm9yZGVyV2lkdGg6IDVweDtcclxuICAtLW1haW5Cb3JkZXJDb2xvcjogIzJlMmYzNDsvKiNlNWU1ZTU7Ki9cclxuICAtLXNlY29uZGFyeUJvcmRlckNvbG9yOiAjM2MzYzQ0Oy8qI2M1YzVjNTsqL1xyXG4gIC0tbWFpbkJvcmRlcjogdmFyKC0tbWFpbkJvcmRlckNvbG9yKSBzb2xpZCB2YXIoLS1tYWluQm9yZGVyV2lkdGgpO1xyXG4gIC0tc2Nyb2xsYmFyVzogMHB4O1xyXG4gIC0tdGFiSDogMzBweDtcclxufVxyXG46Om5nLWRlZXAgKntcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIHNjcm9sbGJhci1iYXNlLWNvbG9yOiB0cmFuc3BhcmVudDtcclxuICBzY3JvbGxiYXItM2RsaWdodC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgc2Nyb2xsYmFyLWhpZ2hsaWdodC1jb2xvcjogcmdiYSg5Myw5NSwxMDQsMCk7XHJcbiAgc2Nyb2xsYmFyLXRyYWNrLWNvbG9yOiByZ2JhKDkzLDk1LDEwNCwwKTtcclxuICBzY3JvbGxiYXItYXJyb3ctY29sb3I6ICMwMDA7XHJcbiAgc2Nyb2xsYmFyLXNoYWRvdy1jb2xvcjogcmdiYSg5Myw5NSwxMDQsMCk7XHJcbiAgc2Nyb2xsYmFyLWRhcmtzaGFkb3ctY29sb3I6IHJnYmEoOTMsOTUsMTA0LDApO1xyXG4gIC8qIC1tb3otYXBwZWFyYW5jZTogbm9uZSAhaW1wb3J0YW50OyAqL1xyXG59XHJcbi8qOjotd2Via2l0LXNjcm9sbGJhciB7XHJcbiAgICBkaXNwbGF5OiBub25lO1xyXG59Ki9cclxuKjpkaXNhYmxlZCB7IGN1cnNvcjogbm90LWFsbG93ZWQgIWltcG9ydGFudDsgfVxyXG5pbnB1dFt0eXBlPWNoZWNrYm94XXsgLW1vei1hcHBlYXJhbmNlOiBjaGVja2JveCAhaW1wb3J0YW50OyB9XHJcbmlucHV0W3R5cGU9cmFkaW9deyAtbW96LWFwcGVhcmFuY2U6IHJhZGlvICFpbXBvcnRhbnQ7IH1cclxuaW5wdXQ6ZGlzYWJsZWR7XHJcbiAgb3BhY2l0eSA6IC43NTtcclxuICBmaWx0ZXIgIDogYWxwaGEob3BhY2l0eT03NSk7IC8qIElFPDkgKi9cclxufVxyXG46Om5nLWRlZXAgLnN0eWxlRWRpdG9yU2VsZWN0ZWR7XHJcbiAgb3V0bGluZTogM3B4IGRhc2hlZCByZWQgIWltcG9ydGFudDtcclxufVxyXG4vKm9sZHMqL1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKiBhdHRyaWJ1dGVFZGl0b3IuY3NzICovXHJcbi5hdHRyaWJ1dGVFZGl0b3IsIC5zdHlsZUVkaXRvcntcclxuICAvKmRpc3BsYXk6aW5saW5lLWJveDsqL1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogLW1vei1maXQtY29udGVudDtcclxuICBwYWRkaW5nOjhweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tYWluQmFja2dyb3VuZENvbG9yKTtcclxuICBib3JkZXI6IHZhcigtLW1haW5Cb3JkZXIpO1xyXG4gIG1heC13aWR0aDogMTAwdnc7XHJcbiAgbWF4LWhlaWdodDoxMDB2aDtcclxuICBvdmVyZmxvdzogYXV0bztcclxufVxyXG4uc3R5bGVFZGl0b3J7XHJcbiAgbGVmdDogdmFyKC0tc2lkZWJhclcpO1xyXG4gIHRvcDogY2FsYyh2YXIoLS10b3BiYXJIKSArIHZhcigtLXRhYkgpKTtcclxuICAvKnZvZ2xpbyBjaGUgc2lhIGRpdmVyc2EgcGVyY2jDqCBkaSBzb2xpdG8gcGFydGUgY29uIGFsdGV6emEgcGFyaSBhIHRvcGJhci5oIGUgdm9nbGlvIGNoZSBzaWEgc2Nyb2xsYWJpbGUgc2VuemEgc3Bvc3RhcmxhKi9cclxuICBtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gY2FsYyh2YXIoLS10b3BiYXJIKSArIHZhcigtLXRhYkgpKSk7XHJcbn1cclxuYnV0dG9uLmF0dHJpYnV0ZUVkaXRvckNvbmZpcm0sIGJ1dHRvbi5zdHlsZUVkaXRvckNvbmZpcm17XHJcbiAgbWFyZ2luLWxlZnQ6IGNhbGMoNTAlIC0gNTBweCk7XHJcbiAgLyogd2lkdGg6MTAwcHg7XHJcbiAgIGhlaWdodDozMHB4OyovXHJcbn1cclxudGFibGUuYXR0cmlidXRlVGFibGUgLmF0dHJpYnV0ZUVkaXRvckZpZWxkTmFtZSwgdGFibGUuc3R5bGVUYWJsZSAuc3R5bGVFZGl0b3JGaWVsZE5hbWV7XHJcbiAgbWF4LXdpZHRoOjE1MHB4O1xyXG4gIG1heC1oZWlnaHQ6MTUwcHg7XHJcbiAgb3ZlcmZsb3c6YXV0bztcclxufVxyXG4uc3R5bGVUYWJsZXtcclxuICBtYXJnaW4tdG9wOjEwcHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbi5zdHlsZVRhYmxlIHRke1xyXG4gIG1heC13aWR0aDogMzAwcHg7XHJcbn1cclxuLmF0dHJpYnV0ZUVkaXRvclRpdGxlLCAuc3R5bGVFZGl0b3JUaXRsZXtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuLmVkZ2VSb3d7XHJcbiAgZGlzcGxheTogZmxleDtcclxufVxyXG4uZWRnZVJvdz4qe1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgbWFyZ2luOiAwcHg7XHJcbiAgZmxleC1mbG93OiBjb2x1bW47XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gIHBhZGRpbmc6IDRweDtcclxuICBmbGV4LWJhc2lzOiAwcHg7XHJcbiAgZmxleC1ncm93OiAwO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbn1cclxuLmlzQ29tcG91bmRFZGdle1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG59XHJcbi5zdHlsZUNvbXBvdW5kV3JhcHBlcntcclxuICBmbGV4LWdyb3c6IDE7XHJcbn1cclxuLmNvbXBvdW5kRWRnZVN0YXJ0LCAuY29tcG91bmRFZGdlRW5ke1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG4uU2lkZWJhclN0eWxlSHRtbCwgLkdyYXBoU3R5bGVIdG1se1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuLypcclxudGFibGUuYXR0cmlidXRlVGFibGUge1xyXG4gICAgYm9yZGVyOm5vbmU7XHJcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xyXG59XHJcblxyXG50YWJsZS5hdHRyaWJ1dGVUYWJsZSB0ZCB7XHJcbiAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICMwMDA7XHJcbiAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjMDAwO1xyXG59XHJcblxyXG50YWJsZS5hdHRyaWJ1dGVUYWJsZSB0ZDpmaXJzdC1jaGlsZCB7XHJcbiAgICBib3JkZXItbGVmdDogbm9uZTtcclxufVxyXG5cclxudGFibGUuYXR0cmlidXRlVGFibGUgdGQ6bGFzdC1jaGlsZCB7XHJcbiAgICBib3JkZXItcmlnaHQ6IG5vbmU7XHJcbn0qL1xyXG5cclxuLmF0dHJpYnV0ZUVkaXRvclRpdGxlIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXSwgLnN0eWxlRWRpdG9yVGl0bGUgaW5wdXRbdHlwZT1cInJhZGlvXCJde1xyXG4gIG1hcmdpbjogNHB4O1xyXG59XHJcbi5SZWZlcmVuY2VTZWxlY3RvcntcclxuICBmbG9hdDogcmlnaHQ7XHJcbn1cclxuXHJcbi5yb3dNb2RlbERldGFpbCwgLnZlcnRleE1vZGVsRGV0YWlse1xyXG4gIGZsb2F0OiByaWdodDtcclxuICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgd2lkdGg6IDMzcHg7XHJcbiAgaGVpZ2h0OiAzM3B4O1xyXG4gIHBhZGRpbmctdG9wOiAycHg7XHJcbn1cclxuLnZlcnRleE1vZGVsRGV0YWlse1xyXG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG4gIGZsb2F0Om5vbmU7XHJcbn1cclxuXHJcblxyXG4vKi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vICBjc3MuY3NzIG5vdGhpbmcgb2YgdGhpcyBzaG91bGQgd29yayovXHJcbi8qXHJcbi5zaWRlYmFyU2hlbGwsIC5lZGl0b3JTaGVsbCwgLnByb3BlcnR5X3NpZGViYXJ7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrOy8qZmxleDsqIC9cclxuICAvKiBoZWlnaHQ6IGNhbGMoMTAwdmggLSAodmFyKC0tdG9wYmFySCkgKyB2YXIoLS10YWJIKSkpOyogL1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgZmxleC13cmFwOiB3cmFwO31cclxuLnNpZGViYXJTaGVsbHtcclxuICBmbGV4LWdyb3c6IDA7XHJcbiAgZmxleC1iYXNpczogY2FsYyh2YXIoLS1zaWRlYmFyVykpO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW1haW5CYWNrZ3JvdW5kQ29sb3IpO1xyXG59XHJcbiNwcm9wZXJ0eV9zaWRlYmFye1xyXG4gIGZsZXgtZ3JvdzogMDtcclxuICBmbGV4LWJhc2lzOiBjYWxjKHZhcigtLXNpZGViYXJXKSk7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbWFpbkJhY2tncm91bmRDb2xvcik7XHJcbn1cclxuLmVkaXRvclNoZWxse1xyXG4gIGZsZXgtYmFzaXM6IDBweDtcclxuICBmbGV4LWdyb3c6IDE7XHJcbiAgd2lkdGg6IGNhbGMoMTAwdncgLSB2YXIoLS1zaWRlYmFyVykpO1xyXG59XHJcbiovXHJcbiNtZXRhbW9kZWxfdGFiLCAjbW9kZWxfdGFie1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcclxuICBmbGV4LXdyYXA6IHdyYXA7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG4gIGFsaWduLWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XHJcbiAgd2lkdGg6IDEwMHZ3O31cclxuXHJcblxyXG4jbWV0YW1vZGVsX2VkaXRvciwgI21vZGVsX2VkaXRvcntcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtYmFzaXM6IDBweDtcclxuICBmbGV4LWdyb3c6IDE7XHJcbiAgLyp3aWR0aDogY2FsYygxMDB2dyAtIHZhcigtLXNpZGViYXJXKSAtIHZhcigtLXNjcm9sbGJhclcpKTsvKk5COiBUTyBETzogcXVhbmRvIG5hc2NvbmRpIGwnaGlkZGVuaW5wdXQgKi9cclxuICBoZWlnaHQ6IGNhbGMoMTAwdmggLSBjYWxjKHZhcigtLXRvcGJhckgpICsgdmFyKC0tdGFiSCkpKTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDQ0NDRjOy8qbGlnaHRnb2xkZW5yb2R5ZWxsb3c7Ki9cclxufVxyXG4jaW5wdXR7XHJcbiAgZGlzcGxheTpub25lO1xyXG4gIHdpZHRoOiAxMDB2dztcclxuICBoZWlnaHQ6IDMwMHB4O1xyXG4gIG92ZXJmbG93LXk6c2Nyb2xsO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxudGFibGUubm9Cb3JkZXJ7XHJcbiAgYm9yZGVyOiBub25lO1xyXG59XHJcbiJdfQ== */\"","import { Component } from '@angular/core';\n\n// @ts-ignore\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\n\nexport class AppComponent {\n  title = 'untitled';\n}\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport {NgModule, NO_ERRORS_SCHEMA} from '@angular/core';\r\nimport { AppComponent } from './app.component';\r\nimport { MminputComponent } from '../guiElements/mminput/mminput.component';\r\nimport { MmsidebarComponent } from '../guiElements/mmsidebar/mmsidebar.component';\r\nimport { MsidebarComponent } from '../guiElements/msidebar/msidebar.component';\r\nimport { IsidebarComponent} from '../guiElements/isidebar/isidebar.component';\r\nimport { TopBar, TopBarComponent } from '../guiElements/top-bar/top-bar.component';\r\nimport { GraphTabHtmlComponent } from '../guiElements/graph-tab-html/graph-tab-html.component';\r\nimport { MmGraphHtmlComponent } from '../guiElements/mm-graph-html/mm-graph-html.component';\r\nimport {\r\n  IGraph,\r\n  IModel,\r\n  MetaModel,\r\n  Model,\r\n  ModelPiece,\r\n  ISidebar,\r\n  Json,\r\n  U,\r\n  DetectZoom,\r\n  Dictionary,\r\n  M2Class,\r\n  GraphPoint,\r\n  //Options,\r\n  MyConsole,\r\n  MetaMetaModel,\r\n  ShortAttribETypes,\r\n  ECoreRoot,\r\n  M3Class,\r\n  MClass,\r\n  IClass,\r\n  Typedd,\r\n  EOperation,\r\n  MPackage,\r\n  M2Reference,\r\n  M2Package,\r\n  M2Attribute,\r\n  IPackage,\r\n  M3Package,\r\n  M3Attribute,\r\n  EParameter,\r\n  IAttribute,\r\n  MReference,\r\n  IReference,\r\n  M3Reference,\r\n  MAttribute, Type, LocalStorage, ViewPoint, SaveListEntry, EType, IClassifier, GraphSize, ELiteral, EEnum, IEdge, IVertex\r\n} from '../common/Joiner';\r\nimport { PropertyBarrComponent }   from '../guiElements/property-barr/property-barr.component';\r\nimport { MGraphHtmlComponent }     from '../guiElements/m-graph-html/m-graph-html.component';\r\nimport { DamContextMenuComponent } from '../guiElements/dam-context-menu/dam-context-menu.component';\r\nimport { StyleEditorComponent }    from '../guiElements/style-editor/style-editor.component';\r\nimport { ConsoleComponent }        from '../guiElements/console/console.component';\r\nimport KeyDownEvent = JQuery.KeyDownEvent;\r\n\r\n// @ts-ignore\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    MminputComponent,\r\n    MmsidebarComponent,\r\n    MsidebarComponent,\r\n    IsidebarComponent,\r\n    TopBarComponent,\r\n    GraphTabHtmlComponent,\r\n    MmGraphHtmlComponent,\r\n    PropertyBarrComponent,\r\n    MGraphHtmlComponent,\r\n    DamContextMenuComponent,\r\n    StyleEditorComponent,\r\n    TopBarComponent,\r\n    ConsoleComponent,\r\n    /*BrowserAnimationsModule*/\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [\r\n    AppComponent,\r\n    MminputComponent,\r\n    DamContextMenuComponent,\r\n    TopBarComponent,\r\n    ConsoleComponent,\r\n    GraphTabHtmlComponent], // todo: devi aggiungere qua ogni componente html (vengono caricati prima dei ts?)\r\n  // aggiunto da me\r\n  schemas: [\r\n    NO_ERRORS_SCHEMA\r\n  ]\r\n})\r\nexport class AppModule { }\r\nexport class Status {\r\n  static status: Status = null;\r\n  static userid: string;\r\n  mmm: MetaMetaModel;\r\n  mm: MetaModel = null;\r\n  m: Model = null;\r\n  typeAliasDictionary: Dictionary<ShortAttribETypes, string> = {};\r\n  aliasTypeDictionary: Dictionary<string, ShortAttribETypes> = {};\r\n  debug = false;\r\n  loadedLogic = false;\r\n  loadedGUI = false;\r\n  XMLinlineMarker: string = '' + '@';\r\n  // todo: consenti di customizzare il marker, (in m3options?)\r\n\r\n  refreshModeAll: boolean = true || true;\r\n  refreshModelAndInstances: boolean = false && false;\r\n  refreshModelAndParent: boolean = false && false;\r\n  refreshInstancesToo: boolean = false && false;\r\n  refreshModel: boolean = false && false;\r\n  refreshMetaParentToo: boolean = false && false;\r\n  refreshParentToo: boolean = false && false;\r\n  // modelMatTab: MatTabGroup = null;\r\n  /*showMMGrid = true;\r\n  showMGrid = true;\r\n  mmGrid = new GraphPoint(20, 20);\r\n  mGrid = new GraphPoint(20, 20);*/\r\n\r\n  constructor() { }\r\n  save(): string {\r\n    return 'TO DO: SERIALIZE'; }\r\n  getActiveModel(): IModel {\r\n    // if (Status.status.modelMatTab) { if (Status.status.modelMatTab.selectedIndex === 0) { return this.mm; } else { return this.m; } }\r\n    if ($('.UtabHeader.main[data-target=\"1\"][selected=\"true\"]').length === 1) { return Status.status.mm; }\r\n    if ($('.UtabHeader.main[data-target=\"2\"][selected=\"true\"]').length === 1) { return Status.status.m; }\r\n    U.pe(true, 'modello attivo non trovato.');\r\n    return null;\r\n  }\r\n\r\n  isM(): boolean {return this.getActiveModel() === this.m; }\r\n  isMM(): boolean {return this.getActiveModel() === this.mm; }\r\n\r\n  enableAutosave(timer: number): void {\r\n    $(window).off('beforeunload.unload_autosave').on('beforeunload.unload_autosave', () => { this.autosave(); });\r\n    localStorage.setItem('autosave', 'true');\r\n    setInterval(() => { this.autosave(); }, timer);\r\n  }\r\n  autosave(): void {\r\n    this.mm.save(true, null);\r\n    this.m.save(true, null);\r\n\r\n\r\n    console.log('autosave completed.');\r\n  }\r\n}\r\n\r\n\r\nexport function main0(loadEvent: Event, tentativi: number = 0) {\r\n  // EcoreLayer.test2(); return;\r\n  Status.status = new Status();\r\n  (window as any).global = window;\r\n  // (window as any).global.Buffer = (window as any).global.Buffer || require('buffer').Buffer;\r\n  if (document.getElementById('MM_INPUT') === null) {\r\n    if (tentativi++ >= 10)  { U.pe(true, 'failed to load MM_INPUT'); }\r\n    setTimeout(() => main0(null, tentativi), 100);\r\n    console.log('main0 wait(100)');\r\n    return;\r\n  }// else { mainForceTabChange(0); }\r\n\r\n  // U.loadScript('./app/common/jquery-ui-1.12.1/jquery-ui.js');\r\n  // U.loadScript('./app/common/jquery-ui-1.12.1/jquery-ui.structure.js');\r\n  // U.loadScript('https://code.jquery.com/ui/1.12.1/jquery-ui.min.js');\r\n  main();\r\n  // console.log('main(), $ loaded:', $ !== undefined, 'status: ', Status.status);\r\n}\r\n/*function mainForceTabChange(tentativi: number = 0) {\r\n  let retry = false;\r\n  if (!Status.status.modelMatTab) {\r\n    Status.status.modelMatTab = GraphTabHtmlComponent.matTabModel;\r\n    retry = true;\r\n    if (tentativi++ >= 10) { U.pe(true, 'failed to change tab (not initialized)', Status.status); }}\r\n  if (Status.status.modelMatTab && Status.status.modelMatTab.selectedIndex === 1) {\r\n    Status.status.modelMatTab.selectedIndex = 0;\r\n    if (tentativi++ >= 10) { U.pe(true, 'failed to change tab (changeindex)'); }\r\n    retry = true; }\r\n  if (retry) {\r\n    setTimeout(() => mainForceTabChange(tentativi), 100);\r\n  } else { main(); }\r\n}*/\r\n\r\nconst M2InputXml: string = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n' +\r\n  '<ecore:EPackage xmi:version=\"2.0\" xmlns:xmi=\"http://www.omg.org/XMI\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\\n' +\r\n  '    xmlns:ecore=\"http://www.eclipse.org/emf/2002/Ecore\" name=\"pkg\" nsURI=\"http://www.pkg.uri.com\" nsPrefix=\"pkg.prefix\">\\n' +\r\n  '  <eClassifiers xsi:type=\"ecore:EClass\" name=\"player\">\\n' +\r\n  '   <eStructuralFeatures xsi:type=\"ecore:EAttribute\" name=\"name\"' +\r\n  '       eType=\"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EChar\"/>\\n' +\r\n  '  </eClassifiers>\\n' +\r\n  '  <eClassifiers xsi:type=\"ecore:EClass\" name=\"league\">\\n' +\r\n  '    <eStructuralFeatures xsi:type=\"ecore:EReference\" name=\"playerlist\" eType=\"#//player\"/>\\n' +\r\n  '  </eClassifiers>\\n' +\r\n  '</ecore:EPackage>\\n';\r\n\r\nfunction globalevents(): void {\r\n  // Prevent the backspace key from navigating back.\r\n  const $document = $(document);\r\n  $document.unbind('keydown').bind('keydown', U.preventBackSlashHistoryNavigation);\r\n  $document.on('keydown', (e: KeyDownEvent): void  => {\r\n    console.log('documentKeyDown: ', e.key, e.keyCode);\r\n    if (e.key === 'Escape') { Status.status.getActiveModel().graph.edgeChangingAbort(e); }\r\n  });\r\n  window['' + 'U'] = U;\r\n  window['' + 'ModelPiece'] = ModelPiece;\r\n  window['' + 'IModel'] = IModel;\r\n  window['' + 'Status'] = Status;\r\n  window['' + 'M3Model'] = MetaMetaModel;\r\n  window['' + 'M2Model'] = MetaModel;\r\n  window['' + 'MModel'] = Model;\r\n  window['' + 'IPackage'] = IPackage;\r\n  window['' + 'M3Package'] = M3Package;\r\n  window['' + 'M2Package'] = M2Package;\r\n  window['' + 'MPackage'] = MPackage;\r\n  window['' + 'Enum'] = EEnum;\r\n  window['' + 'ELiteral'] = ELiteral;\r\n  window['' + 'IClassifier'] = IClass;\r\n  window['' + 'IClass'] = IClass;\r\n  window['' + 'M3Class'] = M3Class;\r\n  window['' + 'M2Class'] = M2Class;\r\n  window['' + 'MClass'] = MClass;\r\n  window['' + 'Typedd'] = Typedd;\r\n  window['' + 'EOperation'] = EOperation;\r\n  window['' + 'EParameter'] = EParameter;\r\n  window['' + 'IReference'] = IReference;\r\n  window['' + 'M3Reference'] = M3Reference;\r\n  window['' + 'M2Reference'] = M2Reference;\r\n  window['' + 'MReference'] = MReference;\r\n  window['' + 'IAttribute'] = IAttribute;\r\n  window['' + 'M3Attribute'] = M3Attribute;\r\n  window['' + 'M2Attribute'] = M2Attribute;\r\n  window['' + 'MAttribute'] = MAttribute;\r\n  window['' + 'help'] = [\r\n    'setBackup (backup <= saveToDB)',\r\n    'backupSave (saveToDB <= backup)',\r\n    'destroy (the backup)',\r\n    'discardSave (stop autosave)'];\r\n  window['' + 'destroy'] = () => {\r\n    localStorage.setItem('m1_' + SaveListEntry.model.lastopened, null);\r\n    localStorage.setItem('m2_' + SaveListEntry.model.lastopened, null);\r\n    localStorage.setItem('m1_' + SaveListEntry.view.lastopened, null);\r\n    localStorage.setItem('m2_' + SaveListEntry.view.lastopened, null);\r\n    localStorage.setItem('m1_' + SaveListEntry.vertexPos.lastopened, null);\r\n    localStorage.setItem('m2_' + SaveListEntry.vertexPos.lastopened, null);\r\n    localStorage.setItem('backupMM', null);\r\n    localStorage.setItem('backupGUI', null);\r\n    localStorage.setItem('backupM', null);\r\n    localStorage.setItem('autosave', 'false');\r\n  };\r\n  window['' + 'discardSave'] = () => {\r\n    localStorage.setItem('autosave', 'false');\r\n    $(window).off('beforeunload.unload_autosave');\r\n    window.location.href += ''; };\r\n  window['' + 'backupSave'] = () => {\r\n    window['' + 'discardSave']();\r\n    window['' + 'backupSaveMM']();\r\n    window['' + 'backupSaveM']();\r\n    window['' + 'backupSaveGUI'](); };\r\n  window['' + 'backupSaveGUI'] = () => { localStorage.setItem('modelGraphSave_GUI_Damiano', localStorage.getItem('backupGUI')); };\r\n  window['' + 'backupSaveMM'] = () => { localStorage.setItem('LastOpenedMM', localStorage.getItem('backupMM')); };\r\n  window['' + 'backupSaveM'] = () => { localStorage.setItem('LastOpenedM', localStorage.getItem('backupM')); };\r\n  window['' + 'setBackup'] = () => { window['' + 'setBackupM'](); window['' + 'setBackupMM'](); window['' + 'setBackupGUI'](); };\r\n  window['' + 'setBackupGUI'] = () => { localStorage.setItem('backupGUI', localStorage.getItem('modelGraphSave_GUI_Damiano')); };\r\n  window['' + 'setBackupMM'] = () => { localStorage.setItem('backupMM', localStorage.getItem('LastOpenedMM')); };\r\n  window['' + 'setBackupM'] = () => { localStorage.setItem('backupM', localStorage.getItem('LastOpenedM')); };\r\n}\r\n\r\nfunction main() {\r\n  (window as any).U = U;\r\n  (window as any).status = Status.status;\r\n  U.tabSetup();\r\n  $('app-mm-graph-html .propertyBarContainer .UtabHeader').on('click', (e) =>  {\r\n    if (e.currentTarget.innerText === 'Style') { Status.status.mm.graph.propertyBar.styleEditor.onShow(); } else\r\n    if (e.currentTarget.innerText === 'Structured') { Status.status.mm.graph.propertyBar.onShow(); } else\r\n    if (e.currentTarget.innerText === 'Raw')  { Status.status.mm.graph.propertyBar.onShow(true); }\r\n    else { U.pe(true, 'unrecognized right-side tab:', e.currentTarget); }\r\n  });\r\n  $('app-m-graph-html .propertyBarContainer .UtabHeader').on('click', (e) =>  {\r\n    if (e.currentTarget.innerText === 'Style') { Status.status.m.graph.propertyBar.styleEditor.onShow(); } else\r\n    if (e.currentTarget.innerText === 'Structured') { Status.status.m.graph.propertyBar.onShow(); } else\r\n    if (e.currentTarget.innerText === 'Raw')  { Status.status.m.graph.propertyBar.onShow(true); }\r\n    else { U.pe(true, 'unrecognized right-side tab:', e.currentTarget); }\r\n  });\r\n  U.resizableBorderSetup();\r\n  ECoreRoot.initializeAllECoreEnums();\r\n  globalevents();\r\n  IVertex.staticinit();\r\n  IEdge.staticInit();\r\n  const mmconsole: MyConsole = new MyConsole($('.mmconsole')[0]);\r\n  const mconsole: MyConsole = new MyConsole($('.mconsole')[0]);\r\n\r\n  let tmp: any;\r\n  let useless: any;\r\n  let i: number;\r\n  U.pw((tmp = +DetectZoom.device()) !== 1, 'Current zoom level is different from 100%.',\r\n    'The graph part of this website may be graphically misplaced due to a bug with Svg\\'s <foreignObject> content.',\r\n    'current zoom:' + (+tmp * 100) + '%',\r\n    'The bug happens in: Chrome.',\r\n    'The bug does NOT happen in: Firefox.',\r\n    'Behaviour is unknown for other browsers.');\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.void] = 'void';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EChar] = 'char';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EString] = 'string';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EDate] = 'date';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EFloat] = 'float';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EDouble] = 'double';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EBoolean] = 'bool';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EByte] = 'byte';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EShort] = 'short';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EInt] = 'int';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.ELong] = 'long';\r\n  /*\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.ECharObj] = 'ECharObj';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EStringObj] = 'EStringObj';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EDateObj] = 'EDateObj';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EFloatObj] = 'EFloatObj';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EDoubleObj] = 'EDoubleObj';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EByteObj] = 'EByteObj';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EShortObj] = 'EShortObj';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EIntObj] = 'EIntObj';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.ELongObj] = 'ELongObj';\r\n  Status.status.typeAliasDictionary[ShortAttribETypes.EELIST] = 'EELIST';*/\r\n  EType.staticInit();\r\n  DamContextMenuComponent.staticInit();\r\n\r\n  const savem2 = LocalStorage.getLastOpened(2);\r\n  const savem1 = LocalStorage.getLastOpened(1);\r\n  /*let MetaMetaModelStr = MetaMetaModel.emptyMetaMetaModel;\r\n  let MetaModelinputStr = MetaModel.emptyModel;\r\n  let ModelinputStr = Model.emptyModel;*/\r\n  const validate = (thing: string, defaultvalue: string): string => { return tmp && tmp !== '' && tmp !== 'null' && tmp !== 'undefined' ? thing : defaultvalue};\r\n  savem2.model = validate(savem2.model, MetaModel.emptyModel);\r\n  savem1.model = validate(savem1.model, Model.emptyModel);\r\n\r\n  console.log('loading MM:', savem2);\r\n  console.log('loading M:', savem1);\r\n\r\n  Status.status.mmm = new MetaMetaModel(null);\r\n  useless = new TopBar();\r\n  try {\r\n    Status.status.mm = new MetaModel(JSON.parse(savem2.model), Status.status.mmm);\r\n  } catch(e) {\r\n    U.pw(true, 'Failed to load the metamodel.');\r\n    console.log(e);\r\n    Status.status.mm = new MetaModel(JSON.parse(MetaModel.emptyModel), Status.status.mmm);\r\n  }\r\n  // console.log('m3:', Status.status.mmm, 'm2:', Status.status.mm, 'm1:', Status.status.m); return;\r\n  Type.linkAll();\r\n  M2Class.updateSuperClasses();\r\n  try {\r\n    Status.status.m = new Model(JSON.parse(savem1.model), Status.status.mm);\r\n  } catch(e) {\r\n    U.pw(true, 'Failed to load the model. Does it conform to the metamodel?');\r\n    console.log(e);\r\n    Status.status.m = new Model(JSON.parse(Model.emptyModel), Status.status.mm);\r\n  }\r\n  console.log('m3:', Status.status.mmm, 'm2:', Status.status.mm, 'm1:', Status.status.m);\r\n  // Status.status.m.LinkToMetaParent(Status.status.mm);\r\n  // Status.status.m.fixReferences(); already linked at parse time.\r\n  Status.status.loadedLogic = true;\r\n  useless = new ISidebar(Status.status.mmm, document.getElementById('metamodel_sidebar'));\r\n  useless = new ISidebar(Status.status.mm, document.getElementById('model_sidebar'));\r\n  useless = new IGraph(Status.status.mm, document.getElementById('metamodel_editor') as unknown as SVGSVGElement);\r\n  useless = new IGraph(Status.status.m, document.getElementById('model_editor') as unknown as SVGSVGElement);\r\n  Status.status.loadedGUI = true;\r\n  Status.status.mm.graph.propertyBar.show(Status.status.mm, null, null);\r\n  Status.status.m.graph.propertyBar.show(Status.status.m, null, null);\r\n  Type.updateTypeSelectors(null, true, true, true);\r\n\r\n  if (!savem2.vertexpos || !savem2.view){\r\n    const tmpp: {view: string, vertexPos: string} = Status.status.mm.storage.getViewPoints();\r\n    savem2.view = savem2.view || tmpp.view;\r\n    savem2.vertexpos = savem2.vertexpos || tmpp.vertexPos; }\r\n\r\n  if (!savem1.vertexpos || !savem1.view){\r\n    const tmpp: {view: string, vertexPos: string} = Status.status.m.storage.getViewPoints();\r\n    savem1.view = savem1.view || tmpp.view;\r\n    savem1.vertexpos = savem1.vertexpos || tmpp.vertexPos; }\r\n\r\n  savem2.view = validate(savem2.view, '[]');\r\n  savem2.vertexpos = validate(savem2.vertexpos, '{}');\r\n  savem1.view = validate(savem1.view, '[]');\r\n  savem1.vertexpos = validate(savem1.vertexpos, '{}');\r\n  let marr: IModel[] = [Status.status.mm, Status.status.m];\r\n  let vpmatjson: Json[][] = [JSON.parse(savem2.view || '[]'), JSON.parse(savem1.view || '[]')] as Json[][];\r\n  const vertexposMat: Dictionary<string, GraphPoint>[] = [JSON.parse(savem2.vertexpos), JSON.parse(savem1.vertexpos)] as Dictionary<string, GraphPoint>[];\r\n  // console.log(vpmatjson, Status.status.mm.graph.viewPointShell);\r\n\r\n  // return;\r\n  let j: number;\r\n  for (j = 0; j < vertexposMat.length; j++) {\r\n    const vdic: Dictionary<string, GraphPoint> = vertexposMat[j];\r\n    const m: IModel = marr[j];\r\n    for (let key in vdic) {\r\n      console.log('key:', key, 'varr:', vdic);\r\n      const mp: IClassifier = ModelPiece.getByKeyStr(key) as IClassifier;\r\n      const size: GraphSize = new GraphSize().clone(vdic[key]);\r\n      if (!mp || !(mp instanceof IClassifier)) {\r\n        U.cclear();\r\n        U.pw(true, 'invalid vertexposition save, failed to get classifier:', key, vdic); continue; }\r\n      mp.getVertex().setSize(size);\r\n    }\r\n  }\r\n\r\n  for (j = 0; j < vpmatjson.length; j++) {\r\n    const vparr: ViewPoint[] = vpmatjson[j] as ViewPoint[];\r\n    const m: IModel = marr[j];\r\n    let v: ViewPoint;\r\n    for (i = 0; i < vparr.length; i++) {\r\n      const jsonvp: ViewPoint = vparr[i];\r\n      // console.clear();\r\n      // console.log('looping this:', jsonvp, ', vpmatjson:', vpmatjson);\r\n      v = new ViewPoint(m);\r\n      v.clone(jsonvp);\r\n      v.updateTarget(m);\r\n      m.graph.viewPointShell.add(v, false); // [persistent isApplied] STEP 1: qui setto checked sulla gui in base al v.isApplied salvato.\r\n      v.isApplied = false; // STEP 2: qui affermo che non è stato ancora applicato\r\n    }\r\n    if (vparr.length === 0) {\r\n      v = new ViewPoint(m); // m.getPrefix() + '_VP autogenerated');\r\n      v.isApplied = true;\r\n      m.graph.viewPointShell.add(v, false); // [persistent isApplied] STEP 1: qui setto checked sulla gui in base al v.isApplied salvato.\r\n      v.isApplied = false; }\r\n    m.graph.viewPointShell.refreshApplied(); // STEP 3: qui vedo che non è stato applicato, ma è stato ordinato dalla gui di applicarlo -> lo applico.\r\n  }\r\n\r\n  setTimeout( () => { Status.status.mm.graph.ShowGrid(); Status.status.m.graph.ShowGrid(); }, 1);\r\n  // Imposto un autosave raramente (minuti) giusto nel caso di crash improvvisi o disconnessioni\r\n  // per evitare di perdere oltre X minuti di lavoro.\r\n  // In condizioni normali non è necessario perchè il salvataggio è effettuato al cambio di pagina asincronamente\r\n  // e con consegna dei dati garantita dal browser anche a pagina chiusa (navigator.beacon)\r\n  return;\r\n  Status.status.enableAutosave(2 * 60 * 1000);\r\n  //Options.enableAutosave(2 * 60 * 1000);\r\n  // Options.Load(Status.status);\r\n\r\n}\r\nwindow['' + 'main'] = main0;\r\ndocument.addEventListener('DOMContentLoaded', main0);\r\n","import {Status, U} from './Joiner';\r\nimport {Data}                            from '@angular/router';\r\n\r\nexport enum DatabaseMode { browserMemory, Sql, File}\r\nexport class Database {\r\n  static db: Database = new Database();\r\n  phpDbPageUrl: string = null;\r\n  sqlurl: string = null;\r\n  sqldb: string = null;\r\n  sqluser: string = null;\r\n  sqlpass: string = null;\r\n  mode: DatabaseMode = null;\r\n  constructor(mode: DatabaseMode = DatabaseMode.browserMemory, username = '_TestUser_',\r\n              phpDbPageUrl = null, sqlurl = null, sqldb = null, sqlpass = null) {\r\n    this.mode = mode;\r\n    this.sqluser = username;\r\n    this.phpDbPageUrl = phpDbPageUrl;\r\n    this.sqldb = sqldb;\r\n    this.sqlpass = sqlpass;\r\n    this.sqlurl = sqlurl; }\r\n    writeKV(table, key, value): void {\r\n      switch (this.mode) {\r\n        default: U.pe(true, 'unexpected db mode:', this.mode); break;\r\n        case DatabaseMode.browserMemory:\r\n          key = this.sqluser + '_' + table + '_' + key;\r\n          localStorage.setItem(key, value);\r\n          break;\r\n        case DatabaseMode.Sql: U.pw(true, 'update sql: todo'); break;\r\n        case DatabaseMode.File:\r\n          key = this.sqluser + '_' + table + '_' + key;\r\n          U.pw(true, 'download file: todo'); break;\r\n      }\r\n    }\r\n    readKV(table, key): string {\r\n      switch (this.mode) {\r\n        default: U.pe(true, 'unexpected db mode:', this.mode); break;\r\n        case DatabaseMode.browserMemory:\r\n          key = this.sqluser + '_' + table + '_' + key;\r\n          return localStorage.getItem(key);\r\n        case DatabaseMode.Sql: U.pw(true, 'select sql: todo'); break;\r\n        case DatabaseMode.File: U.pe(true, 'readKV: cannot be executed with savemode = File'); break;\r\n      }\r\n    }\r\n/*\r\n  public static callForkRoutine(style: ModelPieceStyleEntry, callback: (forkedStyle: ModelPieceStyleEntry) => any): void {\r\n\r\n  }\r\n\r\n  static updateStyle(style: ModelPieceStyleEntry) {\r\n  }\r\n\r\n  static deleteStyle(style: ModelPieceStyleEntry, callback: (result: string) => void) {\r\n    // do request\r\n    callback('1'); // temporaneo\r\n  }\r\n\r\n  static createStyle(clone: ModelPieceStyleEntry) {\r\n\r\n    // do request\r\n    // consistenza con db.\r\n  }*/\r\n}\r\n","/* NOTE: error in module.extends: devi importare i file rispettando l'ordine di dichiarazioni delle classi, se dichiaro class A nel file A, e class\r\n B extensa A nel file B, il file B non può essere importato prima del file A*/\r\n/* this is undefined in constructors or method calls: likely caused by a reserved class name that is listed in config.ts and is behaving\r\n differently.*/\r\n// /*new*/export {Styles, ModelPieceStyleEntry, SortType, StyleVisibility} from '../GuiStyles/styles';\r\n// /*new*/export {ViewHtmlSettings, ViewPoint, ViewRule, ModelView, PackageView, ClassView, AttributeView, EdgeViewRule, ReferenceView, OperationView,\r\n// ParameterView} from '../GuiStyles/viewpoint';\r\n\r\nimport { default as AnsiUp } from 'ansi_up';\r\nexport const ansiUp = new AnsiUp(); // https://github.com/drudru/ansi_up // ansi color formatter.\r\n\r\nimport * as stringsimilarity from '../common/StringSimilarity.js';\r\nexport let StringSimilarity = stringsimilarity;\r\nimport \"jqueryui\";\r\n// import \"jquery\";\r\nimport * as $$ from 'jquery';\r\nexport const $ = window['' + '$'] = $$;\r\n/*\r\nimport * as JQueryUII        from '../../node_modules/jqueryui';\r\nexport const JQueryUI: JQueryUII = JQueryUII.JQueryUI;*/\r\nimport * as _pr_json2xml     from '../common/prj_json2xml.js';\r\nimport * as _pr_xml2json     from '../common/prj_xml2json.js';\r\nexport const prjson2xml = _pr_json2xml;\r\nexport const prxml2json = _pr_xml2json;\r\n/*export const $$$: JQueryStatic = require('jquery-ui');\r\nexport const $ui: JQueryStatic = $$$;*/\r\n\r\nexport {ViewHtmlSettings, ViewPoint, ViewRule, EdgeViewRule} from '../GuiStyles/viewpoint';\r\nexport {LocalStorage} from '../Database/LocalStorage';\r\nexport {ModelPiece, Info, ModelNone, StyleComplexEntry} from '../Model/modelPiece';\r\n/*new*/export {ECoreEnum, EcoreLiteral,\r\n  ECoreParameter, ECoreOperation, ECoreAttribute, ECoreReference,\r\n  ECoreClass, ECorePackage, ECoreRoot, ECoreAnnotation, ECoreDetail, XMIModel, IModel} from '../Model/iModel';\r\nexport {ShortAttribETypes, U, Json, AttribETypes,\r\n  InputPopup, DetectZoom, Dictionary, MeasurableArrays,\r\n  IPoint, Point, GraphPoint, ISize, Size, GraphSize, myFileReader} from './util';\r\nexport {Status} from '../../src/app/app.module';\r\nexport {IGraph, ViewPointShell} from '../guiElements/mGraph/iGraph';\r\nexport {IVertex} from '../guiElements/mGraph/Vertex/iVertex';\r\nexport {IField} from '../guiElements/mGraph/Field/iField';\r\nexport {ISidebar} from '../guiElements/isidebar/isidebar.component';\r\nexport {IEdge, EdgeModes} from '../guiElements/mGraph/Edge/iEdge';\r\nexport {ExtEdge} from '../guiElements/mGraph/Edge/ExtEdge';\r\nexport {EdgePoint, EdgePointFittizio, CursorFollowerEP} from '../guiElements/mGraph/Edge/EdgePoint';\r\nexport {EdgeStyle, EdgePointStyle} from '../guiElements/mGraph/Edge/edgeStyle';\r\nexport {PropertyBarr} from '../guiElements/propertyBar/propertyBar';\r\nexport {TopBar} from '../guiElements/top-bar/top-bar.component';\r\nexport {StyleEditor} from '../guiElements/style-editor/style-editor.component';\r\n/*neww*/ export {SaveListEntry} from '../Database/LocalStorage';\r\n// export {Options} from '../Save/Save';\r\nexport {MyConsole} from '../guiElements/console/console.component';/*\r\nexport {IModel, ECoreRoot, ECorePackage, ECoreClass, ECoreReference,\r\n  ECoreAttribute, ECoreParameter, ECoreOperation, XMIModel, EcoreLiteral, ECoreEnum } from '../Model/iModel';*/\r\n// export {IModel} from '../Model/iModel';\r\nexport {MetaMetaModel} from '../Model/MetaMetaModel';\r\nexport {MetaModel} from '../Model/MetaModel';\r\nexport {Model} from '../Model/Model';\r\nexport {IPackage, M3Package} from '../Model/mPackage/iPackage';\r\nexport {M2Package} from '../Model/mPackage/MMPackage';\r\nexport {MPackage} from '../Model/mPackage/MPackage.component';\r\nexport {IClassifier} from '../mClass/IClassifier';\r\nexport {IClass, M3Class} from '../mClass/iClass';\r\nexport {M2Class} from '../mClass/m2Class';\r\nexport {MClass} from '../mClass/MClass';\r\nexport {EEnum} from '../mClass/EEnum';\r\nexport {Type, EType} from '../mClass/classChild/Type';\r\nexport {Typedd} from '../mClass/classChild/Typedd';\r\nexport {ELiteral} from '../mClass/classChild/ELiteral';\r\nexport {IFeature, M3Feature, M2Feature, MFeature} from '../mClass/classChild/Features/iFeature';\r\nexport {IReference, M3Reference} from '../mClass/classChild/Features/References/iReference';\r\nexport {M2Reference} from '../mClass/classChild/Features/References/M2Reference';\r\nexport {MReference} from '../mClass/classChild/Features/References/MReference';\r\nexport {IAttribute, M3Attribute} from '../mClass/classChild/Features/Attributes/iAttribute';\r\nexport {M2Attribute} from '../mClass/classChild/Features/Attributes/mmAttribute';\r\nexport {MAttribute} from '../mClass/classChild/Features/Attributes/MAttribute';\r\nexport {EAnnotation} from '../Model/EAnnotation';\r\nexport {EAnnotationDetail} from '../Model/EAnnotationDetail';\r\n/*new*/export {Database} from '../common/Database';\r\nexport {DamContextMenuComponent} from '../guiElements/dam-context-menu/dam-context-menu.component';\r\nexport {EOperation, OperationVisibility} from '../mClass/classChild/Operations/eOperation';\r\nexport {EParameter} from '../mClass/classChild/Operations/eParameter';\r\nimport {IClassifier}         from '../mClass/IClassifier';\r\n\r\n/*\r\n// @ts-ignore\r\nlet enc = he.encode;\r\n// @ts-ignore\r\nlet dec = he.decode;\r\n// @ts-ignore\r\nlet esc = he.escape;\r\n// @ts-ignore\r\nlet unesc = he.unescape;\r\n// @ts-ignore\r\nlet ver = he.version;\r\nexport const HE = {encode: enc, decode: dec, escape: esc, unescape: unesc, version: ver};*/\r\n\r\n\r\n// NB: se li esporti e usi come identificatori/costruttori nel codice, typescript li collega da una fantomatica user-class con nome __CambiatoTipoCosì\r\n// e pur esistendo la classe A, lui cerca __A e dice che non esiste.\r\n// soluzione: attiva quando scrivi codice per abilitare il type check, disabilita in produzione.\r\n/*\r\ntype ResizeObserverSize = unknown;\r\ndeclare type ResizeObserverEntry = {\r\n  readonly target: Element;\r\n  readonly contentRect: DOMRectReadOnly;\r\n  readonly borderBoxSize: ResizeObserverSize[]; // type was \"readonly attribute sequence<ResizeObserverSize>\"\r\n  readonly contentBoxSize: ResizeObserverSize[];\r\n  devicePixelContentBoxSize: ResizeObserverSize[];\r\n}\r\ndeclare type ResizeObserverCallback = (entries: ResizeObserverEntry[], observer: ResizeObserverr) => unknown;\r\ndeclare type ResizeObserverOptions = {box: 'content-box' | 'border-box'}\r\ndeclare type ResizeObserverr = {\r\n  constructor(callback: ResizeObserverCallback);\r\n  observe(target: Element, options?: ResizeObserverOptions): void;\r\n  unobserve(target: Element): void;\r\n  disconnect(): void;\r\n}\r\nexport let ResizeObserver: ResizeObserverr = window['' + 'ResizeObserver'];\r\n*/\r\n","\r\nexport var compareTwoStrings = compareTwoStrings0;\r\nexport var findBestMatch = findBestMatch0;\r\nfunction compareTwoStrings0(first, second) {\r\n\tfirst = first.replace(/\\s+/g, '')\r\n\tsecond = second.replace(/\\s+/g, '')\r\n\r\n\tif (!first.length && !second.length) return 1;                   // if both are empty strings\r\n\tif (!first.length || !second.length) return 0;                   // if only one is empty string\r\n\tif (first === second) return 1;       \t\t\t\t\t\t\t // identical\r\n\tif (first.length === 1 && second.length === 1) return 0;         // both are 1-letter strings\r\n\tif (first.length < 2 || second.length < 2) return 0;\t\t\t // if either is a 1-letter string\r\n\r\n\tlet firstBigrams = new Map();\r\n\tfor (let i = 0; i < first.length - 1; i++) {\r\n\t\tconst bigram = first.substr(i, 2);\r\n\t\tconst count = firstBigrams.has(bigram)\r\n\t\t\t? firstBigrams.get(bigram) + 1\r\n\t\t\t: 1;\r\n\r\n\t\tfirstBigrams.set(bigram, count);\r\n\t};\r\n\r\n\tlet intersectionSize = 0;\r\n\tfor (let i = 0; i < second.length - 1; i++) {\r\n\t\tconst bigram = second.substr(i, 2);\r\n\t\tconst count = firstBigrams.has(bigram)\r\n\t\t\t? firstBigrams.get(bigram)\r\n\t\t\t: 0;\r\n\r\n\t\tif (count > 0) {\r\n\t\t\tfirstBigrams.set(bigram, count - 1);\r\n\t\t\tintersectionSize++;\r\n\t\t}\r\n\t}\r\n\r\n\treturn (2.0 * intersectionSize) / (first.length + second.length - 2);\r\n}\r\n\r\nfunction findBestMatch0(mainString, targetStrings) {\r\n\tif (!areArgsValid(mainString, targetStrings)) throw new Error('Bad arguments: First argument should be a string, second should be an array of strings');\r\n\t\r\n\tconst ratings = [];\r\n\tlet bestMatchIndex = 0;\r\n\r\n\tfor (let i = 0; i < targetStrings.length; i++) {\r\n\t\tconst currentTargetString = targetStrings[i];\r\n\t\tconst currentRating = compareTwoStrings(mainString, currentTargetString)\r\n\t\tratings.push({target: currentTargetString, rating: currentRating})\r\n\t\tif (currentRating > ratings[bestMatchIndex].rating) {\r\n\t\t\tbestMatchIndex = i\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tconst bestMatch = ratings[bestMatchIndex]\r\n\t\r\n\treturn { ratings, bestMatch, bestMatchIndex };\r\n}\r\n\r\nfunction flattenDeep(arr) {\r\n\treturn Array.isArray(arr) ? arr.reduce((a, b) => a.concat(flattenDeep(b)), []) : [arr];\r\n}\r\n\r\nfunction areArgsValid(mainString, targetStrings) {\r\n\tif (typeof mainString !== 'string') return false;\r\n\tif (!Array.isArray(targetStrings)) return false;\r\n\tif (!targetStrings.length) return false;\r\n\tif (targetStrings.find(s => typeof s !== 'string')) return false;\r\n\treturn true;\r\n}\r\n\r\nfunction letterPairs(str) {\r\n\tconst pairs = [];\r\n\tfor (let i = 0, max = str.length - 1; i < max; i++) pairs[i] = str.substring(i, i + 2);\r\n\treturn pairs;\r\n}\r\n\r\nfunction wordLetterPairs(str) {\r\n\tconst pairs = str.toUpperCase().split(' ').map(letterPairs);\r\n\treturn flattenDeep(pairs);\r\n}\r\n","/*\tThis work is licensed under Creative Commons GNU LGPL License.\r\n\r\n\tLicense: http://creativecommons.org/licenses/LGPL/2.1/\r\n   Version: 0.9\r\n\tAuthor:  Stefan Goessner/2006\r\n\tWeb:     http://goessner.net/ \r\n*/\r\nexport function json2xml(o, tab/*string, string*/) {\r\n   var toXml = function(v, name, ind) {\r\n      var xml = \"\";\r\n      if (v instanceof Array) {\r\n         for (var i=0, n=v.length; i<n; i++)\r\n            xml += ind + toXml(v[i], name, ind+\"\\t\") + \"\\n\";\r\n      }\r\n      else if (typeof(v) == \"object\") {\r\n         var hasChild = false;\r\n         xml += ind + \"<\" + name;\r\n         for (var m in v) {\r\n            if (m.charAt(0) == \"@\")\r\n               xml += \" \" + m.substr(1) + \"=\\\"\" + v[m].toString() + \"\\\"\";\r\n            else\r\n               hasChild = true;\r\n         }\r\n         xml += hasChild ? \">\" : \"/>\";\r\n         if (hasChild) {\r\n            for (var m in v) {\r\n               if (m == \"#text\")\r\n                  xml += v[m];\r\n               else if (m == \"#cdata\")\r\n                  xml += \"<![CDATA[\" + v[m] + \"]]>\";\r\n               else if (m.charAt(0) != \"@\")\r\n                  xml += toXml(v[m], m, ind+\"\\t\");\r\n            }\r\n            xml += (xml.charAt(xml.length-1)==\"\\n\"?ind:\"\") + \"</\" + name + \">\";\r\n         }\r\n      }\r\n      else {\r\n         xml += ind + \"<\" + name + \">\" + v.toString() +  \"</\" + name + \">\";\r\n      }\r\n      return xml;\r\n   }, xml=\"\";\r\n   for (var m in o)\r\n      xml += toXml(o[m], m, \"\");\r\n   return tab ? xml.replace(/\\t/g, tab) : xml.replace(/\\t|\\n/g, \"\");\r\n}\r\n","/*\tThis work is licensed under Creative Commons GNU LGPL License.\r\n\r\n\tLicense: http://creativecommons.org/licenses/LGPL/2.1/\r\n   Version: 0.9\r\n\tAuthor:  Stefan Goessner/2006\r\n\tWeb:     http://goessner.net/ \r\n*/\r\nexport function xml2json(xml, tab = '    '/*XML_DOM, string*/) {\r\n   var X = {\r\n      toObj: function(xml) {\r\n         var o = {};\r\n         if (xml.nodeType==1) {   // element node ..\r\n            if (xml.attributes.length)   // element with attributes  ..\r\n               for (var i=0; i<xml.attributes.length; i++)\r\n                  o[\"@\"+xml.attributes[i].nodeName] = (xml.attributes[i].nodeValue||\"\").toString();\r\n            if (xml.firstChild) { // element has child nodes ..\r\n               var textChild=0, cdataChild=0, hasElementChild=false;\r\n               for (var n=xml.firstChild; n; n=n.nextSibling) {\r\n                  if (n.nodeType==1) hasElementChild = true;\r\n                  else if (n.nodeType==3 && n.nodeValue.match(/[^ \\f\\n\\r\\t\\v]/)) textChild++; // non-whitespace text\r\n                  else if (n.nodeType==4) cdataChild++; // cdata section node\r\n               }\r\n               if (hasElementChild) {\r\n                  if (textChild < 2 && cdataChild < 2) { // structured element with evtl. a single text or/and cdata node ..\r\n                     X.removeWhite(xml);\r\n                     for (var n=xml.firstChild; n; n=n.nextSibling) {\r\n                        if (n.nodeType == 3)  // text node\r\n                           o[\"#text\"] = X.escape(n.nodeValue);\r\n                        else if (n.nodeType == 4)  // cdata node\r\n                           o[\"#cdata\"] = X.escape(n.nodeValue);\r\n                        else if (o[n.nodeName]) {  // multiple occurence of element ..\r\n                           if (o[n.nodeName] instanceof Array)\r\n                              o[n.nodeName][o[n.nodeName].length] = X.toObj(n);\r\n                           else\r\n                              o[n.nodeName] = [o[n.nodeName], X.toObj(n)];\r\n                        }\r\n                        else  // first occurence of element..\r\n                           o[n.nodeName] = X.toObj(n);\r\n                     }\r\n                  }\r\n                  else { // mixed content\r\n                     if (!xml.attributes.length)\r\n                        o = X.escape(X.innerXml(xml));\r\n                     else\r\n                        o[\"#text\"] = X.escape(X.innerXml(xml));\r\n                  }\r\n               }\r\n               else if (textChild) { // pure text\r\n                  if (!xml.attributes.length)\r\n                     o = X.escape(X.innerXml(xml));\r\n                  else\r\n                     o[\"#text\"] = X.escape(X.innerXml(xml));\r\n               }\r\n               else if (cdataChild) { // cdata\r\n                  if (cdataChild > 1)\r\n                     o = X.escape(X.innerXml(xml));\r\n                  else\r\n                     for (var n=xml.firstChild; n; n=n.nextSibling)\r\n                        o[\"#cdata\"] = X.escape(n.nodeValue);\r\n               }\r\n            }\r\n            if (!xml.attributes.length && !xml.firstChild) o = null;\r\n         }\r\n         else if (xml.nodeType==9) { // document.node\r\n            o = X.toObj(xml.documentElement);\r\n         }\r\n         else alert(\"unhandled node type: \" + xml.nodeType);\r\n         return o;\r\n      },\r\n      toJson: function(o, name, ind) {\r\n         var json = name ? (\"\\\"\"+name+\"\\\"\") : \"\";\r\n         if (o instanceof Array) {\r\n            for (var i=0,n=o.length; i<n; i++)\r\n               o[i] = X.toJson(o[i], \"\", ind+\"\\t\");\r\n            json += (name?\":[\":\"[\") + (o.length > 1 ? (\"\\n\"+ind+\"\\t\"+o.join(\",\\n\"+ind+\"\\t\")+\"\\n\"+ind) : o.join(\"\")) + \"]\";\r\n         }\r\n         else if (o == null)\r\n            json += (name&&\":\") + \"null\";\r\n         else if (typeof(o) == \"object\") {\r\n            var arr = [];\r\n            for (var m in o)\r\n               arr[arr.length] = X.toJson(o[m], m, ind+\"\\t\");\r\n            json += (name?\":{\":\"{\") + (arr.length > 1 ? (\"\\n\"+ind+\"\\t\"+arr.join(\",\\n\"+ind+\"\\t\")+\"\\n\"+ind) : arr.join(\"\")) + \"}\";\r\n         }\r\n         else if (typeof(o) == \"string\")\r\n            json += (name&&\":\") + \"\\\"\" + o.toString() + \"\\\"\";\r\n         else\r\n            json += (name&&\":\") + o.toString();\r\n         return json;\r\n      },\r\n      innerXml: function(node) {\r\n         var s = \"\"\r\n         if (\"innerHTML\" in node)\r\n            s = node.innerHTML;\r\n         else {\r\n            var asXml = function(n) {\r\n               var s = \"\";\r\n               if (n.nodeType == 1) {\r\n                  s += \"<\" + n.nodeName;\r\n                  for (var i=0; i<n.attributes.length;i++)\r\n                     s += \" \" + n.attributes[i].nodeName + \"=\\\"\" + (n.attributes[i].nodeValue||\"\").toString() + \"\\\"\";\r\n                  if (n.firstChild) {\r\n                     s += \">\";\r\n                     for (var c=n.firstChild; c; c=c.nextSibling)\r\n                        s += asXml(c);\r\n                     s += \"</\"+n.nodeName+\">\";\r\n                  }\r\n                  else\r\n                     s += \"/>\";\r\n               }\r\n               else if (n.nodeType == 3)\r\n                  s += n.nodeValue;\r\n               else if (n.nodeType == 4)\r\n                  s += \"<![CDATA[\" + n.nodeValue + \"]]>\";\r\n               return s;\r\n            };\r\n            for (var c=node.firstChild; c; c=c.nextSibling)\r\n               s += asXml(c);\r\n         }\r\n         return s;\r\n      },\r\n      escape: function(txt) {\r\n         return txt.replace(/[\\\\]/g, \"\\\\\\\\\")\r\n                   .replace(/[\\\"]/g, '\\\\\"')\r\n                   .replace(/[\\n]/g, '\\\\n')\r\n                   .replace(/[\\r]/g, '\\\\r');\r\n      },\r\n      removeWhite: function(e) {\r\n         e.normalize();\r\n         for (var n = e.firstChild; n; ) {\r\n            if (n.nodeType == 3) {  // text node\r\n               if (!n.nodeValue.match(/[^ \\f\\n\\r\\t\\v]/)) { // pure whitespace text node\r\n                  var nxt = n.nextSibling;\r\n                  e.removeChild(n);\r\n                  n = nxt;\r\n               }\r\n               else\r\n                  n = n.nextSibling;\r\n            }\r\n            else if (n.nodeType == 1) {  // element node\r\n               X.removeWhite(n);\r\n               n = n.nextSibling;\r\n            }\r\n            else                      // any other node\r\n               n = n.nextSibling;\r\n         }\r\n         return e;\r\n      }\r\n   };\r\n   if (xml.nodeType == 9) // document node\r\n      xml = xml.documentElement;\r\n   var json = X.toJson(X.toObj(X.removeWhite(xml)), xml.nodeName, \"\\t\");\r\n   return \"{\\n\" + tab + (tab ? json.replace(/\\t/g, tab) : json.replace(/\\t|\\n/g, \"\")) + \"\\n}\";\r\n}\r\n","import {\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  M2Class,\r\n  IAttribute, IReference,\r\n  IFeature,\r\n  ModelPiece, MetaMetaModel,\r\n  ISidebar, XMIModel,\r\n  IGraph, IModel, Status,\r\n  ECoreClass, ECorePackage, ECoreRoot, ECoreOperation, MAttribute, IClass, IClassifier, ECoreAnnotation, ECoreEnum\r\n} from './Joiner';\r\n\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport MouseDownEvent = JQuery.MouseDownEvent;\r\nimport MouseMoveEvent = JQuery.MouseMoveEvent;\r\nimport MouseUpEvent = JQuery.MouseUpEvent;\r\nimport ContextMenuEvent = JQuery.ContextMenuEvent;\r\nexport class Dictionary<K = string, V = string> extends Object {}\r\nimport * as detectzoooom            from 'detect-zoom'; // https://github.com/tombigel/detect-zoom broken 2013? but works\r\n\r\nimport ResizableOptions = JQueryUI.ResizableOptions;\r\nimport DraggableOptions = JQueryUI.DraggableOptions;\r\nimport ResizableUIParams = JQueryUI.ResizableUIParams;\r\nimport DraggableEventUIParams = JQueryUI.DraggableEventUIParams;\r\nimport KeyDownEvent = JQuery.KeyDownEvent;\r\nimport MouseEnterEvent = JQuery.MouseEnterEvent;\r\nimport MouseLeaveEvent = JQuery.MouseLeaveEvent;\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\n\r\nexport class MeasurableArrays {rules: Attr[]; imports: Attr[]; exports: Attr[]; variables: Attr[];\r\n  constraints: Attr[]; chain: Attr[]; chainFinal: Attr[]; dstyle: Attr[]; html: HTMLElement | SVGElement; e: Event}\r\n\r\nexport class myFileReader {\r\n  private static input: HTMLInputElement;\r\n  private static fileTypes: string [];\r\n  private static onchange: (e: ChangeEvent) => void;\r\n  // constructor(onchange: (e: ChangeEvent) => void = null, fileTypes: FileReadTypeEnum[] | string[] = null) { myFileReader.setinfos(fileTypes, onchange); }\r\n  private static setinfos(fileTypes: FileReadTypeEnum[] | string[] = null, onchange: (e: ChangeEvent, files: FileList, contents: string[]) => void, readcontent: boolean) {\r\n    myFileReader.fileTypes = (fileTypes || myFileReader.fileTypes) as string[];\r\n    console.log('fileTypes:', myFileReader.fileTypes, fileTypes);\r\n    myFileReader.input = document.createElement('input');\r\n    const input: HTMLInputElement = myFileReader.input;\r\n    myFileReader.onchange = function (e: ChangeEvent): void {\r\n      if (!readcontent) { onchange(e, input.files, null); return; }\r\n      let contentObj = {};\r\n      let fileLetti: number = 0;\r\n      for (let i: number = 0; i < input.files.length; i++) {\r\n        const f: File = input.files[i];\r\n        console.log('filereadContent['+i+']( file:', f, ')');\r\n        U.fileReadContent(f, (content: string) => {\r\n          console.log('file['+i+'] read complete. done: ' + ( 1 + fileLetti) + ' / ' + input.files.length, 'contentObj:', contentObj);\r\n          contentObj[i] = content; // cannot use array, i'm not sure the callbacks will be called in order. using push is safer but could alter order.\r\n          // this is last file to read.\r\n          if (++fileLetti === input.files.length) {\r\n            const contentArr: string[] = [];\r\n            for (let j: number = 0; j < input.files.length; j++) { contentArr.push(contentObj[j]); }\r\n            onchange(e, input.files, contentArr);\r\n          }\r\n        });\r\n      }\r\n    } || myFileReader.onchange;\r\n  }\r\n  private static reset(): void {\r\n    myFileReader.fileTypes = null;\r\n    myFileReader.onchange = null;\r\n    myFileReader.input = null;\r\n  }\r\n  public static show(onChange: (e: ChangeEvent, files: FileList, contents: string[]) => void, extensions: string[] | FileReadTypeEnum[] = null, readContent: boolean): void {\r\n    myFileReader.setinfos(extensions, onChange, readContent);\r\n    myFileReader.input.setAttribute('type', 'file');\r\n    if (myFileReader.fileTypes) {\r\n      let filetypestr: string = '';\r\n      const sepkey: string = U.getStartSeparatorKey();\r\n      for (let i = 0; i < myFileReader.fileTypes.length; i++) { filetypestr += U.startSeparator(sepkey, ',') + myFileReader.fileTypes[i]; }\r\n      myFileReader.input.setAttribute('accept', filetypestr);\r\n    }\r\n    console.log('fileTypes:', myFileReader.fileTypes, 'input:', myFileReader.input);\r\n    $(myFileReader.input).on('change.custom', myFileReader.onchange).trigger('click');\r\n    myFileReader.reset();\r\n  }\r\n}\r\nexport class InputPopup {\r\n  static popupCounter = 0;\r\n  html: HTMLElement;\r\n  constructor(title: string, txtpre: string, txtpost: string, event: any[][] /* array of (['oninput', onInputFunction])*/,\r\n              placeholder: string = null, value: string, inputType: string = 'input', inputSubType: string = null) {\r\n    const value0 = value;\r\n    if (!value) { value = ''; }\r\n    const id = 'popup_' + InputPopup.popupCounter++;\r\n    placeholder = (placeholder ? 'placeholder=\"' + placeholder + '\"' : '');\r\n    inputSubType = (inputSubType ? 'type = \"' + inputSubType + '\"' : '');\r\n    let innerValue: string;\r\n    if (inputType.toLowerCase() === 'textarea') {\r\n      innerValue = U.replaceAll(U.replaceAll(value, '<', '&lt;'), '>', '&gt;');\r\n      innerValue += '</' + inputType + '>';\r\n      value = '';\r\n    } else { value = value === '' ? '' : 'value=\"' + U.replaceAll(value, '\"', '&quot;') + '\"'; innerValue = ''; }\r\n    const container: HTMLElement = U.toHtml('' +\r\n      '<div _ngcontent-c3=\"\" data-closebuttontarget=\"' + id + '\" class=\"screenWideShadow\" style=\"display: none;\">' +\r\n      '<div _ngcontent-c3=\"\" class=\"popupContent\">' +\r\n      '<h1 _ngcontent-c3=\"\" style=\"text-align: center;\">' + title + '</h1>' +\r\n      '<button _ngcontent-c3=\"\" class=\"closeButton\" data-closebuttontarget=\"' + id + '\">X</button>' +\r\n      '<br _ngcontent-c3=\"\">' +\r\n      '<div _ngcontent-c3=\"\" class=\"TypeList\">' +\r\n      '<table class=\"typeTable\"><tbody>' +\r\n      '<tr class=\"typeRow\"><td class=\"alias textPre\">' + txtpre + '</td>' +\r\n      '<' + inputType + ' ' + inputSubType + ' ' + placeholder + ' ' + value + ' class=\"form-control popupInput\" ' +\r\n      'aria-label=\"Small\" aria-describedby=\"inputGroup-sizing-sm\">' + innerValue + txtpost +\r\n      '</td>' +\r\n      '</tr>' +\r\n      '</tbody></table></div>' +\r\n      '</div></div>');\r\n    const $input = $(container).find('input');\r\n    U.closeButtonSetup($(container));\r\n    let i = -1;\r\n    while (++i < event.length) {\r\n      const currentEvt = event[i];\r\n      $input.on(currentEvt[0], currentEvt[1]);\r\n    }\r\n    this.html = container;\r\n\r\n    if (inputType === 'textarea') {\r\n      this.getInputNode()[0].setAttribute('style', 'width: calc(75vw - 152px); height: calc(75vh - 200px);');\r\n    }\r\n    this.show();\r\n  }\r\n  getInputNode(): JQuery<HTMLElement> { return $(this.html).find('.popupInput'); }\r\n  show(): void {\r\n    document.body.appendChild(this.html);\r\n    this.html.style.display = 'block'; }\r\n  hide(): void { this.html.style.display = 'none'; }\r\n  destroy(): null {\r\n    if (this.html && this.html.parentNode) {\r\n      this.html.parentNode.removeChild(this.html);\r\n      return this.html = null; }\r\n  }\r\n\r\n  addOkButton(load1: string, finish: () => void) {\r\n    const input: HTMLElement = this.getInputNode()[0];\r\n    const button: HTMLButtonElement = document.createElement('button');\r\n    button.innerText = 'Confirm';\r\n    const size: Size = U.sizeof(button);\r\n    button.style.left = 'calc( 50% - ' + size.w / 2 + 'px);';\r\n    input.parentNode.appendChild(button);\r\n    $(button).on('click.btnclickpopup', finish);\r\n  }\r\n\r\n  setPostText(str: string) { $(this.html).find('.textPre')[0].innerHTML = str; }\r\n}\r\n\r\nexport enum ShortAttribETypes {\r\n  void = 'void',\r\n  EChar  = 'Echar',\r\n  EString  = 'EString',\r\n  EDate  = 'EDate',\r\n  EFloat  = 'EFloat',\r\n  EDouble  = 'EDouble',\r\n  EBoolean = 'EBoolean',\r\n  EByte  = 'EByte',\r\n  EShort  = 'EShort',\r\n  EInt  = 'EInt',\r\n  ELong  = 'ELong',\r\n  /*\r\n  ECharObj  = 'ECharObj',\r\n  EStringObj  = 'EStringObj',\r\n  EDateObj  = 'EDateObj',\r\n  EFloatObj  = 'EFloatObj',\r\n  EDoubleObj  = 'EDoubleObj',\r\n  EBooleanObj = 'EBooleanObj',\r\n  EByteObj  = 'EByteObj',\r\n  EShortObj  = 'EShortObj',\r\n  EIntObj  = 'EIntObj',\r\n  ELongObj  = 'ELongObj',\r\n  EELIST  = 'EELIST',*/\r\n\r\n}\r\n\r\nexport class U {\r\n  public static loopcounter = 0;\r\n  private static prefix = 'ULibrary_';\r\n  private static sizeofvar: HTMLElement = null;\r\n  private static $sizeofvar: JQuery<HTMLElement> = null;\r\n  private static clipboardinput: HTMLInputElement = null;\r\n  private static PermuteArr: any[][] = [];\r\n  private static PermuteUsedChars: any[] = [];\r\n  private static resizingBorder: HTMLElement = null;\r\n  private static resizingContainer: HTMLElement = null;\r\n  // static he = null;\r\n  public static production = false;\r\n  private static addCssAvoidDuplicates: Dictionary<string, HTMLStyleElement> = {};\r\n  static $measurableRelativeTargetRoot: JQuery<HTMLElement | SVGElement>;\r\n  static varTextToSvg: SVGSVGElement = null;\r\n  private static dblclickchecker: number = new Date().getTime();// todo: move @ start\r\n  private static dblclicktimerms: number = 300;// todo: move @ start\r\n  static checkDblClick(): boolean {\r\n    const now: number = new Date().getTime();\r\n    const old: number = U.dblclickchecker;\r\n    U.dblclickchecker = now;\r\n    console.log('dblclick time:', now - old, now, old);\r\n    return (now - old <= U.dblclicktimerms); }\r\n\r\n\r\n  static firstToUpper(s: string): string {\r\n    if (!s || s === '') return s;\r\n    return s.charAt(0).toUpperCase() + s.slice(1); }\r\n\r\n  static fileReadContent(file: File, callback: (content :string) => void): void {\r\n    const textType = /text.*/;\r\n    try { if (!file.type || file.type.match(textType)) {\r\n      let reader = new FileReader();\r\n      reader.onload = function(e) { callback( '' + reader.result ); };\r\n      reader.readAsText(file);\r\n      return;\r\n    } } catch(e) { U.pe(true, \"Exception while trying to read file as text. Error: |\", e, \"|\", file); }\r\n    U.pe(true, \"Wrong file type found: |\", file ? file.type : null, \"|\", file); }\r\n\r\n  static fileRead(onChange: (e: ChangeEvent, files: FileList, contents: string[]) => void, extensions: string[] | FileReadTypeEnum[] = null, readContent: boolean): void {\r\n    myFileReader.show(onChange, extensions, readContent);\r\n  }\r\n  public static textToSvg<T extends SVGElement>(str: string): T { return U.textToSvgArr<T>(str)[0]; }\r\n  static textToSvgArr<T extends SVGElement> (str: string): T[] {\r\n    if (!U.varTextToSvg) { U.varTextToSvg = U.newSvg<SVGSVGElement>('svg'); }\r\n    U.varTextToSvg.innerHTML = str;\r\n    const ret: T[] = [];\r\n    let i: number;\r\n    for (i = 0; i < U.varTextToSvg.childNodes.length; i++) { ret.push(U.varTextToSvg.childNodes[i] as T); }\r\n    return ret; }\r\n\r\n  static addCss(key: string, str: string, prepend: boolean = true): void {\r\n    const css: HTMLStyleElement = document.createElement('style');\r\n    css.innerHTML = str;\r\n    const old: HTMLStyleElement = U.addCssAvoidDuplicates[key];\r\n    if (old) { old.parentNode.removeChild(old); }\r\n    U.addCssAvoidDuplicates[key] = css;\r\n    if (prepend) { document.head.prepend(css); } else { document.head.append(css); }\r\n  }\r\n\r\n  static clear(htmlNode: HTMLElement | SVGElement) {\r\n    while (htmlNode.firstChild) {\r\n      htmlNode.removeChild(htmlNode.firstChild);\r\n    }\r\n  }\r\n\r\n  static clearAllTimeouts(): void {\r\n    const highestTimeoutId: number = setTimeout(() => {}, 1) as any;\r\n    for (let i = 0 ; i < highestTimeoutId ; i++) { clearTimeout(i); }\r\n  }\r\n  static petmp(b: boolean, s: any, ...restArgs: any[]): null { return U.pe(b, s, restArgs); }\r\n\r\n  static pe(b: boolean, s: any, ...restArgs: any[]): null {\r\n    if (!b) { return null; }\r\n    if (restArgs === null || restArgs === undefined) { restArgs = []; }\r\n    let str = 'Error:' + s + '';\r\n    console.error('pe[0/' + (restArgs.length + 1) + ']: ', s);\r\n    for (let i = 0; i < restArgs.length; i++) {\r\n      s = restArgs[i];\r\n      str += 'pe[' + (i + 1) + '/' + (restArgs.length + 1) + ']: ' + s + '\\t\\t\\r\\n';\r\n      console.error('pe[' + (i + 1) + '/' + (restArgs.length + 1) + ']: ', s);\r\n    }\r\n    if (!U.production) { alert(str); } else U.pw(true, s, ...restArgs);\r\n    return (((b as unknown) as any[])['@makeMeCrash'] as any[])['@makeMeCrash']; }\r\n\r\n  static pw(b: boolean, s: any, ...restArgs: any[]): string {\r\n    if (!b) { return null; }\r\n    if (restArgs === null || restArgs === undefined) { restArgs = []; }\r\n    console['' + 'trace']();\r\n    let str = 'Warning:' + s + '';\r\n    console.warn('pw[0/' + (restArgs.length + 1) + ']: ', s);\r\n    for (let i = 0; i < restArgs.length; i++) {\r\n      s = restArgs[i];\r\n      str += 'pw[' + (i + 1) + '/' + (restArgs.length + 1) + ']: ' + s + '\\t\\t\\r\\n';\r\n      console.warn('pw[' + (i + 1) + '/' + (restArgs.length + 1) + ']: ', s);\r\n    }\r\n    U.bootstrapPopup(str, 'warning', 5000);\r\n    // s = (((b as unknown) as any[])['@makeMeCrash'] as any[])['@makeMeCrash'];\r\n    return str; }\r\n\r\n  static ps(b: boolean, s: any, ...restArgs: any[]): string {\r\n    if (!b) { return null; }\r\n    if (restArgs === null || restArgs === undefined) { restArgs = []; }\r\n    let str = s + '';\r\n    console.info('ps[0/' + (restArgs.length + 1) + ']: ', s);\r\n    for (let i = 0; i < restArgs.length; i++) {\r\n      s = restArgs[i];\r\n      str += 'ps[' + (i + 1) + '/' + (restArgs.length + 1) + ']: ' + s + '\\t\\t\\r\\n';\r\n      console.info('pw[' + (i + 1) + '/' + (restArgs.length + 1) + ']: ', s);\r\n    }\r\n    U.bootstrapPopup(str, 'success', 3000);\r\n    // s = (((b as unknown) as any[])['@makeMeCrash'] as any[])['@makeMeCrash'];\r\n    return str; }\r\n\r\n  static pif(b: boolean, s: any, ...restArgs: any[]): string {\r\n    if (!b) {\r\n      return null;\r\n    }\r\n    if (restArgs === null || restArgs === undefined) {\r\n      restArgs = [];\r\n    }\r\n    let str = 'p: ' + s;\r\n    console.info('p:', s);\r\n    for (let i = 0; i < restArgs.length; i++) {\r\n      s = restArgs[i];\r\n      str += 'p[' + (i + 1) + '/' + restArgs.length + ']: ' + s + '\\t\\t\\r\\n';\r\n      console.info('p[' + (i + 1) + '/' + restArgs.length + ']: ', s);\r\n    }\r\n    // alert(str);\r\n    return str; }\r\n\r\n  static p(s: any, ...restArgs: any[]): string {\r\n    if (restArgs === null || restArgs === undefined) { restArgs = []; }\r\n    let str = 'p: ' + s;\r\n    console.info('p:', s);\r\n    for (let i = 0; i < restArgs.length; i++) {\r\n      s = restArgs[i];\r\n      str += 'p[' + (i + 1) + '/' + restArgs.length + ']: ' + s + '\\t\\t\\r\\n';\r\n      console.info('p[' + (i + 1) + '/' + restArgs.length + ']: ', s);\r\n    }\r\n    // alert(str);\r\n    return str;\r\n  }\r\n\r\n  static $alertcontainer: JQuery<HTMLElement> = null;\r\n  static alertcontainer: HTMLElement = null;\r\n  static bootstrapPopup(innerhtmlstr: string, color: 'success' | 'warning' | 'danger', timer: number): void {\r\n    const div = document.createElement('div');\r\n    if (!U.$alertcontainer) {\r\n      U.alertcontainer = document.createElement('div');\r\n      U.alertcontainer.classList.add('alertcontainer');\r\n      document.body.appendChild(U.alertcontainer);\r\n      U.$alertcontainer = $(U.alertcontainer); }\r\n    const container: HTMLElement = U.alertcontainer;\r\n    const $container = U.$alertcontainer;\r\n    const $div = $(div);\r\n    container.appendChild(div);\r\n    div.classList.add('alertshell');\r\n    document.body.appendChild(container);\r\n    div.setAttribute('role', 'alert');\r\n    const alertMargin: HTMLElement = document.createElement('div');\r\n    alertMargin.innerHTML = innerhtmlstr;\r\n    alertMargin.classList.add('alert');\r\n    alertMargin.classList.add('alert-' + color);\r\n    div.appendChild(alertMargin);\r\n    const end = () => { $div.slideUp(400, () => { container.removeChild(div); }); };\r\n    $div.hide().slideDown(200, () => setTimeout(end, timer)); }\r\n\r\n  static cloneHtml<T extends Element>(html: T, deep = true, defaultIDNum = 1): T {\r\n    const clone: T = html.cloneNode(deep) as T;\r\n    const getLastNum = (str: string): number => {\r\n      let pos = str.length ;\r\n      while ( --pos > 0 && !isNaN(+str.charAt(pos)) ) {}\r\n      const numstr = (str.substring(pos));\r\n      return isNaN(+numstr) ? defaultIDNum : +numstr;\r\n    };\r\n    if (!clone.id) { return clone; }\r\n    let lastnum = getLastNum(clone.id) - 1;\r\n    const tmpID: string = clone.id + (clone.id.indexOf('_Clone') === -1 ? '_Clone' : '');\r\n    while (document.getElementById(tmpID + (++lastnum))) {}\r\n    clone.id = tmpID + lastnum;\r\n    return clone;\r\n  }\r\n\r\n  public static clearAttributes(node: Element): void {\r\n    let j: number;\r\n    for (j = 0; j < node.attributes.length; j++) { node.removeAttribute(node.attributes[j].name); }\r\n  }\r\n\r\n  static cloneObj<T extends object>(o: T): Json {\r\n    // const r: HTMLElement = document.createElement(o.tagName);\r\n    // r.innerHTML = o.innerHTML;\r\n    // U.pe( o as HTMLElement !== null, 'non utilizzabile su html');\r\n    return JSON.parse(JSON.stringify(o));\r\n    // todo: questa funzione non può clonare html. allow cloneObj of circular objects.\r\n  }\r\n\r\n  static cloneObj2<T extends object>(o: T): T {\r\n    U.pe(true, 'todo: dovrebbe fare una deep copy copiando anche le funzioni (cosa che json.stringify non fa).');\r\n    return null; }\r\n\r\n  static loadScript(path: string, useEval: boolean = false): void {\r\n    const script = document.createElement('script');\r\n    script.src = path;\r\n    script.type = 'text/javascript';\r\n    U.pe(useEval, 'useEval: todo. potrebbe essere utile per avviare codice fuori dalle funzioni in futuro.');\r\n    document.body.append(script); }\r\n\r\n  static newSvg<T extends SVGElement>(type: string): T {\r\n    return document.createElementNS('http://www.w3.org/2000/svg', type) as T; }\r\n\r\n  static measurableGetArrays(measureHtml: HTMLElement | SVGElement, e: Event): MeasurableArrays {\r\n    if (!measureHtml) {\r\n      measureHtml = (e.target || e.currentTarget) as HTMLElement | SVGElement; // currentTarget === dicument sometimes.\r\n//      console.log('html:', measureHtml, 'e: ', e);\r\n      if (!measureHtml || measureHtml as any === document) {\r\n        measureHtml = e.target as HTMLElement | SVGElement;\r\n        while (measureHtml && !measureHtml.classList.contains('measurable')) { measureHtml = measureHtml.parentElement; }\r\n        U.pe(!measureHtml, ' failed to get measurableRoot. evt:', e);\r\n      }\r\n      if(measureHtml.classList.contains('ui-wrapper') && !measureHtml.classList.contains('measurable')\r\n        && (measureHtml.firstChild as HTMLElement).classList.contains('measurable')) { measureHtml = measureHtml.firstChild as any; }\r\n    }\r\n    const ret: {rules: Attr[], imports: Attr[], exports: Attr[], variables: Attr[], constraints: Attr[], chain: Attr[],\r\n      chainFinal: Attr[], dstyle: Attr[], html: HTMLElement | SVGElement, e: Event} = {} as any;\r\n    ret.e = e;\r\n    ret.html = measureHtml;\r\n    ret.rules = [];\r\n    ret.constraints = [];\r\n    ret.rules = [];\r\n    ret.imports = [];\r\n    ret.exports = [];\r\n    ret.variables = [];\r\n    ret.constraints = [];\r\n    ret.chain = [];\r\n    ret.chainFinal = [];\r\n    ret.dstyle = [];\r\n    let i: number;\r\n    for (i = 0; i < measureHtml.attributes.length; i++) {\r\n      const attr: Attr = measureHtml.attributes[i];\r\n      const key = attr.name.toLowerCase();\r\n      if (key.indexOf('_') !== 0) { continue; }\r\n      if (key.indexOf('_rule') === 0) { ret.rules.push(attr); continue; }\r\n      if (key.indexOf('_import') === 0) { ret.imports.push(attr); continue; }\r\n      if (key.indexOf('_export') === 0) { ret.exports.push(attr); continue; }\r\n      if (key.indexOf('_constraint') === 0) { ret.constraints.push(attr); continue; }\r\n      if (key.indexOf('_chain') === 0) { ret.chain.push(attr); continue; }\r\n      if (key.indexOf('_chainfinal') === 0) { ret.chainFinal.push(attr); continue; }\r\n      if (key.indexOf('_dstyle') === 0) { ret.dstyle.push(attr); continue; }\r\n      ret.variables.push(attr); }\r\n    return ret; }\r\n\r\n  static measurableElementSetup($root: JQuery<Element>, resizeConfig: ResizableOptions = null, dragConfig: DraggableOptions = null): void {\r\n    $root.find('.measurable').addBack('.measurable').each(\r\n      (i: number, h: Element) => U.measurableElementSetupSingle(h as HTMLElement | SVGElement,  resizeConfig, dragConfig)); }\r\n  static measurableElementSetupSingle(elem: HTMLElement | SVGElement, resizeConfig: ResizableOptions = null, dragConfig: DraggableOptions = null): void {\r\n    // apply resizableborder AND jquery.resize\r\n    if (!elem.classList || !elem.classList.contains('measurable') || elem as any === document) {\r\n      U.pw(true, 'invalid measurable:', elem, !elem.classList, '||', !elem.classList.contains('measurable')); return; }\r\n    U.resizableBorderSetup(elem as HTMLElement);\r\n    if (!resizeConfig) { resizeConfig = {}; }\r\n    if (!dragConfig) { dragConfig = {}; }\r\n    resizeConfig.create = resizeConfig.create || eval(elem.dataset.r_create);\r\n    resizeConfig.resize = resizeConfig.resize || eval(elem.dataset.r_resize);\r\n    resizeConfig.start = resizeConfig.start || eval(elem.dataset.r_start);\r\n    resizeConfig.stop = resizeConfig.stop || eval(elem.dataset.r_stop);\r\n    dragConfig.create = dragConfig.create || eval(elem.dataset.d_create);\r\n    dragConfig.drag = dragConfig.drag || eval(elem.dataset.d_drag);\r\n    dragConfig.start = dragConfig.start || eval(elem.dataset.d_start);\r\n    dragConfig.stop = dragConfig.stop || eval(elem.dataset.d_stop);\r\n    for (const key in resizeConfig) {\r\n      if (resizeConfig[key] || !elem.dataset['r_' + key]) { continue; }\r\n      resizeConfig[key] = elem.dataset['r_' + key]; }\r\n    for (const key in dragConfig) {\r\n      if (dragConfig[key] || !elem.dataset['d_' + key]) { continue; }\r\n      dragConfig[key] = elem.dataset['d_' + key]; }\r\n    $(elem).resizable(resizeConfig).draggable(dragConfig);\r\n  }\r\n\r\n  static replaceVars<T extends Element>(obj: object, html0: T, cloneHtml = true, debug: boolean = false): T {\r\n    const html: T = cloneHtml ? U.cloneHtml<T>(html0) : html0;\r\n    /// see it in action & parse or debug at\r\n    // v1) perfetto ma non supportata in jscript https://regex101.com/r/Do2ndU/1\r\n    // v2) usata: aggiustabile con if...substring(1). https://regex101.com/r/Do2ndU/3\r\n    // get text between 2 single '$' excluding $$, so they can be used as escape character to display a single '$'\r\n    // console.log('html0:', html0, 'html:', html);\r\n    U.pe(!(html instanceof Element), 'target must be a html node.', html, html0);\r\n    html.innerHTML = U.replaceVarsString(obj, html.innerHTML, debug);\r\n    U.pif(debug, 'ReplaceVars() return = ', html.innerHTML);\r\n    return html; }\r\n\r\n  static replaceVarsString0(obj: object, str: string, escapeC: string[] = null, replacer: string[] = null, debug: boolean = false): string {\r\n    U.pe(escapeC && !replacer, 'replacer cannot be null if escapeChar is defined.');\r\n    U.pe(replacer && !escapeC, 'escapeChar cannot be null if replacer is defined');\r\n    if (!escapeC && !replacer) { escapeC = replacer = []; }\r\n    U.pe(escapeC.length !== replacer.length, 'replacer and escapeChar must be arrays of the same length');\r\n    str = str.replace(/(^\\$|(((?!\\$).|^))[\\$](?!\\$))(.*?)(^\\$|((?!\\$).|^)[\\$](?!\\$))/gm,\r\n      (match: string, capture) => {\r\n        // console.log('matched:', match, 'capture: ', capture);\r\n        if (match === '$') { return ''; }\r\n        let prefixError = '';\r\n        if (match.charAt(0) !== '$') {\r\n          prefixError = match.charAt(0);\r\n          match = match.substring(1); }\r\n        // # = default value: {asHtml = true, isbase64 = false}\r\n        const asHtml = match.charAt(1) === '1' || match.charAt(1) !== '#';\r\n        const isBase64 = match.charAt(2) === '1' || match.charAt(2) !== '#';\r\n        const varname = match.substring(3, match.length - 1);\r\n        const debugtext = varname + '(' + match + ')';\r\n        U.pif(debug, 'match:', match);\r\n        const resultarr = U.replaceSingleVar(obj, varname, isBase64, false);\r\n        let result: string = resultarr[resultarr.length - 1].value;\r\n        if (result !== '' + result) { try { result = JSON.stringify(result); } catch(e) { result = '{_Cyclic object_}'} }\r\n        let i = -1;\r\n        U.pif(debug, 'replaceSingleVar: ', match, ', arr', resultarr, ', ret', result, ', this:', obj);\r\n        if (!asHtml) { while (++i < escapeC.length) { result = U.replaceAll(result, escapeC[i], replacer[i]); } }\r\n        U.pif(debug, 'replaceSingleVar: ' + debugtext + ' --> ' + result + ' --> ' + prefixError, result, obj);\r\n        if (U.isObject(result)) {  }\r\n        return prefixError + result;\r\n      });\r\n    return str; }\r\n\r\n  static replaceVarsString(obj: object, htmlStr: string, debug: boolean = false): string {\r\n    U.pe(!obj || !htmlStr, 'parameters cannot be null. obj:', obj, ', htmlString:', htmlStr);\r\n    //  https://stackoverflow.com/questions/38563414/javascript-regex-to-select-quoted-string-but-not-escape-quotes\r\n    //  good regex fatto da me https://regex101.com/r/bmWVrp/4\r\n\r\n    // only replace content inside \" quotes. (eventually escaping \")\r\n    htmlStr = U.QuoteReplaceVarString(obj, htmlStr, '\"', debug);\r\n    // only replace content inside ' quotes. (eventually escaping ')\r\n    htmlStr = U.QuoteReplaceVarString(obj, htmlStr, '\\'', debug);\r\n    // replaces what's left outside any quotation. (eventually escaping <>)\r\n    htmlStr = U.replaceVarsString0(obj, htmlStr, ['<', '>'], ['&lt;', '&gt;']); // check here aaaaaaaaaaaaaa $$$$$$$$$$$\r\n    return htmlStr; }\r\n\r\n  static QuoteReplaceVarString(obj: object, htmlStr: string, quote: string, debug: boolean = false): string {\r\n    U.pe(quote !== '\"' && quote !== '\\'', 'the only quote supported are single chars \" and \\'.');\r\n    const quoteEscape = quote === '&quot;' ? '' : '&#39;'; // '\\\\' + quote;\r\n    // todo: dovrei anche rimpiazzare & with &amp; per consentire input &something; trattati come stringhe.\r\n    // \"\"|(:?[^\\\\](?!\"\")|^)((:?\\\\\\\\)*\\\"(:?.*?[^\\\\\"]+){0,1}(:?\\\\\\\\)*\\\")\r\n    // '\"\"|(:?[^\\\\](?!\"\")|^)((:?\\\\\\\\)*\\\"(:?.*?[^\\\\\"]+){0,1}(:?\\\\\\\\)*\\\")'\r\n    // let regex = /\"\"|(:?[^\\\\](?!\"\")|^)((:?\\\\\\\\)*\\\"(:?.*?[^\\\\\"]+){0,1}(:?\\\\\\\\)*\\\")/;\r\n    let regexStr = '\"\"|(:?[^\\\\\\\\](?!\"\")|^)((:?\\\\\\\\\\\\\\\\)*\\\\\"(:?.*?[^\\\\\\\\\"]+){0,1}(:?\\\\\\\\\\\\\\\\)*\\\\\")';\r\n    if (quote !== '\"') { regexStr = U.replaceAll(regexStr, '\"', '\\''); }\r\n    const quoteRegex = new RegExp(regexStr, 'g'); // new RegExp(\"a\", \"b\"); === /a/b\r\n    htmlStr = htmlStr.replace(quoteRegex, (match: string, capture) => {\r\n      const start: number = match.indexOf(quote);\r\n      const end: number = match.lastIndexOf(quote);\r\n      const content: string = U.replaceVarsString0(obj, match.substring(start + 1, end), [quote], [quoteEscape], debug);\r\n      const ret = match.substring(0, start + 1) + content + match.substring(end);\r\n      U.pif(debug, 'replaceQuotedVars: match: |' + match + '| --> |' + content + '| --> |' + ret + '| html:' , htmlStr, 'capt:', capture);\r\n      return ret;\r\n    });\r\n    return htmlStr;\r\n  }\r\n\r\n  //todo: da rimuovere, è stata completamente superata dal nuovo return type array di replaceSingleVar\r\n  static replaceSingleVarGetParentAndChildKey(obj: object, fullpattern: string, canThrow: boolean = false): {parent: any, childkey: string} {\r\n    const ret: {parent: any, childkey: string} = {parent: null, childkey: null};\r\n    let targetPatternParent: string;\r\n    const pos = fullpattern.indexOf('.');\r\n    const isBase64 = fullpattern.charAt(2) === '1' || fullpattern.charAt(2) !== '#';\r\n    U.pe(isBase64, 'currently this method does not support base64 encoded templates. the conversion is still to do.', fullpattern);\r\n    if (pos === -1) {\r\n      ret.parent = obj;\r\n      ret.childkey = fullpattern.substring(3, fullpattern.length - 1);\r\n      return ret; }\r\n    try {\r\n      targetPatternParent = fullpattern.substring(0, pos) + '$';\r\n      const tmparr = U.replaceSingleVarRaw(obj, targetPatternParent);\r\n      ret.parent = tmparr[tmparr.length - 1].value;\r\n      ret.childkey = fullpattern.substring(pos + 1, fullpattern.length - 1);\r\n    } catch (e) {\r\n      U.pw(true, 'replaceSingleVarGetParentAndChildKey failed. fullpattern: |' + fullpattern + '| targetPatternParent: |'\r\n        + targetPatternParent + '| obj: ', obj, ' reason: ', e);\r\n      return null; }\r\n    return ret; }\r\n\r\n  static replaceSingleVarRaw(obj: object, fullpattern: string, canThrow: boolean = false): {token: string, value: any}[] {\r\n    fullpattern = fullpattern.trim();\r\n    const isBase64 = fullpattern.charAt(2) === '1' || fullpattern.charAt(2) !== '#';\r\n    const varName = fullpattern.substring(3, fullpattern.length - 1);\r\n    return U.replaceSingleVar(obj, varName, isBase64, canThrow); }\r\n\r\n  static replaceSingleVar(obj: object, varname: string, isBase64: boolean, canThrow: boolean = false): {token: string, value: any}[] {\r\n    const debug = false;\r\n    const showErrors = false;\r\n    let debugPathOk = '';\r\n    if (isBase64) { varname = atob(varname); }\r\n    let requestedValue: any = obj;\r\n    const fullpath: string = varname;\r\n    const tokens: string[] = varname.split('.'); // varname.split(/\\.,/);\r\n    const ret: {token: string, value: any}[] = [];\r\n    let j;\r\n    let token: string = null;\r\n    for (j = 0; j < tokens.length; j++) {\r\n      ret.push({token: token === null ? 'this' : token, value: requestedValue});\r\n      token = tokens[j];\r\n      U.pif(debug || showErrors, 'replacer: obj[req] = ', requestedValue, '[', token, '] =', (requestedValue ? requestedValue[token] : ''));\r\n      if (requestedValue === null || requestedValue === undefined) {\r\n        U.pe(showErrors, 'requested null or undefined:', obj, ', canthrow ? ', canThrow, ', fillplath:', fullpath);\r\n        if (canThrow) {\r\n          U.pif(showErrors, 'wrong variable path:', debugPathOk + '.' + token, ': ' + token + ' is undefined. object = ', obj);\r\n          throw new DOMException('replace_Vars.WrongVariablePath', 'replace_Vars.WrongVariablePath');\r\n        } else {\r\n          U.pif(showErrors, 'wrong variable path:', debugPathOk + '.' + token, ': ' + token + ' is undefined. ovjet = ', obj);\r\n        }\r\n\r\n        ret.push({token: token, value: 'Error: ' + debugPathOk + '.' + token + ' = ' + undefined});\r\n        // ret.push({token: token, value: requestedValue});\r\n        return ret;\r\n      } else { debugPathOk += (debugPathOk === '' ? '' : '.') + token; }\r\n      ////\r\n      if (requestedValue instanceof ModelPiece) {\r\n        const info: any = requestedValue.getInfo(true);\r\n        const key = token.toLowerCase();\r\n        if (key in info) { requestedValue = info[key]; } else { requestedValue = requestedValue[token]; }\r\n      } else { requestedValue = (requestedValue === null) ? undefined : requestedValue[token]; }\r\n    }\r\n\r\n    ret.push({token: token, value: requestedValue});\r\n    return ret; }\r\n\r\n  static replaceSingleVar_backup(obj: object, varname: string, isBase64: boolean, canThrow: boolean = false): any {\r\n    const debug = false;\r\n    const showErrors = false;\r\n    let debugPathOk = '';\r\n    if (isBase64) { varname = atob(varname); }\r\n    let requestedValue: any = obj;\r\n    const fullpath: string = varname;\r\n    const tokens: string[] = varname.split('.'); // varname.split(/\\.,/);\r\n    let j;\r\n    for (j = 0; j < tokens.length; j++) {\r\n      const token = tokens[j];\r\n      U.pif(debug || showErrors, 'replacer: obj[req] = ', requestedValue, '[', token, '] =', (requestedValue ? requestedValue[token] : ''));\r\n\r\n      if (requestedValue === null || requestedValue === undefined) {\r\n        U.pe(showErrors, 'requested null or undefined:', obj, ', canthrow ? ', canThrow, ', fillplath:', fullpath);\r\n        if (canThrow) {\r\n          U.pif(showErrors, 'wrong variable path:', debugPathOk + '.' + token, ': ' + token + ' is undefined. object = ', obj);\r\n          throw new DOMException('replace_Vars.WrongVariablePath', 'replace_Vars.WrongVariablePath');\r\n        } else {\r\n          U.pif(showErrors, 'wrong variable path:', debugPathOk + '.' + token, ': ' + token + ' is undefined. ovjet = ', obj);\r\n        }\r\n        return 'Error: ' + debugPathOk + '.' + token + ' = ' + undefined;\r\n      } else { debugPathOk += (debugPathOk === '' ? '' : '.') + token; }\r\n      ////\r\n      if (requestedValue instanceof ModelPiece) {\r\n        const info: any = requestedValue.getInfo(true);\r\n        const key = token.toLowerCase();\r\n        if (key in info) { requestedValue = info[key]; } else { requestedValue = requestedValue[token]; }\r\n      } else { requestedValue = (requestedValue === null) ? undefined : requestedValue[token]; }\r\n    }\r\n    return requestedValue; }\r\n\r\n  static changeVarTemplateDelimitersInMeasurables(innerText: string, toReplace: string = '$', replacement = '£'): string {\r\n    if (!innerText.indexOf('measurable')) { return innerText; } // + performance su scommessa probabilistica. better avg, worser worst case.\r\n    const html = document.createElement('div');\r\n    html.innerHTML = innerText;\r\n    const $measurables = $(html).find('.measurable');\r\n    let i: number;\r\n    let j: number;\r\n    for (i = 0; i < $measurables.length; i++) {\r\n      for (j = 0; j < $measurables[i].attributes.length; j++) {\r\n        if($measurables[i].attributes[j].name[0] !== '_') { continue; }\r\n        U.changeVarTemplateDelimitersInMeasurablesAttr($measurables[i].attributes[j], toReplace, replacement); } }\r\n    return html.innerHTML; }\r\n\r\n  static changeBackVarTemplateDelimitersInMeasurablesAttr(attrVal: string, toReplace: string = '£', replacement = '$'): string {\r\n    return U.changeVarTemplateDelimitersInMeasurablesAttrStr(attrVal, toReplace, replacement); }\r\n\r\n  private static changeVarTemplateDelimitersInMeasurablesAttr(attr: Attr, toReplace: string = '$', replacement = '£'): void {\r\n    attr.value = U.changeVarTemplateDelimitersInMeasurablesAttrStr(attr.value, toReplace, replacement); }\r\n\r\n  private static changeVarTemplateDelimitersInMeasurablesAttrStr(val: string, toReplace: string, replacement: string): string {\r\n    const r = toReplace;\r\n    const rstr = '(^\\\\' + r + '|(((?!\\\\' + r + ').|^))[\\\\' + r + '](?!\\\\' + r + '))(.*?)(^\\\\' + r + '|((?!\\\\' + r + ').|^)[\\\\' + r + '](?!\\\\' + r + '))';\r\n    return val.replace(new RegExp(rstr, 'gm'), (match: string, capture) => {\r\n      if (match === toReplace) { return toReplace; }\r\n      let prefixError = '';\r\n      if (match.charAt(0) !== toReplace) {\r\n        prefixError = match.charAt(0);\r\n        match = match.substring(1); }\r\n      return prefixError + replacement + match.substring(1, match.length - 1) + replacement;\r\n    }); }\r\n\r\n  static sizeof<T extends HTMLElement | SVGElement>(element: T, debug: boolean = false): Size {\r\n    U.pif(debug, 'sizeof(', element, ')');\r\n    U.pe(element as any === document, 'trying to measure document.');\r\n    if (element as any === document) { element = document.body as any; }\r\n    const $element = $(element);\r\n    U.pe(element.tagName === 'foreignObject', 'SvgForeignElementObject have a bug with size, measure a child instead.');\r\n    let i;\r\n    let tmp;\r\n    let size: Size;\r\n    if (!U.sizeofvar) {\r\n      U.sizeofvar = document.createElement('div');\r\n      document.body.append(U.sizeofvar); }\r\n\r\n    const isOrphan = element.parentNode === null;\r\n    // var visible = element.style.display !== 'none';\r\n    // var visible = $element.is(\":visible\"); crea bug quando un elemento è teoricamente visibile ma orfano\r\n    const ancestors = U.ancestorArray(element);\r\n    const visibile = [];\r\n    if (isOrphan) { U.sizeofvar.append(element); }\r\n    // show all and saveToDB visibility to restore it later\r\n    for (i = 0; i < ancestors.length; i++) { // document has undefined style\r\n      visibile[i] = (ancestors[i].style === undefined) ? (true) : (ancestors[i].style.display !== 'none');\r\n      if (!visibile[i]) {\r\n        $(ancestors[i]).show();\r\n      }\r\n    }\r\n    tmp = $element.offset();\r\n    size = new Size(tmp.left, tmp.top, 0, 0);\r\n    tmp = element.getBoundingClientRect();\r\n    size.w = tmp.width;\r\n    size.h = tmp.height;\r\n    // restore visibility\r\n    for (i = 0; i < ancestors.length; i++) {\r\n      if (!visibile[i]) {\r\n        $(ancestors[i]).hide();\r\n      }\r\n    }\r\n    if (isOrphan) { U.clear(U.sizeofvar); }\r\n    // Status.status.getActiveModel().graph.markS(size, false);\r\n    return size;\r\n  }\r\n\r\n  /* ritorna un array con tutti i figli, nipoti... discendenti di @parent */\r\n  static iterateDescendents(parent) {\r\n    return parent.getElementsByTagName('*');\r\n  }\r\n\r\n  static ancestorArray<T extends HTMLElement | SVGElement>(domelem: T): Array<T> {\r\n    // [0]=element, [1]=father, [2]=grandfather... [n]=document\r\n    if (domelem === null || domelem === undefined) { return []; }\r\n    const arr = [domelem];\r\n    let tmp: T = domelem.parentNode as T;\r\n    while (tmp !== null) {\r\n      arr.push(tmp);\r\n      tmp = tmp.parentNode as T; }\r\n    return arr;\r\n  }\r\n\r\n  static toSvg<T>(html: string): T {\r\n    U.pe(true, 'toSvg maybe not working, test before use');\r\n    const o: SVGElement = U.newSvg<SVGElement>('svg');\r\n    o.innerHTML = html;\r\n    return o.firstChild as unknown as T;\r\n  }\r\n\r\n  static toHtmlRow(html: string): HTMLTableRowElement {\r\n    return U.toHtml<HTMLTableRowElement>(html, U.toHtml('<table><tbody></tbody></table>').firstChild as HTMLElement);\r\n  }\r\n\r\n  static toHtmlCell(html: string): HTMLTableCellElement {\r\n    return U.toHtml<HTMLTableCellElement>(html, U.toHtml('<table><tbody><tr></tr></tbody></table>').firstChild.firstChild as HTMLElement);\r\n  }\r\n\r\n  static toHtml<T extends Element>(html: string, container: HTMLElement | SVGElement = null, containerTag: string = 'div'): T {\r\n    if (container === null) { container = document.createElement(containerTag); }\r\n    container.innerHTML = html;\r\n    const ret: T = container.firstChild as any;\r\n    container.removeChild(ret);\r\n    return ret; }\r\n\r\n  static toBase64Image(html: Element, container: Element = null, containerTag: string = 'div'): string {\r\n    // https://github.com/tsayen/dom-to-image\r\n    return 'HtmlToImage todo: check https://github.com/tsayen/dom-to-image';\r\n  }\r\n\r\n\r\n  /**\r\n   * checks if nodes have a vertical line relationship in the tree (parent, grandparent, ...);\r\n   * @ return {boolean}\r\n   */\r\n  static isParentOf(parent: HTMLElement | SVGElement, child: HTMLElement | SVGElement): boolean {\r\n    //  parent chains:   element -> ... -> body -> html -> document -> null\r\n    while (child !== null) {\r\n      if (parent === child) { return true; }\r\n      child = child.parentNode as HTMLElement | SVGElement;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static isChildrenOf(child: HTMLElement | SVGElement, parent: HTMLElement | SVGElement) {\r\n    return U.isParentOf(parent, child); }\r\n\r\n  static setSvgSize(style: SVGElement, size: GraphSize, defaultsize: GraphSize): GraphSize {\r\n    if (!style) return;\r\n    if (size) { size = size.duplicate(); } else { size = defaultsize.duplicate(); defaultsize = null; }\r\n    if (!U.isNumber(size.x)) {\r\n      U.pw(true, 'VertexSize Svg x attribute is NaN: ' + size.x + (!defaultsize ? '' : ' will be set to default: ' + defaultsize.x));\r\n      U.pe(!defaultsize || !U.isNumber(defaultsize.x), 'Both size and defaultsize are null.', size, defaultsize, style);\r\n      size.x = defaultsize.x; }\r\n    if (!U.isNumber(size.y)) {\r\n      U.pw(true, 'VertexSize Svg y attribute is NaN: ' + size.y + (!defaultsize ? '' : ' will be set to default: ' + defaultsize.y));\r\n      U.pe(!defaultsize || !U.isNumber(defaultsize.y), 'Both size and defaultsize are null.', size, defaultsize, style);\r\n      size.y = defaultsize.y; }\r\n    if (!U.isNumber(size.w)) {\r\n      U.pw(true, 'VertexSize Svg w attribute is NaN: ' + size.w + (!defaultsize ? '' : ' will be set to default: ' + defaultsize.w));\r\n      U.pe(!defaultsize || !U.isNumber(defaultsize.w), 'Both size and defaultsize are null.', size, defaultsize, style);\r\n      size.w = defaultsize.w; }\r\n    if (!U.isNumber(size.h)) {\r\n      U.pw(true, 'VertexSize Svg h attribute is NaN: ' + size.h + (!defaultsize ? '' : ' will be set to default: ' + defaultsize.h));\r\n      U.pe(!defaultsize || !U.isNumber(defaultsize.h), 'Both size and defaultsize are null.', size, defaultsize, style);\r\n      size.h = defaultsize.h; }\r\n    // U.pe(true, '100!, ', size, style);\r\n    style.setAttributeNS(null, 'x', '' + size.x);\r\n    style.setAttributeNS(null, 'y', '' + size.y);\r\n    style.setAttributeNS(null, 'width', '' + size.w);\r\n    style.setAttributeNS(null, 'height', '' + size.h);\r\n    return size; }\r\n\r\n  static getSvgSize(elem: SVGElement, minimum: GraphSize = null, maximum: GraphSize = null): GraphSize {\r\n    const defaults: GraphSize = new GraphSize(0, 0, 200, 99);\r\n    const ret0: GraphSize = new GraphSize(+elem.getAttribute('x'), +elem.getAttribute('y'),\r\n      +elem.getAttribute('width'), +elem.getAttribute('height'));\r\n    const ret: GraphSize = ret0.duplicate();\r\n    if (!U.isNumber(ret.x)) {\r\n      U.pw(true, 'Svg x attribute is NaN: ' + elem.getAttribute('x') + ' will be set to default: ' + defaults.x);\r\n      ret.x = defaults.x; }\r\n    if (!U.isNumber(ret.y)) {\r\n      U.pw(true, 'Svg y attribute is NaN: ' + elem.getAttribute('y') + ' will be set to default: ' + defaults.y);\r\n      ret.y = defaults.y; }\r\n    if (!U.isNumber(ret.w)) {\r\n      U.pw(true, 'Svg w attribute is NaN: ' + elem.getAttribute('width') + ' will be set to default: ' + defaults.w);\r\n      ret.w = defaults.w; }\r\n    if (!U.isNumber(ret.h)) {\r\n      U.pw(true, 'Svg h attribute is NaN: ' + elem.getAttribute('height') + ' will be set to default: ' + defaults.h);\r\n      ret.h = defaults.h; }\r\n    if (minimum) {\r\n      if (U.isNumber(minimum.x) && ret.x < minimum.x) { ret.x = minimum.x; }\r\n      if (U.isNumber(minimum.y) && ret.y < minimum.y) { ret.y = minimum.y; }\r\n      if (U.isNumber(minimum.w) && ret.w < minimum.w) { ret.w = minimum.w; }\r\n      if (U.isNumber(minimum.h) && ret.h < minimum.h) { ret.h = minimum.h; } }\r\n    if (maximum) {\r\n      if (U.isNumber(maximum.x) && ret.x > maximum.x) { ret.x = maximum.x; }\r\n      if (U.isNumber(maximum.y) && ret.y > maximum.y) { ret.y = maximum.y; }\r\n      if (U.isNumber(maximum.w) && ret.w > maximum.w) { ret.w = maximum.w; }\r\n      if (U.isNumber(maximum.h) && ret.h > maximum.h) { ret.h = maximum.h; } }\r\n    if (!ret.equals(ret0)) { U.setSvgSize(elem, ret, null); }\r\n    return ret; }\r\n\r\n  static findMetaParent<ParentT extends ModelPiece, childT extends ModelPiece>(parent: ParentT, childJson: Json, canFail: boolean, debug: boolean = true): childT {\r\n    const modelRoot: IModel = parent.getModelRoot();\r\n    // instanceof crasha non so perchè, dà undefined constructor quando non lo è.\r\n    if (U.getClass(modelRoot) === 'MetaMetaModel') { U.pif(debug, 'return null;'); return null; }\r\n    if (U.getClass(modelRoot) === 'MetaModel') { U.pif(debug, 'return null;'); return null; } // potrei ripensarci e collegarlo a m3\r\n    // todo: risolvi bene e capisci che collegamento deve esserci tra mmpackage e mpackage.\r\n    // fix temporaneo: così però consento di avere un solo package.\r\n    if (U.getClass(modelRoot) === 'Model' && U.getClass(parent) === 'Model') {\r\n      U.pif(debug, 'return: ', parent.metaParent.childrens[0] as childT);\r\n      return parent.metaParent.childrens[0] as childT; }\r\n    // if (modelRoot === Status.status.mmm || !Status.status.mmm && modelRoot instanceof MetaMetaModel) { return null; }\r\n    // if (modelRoot === Status.status.mm) { return null; }\r\n    const ParentMetaParent: ParentT = parent.metaParent as ParentT;\r\n    const metaParentName = Json.read<string>(childJson, XMIModel.namee, null);\r\n    // U.pe(!metaParentName, 'type not found.', childJson);\r\n    let i;\r\n    let ret: childT = null;\r\n    U.pif(debug, 'finding metaparent of:', childJson, 'parent:', parent, 'parent.metaparent:', ParentMetaParent,\r\n      'childrens:', ParentMetaParent ? ParentMetaParent.childrens : 'null parent');\r\n    for (i = 0; i < ParentMetaParent.childrens.length; i++) {\r\n      const metaVersionCandidate = ParentMetaParent.childrens[i];\r\n      const candidateName = metaVersionCandidate.name;\r\n      U.pif(debug, 'check[' + i + '/' + ParentMetaParent.childrens.length + '] ' + candidateName + ' =?= ' + metaParentName + ' ? ' +\r\n        (candidateName === metaParentName));\r\n      // console.log('is metaparent? of:', metaParentName, ' === ', candidateName, ' ? ', candidateName === metaParentName);\r\n      if (candidateName === metaParentName) {\r\n        ret = metaVersionCandidate as childT;\r\n        break;\r\n      }\r\n    }\r\n    U.pif(debug, 'return: ', ret);\r\n    U.pe(ret == null && !canFail, 'metaParent not found. metaParentParent:', ParentMetaParent,\r\n      'metaParentName:', metaParentName, 'parent:', parent, 'json:', childJson);\r\n    // console.log('findMetaParent of:', childJson, ' using parent:', parent, ' = ', ret);\r\n    return ret; }\r\n\r\n  /*\r\n    static findMetaParentP(parent: IModel, childJson: Json, canFail: boolean = true): IPackage {\r\n      return U.findMetaParent<IModel, IPackage>(parent, childJson, canFail);\r\n    }\r\n\r\n    static findMetaParentC(parent: IPackage, childJson: Json, canFail: boolean = true): M2Class {\r\n      return U.findMetaParent<IPackage, M2Class>(parent, childJson, canFail);\r\n    }\r\n\r\n    static findMetaParentA(prnt: M2Class, childJ: Json, canFail: boolean = true): IAttribute {\r\n      return U.findMetaParent<M2Class, IAttribute>(prnt, childJ, canFail);\r\n    }\r\n\r\n    static findMetaParentR(prnt: M2Class, childJ: Json, canFail: boolean = true): IReference {\r\n      return U.findMetaParent<M2Class, IReference>(prnt, childJ, canFail);\r\n    }\r\n  */\r\n  static arrayRemoveAll<T>(arr: Array<T>, elem: T, debug: boolean = false): void {\r\n    let index;\r\n    while (true) {\r\n      index = arr.indexOf(elem);\r\n      U.pif (debug, 'ArrayRemoveAll: index: ', index, '; arr:', arr, '; elem:', elem);\r\n      if (index === -1) { return; }\r\n      arr.splice(index, 1);\r\n      U.pif (debug, 'ArrayRemoveAll RemovedOne:', arr);\r\n    }\r\n  }\r\n\r\n  static eventiDaAggiungereAlBody(selecteds: string) {\r\n    // todo: guarda gli invocatori\r\n  }\r\n\r\n  static isOnEdge(pt: GraphPoint, shape: GraphSize): boolean {\r\n    return U.isOnHorizontalEdges(pt, shape) || U.isOnVerticalEdges(pt, shape); }\r\n\r\n  static isOnVerticalEdges(pt: GraphPoint, shape: GraphSize): boolean {\r\n    return U.isOnLeftEdge(pt, shape) || U.isOnRightEdge(pt, shape); }\r\n\r\n  static isOnHorizontalEdges(pt: GraphPoint, shape: GraphSize): boolean {\r\n    return U.isOnTopEdge(pt, shape) || U.isOnBottomEdge(pt, shape); }\r\n\r\n  static isOnRightEdge(pt: GraphPoint, shape: GraphSize): boolean {\r\n    if (!pt || !shape) { return null; }\r\n    return (pt.x === shape.x + shape.w) && (pt.y >= shape.y && pt.y <= shape.y + shape.h);\r\n  }\r\n\r\n  static isOnLeftEdge(pt: GraphPoint, shape: GraphSize): boolean {\r\n    if (!pt || !shape) { return null; }\r\n    return (pt.x === shape.x) && (pt.y >= shape.y && pt.y <= shape.y + shape.h);\r\n  }\r\n\r\n  static isOnTopEdge(pt: GraphPoint, shape: GraphSize): boolean {\r\n    if (!pt || !shape) { return null; }\r\n    return (pt.y === shape.y) && (pt.x >= shape.x && pt.x <= shape.x + shape.w);\r\n  }\r\n\r\n  static isOnBottomEdge(pt: GraphPoint, shape: GraphSize): boolean {\r\n    if (!pt || !shape) { return null; }\r\n    return (pt.y === shape.y + shape.h) && (pt.x >= shape.x && pt.x <= shape.x + shape.w);\r\n  }\r\n  // usage: var scope1 = makeEvalContext(\"variable declariation list\"); scope1(\"another eval like: x *=3;\");\r\n  // remarks: variable can be declared only on the first call, further calls on a created context can only modify the context without expanding it.\r\n\r\n  static makeEvalContext(declarations: string): (exp: string) => any {\r\n    eval(declarations);\r\n    return (str) => eval(str); }\r\n\r\n  // same as above, but with dynamic context, although it's only extensible manually and not by the eval code itself.\r\n  static evalInContext(context, js): any {\r\n    let value;\r\n    try { // for expressions\r\n      value = eval('with(context) { ' + js + ' }');\r\n    } catch (e) {\r\n      if (e instanceof SyntaxError) {\r\n        //try { // for statements\r\n        value = (new Function('with(this) { ' + js + ' }')).call(context);\r\n        //} catch (e) { U.pw(true, 'error evaluating')}\r\n      }\r\n    }\r\n    return value; }\r\n\r\n  static multiReplaceAllKV(a: string, kv: string[][] = []): string {\r\n    const keys: string[] = [];\r\n    const vals: string[] = [];\r\n    let i: number;\r\n    for (i = 0; i < kv.length; i++) { keys.push(kv[i][0]); vals.push(kv[i][0]); }\r\n    return U.multiReplaceAll(a, keys, vals); }\r\n\r\n  static multiReplaceAll(a: string, searchText: string[] = [], replacement: string[] = []): string {\r\n    U.pe(!(searchText.length === replacement.length), 'search and replacement must be have same length:', searchText, replacement);\r\n    let i = -1;\r\n    while (++i < searchText.length) { a = U.replaceAll(a, searchText[i], replacement[i]); }\r\n    return a; }\r\n  static toFileName(a: string = 'nameless.txt'): string {\r\n    if (!a) { a = 'nameless.txt'; }\r\n    a = U.multiReplaceAll(a.trim(), ['\\\\', '//', ':', '*', '?', '<', '>', '\"', '|'],\r\n      ['[lslash]', '[rslash]', ';', '°', '_', '{', '}', '\\'', '!']);\r\n    return a; }\r\n\r\n  static download(filename: string = 'nameless.txt', text: string = null, debug: boolean = true): void {\r\n    if (!text) { return; }\r\n    filename = U.toFileName(filename);\r\n    const htmla: HTMLAnchorElement = document.createElement('a');\r\n    const blob: Blob = new Blob([text], {type: 'text/plain', endings: 'native'});\r\n    const blobUrl: string = URL.createObjectURL(blob);\r\n    U.pif(debug, text + '|\\r\\n| <-- rn, |\\n| <--n.');\r\n    htmla.style.display = 'none';\r\n    htmla.href = blobUrl;\r\n    htmla.download = filename;\r\n    document.body.appendChild(htmla);\r\n    htmla.click();\r\n    window.URL.revokeObjectURL(blobUrl);\r\n    document.body.removeChild(htmla); }\r\n\r\n  /// arrotonda verso zero.\r\n  static trunc(num: number): number {\r\n    if (Math['trunc' + '']) {\r\n      return Math['trunc' + ''](num);\r\n    }\r\n    if (Math.floor && Math.ceil) {\r\n      return Math[num > 0 ? 'floor' : 'ceil'](num);\r\n    }\r\n    return Number(String(num).replace(/\\..*/, ''));\r\n  }\r\n\r\n  static closeButtonSetup($root: JQuery<HTMLElement>, debug: boolean = false) {\r\n    $root.find('.closeButton').off('click.closeButton').on('click.closeButton',\r\n      (e: ClickEvent) => {\r\n        let html: HTMLElement | SVGElement = e.target as HTMLElement | SVGElement;\r\n        const target: string = html.dataset.closebuttontarget;\r\n        html = html.parentNode as HTMLElement | SVGElement;\r\n        U.pif(debug, 'html:', html, 'target:', e.target, 'targetstr:', target, 'dataset:', e.target.dataset);\r\n        while (html && (html).dataset.closebuttontarget !== target) {\r\n          U.pif(debug, 'html:', html, ', data:', (html).dataset.closebuttontarget, ' === ' + target);\r\n          html = html.parentNode as HTMLElement | SVGElement;\r\n        }\r\n        U.pif(debug, 'html:', html);\r\n        U.pe(!html, 'closeTarget not found: event trigger:', e.target, 'html:', html);\r\n        $(html).hide();\r\n      });\r\n  }\r\n\r\n  static insertAt(arr: any[], index: number, elem: any) {\r\n    const oldl = arr.length;\r\n    const ret = arr.splice(index, 0, elem);\r\n    U.pe(oldl + 1 !== arr.length, oldl + ' --> ' + arr.length + '; arr not growing. ret:', ret, arr);\r\n  }\r\n\r\n  static setViewBox(svg: SVGElement, size: Size = null): void {\r\n    if (!size) { size = new Size(); size.x = size.y = size.w = size.h = null;}\r\n    let x = +size.x;\r\n    let y = +size.y;\r\n    let w = +size.w;\r\n    let h = +size.h;\r\n    let htmlsize: Size = null;\r\n    if (isNaN(x)) { x = 0; }\r\n    if (isNaN(y)) { y = 0; }\r\n    if (isNaN(w)) { w = htmlsize ? htmlsize.w : (htmlsize = U.sizeof(svg)).w; }\r\n    if (isNaN(h)) { h = htmlsize ? htmlsize.h : (htmlsize = U.sizeof(svg)).h; }\r\n    svg.setAttributeNS(null, 'viewBox', x + ' ' + y + ' ' + w + ' ' + h);\r\n  }\r\n\r\n  static getViewBox(svg: SVGElement): Size {\r\n    const str: string = svg.getAttributeNS(null, 'viewbox');\r\n    if (!str) return U.sizeof(svg);\r\n    const arr: string[] = str.split(' ');\r\n    let vbox: Size = new Size(0, 0, 0, 0);\r\n    if (isNaN(+arr[0])) { vbox = U.sizeof(svg); vbox.x = vbox.y = 0; return vbox; } else { vbox.x = +arr[0]; }\r\n    if (isNaN(+arr[1])) { vbox = U.sizeof(svg); vbox.x = vbox.y = 0; return vbox; } else { vbox.y = +arr[1]; }\r\n    if (isNaN(+arr[2])) { vbox = U.sizeof(svg); vbox.x = vbox.y = 0; return vbox; } else { vbox.w = +arr[2]; }\r\n    if (isNaN(+arr[3])) { vbox = U.sizeof(svg); vbox.x = vbox.y = 0; return vbox; } else { vbox.h = +arr[3]; }\r\n    return vbox; }\r\n\r\n  static selectHtml(htmlSelect: HTMLSelectElement, optionValue: string, canFail: boolean = false) {\r\n    const $options: JQuery<HTMLOptionElement> = $(htmlSelect).find('option') as unknown as any;\r\n    let i: number;\r\n    let isFound = false;\r\n    if (optionValue === null || optionValue === undefined) { return; }\r\n    for (i = 0; i < $options.length; i++) {\r\n      const opt = $options[i] as HTMLOptionElement;\r\n      if (opt.value === optionValue) { opt.selected = isFound = true; }\r\n    }\r\n    U.pw(!isFound, 'SelectOption not found. html:', htmlSelect, ', searchingFor: |' + optionValue + '|, in options:', $options);\r\n    U.pe(!isFound && !canFail, 'SelectOption not found. html:', htmlSelect, ', searchingFor: |' + optionValue + '| in options:', $options);\r\n  }\r\n\r\n  static tabSetup(root: HTMLElement = document.body): void {\r\n    $('.UtabHeader').off('click.tabchange').on('click.tabchange', U.tabClick);\r\n    $('.UtabContent').hide();\r\n    const $tabRoots = $('.UtabContainer');\r\n    let i: number;\r\n    for (i = 0; i < $tabRoots.length; i++) {\r\n      const selectedStr = $tabRoots[i].dataset.selectedtab;\r\n      const $selected = $($tabRoots[i]).find('>.UtabHeaderContainer>.UtabHeader[data-target=\"' + selectedStr + '\"]');\r\n      U.pe($selected.length !== 1, 'tab container must select exactly one tab. found instead: ' + $selected.length,\r\n        'tabRoot:', $tabRoots[i], 'selector:', selectedStr);\r\n      // console.clear(); console.log('triggered: ', $selected);\r\n      $selected.trigger('click');\r\n    }\r\n/*\r\n    U.addCss('customTabs',\r\n      '.UtabHeaderContainer{ padding: 0; margin: 0; display: flex;}\\n' +\r\n      '.UtabContainer{\\n' +\r\n      'display: flex;\\n' +\r\n      'flex-flow: column;\\n' +\r\n      '\\n}\\n' +\r\n      '.UtabHeader{\\n' +\r\n      'display: inline-block;\\n' +\r\n      'width: auto; flex-grow: 1;\\n' +\r\n      'margin: 10px;\\n' +\r\n      'margin-bottom: 0;\\n' +\r\n      'flex-basis: 0;\\n' +\r\n      'text-align: center;\\n' +\r\n      'border: 1px solid red;\\n}\\n' +\r\n      '.UtabHeader+.UtabHeader{\\n' +\r\n      'margin-left:0;\\n}\\n' +\r\n      '.UtabHeader[selected=\"true\"]{\\n' +\r\n      'background-color: darkred;\\n' +\r\n      '}\\n' +\r\n      '.UtabContentContainer{\\n' +\r\n      '\\n' +\r\n      '    flex-grow: 1;\\n' +\r\n      '    flex-basis: 0;\\n' +\r\n      '    overflow: auto;' +\r\n      '\\n}\\n' +\r\n      '.UtabContent{\\n' +\r\n      'flex-grow: 1;\\n' +\r\n      // 'height: 100%;\\n' +\r\n      '\\n}\\n');*/\r\n  }\r\n\r\n  static tabClick(e: ClickEvent): void {\r\n    let root: HTMLElement = e.currentTarget;\r\n    const target = root.dataset.target;\r\n    while (root && !root.classList.contains('UtabContainer')) {\r\n      root = root.parentNode as HTMLElement;\r\n    }\r\n    const $root = $(root);\r\n    const oldTarget = root.dataset.selectedtab;\r\n    root.dataset.selectedtab = target;\r\n    const $targethtml = $root.find('>.UtabContentContainer>.UtabContent[data-target=\"' + target + '\"]');\r\n    U.pe($targethtml.length !== 1, 'tab target count (' + $targethtml.length + ') is !== 1');\r\n    const $oldTargetHtml = $root.find('>.UtabContentContainer>.UtabContent[data-target=\"' + oldTarget + '\"]');\r\n    U.pe($oldTargetHtml.length !== 1, 'oldTab target count (' + $oldTargetHtml.length + ') is !== 1');\r\n    const $oldTargetHeader = $root.find('>.UtabHeaderContainer>.UtabHeader[data-target=\"' + oldTarget + '\"]');\r\n    U.pe($oldTargetHeader.length !== 1, 'oldTabHeader target count (' + $oldTargetHeader.length + ') is !== 1');\r\n    const $targetHeader = $root.find('>.UtabHeaderContainer>.UtabHeader[data-target=\"' + target + '\"]');\r\n    U.pe($targetHeader.length !== 1, 'TabHeader target count (' + $targetHeader.length + ') is !== 1');\r\n    if ($targethtml[0].getAttribute('selected') === 'true') {\r\n      return;\r\n    }\r\n    $oldTargetHeader[0].setAttribute('selected', 'false');\r\n    $targetHeader[0].setAttribute('selected', 'true');\r\n    $oldTargetHtml.slideUp();\r\n    $targethtml.slideDown();\r\n  }\r\n\r\n  static removeemptynodes(root: HTMLElement | SVGElement, includeNBSP: boolean = false, debug: boolean = false): HTMLElement | SVGElement {\r\n    let n: number;\r\n    for (n = 0; n < root.childNodes.length; n++) {\r\n      const child: any = root.childNodes[n];\r\n      U.pif(debug, 'removeEmptyNodes: ', child.nodeType);\r\n      switch (child.nodeType) {\r\n      default:\r\n        break;\r\n      case 1:\r\n        U.removeemptynodes(child, includeNBSP);\r\n        break; // node: element\r\n      case 2:\r\n        break; // leaf: attribute\r\n      case 8:\r\n        break; // leaf: comment\r\n      case 3: // leaf: text node\r\n        let txt = child.nodeValue;\r\n        let i: number;\r\n        // replacing first blanks (\\n, \\r, &nbsp;) with classic spaces.\r\n        for (i = 0; i < txt.length; i++) {\r\n          let exit: boolean = false && false;\r\n          switch (txt[i]) {\r\n          default: exit = true; break; // if contains non-blank is allowed to live but trimmed.\r\n          case '&nbsp': if (includeNBSP) { txt[i] = ' '; } else { exit = true; } break;\r\n          case ' ':\r\n          case '\\n':\r\n          case '\\r': txt[i] = ' '; break; }\r\n          if (exit) { break; }\r\n        }\r\n        // replacing last blanks (\\n, \\r, &nbsp;) with classic spaces.\r\n        for (i = txt.length; i >= 0; i--) {\r\n          let exit: boolean = false && false;\r\n          switch (txt[i]) {\r\n          default: exit = true; break; // if contains non-blank is allowed to live but trimmed.\r\n          case '&nbsp': if (includeNBSP) { txt[i] = ' '; } else { exit = true; } break;\r\n          case ' ':\r\n          case '\\n':\r\n          case '\\r': txt[i] = ' '; break; }\r\n          if (exit) { break; }\r\n        }\r\n        txt = txt.trim();\r\n        U.pif(debug, 'txt: |' + root.nodeValue + '| --> |' + txt + '| delete?', (/^[\\n\\r ]*$/g.test(txt)));\r\n        if (txt === '') { root.removeChild(child); n--; } else { root.nodeValue = txt; }\r\n        break;\r\n      }\r\n    }\r\n    return root; }\r\n\r\n  static replaceAll(str: string, searchText: string, replacement: string, debug: boolean = false, warn: boolean = true): string {\r\n    if (!str) { return str; }\r\n    return str.split(searchText).join(replacement);\r\n    let lastPos = 0;\r\n    if (searchText === replacement) {\r\n      U.pw(warn, 'replaceAll invalid parameters: search text === replacement === ' + replacement);\r\n      return str; }\r\n    U.pif(debug, 'replaceAll(', searchText, ' with ', replacement, ') starting str:', searchText);\r\n    while (str.indexOf(searchText, lastPos)) {\r\n      const old = searchText;\r\n      const lastPosOld = lastPos;\r\n      searchText = searchText.substring(0, lastPos) + replacement + searchText.substring(lastPos + searchText.length);\r\n      lastPos = lastPos + replacement.length;\r\n      U.pif(debug, 'replaceAll() ', old, ' => ', searchText, '; lastpos:' + lastPosOld + ' => ', lastPos);\r\n    }\r\n    return str;\r\n  }\r\n\r\n  static isValidHtml(htmlStr: string, debug: boolean = false ): boolean {\r\n    const div = document.createElement('div');\r\n    if (!htmlStr) { return false; }\r\n    div.innerHTML = htmlStr;\r\n    // if (div.innerHTML === htmlStr) { return true; }\r\n    const s2 = U.multiReplaceAll(div.innerHTML, [' ', ' ', '\\n', '\\r'], ['', '', '', '']);\r\n    const s1 = U.multiReplaceAll(htmlStr, [' ', ' ', '\\n', '\\r'], ['', '', '', '']);\r\n    const ret: boolean = s1 === s2;\r\n    if (ret || !debug) { return ret; }\r\n    const tmp: string[] = U.strFirstDiff(s1, s2, 20);\r\n    U.pif(debug, 'isValidHtml() ' + (tmp ? '|' + tmp[0] + '| vs |' + tmp[1] + '|' : 'tmp === null'));\r\n    return ret; }\r\n\r\n  static getIndex(node: Element): number {\r\n    if (!node.parentElement) { return -1; }\r\n    // return U.toArray(node.parentElement.children).indexOf(node);\r\n    return Array.prototype.indexOf.call(node.parentElement.children, this); }\r\n\r\n  static toArray(childNodes: NodeListOf<ChildNode>): ChildNode[] {\r\n    if (Array['' + 'from']) { return Array['' + 'from'](childNodes); }\r\n    const array: ChildNode[] = [];\r\n    let i = -1;\r\n    while (++i < childNodes.length) { array.push(childNodes[i]); }\r\n    return array; }\r\n\r\n  static getClass(obj: object): string { return (obj as any).__proto__.constructor.name; }\r\n\r\n  static isString(elem: any) { return elem + '' === elem; }\r\n\r\n  static permuteV2(input: any[]): any[][] {\r\n    U.PermuteArr = [];\r\n    U.PermuteUsedChars = [];\r\n    return U.permute0V2(input); }\r\n\r\n  private static permute0V2(input: any[]): any[][] {\r\n    let i;\r\n    let ch;\r\n    for (i = 0; i < input.length; i++) {\r\n      ch = input.splice(i, 1)[0];\r\n      U.PermuteUsedChars.push(ch);\r\n      if (input.length === 0) {\r\n        U.PermuteArr.push(U.PermuteUsedChars.slice());\r\n      }\r\n      U.permute0V2(input);\r\n      input.splice(i, 0, ch);\r\n      U.PermuteUsedChars.pop();\r\n    }\r\n    return U.PermuteArr; }\r\n\r\n  static permute(inputArr: any[], debug: boolean = true): any[][] {\r\n    const results: any[][] = [];\r\n    const permuteInner = (arr: any[], memo: any[] = []) => {\r\n      let cur;\r\n      let i: number;\r\n      for (i = 0; i < arr.length; i++) {\r\n        cur = arr.splice(i, 1);\r\n        if (arr.length === 0) { results.push(memo.concat(cur)); }\r\n        permuteInner(arr.slice(), memo.concat(cur));\r\n        arr.splice(i, 0, cur[0]);\r\n      }\r\n      return results; };\r\n    return permuteInner(inputArr); }\r\n\r\n  static resizableBorderMouseDblClick(e: MouseDownEvent): void {\r\n    const size: Size = U.sizeof(U.resizingContainer);\r\n    const minSize: Size = U.sizeof(U.resizingBorder);\r\n    const oldSize: Size = new Size(0, 0, +U.resizingContainer.dataset.oldsizew, +U.resizingContainer.dataset.oldsizeh);\r\n    const horiz: boolean = U.resizingBorder.classList.contains('left') || U.resizingBorder.classList.contains('right');\r\n    const vertic: boolean = U.resizingBorder.classList.contains('top') || U.resizingBorder.classList.contains('bottom');\r\n    if (horiz && vertic) return; // do nothing on corner, non voglio che venga resizato sia a minheight che a minwidth, solo uno dei 2.\r\n    minSize.w *= horiz ? 2 : 1;\r\n    minSize.h *= vertic ? 2 : 1;\r\n    minSize.x = size.x;\r\n    minSize.y = size.y;\r\n    console.log('old, size, min', oldSize, size, minSize, oldSize.w && size.equals(minSize));\r\n    if (oldSize.w && size.equals(minSize)) {\r\n      U.resizingContainer.style.width = U.resizingContainer.style.minWidth = U.resizingContainer.style.maxWidth = oldSize.w + 'px';\r\n      U.resizingContainer.style.height = U.resizingContainer.style.minHeight = U.resizingContainer.style.maxHeight = oldSize.h + 'px'; }\r\n    else {\r\n      U.resizingContainer.style.width = U.resizingContainer.style.minWidth = U.resizingContainer.style.maxWidth = minSize.w + 'px';\r\n      U.resizingContainer.style.height = U.resizingContainer.style.minHeight = U.resizingContainer.style.maxHeight = minSize.h + 'px';\r\n      U.resizingContainer.dataset.oldsizew = '' + size.w;\r\n      U.resizingContainer.dataset.oldsizeh = '' + size.h; }\r\n  }\r\n\r\n  static resizableBorderMouseDown(e: MouseDownEvent): void {\r\n    U.resizingBorder = e.currentTarget;\r\n    U.resizingContainer = U.resizingBorder;\r\n    U.resizingContainer.style.padding = '0';\r\n    U.resizingContainer.style.flexBasis = '0';\r\n    // U.resizingContent.style.width = '100%'; required too\r\n    while (!U.resizingContainer.classList.contains('resizableBorderContainer')) {\r\n      U.resizingContainer = U.resizingContainer.parentNode as HTMLElement; }\r\n    if (U.checkDblClick()) U.resizableBorderMouseDblClick(e); }\r\n\r\n  static resizableBorderMouseUp(e: MouseDownEvent): void { U.resizingBorder = U.resizingContainer = null; }\r\n  static resizableBorderUnset(e: ContextMenuEvent): void {\r\n    e.preventDefault();\r\n    const border: HTMLElement = e.currentTarget;\r\n    let container: HTMLElement = border;\r\n    while (container.classList.contains('resizableBorderContainer')) { container = container.parentNode as HTMLElement; }\r\n    container.style.flexBasis = '';\r\n    container.style.minHeight = container.style.minWidth =\r\n    container.style.maxHeight = container.style.maxWidth =\r\n    container.style.height = container.style.width = ''; }\r\n\r\n  static resizableBorderMouseMove(e: MouseDownEvent): void {\r\n    if (!U.resizingBorder) { return; }\r\n    const size: Size = U.sizeof(U.resizingContainer);\r\n    const missing: Point = new Point(0, 0);\r\n    const cursor: Point = new Point(e.pageX, e.pageY);\r\n    const puntoDaFarCoinciderePT: Point = cursor.clone();\r\n    const l: boolean = U.resizingBorder.classList.contains('left');\r\n    const r: boolean = U.resizingBorder.classList.contains('right');\r\n    const t: boolean = U.resizingBorder.classList.contains('top');\r\n    const b: boolean = U.resizingBorder.classList.contains('bottom');\r\n    if (l) { puntoDaFarCoinciderePT.x = size.x; }\r\n    if (r) { puntoDaFarCoinciderePT.x = size.x + size.w; }\r\n    if (t) { puntoDaFarCoinciderePT.y = size.y; }\r\n    if (b) { puntoDaFarCoinciderePT.y = size.y + size.h; }\r\n    const add: Point = cursor.subtract(puntoDaFarCoinciderePT, true);\r\n    if (l) { add.x *= -1; }\r\n    if (t) { add.y *= -1; }\r\n    // o = p0 - c\r\n    // p = c\r\n    // c = p0-o\r\n    // console.log('lrtb: ', l, r, t, b);\r\n    // console.log('ptcoinc: ', puntoDaFarCoinciderePT, ' cursor:', cursor, ' size:', size, 'adjust:', add);\r\n    size.w += add.x;\r\n    size.h += add.y;\r\n    const borderSize: Size = U.sizeof(U.resizingBorder);\r\n    if (l || r) { size.w = Math.max(size.w, borderSize.w * 2); }\r\n    if (t || b) { size.h = Math.max(size.h, borderSize.h * 2); }\r\n    U.resizingContainer.style.width = U.resizingContainer.style.maxWidth = U.resizingContainer.style.minWidth = (size.w) + 'px';\r\n    U.resizingContainer.style.height = U.resizingContainer.style.maxHeight = U.resizingContainer.style.minHeight = (size.h) + 'px';\r\n    // console.log('result:' + U.resizingContainer.style.width);\r\n    U.resizingContainer.style.flexBasis = 'unset'; }\r\n\r\n  static resizableBorderSetup(root: HTMLElement = document.body): void {\r\n    // todo: addBack is great, aggiungilo tipo ovunque. find() esclude l'elemento radice anche se matcha la query, addback rimedia aggiungendo il\r\n    //  previous matched set che matcha la condizione.\r\n    const $arr = $(root).find('.resizableBorder').addBack('.resizableBorder');\r\n    let i = -1;\r\n    const nl = '\\n';\r\n    while (++i < $arr.length) {\r\n      U.makeResizableBorder($arr[i]); }\r\n    U.eventiDaAggiungereAlBody(null);\r\n    $(document.body).off('mousemove.ResizableBorder').on('mousemove.ResizableBorder', U.resizableBorderMouseMove);\r\n    $(document.body).off('mouseup.ResizableBorder').on('mouseup.ResizableBorder', U.resizableBorderMouseUp);\r\n    $('.resizableBorder.corner').off('mousedown.ResizableBorder').on('mousedown.ResizableBorder', U.resizableBorderMouseDown)\r\n      .off('contextmenu.ResizableBorder').on('contextmenu.ResizableBorder', U.resizableBorderUnset);\r\n    $('.resizableBorder.side').off('mousedown.ResizableBorder').on('mousedown.ResizableBorder', U.resizableBorderMouseDown)\r\n      .off('contextmenu.ResizableBorder').on('contextmenu.ResizableBorder', U.resizableBorderUnset);\r\n    return; }\r\n\r\n  static makeResizableBorder(html: HTMLElement, left: boolean = true, top: boolean = true, right: boolean = true, bottom = true): void {\r\n    // if (!html.classList.contains('resizableBorderContainer')) { html.classList.add('resizableBorderContainer'); }\r\n    let container: HTMLElement = null;\r\n    let content: HTMLElement = null;\r\n    if (false && html.children.length === 9 && html.children[4].classList.contains('resizableContent')) {\r\n      // already initialized.\r\n      container = html;\r\n      content = container.children[4] as HTMLElement;\r\n      U.clear(container);\r\n    } else {\r\n      // first run: initialing now.\r\n      // const tmpNode: HTMLElement = document.createElement('div');\r\n      // while (html.firstChild) { tmpNode.appendChild(html.firstChild); }\r\n      // while (tmpNode.firstChild) { content.appendChild(tmpNode.firstChild); }\r\n      content = html;\r\n      container = U.cloneHtml(html, false);\r\n      html.setAttribute('original', 'true');\r\n      while (container.classList.length > 0) { container.classList.remove(container.classList.item(0)); }\r\n    }\r\n    console.log('container:', container, 'content:', content);\r\n    U.pe(container.children.length !== 0, '');\r\n    // U.copyStyle(html, container);\r\n    html.parentNode.insertBefore(container, html);\r\n    content.classList.remove('resizableBorderContainer');\r\n    content.classList.add('resizableContent');\r\n    container.classList.add('resizableBorderContainer');\r\n    if (left) { html.dataset.resizableleft = 'true'; }\r\n    if (right) { html.dataset.resizableright = 'true'; }\r\n    if (top) { html.dataset.resizabletop = 'true'; }\r\n    if (bottom) { html.dataset.resizablebottom = 'true'; }\r\n\r\n    left = html.dataset.resizableleft === 'true';\r\n    right = html.dataset.resizableright === 'true';\r\n    top = html.dataset.resizabletop === 'true';\r\n    bottom = html.dataset.resizablebottom === 'true';\r\n\r\n    // const size: Size = U.sizeof(html);\r\n    // container.style.width = size.w + 'px';\r\n    // container.style.height = size.h + 'px';\r\n    const l: HTMLElement = U.toHtml('<div class=\"resizableBorder side left\"></div>');\r\n    const r: HTMLElement = U.toHtml('<div class=\"resizableBorder side right\"></div>');\r\n    const t: HTMLElement = U.toHtml('<div class=\"resizableBorder side top\"></div>');\r\n    const b: HTMLElement = U.toHtml('<div class=\"resizableBorder side bottom\"></div>');\r\n    const tl: HTMLElement = U.toHtml('<div class=\"resizableBorder corner top left\"></div>');\r\n    const tr: HTMLElement = U.toHtml('<div class=\"resizableBorder corner top right\"></div>');\r\n    const bl: HTMLElement = U.toHtml('<div class=\"resizableBorder corner bottom left\"></div>');\r\n    const br: HTMLElement = U.toHtml('<div class=\"resizableBorder corner bottom right\"></div>');\r\n    const hstripT: HTMLElement = U.toHtml('<div class=\"resizableStrip up\"></div>');\r\n    const hstripM: HTMLElement = U.toHtml('<div class=\"resizableStrip center\"></div>');\r\n    const hstripB: HTMLElement = U.toHtml('<div class=\"resizableStrip down\"></div>');\r\n    l.dataset.resizeenabled = left ? 'true' : 'false';\r\n    r.dataset.resizeenabled = right ? 'true' : 'false';\r\n    t.dataset.resizeenabled = top ? 'true' : 'false';\r\n    b.dataset.resizeenabled = bottom ? 'true' : 'false';\r\n    tl.dataset.resizeenabled = top && left ? 'true' : 'false';\r\n    tr.dataset.resizeenabled = top && right ? 'true' : 'false';\r\n    bl.dataset.resizeenabled = bottom && left ? 'true' : 'false';\r\n    br.dataset.resizeenabled = bottom && right ? 'true' : 'false';\r\n    const style: CSSStyleDeclaration = getComputedStyle(html, null);\r\n    // html.style.border = 'none';\r\n    t.style.borderTop = tl.style.borderTop = tr.style.borderTop = style.borderTop;\r\n    b.style.borderBottom = bl.style.borderBottom = br.style.borderBottom = style.borderBottom;\r\n    l.style.borderLeft = tl.style.borderLeft = bl.style.borderLeft = style.borderLeft;\r\n    r.style.borderRight = tr.style.borderRight = br.style.borderRight = style.borderRight;\r\n\r\n    // per un bug lo stile viene sempre letto come \"none\"\r\n    /*l.style.borderStyle = 'solid';\r\n    r.style.borderStyle = 'solid';\r\n    t.style.borderStyle = 'solid';\r\n    b.style.borderStyle = 'solid';*/\r\n    //console.log('style.border:', style.border);\r\n    /*U.pe(t.style.borderTopStyle === 'none', '1');\r\n    U.pe(isNaN(+t.style.borderWidth), '2');\r\n    U.pe(+t.style.borderWidth === 0, '3');\r\n    if (t.style.borderTopStyle === 'none' || isNaN(+t.style.borderWidth) || +t.style.borderWidth === 0) {\r\n      t.style.borderWidth = t.style.height = t.style.width = t.style.flexGrow = '0'; }\r\n    if (b.style.borderBottomStyle === 'none' || isNaN(+b.style.borderWidth) || +b.style.borderWidth === 0) {\r\n      b.style.borderWidth = b.style.height = b.style.width = b.style.flexGrow = '0'; }\r\n    if (l.style.borderLeftStyle === 'none' || isNaN(+l.style.borderWidth) || +l.style.borderWidth === 0) {\r\n      l.style.borderWidth = l.style.height = l.style.width = l.style.flexGrow = '0'; }\r\n    if (r.style.borderTopStyle === 'none' || isNaN(+r.style.borderWidth) || +r.style.borderWidth === 0) {\r\n      r.style.borderWidth = r.style.height = r.style.width = r.style.flexGrow = '0'; }*/\r\n    /*\r\n    const borderSizeL: Size;\r\n    const borderSizeR: Size;\r\n    const borderSizeT: Size;\r\n    const borderSizeB: Size;\r\n    tl.style.width = l.style.width = bl.style.width = (borderSizeL.w) + 'px';\r\n    tr.style.width = r.style.width = br.style.width = (borderSizeR.w) + 'px';\r\n    tl.style.height = t.style.height = tr.style.height = (borderSizeT.h) + 'px';\r\n    bl.style.height = b.style.height = br.style.height = (borderSizeB.h) + 'px';\r\n\r\n    t.style.width = b.style.width = (size.w - (borderSizeL.w + borderSizeR.w)) + 'px';\r\n    l.style.height = r.style.height = (size.h - (borderSizeT.h + borderSizeB.w)) + 'px';*/\r\n    // html.parentNode.appendChild(container);\r\n    hstripT.appendChild(tl);\r\n    hstripT.appendChild(t);\r\n    hstripT.appendChild(tr);\r\n    hstripM.appendChild(l);\r\n    hstripM.appendChild(content);\r\n    hstripM.appendChild(r);\r\n    hstripB.appendChild(bl);\r\n    hstripB.appendChild(b);\r\n    hstripB.appendChild(br);\r\n    container.appendChild(hstripT);\r\n    container.appendChild(hstripM);\r\n    container.appendChild(hstripB);\r\n    container.style.border = 'none';/*\r\n    const size: Size = U.sizeof(container);\r\n    const hbordersize = 10;\r\n    const vbordersize = 10;\r\n    container.style.width = Math.max(hbordersize * 2 + size.w) + 'px';\r\n    container.style.height = Math.max(vbordersize * 2 + size.h) + 'px';*/\r\n    content.style.border = 'none';\r\n    if (!content.style.width || content.style.width === 'auto'){\r\n      content.style.width = '100%';\r\n      content.style.height = '100%'; }\r\n    content.style.minWidth = '0';\r\n    content.style.minHeight = '0';\r\n\r\n  }\r\n\r\n  static copyStyle(from: HTMLElement | SVGGElement, to: HTMLElement | SVGGElement, computedStyle: CSSStyleDeclaration = null): boolean {\r\n    // trying to figure out which style object we need to use depense on the browser support, so we try until we have one.\r\n    if (!computedStyle) { computedStyle = from['' + 'currentStyle'] || document.defaultView.getComputedStyle(from, null); }\r\n    // if the browser dose not support both methods we will return failure.\r\n    if (!computedStyle) { return false; }\r\n    // checking that the value is not a undefined, object, function, empty or int index ( happens on some browser)\r\n    const stylePropertyValid = (name: any, value: any) => {\r\n      // nb: mind that typeof [] === 'object';\r\n      return typeof value !== 'undefined' && typeof value !== 'object' && typeof value !== 'function' && value.length > 0\r\n        // && value !== parseInt(value, 10); };\r\n        && +name !== parseInt(name, 10); };\r\n\r\n    let property: string;\r\n    for (property in computedStyle) {\r\n      // hasOwnProperty is useless, but compiler required\r\n      // console.log('property[', property, '] = ', computedStyle[property]);\r\n      if (!computedStyle.hasOwnProperty(property) || !stylePropertyValid(property, computedStyle[property])) { continue; }\r\n      to.style[property] = computedStyle[property];\r\n    }\r\n    return true; }\r\n\r\n  static cclear(): void { console.clear(); console.trace(); }\r\n\r\n  static toDottedURI(uri: string): string {\r\n    return U.replaceAll(U.replaceAll(uri.substring(uri.indexOf('://') + '://'.length), '\\\\', '/'), '/', '.');\r\n  }\r\n  static toHttpsURI(uri: string, folderChar: string = '/'): string {\r\n    return 'https://' + U.replaceAll(uri, '.', folderChar);\r\n  }\r\n\r\n  static toNumber(o: any) {\r\n    if (o === null || o === undefined || (U.isString(o) && o.trim() === '')) return null;\r\n    o = +o;\r\n    if (isNaN(o)) return null;\r\n    return o; }\r\n\r\n  static isNumber(o: any): boolean { return +o === o && o !== NaN; }\r\n  static isNumberArray(o: any, minn: number = Number.NEGATIVE_INFINITY, max: number = Number.POSITIVE_INFINITY,\r\n                       ifItIsEmptyArrReturn: boolean = true): boolean {\r\n    const validation = (val: number) => U.isNumber(val) && val >= minn && val <= max;\r\n    return U.isArrayOf(o, validation, ifItIsEmptyArrReturn); }\r\n\r\n  static isIntegerArray(o: any, minn: number = Number.NEGATIVE_INFINITY, max: number = Number.POSITIVE_INFINITY,\r\n                        ifItIsEmptyArrReturn: boolean = true): boolean {\r\n    const validation = (val: number) => (U.isNumber(val) && Math.floor(val) === val && val >= minn && val <= max);\r\n    return U.isArrayOf(o, validation, ifItIsEmptyArrReturn); }\r\n\r\n  static isCharArray(values: any, ifItIsEmpryArrayReturn: boolean = true): boolean {\r\n    const charValidator = (val: string) => (val.length === 1);\r\n    return U.isArrayOf(values, charValidator, ifItIsEmpryArrayReturn); }\r\n  static isArrayOf(value: any, functionCheck: any, ifItIsEmptyArrayReturn: boolean = true): boolean {\r\n    if (!Array.isArray(value)) { return false; }\r\n    let i: number;\r\n    if (value.length === 0) { return ifItIsEmptyArrayReturn; }\r\n    for (i = 0; i < value.length; i++) {\r\n      if (!functionCheck(value[i]) && !U.isArrayOf(value[i], functionCheck, ifItIsEmptyArrayReturn)) { return false; }\r\n    }\r\n    return true; }\r\n\r\n\r\n  static isStringArray(value: any, ifItIsEmptyArrayReturn: boolean = true): boolean {\r\n    if (!Array.isArray(value)) { return false; }\r\n    let i: number;\r\n    if (value.length === 0) { return ifItIsEmptyArrayReturn; }\r\n    for (i = 0; i < value.length; i++) { if (!U.isString(value[i]) && !U.isStringArray(value[i], true)) { return false; } }\r\n    return true; }\r\n\r\n  static clipboardCopy(text: string): void {\r\n    if (!U.clipboardinput) {\r\n      U.clipboardinput = document.createElement('input');\r\n      U.clipboardinput.id = U.prefix + 'CopyDataToClipboard';\r\n      U.clipboardinput.type = 'text';\r\n      U.clipboardinput.style.display = 'block';\r\n      U.clipboardinput.style.position = 'absolute';\r\n      U.clipboardinput.style.top = '-100vh'; }\r\n    document.body.appendChild(U.clipboardinput);\r\n    U.clipboardinput.value = text;\r\n    U.clipboardinput.select();\r\n    document.execCommand('copy');\r\n    document.body.removeChild(U.clipboardinput);\r\n    U.clearSelection(); }\r\n\r\n  static clearSelection() {}\r\n\r\n  static refreshPage(): void { window.location.href += ''; }\r\n\r\n\r\n  static isArray(v: any): boolean { return Array.isArray(v); }\r\n\r\n  static isEmptyObject(v: any, returnIfNull: boolean = true, returnIfUndefined: boolean = false): boolean {\r\n    return U.isObject(v, returnIfNull, returnIfUndefined) && $.isEmptyObject(v); }\r\n\r\n  static isObject(v: any, returnIfNull: boolean = true, returnIfUndefined: boolean = false, retIfArray: boolean = false): boolean {\r\n    if (v === null) { return returnIfNull; }\r\n    if (v === undefined) { return returnIfUndefined; }\r\n    if (Array.isArray(v)) { return retIfArray; }\r\n    // nb: mind that typeof [] === 'array'\r\n    return typeof v === 'object'; }\r\n\r\n  static isFunction(v: any): boolean { return (typeof v === 'function'); }\r\n\r\n  static isPrimitive(v: any, returnIfNull: boolean = true, returnIfUndefined: boolean = true): boolean {\r\n    if (v === null) { return returnIfNull; }\r\n    if (v === undefined) { return returnIfUndefined; }\r\n    // return (typeof v !== 'function') && (typeof v !== 'object') && (!U.isArray(v));\r\n    return !U.isObject(v) && !Array.isArray(v) && !U.isFunction(v); }\r\n\r\n  static getEndingNumber(s: string, ignoreNonNumbers: boolean = false, allowDecimal: boolean = false): number {\r\n    let i = s.length;\r\n    let numberEnd = -1;\r\n    while (--i > 0) {\r\n      if (!isNaN(+s[i])) { if (numberEnd === -1) { numberEnd = i; } continue; }\r\n      if (s[i] === '.' && !allowDecimal) { break; }\r\n      if (s[i] === '.') { allowDecimal = false; continue; }\r\n      if (!ignoreNonNumbers) { break; }\r\n      if (numberEnd !== -1) { ignoreNonNumbers = false; }\r\n    }\r\n    s = numberEnd === -1 ? '1' : s.substring(i, numberEnd);\r\n    return +parseFloat(s); }\r\n\r\n  static increaseEndingNumber(s: string, allowLastNonNumberChars: boolean = false, allowDecimal: boolean = false, increaseWhile: (x: string) => boolean = null): string {\r\n    /*let i = s.length;\r\n    let numberEnd = -1;\r\n    while (--i > 0) {\r\n      if (!isNaN(+s[i])) { if (numberEnd === -1) { numberEnd = i; } continue; }\r\n      if (s[i] === '.' && !allowDecimal) { break; }\r\n      if (s[i] === '.') { allowDecimal = false; continue; }\r\n      if (!ignoreNonNumbers) { break; }\r\n      if (numberEnd !== -1) { ignoreNonNumbers = false; }\r\n    }\r\n    if (numberEnd === -1) { return s + '_1'; }\r\n    // i++;\r\n    numberEnd++;*/\r\n    let regexpstr = '([0-9]+' + (allowDecimal ? '|[0-9]+\\\\.[0-9]+' : '') + ')' + (allowLastNonNumberChars ? '[^0-9]*' : '') + '$';\r\n    const matches: RegExpExecArray = new RegExp(regexpstr, 'g').exec(s); // Global (return multi-match) Single line (. matches \\n).\r\n    // S flag removed for browser support (firefox), should work anyway.\r\n    U.pe(matches.length > 2, 'parsing error: /' + regexpstr + '/gs.match(' + s + ')');\r\n    let i = s.length - matches[0].length;\r\n    const prefix = s.substring(0, i);\r\n    let num: number = 1 + (+matches[1]);\r\n    // U.pe(isNaN(num), 'wrong parsing:', s, s.substring(i, numberEnd), i, numberEnd);\r\n    // const prefix: string = s.substring(0, i);\r\n    // console.log('increaseendingNumber:  prefix: |' + prefix+'| num:'+num, '[i] = ['+i+']; s: |'+s+\"|\");\r\n    while (increaseWhile !== null && increaseWhile(prefix + num)) { num++; }\r\n    return prefix + num; }\r\n\r\n  static isValidName(name: string): boolean { return /^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name); }\r\n\r\n  static getTSClassName(thing: any): string { return thing.constructor.name + ''; }\r\n\r\n  static detailButtonSetup($root = null): void {\r\n    if (!$root) $root = $(document.body);\r\n    $root.find('button.detail').off('click.detailbutton').on('click.detailbutton', (e: ClickEvent, forceHide: boolean) => {\r\n      const btn = e.currentTarget as HTMLButtonElement;\r\n      const $btn = $(btn);\r\n      const $detailPanel = $root.find(btn.getAttribute('target'));\r\n      const otherButtons: HTMLButtonElement[] = $(btn.parentElement).find('button.detail').toArray().filter(x => x != btn) as any;\r\n      // $styleown.find('div.detail:not(' + btn.getAttribute('target') + ')');\r\n\r\n      const b: boolean = btn.dataset.on === '1';\r\n      if (forceHide || b) {\r\n        btn.style.width = '';\r\n        btn.dataset.on = '0';\r\n        btn.style.borderBottom = '';\r\n        btn.style.borderBottomLeftRadius = '';\r\n        btn.style.borderBottomRightRadius = '';\r\n        $btn.find('.closed').show();\r\n        $btn.find('.opened').hide();\r\n        // $detailcontainers.show();\r\n        $detailPanel.hide();\r\n      } else {\r\n        const size: Size = U.sizeof(btn);\r\n        btn.style.width = size.w + 'px';\r\n        btn.dataset.on = '1';\r\n        btn.style.borderBottom = 'none'; // '3px solid #252525';\r\n        btn.style.borderBottomLeftRadius = '0';\r\n        btn.style.borderBottomRightRadius = '0';\r\n        $btn.find('.closed').hide();\r\n        $btn.find('.opened').show()[0].style.width = (size.w - 15 * 2) + 'px';\r\n        console.log('others:', otherButtons, 'me:', $btn);\r\n        $(otherButtons).data('on', '1').trigger('click', true);\r\n        $detailPanel.show();\r\n      }\r\n    });\r\n    $root.find('div.detail').hide();\r\n  }\r\n\r\n  // Prevent the backspace key from navigating back.\r\n  static preventBackSlashHistoryNavigation(event: KeyDownEvent): boolean {\r\n    if (!event || !event.key || event.key.toLowerCase() !== 'backspace') { return true; }\r\n    const types: string[] = ['text', 'password', 'file', 'search', 'email', 'number', 'date',\r\n      'color', 'datetime', 'datetime-local', 'month', 'range', 'search', 'tel', 'time', 'url', 'week'];\r\n    const srcElement: JQuery<any> = $(event['' + 'srcElement'] || event.target);\r\n    const disabled = srcElement.prop('readonly') || srcElement.prop('disabled');\r\n    if (!disabled) {\r\n      if (srcElement[0].isContentEditable || srcElement.is('textarea')) { return true; }\r\n      if (srcElement.is('input')) {\r\n        const type = srcElement.attr('type');\r\n        if (!type || types.indexOf(type.toLowerCase()) > -1) { return true; }\r\n      }\r\n    }\r\n    event.preventDefault();\r\n    return false; }\r\n  // esercizio per antonella array deep copy\r\n  /// copy all the element inside the array, eventually deep cloning but not duplicating objects or leaf elements.\r\n  static ArrayCopy<T>(arr: Array<T>, deep: boolean): Array<T> {\r\n    const ret: Array<T> = [];\r\n    let i: number;\r\n    for (i = 0; i < arr.length; i++) {\r\n      if (deep && Array.isArray(arr[i])) {\r\n        const tmp: Array<T> = U.ArrayCopy<T>(arr[i] as unknown as Array<T>, deep);\r\n        ret.push(tmp as unknown as T); } else { ret.push(arr[i]); }\r\n    }\r\n    return ret; }\r\n\r\n  static ArrayMerge(arr1: any[], arr2: any[]): void {\r\n    if (!arr1 || !arr2) return;\r\n    Array.prototype.push.apply(arr1, arr2); }\r\n\r\n  static ArrayMergeUnique(arr1: any[], arr2: any[]): void {\r\n    if (!arr1 || !arr2) return;\r\n    let i: number;\r\n    for( i = 0; i < arr2.length; i++) { U.ArrayAdd(arr1, arr2[i]); } }\r\n\r\n  static ArrayAdd<T>(arr: Array<T>, elem: T, unique: boolean = true, throwIfContained: boolean = false): boolean {\r\n    U.pe(!arr || !Array.isArray(arr), 'arr null or not array:', arr);\r\n    if (!unique) { arr.push(elem); return true; }\r\n    if (arr.indexOf(elem) === -1) { arr.push(elem); return true; }\r\n    U.pe(throwIfContained, 'element already contained:', arr, elem);\r\n    return false; }\r\n\r\n  static fieldCount(obj: object): number {\r\n    let counter: number = 1 - 1;\r\n    for (const key in obj) { if (!(key in obj)) { continue; } counter++; }\r\n    return counter; }\r\n\r\n  static isPositiveZero(m: number): boolean {\r\n    if (Object['is' + '']) { return Object['is' + ''](m, +0); }\r\n    return (1 / m === Number.POSITIVE_INFINITY); }\r\n  static isNegativeZero(m: number): boolean {\r\n    if (Object['is' + '']) { return Object['is' + ''](m, -0); }\r\n    return (1 / m === Number.NEGATIVE_INFINITY); }\r\n\r\n  static TanToRadian(n: number): number { return U.DegreeToRad(U.TanToDegree(n)); }\r\n  static TanToDegree(n: number): number {\r\n    if (U.isPositiveZero(n)) { return 0; }\r\n    if (n === Number.POSITIVE_INFINITY) { return 90; }\r\n    if (U.isNegativeZero(n)) { return 180; }\r\n    if (n === Number.POSITIVE_INFINITY) { return 270; }\r\n    return U.RadToDegree(Math.atan(n)); }\r\n\r\n  static RadToDegree(radians: number): number { return radians * (180 / Math.PI); }\r\n  static DegreeToRad(degree: number): number { return degree * (Math.PI / 180); }\r\n\r\n  static replaceAllRegExp(value: string, regExp: RegExp, replacement: string): string { return value.replace(regExp, replacement); }\r\n\r\n  static fixHtmlSelected($root: JQuery<Element>): void {\r\n    const $selecteds: JQuery<HTMLSelectElement> = $root.find('select') as JQuery<HTMLSelectElement>;\r\n    let i: number;\r\n    for (i = 0 ; i < $selecteds.length; i++) {\r\n      const $option: JQuery<HTMLOptionElement> = $($selecteds[i]).find('option[selected]') as any as JQuery<HTMLOptionElement>;\r\n      U.selectHtml($selecteds[i], $option.length ? $option[0].value : null); }\r\n  }\r\n\r\n  static computeMeasurableAttributeRightPart(str: string, attr: Attr, logic: ModelPiece, measurableHtml: HTMLElement | SVGElement,\r\n                                             size: Size = null, absTargetSize: Size = null, relTargetSize: Size = null, allowVariables: boolean = true): any {\r\n    str = U.changeBackVarTemplateDelimitersInMeasurablesAttr(str);\r\n    if (!size) { size = U.sizeof(measurableHtml); }\r\n    let relativeRoot: HTMLElement | SVGElement = measurableHtml;\r\n    while (!relativeRoot.classList.contains('vertexShell')) { relativeRoot = relativeRoot.parentElement; }\r\n    if (!absTargetSize) { absTargetSize = U.sizeof(relativeRoot); }\r\n    if (!relTargetSize) {\r\n      const $relativeHtml = $(relativeRoot).find(measurableHtml.getAttribute('relativeSelectorOf' + attr.name));\r\n      U.pw($relativeHtml.length > 1, 'found more than one relative target (', $relativeHtml, ') assigned to: ', measurableHtml, ' root:', relativeRoot);\r\n      relTargetSize = $relativeHtml.length ? U.sizeof($relativeHtml[0]) : absTargetSize; }\r\n    const relativePos: Point = size.tl().subtract(relTargetSize.tl(), false);\r\n    const absolutePos: Point = size.tl().subtract(absTargetSize.tl(), false);\r\n    const str0debug = str;\r\n    str = U.replaceVarsString(logic, str);\r\n\r\n    // ERRORE parzialmente fixato: se il relative container è la vertexRoot che ha bordo e boxsizing = border-box\r\n    // allora this.top == absPositionY - ShellBorderY invece di this.top == absPositionY\r\n    // consiglio generico: non usare mai position: relative su cose con i bordi o con border-box\r\n    const rootStyle = window.getComputedStyle(relativeRoot);\r\n    const borderFix: Point = new Point(+rootStyle.borderTopWidth, +rootStyle.borderLeftWidth);\r\n    if (rootStyle.position === 'relative' && rootStyle.boxSizing === 'border-box'){ absolutePos.subtract(borderFix, false); }\r\n    // relativePos.subtract(borderFix, false); should not work, should check borders on relativetarget vs border on curr. or maybe is correct without any fix.\r\n    if (allowVariables) {\r\n      str = U.multiReplaceAll(str, ['positionX', 'positionX'], ['positionRelX', 'positionRelY']);\r\n      str = U.multiReplaceAll(str,\r\n        ['width', 'height', 'positionAbsX', 'positionAbsY', 'positionRelX', 'positionRelY'],\r\n        ['' + size.w, '' + size.h, '' + absolutePos.x, '' + absolutePos.y, '' + relativePos.x, '' + relativePos.y]);\r\n      str = U.multiReplaceAll(str,\r\n        ['absoluteTargetSizeX', 'absoluteTargetSizeY', 'absoluteTargetSizeW', 'absoluteTargetSizeH'],\r\n        ['' + absTargetSize.x, '' + absTargetSize.y, '' + absTargetSize.w, '' + absTargetSize.h]);\r\n      str = U.multiReplaceAll(str,\r\n        ['relativeTargetSizeX', 'relativeTargetSizeY', 'relativeTargetSizeW', 'relativeTargetSizeH'],\r\n        ['' + relTargetSize.x, '' + relTargetSize.y, '' + relTargetSize.w, '' + relTargetSize.h]);\r\n    }/*\r\n    if (true || attr.name === '_ruleY') {\r\n      console.log(attr.name + ': WallH: ('+(logic.childrens[0] as MAttribute).values[0] + '), top: ' + measurableHtml.style.top +\r\n        ' |' + str0debug + '| --> |' + str + '| abs:', absTargetSize, ' rel:', relTargetSize, ' size:', size, ' htmls.abs', relativeRoot,\r\n        ' rel.html:', $(relativeRoot).find(measurableHtml.getAttribute('relativeSelectorOf' + attr.name)), ' size.html:', measurableHtml,\r\n        'absPos:', absolutePos, 'relPos:', relativePos);\r\n    }*/\r\n    const evalContext = {a: measurableHtml.attributes};\r\n    let a = {};\r\n    let i: number;\r\n    for (i = 0; i < measurableHtml.attributes.length; i++) {\r\n      const attr: Attr = measurableHtml.attributes[i];\r\n      a[attr.name] = attr.value;\r\n    }\r\n    try {\r\n      // str =  U.evalInContext(evalContext, str);\r\n      str = eval(str);\r\n    } catch (e) { U.pw(true, 'error occurred while evaluating ', str, 'in measurable attribute ', attr, 'err:', e, ', are you' +\r\n      ' missing quotes?'); }\r\n    return str; }\r\n\r\n  static computeResizableAttribute(attr: Attr, logic: ModelPiece, measurableHtml: HTMLElement | SVGElement, size: Size = null,\r\n                                   absTargetSize: Size = null, relTargetSize: Size = null): {destination: string, operator: string, value: any} {\r\n    const val = attr.value;\r\n    let pos = 0;\r\n    let operator: string = null;\r\n    let i: number;\r\n    for (i = 1; i < val.length - 1; i++) {\r\n      switch (val[i]) {\r\n      case '>':\r\n        if (val[i - 1] !== '-') { continue; } // ignoro lo pseudo operatore \"->\" per selezionare un attributo in measurableExport\r\n        pos = i; operator = (val[i + 1] === '=' ? '>=' : '>'); break;\r\n      case '<': pos = i; operator = (val[i + 1] === '=' ? '<=' : '<'); break;\r\n      case '!': if (val[i + 1] !== '=') { continue; } pos = i; operator = '='; break;\r\n      case '=': pos = i; operator = '='; break;\r\n      default: continue; } }\r\n\r\n    if (!operator) { U.pw(true, 'found measurable _attribute without operator: ', attr); return null; }\r\n    if (!size) { size = U.sizeof(measurableHtml); }\r\n    const leftSide = val.substr(0, pos).trim();\r\n    const rightSide = val.substr(pos + operator.length).trim();\r\n    let value: any = null;\r\n    try { value = U.computeMeasurableAttributeRightPart(rightSide, attr, logic, measurableHtml, size, absTargetSize, relTargetSize);\r\n    } catch (e) { U.pw(true, 'failed to read expression of ' + attr.name + ': |' + attr.value\r\n      + '| --> |' + rightSide + '|. reason:' + e.toString()\r\n      + '; the allowed variables are: width, height, positionRelX, positionRelY, positionAbsX, positionAbsY, ' +\r\n      'relativeTargetSizeX, relativeTargetSizeY, relativeTargetSizeW, relativeTargetSizeH, ' +\r\n      'absoluteTargetSizeX, absoluteTargetSizeY, absoluteTargetSizeW, absoluteTargetSizeH, ' + '. and js functions.'); }\r\n    // console.log('attr:', attr, 'left:', leftSide, 'right:', rightSide, ' ---> |' + value + '|');\r\n    return {destination: leftSide, operator, value}; }\r\n\r\n\r\n  static processMeasuring(logic: IClassifier, m: MeasurableArrays, ui: ResizableUIParams | DraggableEventUIParams): void {\r\n    const size: Size = U.sizeof(m.html);\r\n    let relativeRoot: HTMLElement | SVGElement = m.html;\r\n    while (!relativeRoot.classList.contains('vertexShell')) { relativeRoot = relativeRoot.parentElement; }\r\n    const absTargetSize: Size = U.sizeof(relativeRoot);\r\n    console.log('measurableHtml parsed special attributes:', m);\r\n    let i: number;\r\n    for (i = 0; i < m.variables.length; i++) { U.processMeasurableVariable(m.variables[i], logic, m.html, size, absTargetSize); }\r\n\r\n    for (i = 0; i < m.imports.length; i++) { U.processMeasurableImport(m.imports[i], logic, m.html, null, absTargetSize); }\r\n\r\n    for (i = 0; i < m.rules.length; i++) {\r\n      const attr: Attr = m.rules[i];\r\n      const val = attr.value;\r\n      if (val.indexOf('=') === -1) {\r\n        U.pw(true, 'found a .resizable rule attribute without \"=\". ' + attr.name + ': |' + val + '| inside:', m.html); continue; }\r\n      U.processMeasurableRule(attr, logic, m.html, size, absTargetSize); }\r\n\r\n    for (i = 0; i < m.constraints.length; i++) {\r\n      const attr: Attr = m.constraints[i];\r\n      const val = attr.value;\r\n      if (val.indexOf('=') === -1) {\r\n        U.pw(true, 'found a .resizable constraint without \"=\". ' + attr.name + ': |' + val + '| inside:', m.html); continue; }\r\n      // NB: size must be null, constraint will modify size without updating the object, so it must be recalculated.\r\n      U.processMeasurableConstraint(attr, logic, m.html, null, absTargetSize);}\r\n\r\n    for (i = 0; i < m.dstyle.length; i++) { U.processMeasurableDstyle(m.dstyle[i], logic, m.html, null, absTargetSize); }\r\n\r\n    for (i = 0; i < m.exports.length; i++) {\r\n      const attr: Attr = m.exports[i];\r\n      const val = attr.value;\r\n      if (val.indexOf('=') === -1) {\r\n        U.pw(true, 'found a .resizable export attribute without \"=\". ' + attr.name + ': |' + val + '| inside:', m.html); continue; }\r\n      U.processMeasurableExport(attr, logic, m.html, size, absTargetSize); }\r\n\r\n    for (i = 0; i < m.chain.length; i++) { U.processMeasurableChain(m.chain[i], logic, m.html, null, absTargetSize, logic.getVertex(), ui); }\r\n\r\n    for (i = 0; i < m.chainFinal.length; i++) { U.processMeasurableChain(m.chainFinal[i], logic, m.html, null, absTargetSize, logic.getVertex(), ui); }\r\n\r\n  }\r\n\r\n  static processMeasurableExport(attr: Attr, logic: ModelPiece, measurableHtml: HTMLElement | SVGElement,\r\n                                 size: Size = null, absTargetSize: Size = null): void {\r\n    const rule: {destination: string, value: any} = U.computeResizableAttribute(attr, logic, measurableHtml, size, absTargetSize);\r\n    // U.pw(true, 'process export:', rule, attr);\r\n    if (!rule) { return; }\r\n    const attributePseudoSelector = '->';\r\n    rule.destination = U.changeBackVarTemplateDelimitersInMeasurablesAttr(rule.destination);\r\n    rule.destination = U.replaceVarsString(logic, rule.destination);\r\n    const pos = rule.destination.lastIndexOf(attributePseudoSelector);\r\n    let htmlSelector: string;\r\n    let attribName: string;\r\n    if (pos !== -1) {\r\n      htmlSelector = rule.destination.substring(0, pos);\r\n      attribName = rule.destination.substring(pos + attributePseudoSelector.length).trim();\r\n    } else {\r\n      htmlSelector = rule.destination;\r\n      attribName = null; }\r\n    const $targets = $(htmlSelector);\r\n    if (attribName) { $targets.attr(attribName, rule.value); } else { $targets.html(rule.value); }\r\n  }\r\n\r\n  static processMeasurableChain(attr0: Attr, logic: ModelPiece, measurableHtml: HTMLElement | SVGElement,\r\n                                size: Size = null, absTargetSize: Size = null, vertex: IVertex, ui: ResizableUIParams | DraggableEventUIParams): void {\r\n\r\n    const destination: string = U.computeMeasurableAttributeRightPart('\\'' + attr0.value + '\\'', attr0, logic, measurableHtml, size, absTargetSize, null, false);\r\n    const attributePseudoSelector = '->';\r\n    const pos = destination.indexOf(attributePseudoSelector);\r\n    let htmlSelector: string;\r\n    let attribName: string;\r\n    if (pos !== -1) {\r\n      htmlSelector = destination.substring(0, pos);\r\n      attribName = destination.substring(pos + attributePseudoSelector.length).trim();\r\n    } else {\r\n      htmlSelector = destination;\r\n      attribName = null; }\r\n    const $targets = $(htmlSelector);\r\n    console.log('measurableChain: ' + htmlSelector + ' -> ' + attribName + '| targets:', $targets);\r\n    U.pe($targets.length <= 0, 'measurableChain: ' + htmlSelector + ' -> ' + attribName + '| targets:', $targets);\r\n    let i: number;\r\n    for (i = 0; i < $targets.length; i++) {\r\n      const html: HTMLElement | SVGElement = $targets[i];\r\n      const attr: Attr = attribName ? html.attributes.getNamedItem(attribName) : null;\r\n      if (!attr) { vertex.measuringChanged(ui, null, html); continue; }\r\n      if (attribName.indexOf('_') !== 0) { continue; }\r\n      if (attribName.indexOf('_rule') === 0) { U.processMeasurableRule(attr, logic, html, null, null);\r\n      } else if (attribName.indexOf('_import') === 0) { U.processMeasurableImport(attr, logic, html, null, null);\r\n      } else if (attribName.indexOf('_export') === 0) { U.processMeasurableExport(attr, logic, html, null, null);\r\n      } else if (attribName.indexOf('_constraint') === 0) { U.processMeasurableConstraint(attr, logic, html, null, null);\r\n      } else if (attribName.indexOf('_dstyle') === 0) { U.processMeasurableDstyle(attr, logic, html, null, null);\r\n      } else { U.processMeasurableVariable(attr, logic, html, null, null); }\r\n      const val: Attr = $targets.length === 1 ? html.attributes.getNamedItem(attribName.substr(1)) : null;\r\n      if (!val) { continue; }\r\n      measurableHtml.setAttribute(attr0.name.substr(1), val.value);\r\n    }\r\n  }\r\n\r\n  static processMeasurableRule(attr: Attr, logic: ModelPiece, measurableHtml: HTMLElement | SVGElement,\r\n                               size: Size = null, absTargetSize: Size = null): void {\r\n    const rule: {destination: string, value: any} = U.computeResizableAttribute(attr, logic, measurableHtml, size, absTargetSize);\r\n    if (!rule) { return; }\r\n    console.log('rule:', rule, 'attr:', attr);\r\n    const tmp: {parent: any, childkey: string} = U.replaceSingleVarGetParentAndChildKey(logic, rule.destination);\r\n    if (!tmp) {\r\n      U.pw(true, 'replaceVar of ' + rule.destination + '| failed. while parsing the resizable.rule |' + attr.name + ' in vertex of: ' + logic.name);\r\n      return; }\r\n    if (!tmp.parent && !(tmp.parent instanceof ModelPiece)) {\r\n      U.pw(true, 'found a rule template with his parent missing or not instance of ModelPiece?? :', tmp.parent, 'rule:', rule);\r\n      return; }\r\n    const destinationParent: ModelPiece = tmp.parent as ModelPiece;\r\n    switch (tmp.childkey) {\r\n    default:\r\n      U.pw(true, 'The rule ' + attr.name + ': |' + attr.value + '| is targeting a valid but not yet allowed field, currently only \".values\" is allowed.');\r\n      break;\r\n    case 'values':\r\n      if (destinationParent instanceof MAttribute) {\r\n        destinationParent.setValue(rule.value);\r\n        break;\r\n      }\r\n      U.pw(true, 'The rule ' + attr.name + ': |' + attr.value + '| is trying to set \"value\" on an invalid modelPiece:', destinationParent);\r\n      break;\r\n    }\r\n  }\r\n\r\n  static processMeasurableConstraint(attr: Attr, logic: ModelPiece, measurableHtml: HTMLElement | SVGElement,\r\n                                     size: Size = null, absTargetSize: Size = null): void {\r\n    return U.processMeasurableImport(attr, logic, measurableHtml, size, absTargetSize); }\r\n\r\n  static processMeasurableImport(attr: Attr, logic: ModelPiece, measurableHtml: HTMLElement | SVGElement,\r\n                                 size: Size = null, absTargetSize: Size = null): void {\r\n    let relativeRoot: HTMLElement | SVGElement = measurableHtml;\r\n    while (!relativeRoot.classList.contains('vertexShell')) { relativeRoot = relativeRoot.parentElement; }\r\n    const $relativeHtml = $(relativeRoot).find(measurableHtml.getAttribute('relativeSelectorOf' + attr.name));\r\n    U.pw($relativeHtml.length > 1, 'found more than one relative target (', $relativeHtml, ') assigned to: ', measurableHtml, ' root:', relativeRoot);\r\n\r\n    const relativeSize: Size = $relativeHtml.length ? U.sizeof($relativeHtml[0]) : absTargetSize;\r\n    const rule: {destination: string, operator: string, value: any} =\r\n      U.computeResizableAttribute(attr, logic, measurableHtml, size, absTargetSize, relativeSize);\r\n    if (!rule) { return; }\r\n    const outputSize: Size = size.duplicate();\r\n    switch (rule.destination) {\r\n    default: U.pw(true, 'invalid import destination: |' + rule.destination + '| found in html:', measurableHtml); break;\r\n    case 'width': outputSize.w = rule.value; break;\r\n    case 'height': outputSize.h = rule.value; break;\r\n    case 'positionAbsX': outputSize.x = (absTargetSize.tl() + rule.value); break;\r\n    case 'positionAbsY': outputSize.y = (absTargetSize.tl() + rule.value); break;\r\n    case 'positionRelX': outputSize.x = (relativeSize.tl() + rule.value); break;\r\n    case 'positionRelY': outputSize.y = (relativeSize.tl() + rule.value); break; }\r\n\r\n    const setx = (val: number) => { measurableHtml.setAttributeNS(null, 'x', '' + val); measurableHtml.style.left = val + 'px'; };\r\n    const sety = (val: number) => { measurableHtml.setAttributeNS(null, 'y', '' + val); measurableHtml.style.top = val + 'px'; };\r\n    const setw = (val: number) => { measurableHtml.setAttributeNS(null, 'width', '' + val); measurableHtml.style.width = val + 'px'; };\r\n    const seth = (val: number) => { measurableHtml.setAttributeNS(null, 'height', '' + val); measurableHtml.style.height = val + 'px'; };\r\n\r\n    const add = 1;\r\n    switch (rule.operator) {\r\n    default: U.pe(true, 'unrecognized operator (not your fault, 100% developer failure): ' + rule.operator, attr); break;\r\n    case '>=':\r\n      if (size.x < outputSize.x) { setx(outputSize.x); }\r\n      if (size.y < outputSize.y) { sety(outputSize.y); }\r\n      if (size.w < outputSize.w) { setw(outputSize.w); }\r\n      if (size.h < outputSize.h) { seth(outputSize.h); } break;\r\n    case '>':\r\n      if (size.x <= outputSize.x) { setx(outputSize.x + add); }\r\n      if (size.y <= outputSize.y) { sety(outputSize.y + add); }\r\n      if (size.w <= outputSize.w) { setw(outputSize.w + add); }\r\n      if (size.h <= outputSize.h) { seth(outputSize.h + add); } break;\r\n    case '<':\r\n      if (size.x >= outputSize.x) { setx(outputSize.x + add); }\r\n      if (size.y >= outputSize.y) { sety(outputSize.y + add); }\r\n      if (size.w >= outputSize.w) { setw(outputSize.w + add); }\r\n      if (size.h >= outputSize.h) { seth(outputSize.h + add); } break;\r\n    case '<=':\r\n      if (size.x > outputSize.x) { setx(outputSize.x); }\r\n      if (size.y > outputSize.y) { sety(outputSize.y); }\r\n      if (size.w > outputSize.w) { setw(outputSize.w); }\r\n      if (size.h > outputSize.h) { seth(outputSize.h); } break;\r\n    case '=':\r\n      setx(outputSize.x);\r\n      sety(outputSize.y);\r\n      setw(outputSize.w);\r\n      seth(outputSize.h); break;\r\n    }\r\n  }\r\n\r\n  static processMeasurableVariable(attr: Attr, logic: ModelPiece, measurableHtml: HTMLElement | SVGElement,\r\n                                   size: Size = null, absTargetSize: Size = null, relTargetSize: Size = null, allowVariables: boolean = true): void {\r\n    attr.ownerElement.setAttribute(attr.name.substr(1),\r\n      U.computeMeasurableAttributeRightPart(attr.value, attr, logic, measurableHtml, size, absTargetSize, relTargetSize,allowVariables));\r\n    return; }\r\n\r\n  static strFirstDiff(s1: string, s2: string, len: number): string[] {\r\n    let i: number;\r\n    if (!s1 && !s2) { return [s1, s2]; }\r\n    if (s1 && !s2) { return [s1.substr(0, len), s2]; }\r\n    if (!s1 && s2) { return [s1, s2.substr(0, len)]; }\r\n    const min: number = Math.min(s1.length, s2.length);\r\n    for (i = 0; i < min; i++) { if (s1[i] !== s2[i]) { return [s1.substr(i, len), s2.substr(i, len)]; } }\r\n    return null; }\r\n\r\n  static processMeasurableDstyle(attr: Attr, logic: ModelPiece, html: HTMLElement | SVGElement, size: Size = null, absTargetSize: Size = null): void {\r\n    U.processMeasurableVariable(attr, logic, html, size, absTargetSize, null, false);\r\n    const fake: HTMLElement | SVGElement = document.createElement('div');\r\n    fake.setAttribute('style', html.getAttribute('dstyle'));\r\n    console.log('preStyle.Real:', html.getAttribute('style'));\r\n    console.log('preStyle.Fake:', fake.getAttribute('style'));\r\n    U.mergeStyles(fake, html);\r\n    html.setAttribute('style', fake.getAttribute('style'));\r\n    console.log('finalStyle:', html.getAttribute('style'));\r\n    // const fake: HTMLElement = document.createElement('div'); fake.setAttribute('style', elem.getAttribute('dstyle'));\r\n    // let key: string; console.log('processDstyle() fake:', fake, 'attr:', attr, 'html:', elem);\r\n    // for (key in fake.style) { console.log('fake[' + key + '] = ' + fake[key]);\r\n    // if (fake[key] !== null && fake[key] !== undefined && fake[key] !== '') { elem.style[key] = fake[key]; } }\r\n\r\n  }\r\n\r\n  private static mergeStyles(html: HTMLElement | SVGElement, fake: HTMLElement | SVGElement): void {\r\n    let i: number;\r\n    const styles1 = html.getAttribute('style').split(';');\r\n    const styles2 = fake.getAttribute('style').split(';');\r\n    let stylesKv1: Dictionary<string, string> = {};\r\n    const stylesKv2: Dictionary<string, string> = {};\r\n    let key: string;\r\n    let val: string;\r\n    let pos: number;\r\n    for (i = 0; i < styles1.length; i++) {\r\n      pos = styles1[i].indexOf(':');\r\n      key = styles1[i].substr(0, pos).trim();\r\n      val = styles1[i].substr(pos + 1).trim();\r\n      if (key == '' || val == '') continue;\r\n      stylesKv1[key] = val; }\r\n    for (i = 0; i < styles2.length; i++) {\r\n      pos = styles2[i].indexOf(':');\r\n      key = styles2[i].substr(0, pos).trim();\r\n      val = styles2[i].substr(pos + 1).trim();\r\n      if (key == '' || val == '') continue;\r\n      stylesKv2[key] = val; }\r\n    stylesKv1 = U.join(stylesKv1, stylesKv2, true, false);\r\n    let style: string = '';\r\n    for (key in stylesKv1) { style += key + ':' + stylesKv1[key] + '; '; }\r\n    html.setAttribute('style', style); }\r\n\r\n  public static merge(a: object, b: object, overwriteNull: boolean = true, clone: boolean = true): object { return U.join(a, b, overwriteNull, clone); }\r\n  public static join(a: object, b: object, overwriteNull: boolean = true, clone: boolean = true): object {\r\n    if (clone) { a = U.cloneObj(a); }\r\n    let key: string;\r\n    for (key in b) {\r\n      if (!b.hasOwnProperty(key)) { continue; }\r\n      if (b[key] !== undefined && a[key] === null && overwriteNull || a[key] === undefined) { a[key] = b[key]; }\r\n    }\r\n    return a;\r\n  }\r\n\r\n  public static getChildIndex_old(html: Node, allNodes: boolean = true): number {\r\n    if (allNodes) { return Array.prototype.indexOf.call(html.parentNode.childNodes, html); }\r\n    return Array.prototype.indexOf.call(html.parentNode.children, html); }\r\n\r\n  public static getChildIndex(array: any, child: any): number {\r\n    return Array.prototype.indexOf.call(array, child); }\r\n\r\n  public static getIndexesPath_old(parent: Element, child: Element) {\r\n    let ret: number[] = [];\r\n    while (child && child !== parent) {\r\n      ret.push(U.getChildIndex(parent.childNodes, child));\r\n      child = child.parentElement; }\r\n    // ret = ret.splice(ret.length - 2, 1);\r\n    return ret.reverse(); }\r\n\r\n  public static getIndexesPath_NoParentKey<T>(child: T, parent: any): string[] {\r\n    U.pe(true, 'getindexespath without parent key: todo');\r\n    return null;\r\n    // todo: top-down ricorsivo a tentativi. implementa loop detection. senza childkey (può variare es: parent.a[3].b.c[1] = child)\r\n    //  return string array con nomi di campi e indici di array.\r\n  }\r\n  public static getIndexesPath<T>(child: T, parentKey: string, childKey: string = null /* null = parent is raw array*/, parentLimit: T = null) {\r\n    let ret: number[] = [];\r\n    while (child) {\r\n      const parent: any = child[parentKey];\r\n      if (child === parentLimit) { break; }\r\n      if (!parent || parent === child) { break; }\r\n      const parentArrChilds: T[] = childKey ? parent[childKey] : parent;\r\n      ret.push(U.getChildIndex(parentArrChilds, child));\r\n      child = child[parentKey];\r\n    }\r\n    return ret.reverse(); }\r\n\r\n  static followIndexesPath(root: any, indexedPath: (number | string)[], childKey: string = null,\r\n                           outArr: {indexFollowed: (number | string)[], debugArr: {index: string | number, elem: any}[]} = {indexFollowed: [],\r\n                             debugArr: [{index: 'Start', elem: root}]}, debug: boolean = false): any {\r\n    let j: number;\r\n    let ret: any = root;\r\n    let oldret: any = ret;\r\n    if (outArr) outArr.debugArr.push({index: 'start', elem: root, childKey: childKey} as any);\r\n    U.pe(childKey && childKey !== '' + childKey, 'U.followIndexesPath() childkey must be a string or a null:', childKey, 'root:', root);\r\n    for (j = 0; j < indexedPath.length; j++) {\r\n      let key: number | string = indexedPath[j];\r\n      let childArr = childKey ? ret[childKey] : ret;\r\n      U.pif(debug, 'path ' + j + ') = elem.' + childKey + ' = ', childArr);\r\n      if (!childArr) { return oldret; }\r\n      ret = childArr[key];\r\n      if (key >= childArr.length) { key = 'Key out of boundary: ' + key + '/' + childArr.length + '.'; }\r\n      U.pif(debug, 'path ' + j + ') = elem.' + childKey + '[ ' + key + '] = ', ret);\r\n      if (outArr) outArr.debugArr.push({index: key, elem: ret});\r\n      if (!ret) { return oldret; }\r\n      if (outArr) outArr.indexFollowed.push(key);\r\n      oldret = ret;\r\n    }\r\n    return ret; }\r\n\r\n  static followIndexesPathOld(templateRoot: Element, indexedPath: number[], allNodes: boolean = true,\r\n                              outArr: {indexFollowed: number[]} = {indexFollowed: []}, debug: boolean = false): Element {\r\n    let j: number;\r\n    let ret: Element = templateRoot;\r\n    let oldret: Element = ret;\r\n    const debugarr: {index: number, html: Node}[] = [{index: 'Start' as any, html: ret}];\r\n    for (j = 0; j < indexedPath.length; j++) {\r\n      const index = indexedPath[j];\r\n      ret = (allNodes ? ret.childNodes[index] : ret.children[index]) as any;\r\n      if (!ret) {\r\n        console.log('folllowPath: clicked on some dinamically generated content, returning the closest static parent.', debugarr);\r\n        U.pw(debug, 'clicked on some dinamically generated content, returning the closest static parent.', debugarr);\r\n        return oldret; }\r\n      oldret = ret;\r\n      outArr.indexFollowed.push(index);\r\n      debugarr.push({index: index, html: ret});\r\n    }\r\n    U.pif(debug, 'followpath debug arr:', debugarr);\r\n    return ret; }\r\n\r\n  static removeDuplicates(arr0: any[], clone: boolean = false): any[] {\r\n    if (!arr0) return [];\r\n    const arr: any[] = clone ? U.cloneObj<any[]>(arr0) as any[] : arr0;\r\n    const found: any[] = [];\r\n    let i: number;\r\n    for (i = 0; i < arr.length; i++) {\r\n      if (arr[i] in found) { U.arrayRemoveAll(arr, arr[i]); i--; continue; }\r\n      found.push(arr[i]); }\r\n    return arr; }\r\n\r\n  static findTemplateList(str: string): string[] {\r\n    return undefined;\r\n  }\r\n\r\n  static makeSet(notice_willStripSpaces: any): DOMTokenList {\r\n    const useless = document.createElement('');\r\n    // NB: classList behave like a set but will strip spaces\r\n    return useless.classList; }\r\n\r\n  private static startSeparatorKeys = {};\r\n  private static startSeparatorKeyMax = -1;\r\n  public static getStartSeparatorKey(): string { return ++U.startSeparatorKeyMax + ''; }\r\n  public static startSeparator(key: string, separator: string = ', '): string {\r\n    if (key in U.startSeparatorKeys) return separator;\r\n    U.startSeparatorKeys[key] = true;\r\n    return ''; }\r\n\r\n  static arrayContains(arr: any[], searchElem: any): boolean {\r\n    if (!arr) return false;\r\n    // return arr && arr.indexOf(searchElem) === -1; not working properly on strings. maybe they are evaluated by references and not by values.\r\n    let i: number;\r\n    for (i = 0; i < arr.length; i++) { if (arr[i] === searchElem) return true; }\r\n    return false; }\r\n\r\n  static toBoolString(bool: boolean): string { return bool ? \"true\" : \"false\"; }\r\n  static fromBoolString(str: string): boolean { return str === \"true\" || str === 't' || +str === 1; }\r\n\r\n  static parseSvgPath(str: string): {assoc: {letter: string, pt: Point}[], pts: Point[]} {\r\n    let i: number;\r\n    let letter: string = null;\r\n    let num1: string = null;\r\n    let num2: string = null; // useless initializing phase to avoid IDE warnings\r\n    let foundFloat: boolean = null;\r\n    let pt: Point = null;\r\n    let current: {letter: string, pt: Point} = null;\r\n    const assoc: {letter: string, pt: Point}[] = [];\r\n    const pts: Point[] = [];\r\n    const ret = {assoc: assoc, pts: pts};\r\n    const debug: boolean = false;\r\n    str = str.toUpperCase();\r\n\r\n    const startNextEntry = () => {\r\n      num1 = '';\r\n      num2 = '';\r\n      pt = new Point(0, 0);\r\n      pt.x = null;\r\n      pt.y = null;\r\n      foundFloat = false; };\r\n    const endCurrentEntry = () => {\r\n      pt.y = +num2;\r\n      U.pe(isNaN(pt.y), 'parsed non-number as value of: |' + letter + '| in svg.path attribute: |' + str + '|', ret);\r\n\r\n      current = {letter: letter, pt: pt};\r\n      U.pe(pt.x === null || pt.y === null, num1, num2, pt, i, str);\r\n      pts.push(pt);\r\n      assoc.push(current);\r\n      U.pif(debug, 'endEntry:', current, ' position: |' + str.substr(0, i) + '|' + str.substr(i)+\"|\");\r\n      startNextEntry();\r\n    };\r\n    startNextEntry();\r\n    for (i = 0; i < str.length; i++) {\r\n      const c: string = str[i];\r\n      switch (c) {\r\n      case '0': case '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9': case '.': case '-': case '+':\r\n        if (c === '.') { U.pe(foundFloat, ' found 2 floating points in a single parsed number in svg.path attribute: |' + str + '|'); foundFloat = true; }\r\n        U.pe((c === '+' || c === '-') && (pt.x === null && num1 !== '' || pt.y === null && num2 !== ''), 'found a ' + c + ' sign inside a number:', ret, i, str);\r\n        if (pt.x === null) { num1 += c; break; }\r\n        if (pt.y === null) { num2 += c; break; }\r\n        U.pe(true, 'found 3 numbers while parsing svg.path attribute: |' + str + '|', ret); break;\r\n      case ' ':\r\n        if (pt.x === null) {\r\n          pt.x = +num1;\r\n          foundFloat = false;\r\n          U.pe(isNaN(+pt.x), 'parsed non-number as value of: |' + letter + '| in svg.path attribute: |' + str + '|', ret); break; }\r\n        if (pt.y === null) {\r\n          pt.y = +num2;\r\n          U.pe(isNaN(+pt.y), 'parsed non-number as value of: |' + letter + '| in svg.path attribute: |' + str + '|', ret); break; }\r\n        break;\r\n      default:\r\n        if (letter) { endCurrentEntry(); }\r\n        letter = c;\r\n        break;\r\n      }\r\n    }\r\n    endCurrentEntry();\r\n    return ret;\r\n  }\r\n/*\r\n  static unescapeHtmlEntities(s: string): string { return HE.decode(s); }\r\n  static escapeHtmlEntities(s: string): string { return HE.encode(s); }*/\r\n  static shallowArrayCopy<T>(arr: T[]): T[] {\r\n    let ret: T[] = [];\r\n    let i: number;\r\n    if (!arr) return null;\r\n    for (i = 0; i < arr.length; i++) { ret.push(arr[i]); }\r\n    return ret; }\r\n\r\n  static arrayInsertAt(arr: any[], index: number, item: any): void {\r\n    U.pe(!arr || !Array.isArray(arr), 'ArrayInsertAt() must have a parameter array');\r\n    index = Math.max(0, index);\r\n    index = Math.min(arr.length, index);\r\n    arr.splice(index, 0, item);\r\n  }\r\n\r\n  static newArray(size: number): any[] {\r\n    let ret = [];\r\n    ret.length = Math.max(0, size);\r\n    return ret; }\r\n}\r\n\r\nexport enum AttribETypes {\r\n//  FakeElementAddFeature = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//FakeElement',\r\n// era il 'pulsante per aggiungere feature nel mm.',\r\n  // reference = 'reference??',\r\n  void = '???void',\r\n  EChar = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EChar',\r\n  EString = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EString',\r\n  EDate = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDate',\r\n  EFloat = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloat',\r\n  EDouble = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble',\r\n  EBoolean = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBoolean',\r\n  EByte = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByte',\r\n  EShort = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShort',\r\n  EInt = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt',\r\n  ELong = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELong',\r\n  /*\r\n  ECharObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ECharObject',\r\n  EStringObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EStringObject',\r\n  EDateObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDateObject',\r\n  EFloatObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EFloatObject',\r\n  EDoubleObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDoubleObject',\r\n  EBooleanObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EBooleanObj',\r\n  EByteObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EByteObject',\r\n  EShortObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EShortObject',\r\n  EIntObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EIntegerObject',\r\n  ELongObj = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//ELongObject', */\r\n  // EELIST = 'ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EEList', // List<E> = List<?>\r\n}\r\n\r\n// export type Json = object;\r\nexport class Json {\r\n  constructor(j: object) {/* U.pe('' + j === j, 'parameter cannot be a string'); */}\r\n\r\n  static getAnnotations(thiss: Json): Json[] {\r\n    const ret = thiss[ECorePackage.eAnnotations];\r\n    if (!ret || $.isEmptyObject(ret)) { return []; }\r\n    if (Array.isArray(ret)) { return ret; } else { return [ret]; } }\r\n\r\n  static getDetails(thiss: Json): Json[] {\r\n    const ret = thiss[ECoreAnnotation.details];\r\n    if (!ret || $.isEmptyObject(ret)) { return []; }\r\n    if (Array.isArray(ret)) { return ret; } else { return [ret]; } }\r\n\r\n  static getChildrens(thiss: Json, throwError: boolean = false, functions: boolean = false): Json[] {\r\n    if (!thiss && !throwError) { return []; }\r\n    const mod = thiss[ECoreRoot.ecoreEPackage];\r\n    const pkg = thiss[ECorePackage.eClassifiers];\r\n    const cla = thiss[functions ? ECoreClass.eOperations : ECoreClass.eStructuralFeatures];\r\n    const fun = thiss[ECoreOperation.eParameters];\r\n    const lit = thiss[ECoreEnum.eLiterals];\r\n\r\n    const ret: any = mod || pkg || cla || fun || lit;\r\n    /*if ( ret === undefined || ret === null ) {\r\n      if (thiss['@name'] !== undefined) { ret = thiss; } // if it's the root with only 1 child arrayless\r\n    }*/\r\n    // U.pe(true, debug, 'getchildrens(', thiss, ')');\r\n    U.pe( throwError && !ret, 'getChildrens() Failed: ', thiss, ret);\r\n    // console.log('ret = ', ret, ' === ', {}, ' ? ', ($.isEmptyObject(ret) ? [] : [ret]));\r\n    if (!ret || $.isEmptyObject(ret)) { return []; }\r\n    if (Array.isArray(ret)) { return ret; } else { return [ret]; }\r\n  }\r\n\r\n  static read<T>(json: Json, field: string, valueIfNotFound: any = 'read<T>()CanThrowError'): T {\r\n    let ret: any = json ? json[field] : null;\r\n    if (ret !== null && ret !== undefined &&  field.indexOf(Status.status.XMLinlineMarker) !== -1) {\r\n      U.pe(U.isObject(ret, false, false, true), 'inline value |' + field + '| must be primitive.', ret);\r\n      ret = U.multiReplaceAll('' + ret, ['&amp;', '&#38;', '&quot;'], ['&', '\\'', '\"']);\r\n    }\r\n    if ((ret === null || ret === undefined)) {\r\n      U.pe(valueIfNotFound === 'read<T>()CanThrowError', 'Json.read<',  '> failed: field[' + field + '], json: ', json);\r\n      return valueIfNotFound; }\r\n    return ret as T ; }\r\n\r\n  static write(json: Json, field: string, val: any): string {\r\n    if (val !== null && field.indexOf(Status.status.XMLinlineMarker) !== -1) {\r\n      U.pe(val !== '' + val, 'inline value |' + field + '| must be a string.', val);\r\n      val = U.multiReplaceAll(val, ['&', '\\'', '\"'], ['&amp;', '&#38;', '&quot;']);\r\n    }\r\n    else U.pe(val !== '' + val || !U.isObject(val, true), 'primitive values should be inserted only inline in the xml:', field, val);\r\n    json[field] = val;\r\n    return val; }\r\n}\r\n\r\n\r\nexport class DetectZoom {\r\n  static device(): number { return detectzoooom.device(); }\r\n  static zoom(): number {U.pe(true, 'better not use this, looks like always === 1'); return detectzoooom.zoom(); }\r\n  private test(): any {\r\n    let a: InputPopup;\r\n    return a = null; }\r\n}\r\n\r\nexport abstract class ISize {\r\n  x: number;\r\n  y: number;\r\n  w: number;\r\n  h: number;\r\n  constructor(x: number = 0, y: number = 0, w: number = 0, h: number = 0) {\r\n    if (isNaN(+x)) { x = 0; }\r\n    if (isNaN(+y)) { y = 0; }\r\n    if (isNaN(+w)) { w = 0; }\r\n    if (isNaN(+h)) { h = 0; }\r\n    this.x = x;\r\n    this.y = y;\r\n    this.w = w;\r\n    this.h = h; }\r\n  abstract makePoint(x: number, y: number): IPoint;\r\n  abstract clone(otherJson: ISize): ISize;\r\n  abstract duplicate(): ISize;\r\n  tl(): IPoint { return this.makePoint(   this.x,             this.y         ); }\r\n  tr(): IPoint { return this.makePoint(this.x + this.w,    this.y         ); }\r\n  bl(): IPoint { return this.makePoint(   this.x,          this.y + this.h); }\r\n  br(): IPoint { return this.makePoint(this.x + this.w, this.y + this.h); }\r\n  equals(size: ISize): boolean { return this.x === size.x && this.y === size.y && this.w === size.w && this.h === size.h; }\r\n  /// field-wise Math.min()\r\n  min(minSize: ISize, clone: boolean): ISize {\r\n    const ret: ISize = clone ? this.duplicate() : this;\r\n    if (!isNaN(minSize.x) && ret.x < minSize.x) { ret.x = minSize.x; }\r\n    if (!isNaN(minSize.y) && ret.y < minSize.y) { ret.y = minSize.y; }\r\n    if (!isNaN(minSize.w) && ret.w < minSize.w) { ret.w = minSize.w; }\r\n    if (!isNaN(minSize.h) && ret.h < minSize.h) { ret.h = minSize.h; }\r\n    return ret; }\r\n  max(maxSize: ISize, clone: boolean): ISize {\r\n    const ret: ISize = clone ? this.duplicate() : this;\r\n    if (!isNaN(maxSize.x) && ret.x > maxSize.x) { ret.x = maxSize.x; }\r\n    if (!isNaN(maxSize.y) && ret.y > maxSize.y) { ret.y = maxSize.y; }\r\n    if (!isNaN(maxSize.w) && ret.w > maxSize.w) { ret.w = maxSize.w; }\r\n    if (!isNaN(maxSize.h) && ret.h > maxSize.h) { ret.h = maxSize.h; }\r\n    return ret; }\r\n}\r\nexport class Size extends ISize {\r\n  static fromPoints(firstPt: Point, secondPt: Point): Size {\r\n    const minX = Math.min(firstPt.x, secondPt.x);\r\n    const maxX = Math.max(firstPt.x, secondPt.x);\r\n    const minY = Math.min(firstPt.y, secondPt.y);\r\n    const maxY = Math.max(firstPt.y, secondPt.y);\r\n    return new Size(minX, minY, maxX - minX, maxY - minY); }\r\n  dontMixWithGraphSize: any;\r\n  clone(json: Size): Size { return new Size(json.x, json.y, json.w, json.h); }\r\n  duplicate(): Size { return new Size().clone(this); }\r\n  makePoint(x: number, y: number): Point { return new Point(x, y); }\r\n  tl(): Point { return super.tl() as Point; }\r\n  tr(): Point { return super.tr() as Point; }\r\n  bl(): Point { return super.bl() as Point; }\r\n  br(): Point { return super.br() as Point; }\r\n  equals(size: Size): boolean { return super.equals(size); }\r\n  min(minSize: Size, clone: boolean): Size { return super.min(minSize, clone) as Size; }\r\n  max(minSize: Size, clone: boolean): Size { return super.max(minSize, clone) as Size; }\r\n}\r\nexport class GraphSize extends ISize {\r\n  static fromPoints(firstPt: GraphPoint, secondPt: GraphPoint): GraphSize {\r\n    const minX = Math.min(firstPt.x, secondPt.x);\r\n    const maxX = Math.max(firstPt.x, secondPt.x);\r\n    const minY = Math.min(firstPt.y, secondPt.y);\r\n    const maxY = Math.max(firstPt.y, secondPt.y);\r\n    return new GraphSize(minX, minY, maxX - minX, maxY - minY); }\r\n  static closestIntersection(vertexGSize: GraphSize, prevPt: GraphPoint, pt0: GraphPoint, gridAlign: GraphPoint = null): GraphPoint {\r\n    let pt = pt0.clone();\r\n    const m = GraphPoint.getM(prevPt, pt);\r\n    const q = GraphPoint.getQ(prevPt, pt);\r\n    U.pe( Math.abs((pt.y - m * pt.x) - (prevPt.y - m * prevPt.x)) > .001,\r\n      'wrong math in Q:', (pt.y - m * pt.x), ' vs ', (prevPt.y - m * prevPt.x));\r\n    /*const isL = prevPt.x < pt.x;\r\n    const isT = prevPt.y < pt.y;\r\n    const isR = !isL;\r\n    const isB = !isT; */\r\n    if (m === Number.POSITIVE_INFINITY && q === Number.NEGATIVE_INFINITY) { // bottom middle\r\n      return new GraphPoint(vertexGSize.x + vertexGSize.w / 2, vertexGSize.y + vertexGSize.h); }\r\n    // console.log('pt:', pt, 'm:', m, 'q:', q);\r\n    let L: GraphPoint = new GraphPoint(0, 0);\r\n    let T: GraphPoint = new GraphPoint(0, 0);\r\n    let R: GraphPoint = new GraphPoint(0, 0);\r\n    let B: GraphPoint = new GraphPoint(0, 0);\r\n    L.x = vertexGSize.x;\r\n    L.y = m * L.x + q;\r\n    R.x = vertexGSize.x + vertexGSize.w;\r\n    R.y = m * R.x + q;\r\n    T.y = vertexGSize.y;\r\n    T.x = (T.y - q) / m;\r\n    B.y = vertexGSize.y + vertexGSize.h;\r\n    B.x = (B.y - q) / m;\r\n    // prendo solo il compreso pt ~ prevPt (escludo così il \"pierce\" sulla faccia opposta), prendo il più vicino al centro.\r\n    // console.log('4 possibili punti di intersezione (LTBR):', L, T, B, R);\r\n    /* this.owner.mark(this.owner.toHtmlCoord(T), true, 'blue');\r\n    this.owner.mark(this.owner.toHtmlCoord(B), false, 'violet');\r\n    this.owner.mark(this.owner.toHtmlCoord(L), false, 'red');\r\n    this.owner.mark(this.owner.toHtmlCoord(R), false, 'orange');*/\r\n    if ( (B.x >= pt.x && B.x <= prevPt.x) || (B.x >= prevPt.x && B.x <= pt.x) ) { } else { B = null; }\r\n    if ( (T.x >= pt.x && T.x <= prevPt.x) || (T.x >= prevPt.x && T.x <= pt.x) ) { } else { T = null; }\r\n    if ( (L.y >= pt.y && L.y <= prevPt.y) || (L.y >= prevPt.y && L.y <= pt.y) ) { } else { L = null; }\r\n    if ( (R.y >= pt.y && R.y <= prevPt.y) || (R.y >= prevPt.y && R.y <= pt.y) ) { } else { R = null; }\r\n    // console.log('superstiti step1: (LTBR):', L, T, B, R);\r\n    const vicinanzaT = !T ? Number.POSITIVE_INFINITY : ((T.x - pt.x) * (T.x - pt.x)) + ((T.y - pt.y) * (T.y - pt.y));\r\n    const vicinanzaB = !B ? Number.POSITIVE_INFINITY : ((B.x - pt.x) * (B.x - pt.x)) + ((B.y - pt.y) * (B.y - pt.y));\r\n    const vicinanzaL = !L ? Number.POSITIVE_INFINITY : ((L.x - pt.x) * (L.x - pt.x)) + ((L.y - pt.y) * (L.y - pt.y));\r\n    const vicinanzaR = !R ? Number.POSITIVE_INFINITY : ((R.x - pt.x) * (R.x - pt.x)) + ((R.y - pt.y) * (R.y - pt.y));\r\n    const closest = Math.min(vicinanzaT, vicinanzaB, vicinanzaL, vicinanzaR);\r\n    // console.log( 'closest:', closest);\r\n    // succede quando pt e prevPt sono entrambi all'interno del rettangolo del vertice.\r\n    // L'edge non è visibile e il valore ritornato è irrilevante.\r\n    if (closest === Number.POSITIVE_INFINITY) {\r\n      /* top center */\r\n      pt = vertexGSize.tl();\r\n      pt.x += vertexGSize.w / 2; } else\r\n    if (closest === Number.POSITIVE_INFINITY) {\r\n      /* bottom center */\r\n      pt = vertexGSize.br();\r\n      pt.x -= vertexGSize.w / 2; } else\r\n    if (closest === vicinanzaT) { pt = T; } else\r\n    if (closest === vicinanzaB) { pt = B; } else\r\n    if (closest === vicinanzaR) { pt = R; } else\r\n    if (closest === vicinanzaL) { pt = L; }\r\n\r\n    if (!gridAlign) { return pt; }\r\n    if ((pt === T || pt === B || isNaN(closest)) && gridAlign.x) {\r\n      const floorX: number = Math.floor(pt.x / gridAlign.x) * gridAlign.x;\r\n      const ceilX: number = Math.ceil(pt.x / gridAlign.x) * gridAlign.x;\r\n      let closestX;\r\n      let farthestX;\r\n      if (Math.abs(floorX - pt.x) < Math.abs(ceilX - pt.x)) {\r\n        closestX = floorX; farthestX = ceilX;\r\n      } else { closestX = ceilX; farthestX = floorX; }\r\n\r\n      // todo: possibile causa del bug che non allinea punti fake a punti reali. nel calcolo realPT questo non viene fatto.\r\n      // if closest grid intersection is inside the vertex.\r\n      if (closestX >= vertexGSize.x && closestX <= vertexGSize.x + vertexGSize.w) { pt.x = closestX; } else\r\n      // if 2° closer grid intersection is inside the vertex.\r\n      if (closestX >= vertexGSize.x && closestX <= vertexGSize.x + vertexGSize.w) { pt.x = farthestX;\r\n        // if no intersection are inside the vertex (ignore grid)\r\n      } else { pt = pt; }\r\n    } else if ((pt === L || pt === R) && gridAlign.y) {\r\n      const floorY: number = Math.floor(pt.y / gridAlign.y) * gridAlign.y;\r\n      const ceilY: number = Math.ceil(pt.y / gridAlign.y) * gridAlign.y;\r\n      let closestY;\r\n      let farthestY;\r\n      if (Math.abs(floorY - pt.y) < Math.abs(ceilY - pt.y)) {\r\n        closestY = floorY; farthestY = ceilY;\r\n      } else { closestY = ceilY; farthestY = floorY; }\r\n\r\n      // if closest grid intersection is inside the vertex.\r\n      if (closestY >= vertexGSize.y && closestY <= vertexGSize.y + vertexGSize.h) { pt.y = closestY; } else\r\n      // if 2° closer grid intersection is inside the vertex.\r\n      if (closestY >= vertexGSize.y && closestY <= vertexGSize.y + vertexGSize.h) { pt.y = farthestY;\r\n        // if no intersection are inside the vertex (ignore grid)\r\n      } else { pt = pt; }\r\n    }\r\n    return pt; }\r\n  dontMixWithSize: any;\r\n  clone(json: GraphSize): GraphSize { return new GraphSize(json.x, json.y, json.w, json.h); }\r\n  duplicate(): GraphSize { return new GraphSize().clone(this); }\r\n  makePoint(x: number, y: number): Point { return new GraphPoint(x, y); }\r\n  tl(): GraphPoint { return super.tl() as GraphPoint; }\r\n  tr(): GraphPoint { return super.tr() as GraphPoint; }\r\n  bl(): GraphPoint { return super.bl() as GraphPoint; }\r\n  br(): GraphPoint { return super.br() as GraphPoint; }\r\n  equals(size: GraphSize): boolean { return super.equals(size); }\r\n  min(minSize: GraphSize, clone: boolean): GraphSize { return super.min(minSize, clone) as GraphSize; }\r\n  max(minSize: GraphSize, clone: boolean): GraphSize { return super.max(minSize, clone) as GraphSize; }\r\n}\r\n\r\nexport abstract class IPoint {\r\n  x: number;\r\n  y: number;\r\n\r\n  static getM(firstPt: IPoint, secondPt: IPoint): number { return (firstPt.y - secondPt.y) / (firstPt.x - secondPt.x); }\r\n  static getQ(firstPt: IPoint, secondPt: IPoint): number { return firstPt.y - IPoint.getM(firstPt, secondPt) * firstPt.x; }\r\n  constructor(x: number | string, y: number | string) {\r\n    if (isNaN(+x)) { x = 0; }\r\n    if (isNaN(+y)) { y = 0; }\r\n    this.x = +x;\r\n    this.y = +y; }\r\n\r\n  toString(): string { return '(' + this.x + ', ' + this.y + ')'; }\r\n  abstract clone(): IPoint;\r\n\r\n  subtract(p2: IPoint, newInstance: boolean): IPoint {\r\n    U.pe(!p2, 'subtract argument must be a valid point: ', p2);\r\n    let p1: IPoint;\r\n    if (!newInstance) { p1 = this; } else { p1 = this.clone(); }\r\n    p1.x -= p2.x;\r\n    p1.y -= p2.y;\r\n    return p1; }\r\n\r\n  add(p2: IPoint, newInstance: boolean): IPoint {\r\n    U.pe(!p2, 'add argument must be a valid point: ', p2);\r\n    let p1: IPoint;\r\n    if (!newInstance) { p1 = this; } else { p1 = this.clone(); }\r\n    p1.x += p2.x;\r\n    p1.y += p2.y;\r\n    return p1; }\r\n\r\n  addAll(p: IPoint[], newInstance: boolean): IPoint {\r\n    let i;\r\n    let p0: IPoint;\r\n    if (!newInstance) { p0 = this; } else { p0 = this.clone(); }\r\n    for (i = 0; i < p.length; i++) { p0.add(p[i], true); }\r\n    return p0; }\r\n\r\n  subtractAll(p: IPoint[], newInstance: boolean): IPoint {\r\n    let i;\r\n    let p0: IPoint;\r\n    if (!newInstance) { p0 = this; } else { p0 = this.clone(); }\r\n    for (i = 0; i < p.length; i++) { p0.subtract(p[i], true); }\r\n    return p0; }\r\n\r\n  multiply(scalar: number, newInstance: boolean): IPoint {\r\n    U.pe( isNaN(+scalar), 'scalar argument must be a valid number: ', scalar);\r\n    let p1: IPoint;\r\n    if (!newInstance) { p1 = this; } else { p1 = this.clone(); }\r\n    p1.x *= scalar;\r\n    p1.y *= scalar;\r\n    return p1; }\r\n\r\n  divide(scalar: number, newInstance: boolean): IPoint {\r\n    U.pe( isNaN(+scalar), 'scalar argument must be a valid number: ', scalar);\r\n    let p1: IPoint;\r\n    if (!newInstance) { p1 = this; } else { p1 = this.clone(); }\r\n    p1.x /= scalar;\r\n    p1.y /= scalar;\r\n    return p1; }\r\n\r\n  isInTheMiddleOf(firstPt: IPoint, secondPt: IPoint, tolleranza: number): boolean {\r\n    const rectangle: Size = Size.fromPoints(firstPt as Point, secondPt as Point);\r\n    const tolleranzaX = tolleranza; // actually should be cos * arctan(m);\r\n    const tolleranzaY = tolleranza; // actually should be sin * arctan(m);\r\n    if (this.x < rectangle.x - tolleranzaX || this.x > rectangle.x + rectangle.w + tolleranzaX) { return false; }\r\n    if (this.y < rectangle.y - tolleranzaX || this.y > rectangle.y + rectangle.h + tolleranzaY) { return false; }\r\n    const m = IPoint.getM(firstPt, secondPt);\r\n    const q = IPoint.getQ(firstPt, secondPt);\r\n    const lineDistance = this.distanceFromLine(firstPt, secondPt);\r\n    // console.log('distance:', lineDistance, ', this:', this, ', p1:', firstPt, ', p2:', secondPt);\r\n    return lineDistance <= tolleranza; }\r\n\r\n  distanceFromLine(p1: IPoint, p2: IPoint): number {\r\n    const top: number =\r\n      + (p2.y - p1.y) * this.x\r\n      - (p2.x - p1.x) * this.y\r\n      + p2.x * p1.y\r\n      - p1.x * p2.y;\r\n    const bot =\r\n      (p2.y - p1.y) * (p2.y - p1.y) +\r\n      (p2.x - p1.x) * (p2.x - p1.x);\r\n    return Math.abs(top) / Math.sqrt(bot);  }\r\n\r\n  equals(pt: IPoint, tolleranzaX: number = 0, tolleranzaY: number = 0): boolean {\r\n    if (pt === null) { return false; }\r\n    return Math.abs(this.x - pt.x) <= tolleranzaX && Math.abs(this.y - pt.y) <= tolleranzaY; }\r\n\r\n  moveOnNearestBorder(startVertexSize: ISize, clone: boolean, debug: boolean = true): IPoint {\r\n    const pt: IPoint = clone ? this.clone() : this;\r\n    const tl: IPoint = startVertexSize.tl();\r\n    const tr: IPoint = startVertexSize.tr();\r\n    const bl: IPoint = startVertexSize.bl();\r\n    const br: IPoint = startVertexSize.br();\r\n    const L: number = pt.distanceFromLine(tl, bl);\r\n    const R: number = pt.distanceFromLine(tr, br);\r\n    const T: number = pt.distanceFromLine(tl, tr);\r\n    const B: number = pt.distanceFromLine(bl, br);\r\n    const min: number = Math.min(L, R, T, B);\r\n    if (min === L) { pt.x = tl.x; }\r\n    if (min === R) { pt.x = tr.x; }\r\n    if (min === T) { pt.y = tr.y; }\r\n    if (min === B) { pt.y = br.y; }\r\n    if (debug && pt instanceof GraphPoint) { Status.status.getActiveModel().graph.markg(pt, false, 'purple'); }\r\n    return pt;\r\n  }\r\n\r\n  getM(pt2: IPoint): number { return IPoint.getM(this, pt2); }\r\n\r\n  degreeWith(pt2: IPoint, toRadians: boolean): number {\r\n    const directionVector: IPoint = this.subtract(pt2, true);\r\n    const ret: number = Math.atan2(directionVector.y, directionVector.x);\r\n    return toRadians ? ret : U.RadToDegree(ret); }\r\n\r\n}\r\nexport class GraphPoint extends IPoint{\r\n  dontmixwithPoint: any;\r\n  static fromEvent(e: ClickEvent | MouseMoveEvent | MouseUpEvent | MouseDownEvent | MouseEnterEvent | MouseLeaveEvent | MouseEvent)\r\n    : GraphPoint {\r\n    if (!e) { return null; }\r\n    const p: Point = new Point(e.pageX, e.pageY);\r\n    const g: IGraph = Status.status.getActiveModel().graph;\r\n    return g.toGraphCoord(p); }\r\n\r\n  clone(): GraphPoint { return new GraphPoint(this.x, this.y); }\r\n  subtract(p2: GraphPoint, newInstance: boolean): GraphPoint { return super.subtract(p2, newInstance) as GraphPoint; }\r\n  add(p2: GraphPoint, newInstance: boolean): GraphPoint { return super.add(p2, newInstance) as GraphPoint; }\r\n  multiply(scalar: number, newInstance: boolean): GraphPoint { return super.multiply(scalar, newInstance) as GraphPoint; }\r\n  divide(scalar: number, newInstance: boolean): GraphPoint { return super.divide(scalar, newInstance) as GraphPoint; }\r\n  isInTheMiddleOf(firstPt: GraphPoint, secondPt: GraphPoint, tolleranza: number): boolean { return super.isInTheMiddleOf(firstPt, secondPt, tolleranza); }\r\n  distanceFromLine(p1: GraphPoint, p2: GraphPoint): number { return super.distanceFromLine(p1, p2); }\r\n  equals(pt: GraphPoint, tolleranzaX: number = 0, tolleranzaY: number = 0): boolean { return super.equals(pt, tolleranzaX, tolleranzaY); }\r\n  moveOnNearestBorder(startVertexSize: GraphSize, clone: boolean, debug: boolean = true): GraphPoint {\r\n    return super.moveOnNearestBorder(startVertexSize, clone, debug) as GraphPoint; }\r\n  getM(pt2: GraphPoint): number { return super.getM(pt2); }\r\n  degreeWith(pt2: GraphPoint, toRadians: boolean): number { return super.degreeWith(pt2, toRadians); }\r\n}\r\nexport class Point extends IPoint{\r\n  dontmixwithPoint: any;\r\n  static fromEvent(e: ClickEvent | MouseMoveEvent | MouseUpEvent | MouseDownEvent | MouseEnterEvent | MouseLeaveEvent | MouseEvent)\r\n    : Point {\r\n    if (!e) { return null; }\r\n    const p: Point = new Point(e.pageX, e.pageY);\r\n    return p; }\r\n\r\n  clone(): Point { return new Point(this.x, this.y); }\r\n  subtract(p2: Point, newInstance: boolean): Point { return super.subtract(p2, newInstance) as Point; }\r\n  add(p2: Point, newInstance: boolean): Point { return super.add(p2, newInstance) as Point; }\r\n  multiply(scalar: number, newInstance: boolean): Point { return super.multiply(scalar, newInstance) as Point; }\r\n  divide(scalar: number, newInstance: boolean): Point { return super.divide(scalar, newInstance) as Point; }\r\n  isInTheMiddleOf(firstPt: Point, secondPt: Point, tolleranza: number): boolean { return super.isInTheMiddleOf(firstPt, secondPt, tolleranza); }\r\n  distanceFromLine(p1: Point, p2: Point): number { return super.distanceFromLine(p1, p2); }\r\n  equals(pt: Point, tolleranzaX: number = 0, tolleranzaY: number = 0): boolean { return super.equals(pt, tolleranzaX, tolleranzaY); }\r\n  moveOnNearestBorder(startVertexSize: GraphSize, clone: boolean, debug: boolean = true): Point {\r\n    return super.moveOnNearestBorder(startVertexSize, clone, debug) as Point; }\r\n  getM(pt2: Point): number { return super.getM(pt2); }\r\n  degreeWith(pt2: Point, toRadians: boolean): number { return super.degreeWith(pt2, toRadians); }\r\n}\r\n\r\nexport class FileReadTypeEnum {\r\n  public static image: FileReadTypeEnum = \"image/*\" as any;\r\n  public static audio: FileReadTypeEnum = \"audio/*\" as any;\r\n  public static video: FileReadTypeEnum = \"video/*\" as any;\r\n  /// a too much huge list https://www.iana.org/assignments/media-types/media-types.xhtml\r\n  public static AndManyOthersButThereAreTooMuch: string = \"And many others... https://www.iana.org/assignments/media-types/media-types.xhtml\";\r\n  public static OrJustPutFileExtension: string = \"OrJustPutFileExtension\";\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","export default \"\\r\\n.consoleRoot{\\r\\n  color: var(--mainFontColor);\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  font-family: monospace,monospace;\\r\\n  position: relative;\\r\\n  max-width: 100%;\\r\\n  max-height: 100%;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  overflow-y: auto;\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n          flex-flow: column;\\r\\n}\\r\\n.consoleContent{\\r\\n  width: 100%;\\r\\n}\\r\\n.inputLine{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  margin-top: auto;\\r\\n}\\r\\n.inputEcho, .input, .output, .suggestion{\\r\\n  width: 100%;\\r\\n  /* padding: 16px 4px;*/\\r\\n  padding-top: 0.5em;\\r\\n  padding-bottom: 0.5em;\\r\\n  padding-left: 5em;\\r\\n  line-height: 1.5;\\r\\n}\\r\\n.input{\\r\\n  -webkit-box-flex: 0;\\r\\n          flex-grow: 0;\\r\\n  flex-shrink: 0;\\r\\n  width: auto;\\r\\n}\\r\\n.suggestion{\\r\\n  -webkit-box-flex: 1;\\r\\n          flex-grow: 1;\\r\\n  width: auto;\\r\\n  padding-left: 0;\\r\\n}\\r\\n.inputEcho{\\r\\n  font-style: italic;\\r\\n}\\r\\n.inputEcho:before, .input:before, .output:before{\\r\\n  content: '> ';\\r\\n  color: palevioletred;\\r\\n  vertical-align: top; }\\r\\n.input:before {\\r\\n  color: #FC3565;\\r\\n}\\r\\n.output:before {\\r\\n  color: #5F8787;\\r\\n  font-weight: 600 !important;\\r\\n}\\r\\n.suggestion{\\r\\n  color: gray;\\r\\n}\\r\\n.error {\\r\\n  color: palevioletred;\\r\\n}\\r\\n/*\\r\\n.output-cmd:before {\\r\\n  content: '> ';\\r\\n  color: #FC3565;\\r\\n  vertical-align: top;\\r\\n}*/\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ndWlFbGVtZW50cy9jb25zb2xlL2NvbnNvbGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7RUFDRSwyQkFBMkI7RUFDM0IsNENBQTRDO0VBQzVDLGdDQUFnQztFQUNoQyxrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixvQkFBYTtFQUFiLGFBQWE7RUFDYiw0QkFBaUI7RUFBakIsNkJBQWlCO1VBQWpCLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0UsV0FBVztBQUNiO0FBQ0E7RUFDRSxvQkFBYTtFQUFiLGFBQWE7RUFDYixnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLHFCQUFxQjtFQUNyQixpQkFBaUI7RUFDakIsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxtQkFBWTtVQUFaLFlBQVk7RUFDWixjQUFjO0VBQ2QsV0FBVztBQUNiO0FBQ0E7RUFDRSxtQkFBWTtVQUFaLFlBQVk7RUFDWixXQUFXO0VBQ1gsZUFBZTtBQUNqQjtBQUNBO0VBQ0Usa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSxhQUFhO0VBQ2Isb0JBQW9CO0VBQ3BCLG1CQUFtQixFQUFFO0FBQ3ZCO0VBQ0UsY0FBYztBQUNoQjtBQUNBO0VBQ0UsY0FBYztFQUNkLDJCQUEyQjtBQUM3QjtBQUNBO0VBQ0UsV0FBVztBQUNiO0FBQ0E7RUFDRSxvQkFBb0I7QUFDdEI7QUFFQTs7Ozs7RUFLRSIsImZpbGUiOiJzcmMvZ3VpRWxlbWVudHMvY29uc29sZS9jb25zb2xlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLmNvbnNvbGVSb290e1xyXG4gIGNvbG9yOiB2YXIoLS1tYWluRm9udENvbG9yKTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tYWluQmFja2dyb3VuZENvbG9yKTtcclxuICBmb250LWZhbWlseTogbW9ub3NwYWNlLG1vbm9zcGFjZTtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gIG1heC1oZWlnaHQ6IDEwMCU7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWZsb3c6IGNvbHVtbjtcclxufVxyXG4uY29uc29sZUNvbnRlbnR7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuLmlucHV0TGluZXtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIG1hcmdpbi10b3A6IGF1dG87XHJcbn1cclxuLmlucHV0RWNobywgLmlucHV0LCAub3V0cHV0LCAuc3VnZ2VzdGlvbntcclxuICB3aWR0aDogMTAwJTtcclxuICAvKiBwYWRkaW5nOiAxNnB4IDRweDsqL1xyXG4gIHBhZGRpbmctdG9wOiAwLjVlbTtcclxuICBwYWRkaW5nLWJvdHRvbTogMC41ZW07XHJcbiAgcGFkZGluZy1sZWZ0OiA1ZW07XHJcbiAgbGluZS1oZWlnaHQ6IDEuNTtcclxufVxyXG4uaW5wdXR7XHJcbiAgZmxleC1ncm93OiAwO1xyXG4gIGZsZXgtc2hyaW5rOiAwO1xyXG4gIHdpZHRoOiBhdXRvO1xyXG59XHJcbi5zdWdnZXN0aW9ue1xyXG4gIGZsZXgtZ3JvdzogMTtcclxuICB3aWR0aDogYXV0bztcclxuICBwYWRkaW5nLWxlZnQ6IDA7XHJcbn1cclxuLmlucHV0RWNob3tcclxuICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbn1cclxuLmlucHV0RWNobzpiZWZvcmUsIC5pbnB1dDpiZWZvcmUsIC5vdXRwdXQ6YmVmb3Jle1xyXG4gIGNvbnRlbnQ6ICc+ICc7XHJcbiAgY29sb3I6IHBhbGV2aW9sZXRyZWQ7XHJcbiAgdmVydGljYWwtYWxpZ246IHRvcDsgfVxyXG4uaW5wdXQ6YmVmb3JlIHtcclxuICBjb2xvcjogI0ZDMzU2NTtcclxufVxyXG4ub3V0cHV0OmJlZm9yZSB7XHJcbiAgY29sb3I6ICM1Rjg3ODc7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMCAhaW1wb3J0YW50O1xyXG59XHJcbi5zdWdnZXN0aW9ue1xyXG4gIGNvbG9yOiBncmF5O1xyXG59XHJcbi5lcnJvciB7XHJcbiAgY29sb3I6IHBhbGV2aW9sZXRyZWQ7XHJcbn1cclxuXHJcbi8qXHJcbi5vdXRwdXQtY21kOmJlZm9yZSB7XHJcbiAgY29udGVudDogJz4gJztcclxuICBjb2xvcjogI0ZDMzU2NTtcclxuICB2ZXJ0aWNhbC1hbGlnbjogdG9wO1xyXG59Ki9cclxuIl19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport KeyDownEvent = JQuery.KeyDownEvent;\r\nimport {M2Class, IModel, Model, ModelPiece, Status, U, IClass, ansiUp} from '../../common/Joiner';\r\nimport KeyUpEvent = JQuery.KeyUpEvent;\r\nimport * as util from 'util';\r\n\r\n// @ts-ignore\r\n@Component({\r\n  selector: 'app-console',\r\n  templateUrl: './console.component.html',\r\n  styleUrls: ['./console.component.css']\r\n})\r\nexport class ConsoleComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\nexport class MyConsole {\r\n  static attribute = '_ngcontent-c4';\r\n  container: HTMLElement = null;\r\n  content: HTMLElement = null;\r\n  inputLine: HTMLElement = null;\r\n  input: HTMLElement = null;\r\n  suggestion: HTMLElement = null;\r\n  position: number;\r\n  commandindex = 0;\r\n  commandHistory: string[] = [];\r\n  newline = '<br/>';\r\n  tab = '&nbsp;&nbsp;&nbsp;&nbsp;';\r\n  constructor(root: HTMLElement) {\r\n    this.container = document.createElement('div');\r\n    this.container.classList.add('consoleRoot');\r\n    this.content = document.createElement('div');\r\n    this.content.classList.add('consoleContent');\r\n    this.inputLine = document.createElement('div');\r\n    this.inputLine.classList.add('inputLine');\r\n    this.input = document.createElement('span');\r\n    this.input.classList.add('input');\r\n    this.inputLine.setAttribute('tabindex', '-1');\r\n    this.suggestion = document.createElement('span');\r\n    this.suggestion.classList.add('suggestion');\r\n    root.appendChild(this.container);\r\n    this.container.appendChild(this.content);\r\n    this.container.appendChild(this.inputLine);\r\n    this.inputLine.appendChild(this.input);\r\n    this.inputLine.appendChild(this.suggestion);\r\n\r\n    this.container.setAttribute(MyConsole.attribute, '');\r\n    this.content.setAttribute(MyConsole.attribute, '');\r\n    this.inputLine.setAttribute(MyConsole.attribute, '');\r\n    this.input.setAttribute(MyConsole.attribute, '');\r\n    this.suggestion.setAttribute(MyConsole.attribute, '');\r\n    U.addCss('console', '' +\r\n      '.console_error{ display: inline-block; color: red; }' +\r\n      '.console_input{ display: inline-block; color: red; }' +\r\n      '' +\r\n      '' +\r\n      '');\r\n    this.addEventListeners();\r\n  }\r\n  addEventListeners(): void {\r\n    $(this.inputLine).off('keydown.input').on('keydown.input', (e: KeyDownEvent) => { this.onKeyDown(e); });\r\n    $(this.inputLine).off('keyup.input').on('keyup.input', (e: KeyUpEvent) => { this.onKeyUp(e); });\r\n  }\r\n  onKeyUp(e: KeyUpEvent): void {\r\n    switch (e.key) {\r\n      default: this.scrollBottom(); break;\r\n      case 'ArrowUp': case 'Enter':\r\n        this.scrollBottom(); break;\r\n    }\r\n  }\r\n  onKeyDown(e: KeyDownEvent): void {\r\n    console.log('myconsole.keydown:', e.key);\r\n    switch (e.key) {\r\n      case 'Enter':\r\n        this.position = 0;\r\n        if (this.suggestion.innerText.length !== 0) {\r\n          this.input.innerText += this.suggestion.innerText;\r\n          this.position = this.input.innerText.length - 1;\r\n          this.suggestion.innerText = '';\r\n          return; }\r\n        this.command(this.input.innerText);\r\n        return;\r\n      case 'Backspace':\r\n        this.suggestion.innerText = '';\r\n        if (this.position === 0) { return; }\r\n        this.input.innerText = this.input.innerText.substr(0, --this.position);\r\n        // this.generateSuggestion();\r\n        return;\r\n      case 'Escape':\r\n        if (this.suggestion.innerText.length > 0) { this.suggestion.innerText = ''; return; }\r\n        this.input.innerText = '';\r\n        return;\r\n      case 'Tab':\r\n        this.inputLine.focus();\r\n        this.generateSuggestion();\r\n        return;\r\n      case 'ArrowUp':\r\n        if (--this.commandindex === -1) { this.commandindex = this.commandHistory.length - 1; }\r\n        this.commandindex = (this.commandindex % this.commandHistory.length);\r\n        this.input.innerText = this.commandHistory[this.commandindex];\r\n        this.position = this.input.innerText.length - 1;\r\n        console.log('command[' + (this.commandindex) + '/' + this.commandHistory.length + '] = ' +\r\n          this.commandHistory[this.commandindex], 'arr:', this.commandHistory);\r\n        // avoid scroll.\r\n        e.preventDefault();\r\n        return;\r\n      case 'ArrowDown':\r\n        this.commandindex = (++this.commandindex % this.commandHistory.length);\r\n        this.input.innerText = this.commandHistory[this.commandindex];\r\n        this.position = this.input.innerText.length - 1;\r\n        console.log('command[' + (this.commandindex) + '/' + this.commandHistory.length + '] = ' +\r\n          this.commandHistory[this.commandindex], 'arr:', this.commandHistory);\r\n        // avoid scroll.\r\n        e.preventDefault();\r\n        return;\r\n      case 'ArrowRight':\r\n        if (this.position === this.input.innerText.length - 1 && this.suggestion.innerText.length > 0) {\r\n          this.position++;\r\n          this.input.innerText += this.suggestion.innerText.charAt(0);\r\n          this.suggestion.innerText = this.suggestion.innerText.substr(1);\r\n          return; }\r\n        this.position = Math.min(this.input.innerText.length - 1, this.position + 1);\r\n        return;\r\n      case 'ArrowLeft':\r\n        this.position = Math.max(0, this.position - 1);\r\n        this.suggestion.innerText = '';\r\n        return;\r\n      case 'Shift': case 'Alt': case 'Control': return;\r\n      default:\r\n        if (e.key.length !== 1) {console.log('unexpected key:', e.key); return; }\r\n        this.input.innerHTML += e.key === ' ' ? '&nbsp;' : e.key;\r\n        this.position = (this.position + 1); // % this.input.innerText;\r\n        this.suggestion.innerText = '';\r\n        this.scrollBottom();\r\n    }\r\n  }\r\n  scrollBottom(): void {\r\n    console.log('scrollBottom()');\r\n    // this.container.scrollTop = this.inputLine.offsetHeight;\r\n    this.container.scrollTop = this.content.offsetHeight;\r\n  }\r\n  command(str: string): void {\r\n    str = U.replaceAll(str, ' ', ' ').trim(); // &nbsp; with space\r\n    console.log('myConsole.command(' + str + ')');\r\n    this.commandHistory.push(str);\r\n    // così quando fa keyUp si ritrova l'ultimo comando, se fa keyDown il 2°.\r\n    // dovrei dargli il 1° ma servirebbe un bool o un valore decimale (.5) per metterlo in una posizione tra l'ultimo e il primo\r\n    // invece di sovrapposto al primo o all'ultimo (ho scelto di sovrapporlo al primo).\r\n    this.commandindex = 0;\r\n    this.input.innerText = this.suggestion.innerText = '';\r\n\r\n    this.appendInput(str);\r\n    this.appendOutput(this.execCommand(str));\r\n    this.scrollBottom();\r\n  }\r\n  appendInput(str: string, compoundCommandPart: boolean = false): void {\r\n    const input: HTMLElement = document.createElement('div');\r\n    input.setAttribute(MyConsole.attribute, '');\r\n    input.setAttribute('tabindex', '-1');\r\n    input.classList.add('inputEcho');\r\n    if (compoundCommandPart) { input.classList.add('compoundCommandPart'); }\r\n    input.innerHTML = str;\r\n    this.content.appendChild(input); }\r\n\r\n  appendOutput(str: string, compoundCommandPart: boolean = false): void {\r\n    if (str === '') { return; } // CLS special rule\r\n    U.pe(!str, 'null output');\r\n    const output: HTMLElement = document.createElement('div');\r\n    output.setAttribute(MyConsole.attribute, '');\r\n    output.setAttribute('tabindex', '-1');\r\n    output.classList.add('output');\r\n    if (compoundCommandPart) { output.classList.add('compoundCommandPart'); }\r\n    output.innerHTML = str;\r\n    this.content.appendChild(output); }\r\n\r\n  exampleFormatting(s: string): string {\r\n    const es = '<b style=\"color: forestgreen;\">&lt;';\r\n    const ee = '&gt;</b>';\r\n    return  es + s + ee; }\r\n  optionalFormatting(s: string): string {\r\n      const os = '<i style=\"color: cornflowerblue;\">[';\r\n      const oe = ']</i>';\r\n      return  os + s + oe; }\r\n  commandFormatting(s: string): string { return '&nbsp;&nbsp;○&nbsp;' + s + this.newline; }\r\n  xmp(str: string): string { return '<xmp style=\"display: inline;\">' + str + '</xmp>'; }\r\n  descriptionFormatting(s: string): string { return this.tab + '<span style = \"color: lightsteelblue;\">' + s + '</span>' + this.newline; }\r\n  help(): string {\r\n    const nl = this.newline;\r\n    const tab = this.tab;\r\n    const desc = (s) => this.descriptionFormatting.call(this, s);\r\n    const command = (s) => this.commandFormatting.call(this, s);\r\n    const e = (s) => this.exampleFormatting.call(this, s);\r\n    const o = (s) => this.optionalFormatting.call(this, s);\r\n    return '' +\r\n      'Available Commands:' + this.newline +\r\n      'Normal text like this means literal constants.' + this.newline +\r\n      e('Text like this') + ' are examples that should be replaced without brakets' + this.newline +\r\n      o('Text like this') + ' are optional parameters' + this.newline +\r\n      e('leftCommand') + '|' + e('rightCommand') + ' The vertical bar means \"OR\", you must choose to insert the left or the ' +\r\n      'right command piece or argument.' + this.newline +\r\n      // 'Non-underlined text is just comments and explanations.' + this.newline +\r\n      'Commands executed without arguments or preceded by the \"?\" prefix will show the command guide.' + this.newline +\r\n      // '••••'\r\n      command('info ' + e('className') + o('.' + e('attributeName') + '|' + e('referenceName') + '|')) +\r\n      desc('Visualizza informationi riguardo la classe, reference o attributo fornito dal parametro.') +\r\n      command('cc ' + e('Comando Composito') ) +\r\n      desc('Consente di concatenare ed eseguire multipli comandi elementari in una sola linea di comando composita, ' +\r\n        'di utilizzare l\\'output di un comando come parte dei parametri input di altri comandi e di poter eseguire un qualsiasi ' +\r\n        'codice javascript che interagisca con l\\'output dei comandi console') +\r\n      command('raw ' + e('ProssimoComando') ) +\r\n      desc('Esegue il prossimo comando mostrandone l\\'output come testo grezzo invece che come html ' +\r\n        'per individuare eventuali errori nell\\'html impedendo che il browser esegua la correzione automatica, nascondendo il problema.') +\r\n      command('cls' ) +\r\n      desc(this.cls_Help());\r\n  }\r\n\r\n  execCommand(str: string): string {\r\n    str = str.trim();\r\n    const pos = str.indexOf(' ');\r\n    let command = (pos > 0 ? str.substring(0, pos) : str).toLowerCase();\r\n    const params = str.substring(pos).trim();\r\n    console.log('com: \"' + command + '\", par: \"' + params + '\"; pos:' + pos + '; str:' + str);\r\n    if (params === '/?' || params === 'help') { command = '?' + command; }\r\n    switch (command) {\r\n      default:\r\n        console.log(command, str, (command === 'help'), (str === 'help'));\r\n        return 'unrecognized command: |' + this.errorFormatting(this.xmp(command))\r\n        + '| To see the full list of commands type \"help\".';\r\n      case '?h': case '?help': case '?/?':\r\n      case 'h': case 'help': case '/?': return this.help();\r\n\r\n      case '?i': case '?info': return this.getModelPieceInfo_Help();\r\n      case 'i': case 'info': return this.getModelPieceInfo(params);\r\n\r\n      case '?cc': case '?compoundcommand': return this.compoundCommand_Help();\r\n      case 'cc': case 'compoundcommand': return this.compoundCommand(params);\r\n\r\n      case '?raw': case '?debug': return this.rawDebug_Help();\r\n      case 'raw': case 'debug': return this.rawDebug(params);\r\n\r\n      case '?cls': return this.cls_Help();\r\n      case 'cls': this.cls(); return '';\r\n    }\r\n  }\r\n  compoundCommand_Help(): string {\r\n    let ret: string;\r\n    const nl = this.newline;\r\n    ret = '' +\r\n      'Consente di concatenare ed eseguire multipli comandi elementari in una sola linea di comando composita' +\r\n      ', di utilizzare l\\'output di un comando come parte dei parametri input di altri comandi' +\r\n      ' e di poter eseguire un qualsiasi codice javascript che interagisca con l\\'output dei comandi console.' + nl +\r\n      'Il corpo del comando va scritto in codice javascript, all\\'interno del quale è possibile eseguire comandi console ' + nl +\r\n      'delimitati dal carattere \"$\" come prefisso e appendice al comando desiderato, l\\'output di tale comando può essere utilizzato ' +\r\n      'dal codice javascript come se fosse una variabile o una funzione che ritorna un oggetto.' + nl +\r\n      'esempio 1:' + nl +\r\n      'cc alert(\"L\\'output del comando help è: \" + $help$);' + nl +\r\n      'È anche possibile utilizzare l\\'output di un comando come parametro di un altro comando, ' +\r\n      'aggiungendo un ulteriore delimitatore \"$\" per ogni livello di nesting dei comandi.' + nl +\r\n      'Se ipotizziamo che il ' + nl +\r\n      'esempio 2:' + nl +\r\n      'cc alert($info $$comando2$$.name$);' + nl +\r\n      'Se ad esempio l\\'output di \\\"comando2\\\" è \"Book\", il comando diventerà \"cc alert($info Book.name$);\"' +\r\n      ' e verrà poi eseguito come nell\\'esempio 1.' + nl +\r\n      'Terzo esempio ulteriormente compesso, con due compound command concatenati.' +\r\n      'cc alert($info $$cc [altro codice js]$$$comando2$$$[altro codice js] $$.name$);';\r\n    return ret; }\r\n\r\n  compoundCommand(str: string, debug: boolean = true): string {\r\n    const prefix = '$';\r\n    const fullPrefix = prefix + '';\r\n    str = str.replace(/(^\\$|(((?!\\$).|^))[\\$](?!\\$))(.*?)(^\\$|((?!\\$).|^)[\\$](?!\\$))/gm,\r\n      (match: string, capture) => {\r\n        // console.log('matched:', match, 'capture: ', capture);\r\n        if (match === '$') { return ''; }\r\n        // prefixError: un lieve fix manuale alla regexp non 100% esatta.\r\n        let prefixError = '';\r\n        if (match.charAt(0) !== '$') {\r\n          prefixError = match.charAt(0);\r\n          match = match.substring(1);\r\n        }\r\n        let subcommand = match.substring(fullPrefix.length, match.length - 1);\r\n        // todo: max nesting attuale = 3. se faccio nesting 4 allora $$$$ ---> $$\r\n        // per risolvere: sostituisci [not($)]$^n[not($)]  --->  [not($)]$^(n-1)[not($)] in pratica: riduci di una singola $.\r\n        // oppure usa 2^n volte il $ al posto di solo n volte. es 4 nested: $$$$$$$$$$$$$$$$ ---> $$$$$$$$ -> $$$$ -> $$ -> $\r\n        subcommand = U.replaceAll(subcommand, '$$', '$');\r\n        const debugtext = subcommand + '(' + match + ')';\r\n        const tmp = prefixError + '' + this.execCommand(subcommand);\r\n        this.appendInput(subcommand, true);\r\n        this.appendOutput(tmp, true);\r\n        U.pif(debug, 'replaceSingleVar: ' + debugtext + ' --> ' + tmp);\r\n        return tmp;\r\n      });\r\n    return this.execCommand(str); }\r\n\r\n  rawDebug_Help(): string {\r\n    let ret: string;\r\n    const nl = this.newline;\r\n    const e = this.exampleFormatting;\r\n    ret = 'Sintassi: ' + nl + this.commandFormatting('raw' + e('Command'));\r\n    this.descriptionFormatting('Esegue il prossimo comando mostrandone l\\'output come testo grezzo invece che come html per individuare' +\r\n      ' eventuali errori nell\\'html impedendo che il browser esegua la correzione automatica, nascondendo il problema.');\r\n    return ret; }\r\n\r\n  cls_Help(): string {\r\n    return 'Svuota la console cancellando tutti gli input e gli output dei comandi precedenti.';\r\n  }\r\n  cls(): void { U.clear(this.content); }\r\n  rawDebug(params: string): string {\r\n    let ret = this.execCommand(params);\r\n    ret = U.replaceAll(ret, '<', '&lt;');\r\n    ret = U.replaceAll(ret, '>',  '&gt;');\r\n    return '<xmp>' + (ret) + '</xmp>'; }\r\n\r\n  errorFormatting(s: string): string { return '<div class=\"console_error\">' + s + '</div>'; }\r\n\r\n  getModelPieceInfo_Help(): string {\r\n    const nl = this.newline;\r\n    let ret: string;\r\n    ret = '' +\r\n      'Displays the available sub-fields of an object accessible through the \\'.\\' operator.' + nl +\r\n      'If a name conflict arise with a childrenObject or instanceObject name, that name will be added with the \\'_\\' prefix.' + nl +\r\n      'If a name conflict arise with a property only owned by a particular model piece type (es: reference target),' +\r\n      ' that name will be added with the \\'@\\' prefix.';\r\n    return ret; }\r\n\r\n  getModelPieceInfo(name: string): string {\r\n    console.log('getModelPieceInfo:', name);\r\n    if (name.indexOf(' ') !== -1) {\r\n      return this.errorFormatting('Spaces are not allowed inside a class, attribute or reference name-path.'); }\r\n    const tokens: string[] = name.split('.');\r\n    const modelPrio = Status.status.getActiveModel();\r\n    let info = this.getModelPieceInfoByModel(modelPrio, tokens);\r\n    if (info) { return this.stringify(info); }\r\n    // info = this.getModelPieceInfoByModel(modelPrio.isMM() ? Status.status.m : Status.status.mm, tokens);\r\n    info = this.getModelPieceInfoByModel(modelPrio.isMM() ? Status.status.m : Status.status.mm, tokens);\r\n    if (info) { return this.stringify(info); }\r\n    return this.errorFormatting('\"' + name + '\" is not matching any class, attribute or reference name-path.'); }\r\n\r\n  stringify(obj: any): string {\r\n    let str: string = util.inspect(obj, false, 0, true);\r\n    str = ansiUp.ansi_to_html(str);\r\n    return str; }\r\n\r\n  stringify_Old(obj: any): string {\r\n    const duplicateChecker: any[] = [];\r\n    return JSON.stringify(obj, (key: string, value: any) => {\r\n      if (!value) { return value; }\r\n      if ($.isEmptyObject(value)) { return '{}'; }\r\n      if (U.isObject(value)) { return '{' + U.getTSClassName(value) + '(' + U.fieldCount(value) + ' fields)}'; }\r\n      if (U.isArray(value)) { return '[Array(' + value.length + ')]'; }\r\n      if (duplicateChecker.indexOf(value) === -1) { return '{_CIRCULAR_REFERENCE_}'; }\r\n      duplicateChecker.push(value);\r\n      return '' + value; }); }\r\n\r\n  getModelPieceInfoByModel(m: IModel, tokens: string[], debug: boolean = true): any {\r\n    const toLower = true;\r\n    const classes: IClass[] = m.getAllClasses();\r\n    debug = true;\r\n    let i = -1;\r\n    if (toLower) { while (++i < tokens.length) { tokens[i] = toLower ? tokens[i].toLowerCase() : tokens[i]; } }\r\n    i = -1;\r\n    let current: IClass = null;\r\n    while (++i < classes.length) {\r\n      const classe = classes[i];\r\n      U.pe(!classe.name, 'err');\r\n      if (!classe.name) { return null; }\r\n      U.pif(debug, tokens[0] + '===' + classe.name + ' ? ' + (classe.name.toLowerCase() === tokens[0]));\r\n      if (classe.name.toLowerCase() === tokens[0]) { current = classe; break; }\r\n    }\r\n    let ret: any = current;\r\n    U.pif(debug, 'tokens:', tokens);\r\n    i = 0;\r\n    while (++i < tokens.length) {\r\n      const oldRet = ret;\r\n      U.pif(debug, 'PRE_ret: ', oldRet, ' ---> ', ret, 'token[' + i + '/' + tokens.length + '] = |' + tokens[i] + '|, tok:', tokens);\r\n      if (ret instanceof ModelPiece) { U.pif(debug, 'Modelpiece'); ret = (ret as ModelPiece).getInfo(toLower);\r\n      } else { U.pif(debug, 'Terminale'); }\r\n      U.pif(debug, 'gotInfo:', ret);\r\n      ret = ret[tokens[i]];\r\n      U.pif(debug, 'POST_ret: ', oldRet, ' ---> ', ret, 'token[' + i + '] = |' + tokens[i] + '|');\r\n    }\r\n    if (ret instanceof ModelPiece) { return ret.getInfo(); }\r\n    return ret;\r\n  }\r\n  private generateSuggestion(): void {\r\n    this.suggestion.innerText = '//GenerateSuggestion(): to do.';\r\n  }\r\n}\r\n","export default \"#damContextMenuTemplateContainer{\\r\\n  display: none;\\r\\n}\\r\\n.contextMenuRoot{\\r\\n  position: absolute;\\r\\n  display: inline-block;\\r\\n  max-height: 100vh;\\r\\n  max-width: 100vw;\\r\\n  overflow: visible;\\r\\n}\\r\\n.reflist{ display: none; }\\r\\n.reflistparent:hover > .reflist { display: block; }\\r\\n.refli {\\r\\n  white-space: nowrap;\\r\\n  flex-wrap: nowrap;\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  padding-right: 10px; }\\r\\n.refli .firstempty{\\r\\n  width: 100%;\\r\\n}\\r\\n.refli .byindex {\\r\\n  width: 35px;\\r\\n}\\r\\n.reflistparent{\\r\\n  position: relative;\\r\\n}\\r\\n.refli .index {\\r\\n  padding-left: 3px;\\r\\n  color: orange;\\r\\n}\\r\\n.refli .text{\\r\\n  padding-left: 5px;\\r\\n  padding-right: 5px;\\r\\n}\\r\\nbutton.refli.delete{\\r\\n  padding: 0 4px;\\r\\n  margin-left: auto;\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n}\\r\\n.reflist {\\r\\n  left: calc(100%);\\r\\n  position: absolute;\\r\\n  background: white;\\r\\n  border: 1px solid black;\\r\\n  border-left: none;\\r\\n  padding: 2px 5px;\\r\\n  padding-right: 0;\\r\\n  top: 0;\\r\\n}\\r\\nul.contextMenu{\\r\\n  border: 1px solid black;\\r\\n  background-color: white;\\r\\n  padding: 10px;\\r\\n  padding-top: 6px;\\r\\n  padding-bottom: 8px;\\r\\n  padding-right: 0;\\r\\n}\\r\\nli:first-child{\\r\\n  padding-top: 0;\\r\\n}\\r\\nli.separator{\\r\\n  margin-top: 2px;\\r\\n  height: 1px;\\r\\n  padding: 0;\\r\\n  background-color: gray;\\r\\n}\\r\\nli:last-child{\\r\\n  border-bottom: none;\\r\\n}\\r\\nli:hover{\\r\\n  padding-left: 5px;\\r\\n  padding-right: 5px;\\r\\n  color: dodgerblue;\\r\\n}\\r\\nli{\\r\\n  display: block;\\r\\n  cursor: default;\\r\\n  font-size: 0.75rem;\\r\\n  padding-top: 2px;\\r\\n  padding-right: 10px;\\r\\n  color: #b2b2ba;\\r\\n}\\r\\nli:hover li{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  cursor: default;\\r\\n  font-size: 0.75rem;\\r\\n  padding-top: 2px;\\r\\n  padding-right: 10px;\\r\\n  color: #b2b2ba; }\\r\\nli:hover li:hover{\\r\\n  padding-left: 5px;\\r\\n  padding-right: 5px;\\r\\n  color: dodgerblue;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ndWlFbGVtZW50cy9kYW0tY29udGV4dC1tZW51L2RhbS1jb250ZXh0LW1lbnUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQWE7QUFDZjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLHFCQUFxQjtFQUNyQixpQkFBaUI7RUFDakIsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtBQUNuQjtBQUNBLFVBQVUsYUFBYSxFQUFFO0FBQ3pCLGtDQUFrQyxjQUFjLEVBQUU7QUFDbEQ7RUFDRSxtQkFBbUI7RUFDbkIsaUJBQWlCO0VBQ2pCLG9CQUFhO0VBQWIsYUFBYTtFQUNiLG1CQUFtQixFQUFFO0FBQ3ZCO0VBQ0UsV0FBVztBQUNiO0FBQ0E7RUFDRSxXQUFXO0FBQ2I7QUFDQTtFQUNFLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLGFBQWE7QUFDZjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsY0FBYztFQUNkLGlCQUFpQjtFQUNqQixvQkFBYTtFQUFiLGFBQWE7QUFDZjtBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixpQkFBaUI7RUFDakIsdUJBQXVCO0VBQ3ZCLGlCQUFpQjtFQUNqQixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0VBQ2hCLE1BQU07QUFDUjtBQUNBO0VBQ0UsdUJBQXVCO0VBQ3ZCLHVCQUF1QjtFQUN2QixhQUFhO0VBQ2IsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLGNBQWM7QUFDaEI7QUFDQTtFQUNFLGVBQWU7RUFDZixXQUFXO0VBQ1gsVUFBVTtFQUNWLHNCQUFzQjtBQUN4QjtBQUNBO0VBQ0UsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0UsY0FBYztFQUNkLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLG1CQUFtQjtFQUNuQixjQUFjO0FBQ2hCO0FBQ0E7RUFDRSxvQkFBYTtFQUFiLGFBQWE7RUFDYixlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLGdCQUFnQjtFQUNoQixtQkFBbUI7RUFDbkIsY0FBYyxFQUFFO0FBRWxCO0VBQ0UsaUJBQWlCO0VBQ2pCLGtCQUFrQjtFQUNsQixpQkFBaUI7QUFDbkIiLCJmaWxlIjoic3JjL2d1aUVsZW1lbnRzL2RhbS1jb250ZXh0LW1lbnUvZGFtLWNvbnRleHQtbWVudS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2RhbUNvbnRleHRNZW51VGVtcGxhdGVDb250YWluZXJ7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG4uY29udGV4dE1lbnVSb290e1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgbWF4LWhlaWdodDogMTAwdmg7XHJcbiAgbWF4LXdpZHRoOiAxMDB2dztcclxuICBvdmVyZmxvdzogdmlzaWJsZTtcclxufVxyXG4ucmVmbGlzdHsgZGlzcGxheTogbm9uZTsgfVxyXG4ucmVmbGlzdHBhcmVudDpob3ZlciA+IC5yZWZsaXN0IHsgZGlzcGxheTogYmxvY2s7IH1cclxuLnJlZmxpIHtcclxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gIGZsZXgtd3JhcDogbm93cmFwO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgcGFkZGluZy1yaWdodDogMTBweDsgfVxyXG4ucmVmbGkgLmZpcnN0ZW1wdHl7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbn1cclxuLnJlZmxpIC5ieWluZGV4IHtcclxuICB3aWR0aDogMzVweDtcclxufVxyXG4ucmVmbGlzdHBhcmVudHtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbn1cclxuLnJlZmxpIC5pbmRleCB7XHJcbiAgcGFkZGluZy1sZWZ0OiAzcHg7XHJcbiAgY29sb3I6IG9yYW5nZTtcclxufVxyXG4ucmVmbGkgLnRleHR7XHJcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XHJcbiAgcGFkZGluZy1yaWdodDogNXB4O1xyXG59XHJcbmJ1dHRvbi5yZWZsaS5kZWxldGV7XHJcbiAgcGFkZGluZzogMCA0cHg7XHJcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XHJcbiAgZGlzcGxheTogZmxleDtcclxufVxyXG4ucmVmbGlzdCB7XHJcbiAgbGVmdDogY2FsYygxMDAlKTtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XHJcbiAgYm9yZGVyLWxlZnQ6IG5vbmU7XHJcbiAgcGFkZGluZzogMnB4IDVweDtcclxuICBwYWRkaW5nLXJpZ2h0OiAwO1xyXG4gIHRvcDogMDtcclxufVxyXG51bC5jb250ZXh0TWVudXtcclxuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICBwYWRkaW5nOiAxMHB4O1xyXG4gIHBhZGRpbmctdG9wOiA2cHg7XHJcbiAgcGFkZGluZy1ib3R0b206IDhweDtcclxuICBwYWRkaW5nLXJpZ2h0OiAwO1xyXG59XHJcbmxpOmZpcnN0LWNoaWxke1xyXG4gIHBhZGRpbmctdG9wOiAwO1xyXG59XHJcbmxpLnNlcGFyYXRvcntcclxuICBtYXJnaW4tdG9wOiAycHg7XHJcbiAgaGVpZ2h0OiAxcHg7XHJcbiAgcGFkZGluZzogMDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmF5O1xyXG59XHJcbmxpOmxhc3QtY2hpbGR7XHJcbiAgYm9yZGVyLWJvdHRvbTogbm9uZTtcclxufVxyXG5saTpob3ZlcntcclxuICBwYWRkaW5nLWxlZnQ6IDVweDtcclxuICBwYWRkaW5nLXJpZ2h0OiA1cHg7XHJcbiAgY29sb3I6IGRvZGdlcmJsdWU7XHJcbn1cclxubGl7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgY3Vyc29yOiBkZWZhdWx0O1xyXG4gIGZvbnQtc2l6ZTogMC43NXJlbTtcclxuICBwYWRkaW5nLXRvcDogMnB4O1xyXG4gIHBhZGRpbmctcmlnaHQ6IDEwcHg7XHJcbiAgY29sb3I6ICNiMmIyYmE7XHJcbn1cclxubGk6aG92ZXIgbGl7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBjdXJzb3I6IGRlZmF1bHQ7XHJcbiAgZm9udC1zaXplOiAwLjc1cmVtO1xyXG4gIHBhZGRpbmctdG9wOiAycHg7XHJcbiAgcGFkZGluZy1yaWdodDogMTBweDtcclxuICBjb2xvcjogI2IyYjJiYTsgfVxyXG5cclxubGk6aG92ZXIgbGk6aG92ZXJ7XHJcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XHJcbiAgcGFkZGluZy1yaWdodDogNXB4O1xyXG4gIGNvbG9yOiBkb2RnZXJibHVlO1xyXG59XHJcbiJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  IPackage,\r\n  IVertex,\r\n  Size,\r\n  StyleEditor,\r\n  U,\r\n  M2Class,\r\n  Point,\r\n  ModelPiece,\r\n  IFeature,\r\n  IReference,\r\n  IAttribute,\r\n  IClass, ExtEdge, IEdge, IClassifier, IModel, MReference, GraphPoint, Status\r\n} from '../../common/Joiner';\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport ContextMenuEvent = JQuery.ContextMenuEvent;\r\n\r\n@Component({\r\n  selector: 'app-dam-context-menu',\r\n  templateUrl: './dam-context-menu.component.html',\r\n  styleUrls: ['./dam-context-menu.component.css']\r\n})\r\n\r\nexport class DamContextMenuComponent implements OnInit {\r\n  static contextMenu: DamContextMenuComponent = null;\r\n  private html: HTMLElement = null;\r\n  private $html: JQuery<HTMLElement> = null;\r\n  // private currentlyOpened: HTMLElement = null;\r\n  private clickTarget: HTMLElement | SVGElement;\r\n  private $vertexcontext: JQuery<HTMLUListElement>;\r\n  private $edgecontext: JQuery<HTMLUListElement>;\r\n  private $extedgecontext: JQuery<HTMLUListElement>;\r\n  private vertexcontext: HTMLUListElement;\r\n  private edgecontext: HTMLUListElement;\r\n  private extedgecontext: HTMLUListElement;\r\n  static staticInit() {\r\n    DamContextMenuComponent.contextMenu = new DamContextMenuComponent();\r\n  }\r\n  constructor() {\r\n    this.$html = $('#damContextMenuTemplateContainer');\r\n    this.html = this.$html[0];\r\n    $(document).off('click.hideContextMenu').on('click.hideContextMenu', (e: ClickEvent) => this.checkIfHide(e));\r\n    this.$vertexcontext = this.$html.find('ul.vertex') as JQuery<HTMLUListElement>;\r\n    this.$edgecontext = this.$html.find('ul.edge') as JQuery<HTMLUListElement>;\r\n    this.$extedgecontext = this.$html.find('ul.extedge') as JQuery<HTMLUListElement>;\r\n    this.vertexcontext = this.$vertexcontext[0];\r\n    this.edgecontext = this.$edgecontext[0];\r\n    this.extedgecontext = this.$extedgecontext[0];\r\n    this.$html.on('contextmenu', (e: ContextMenuEvent): boolean => { e.preventDefault(); e.stopPropagation(); return false; });\r\n  }\r\n\r\n  ngOnInit() { }\r\n\r\n  show(location: Point, classSelector: string, target: HTMLElement | SVGElement) {\r\n    U.pe(!target, 'target is null.');\r\n    this.clickTarget = target;\r\n    this.html.style.display = 'none'; // if was already displaying, start the scrollDown animation without doing the scrollUp()\r\n    this.$html.slideDown();\r\n    const vertex: IVertex = IVertex.getvertexByHtml(target);\r\n\r\n    let edge: IEdge = IEdge.getByHtml(target);\r\n    let extedge: ExtEdge = null;\r\n    if (edge instanceof ExtEdge) { extedge = edge; edge = null; }\r\n\r\n    console.log('contextmenu target:', this.clickTarget);\r\n\r\n    const templateSize: Size = U.sizeof(this.html);\r\n    // todo:\r\n    const viewPortSize: Size = new Size(0, 0, window.innerWidth, window.innerHeight);\r\n    location.x = Math.max(0, location.x );\r\n    location.y = Math.max(0, location.y );\r\n    location.x = Math.min(viewPortSize.w - (templateSize.w), location.x );\r\n    console.log('vp.w:', viewPortSize.w, ' - t.w:', templateSize.w, ', loc.x', location.x, ', t.size:', templateSize, this.html);\r\n    location.y = Math.min(viewPortSize.h - (templateSize.h), location.y );\r\n    this.html.style.position = 'absolute';\r\n    this.html.style.zIndex = '1000';\r\n    this.html.style.left = '' + location.x + 'px';\r\n    this.html.style.top = '' + location.y + 'px';\r\n    this.extedgecontext.style.display = 'none';\r\n    this.edgecontext.style.display  = 'none';\r\n    this.vertexcontext.style.display = 'none';\r\n    this.edgecontext.style.display = edge ? '' : 'none';\r\n    this.extedgecontext.style.display = extedge ? '' : 'none';\r\n    this.vertexcontext.style.display = vertex ? '' : 'none';\r\n    this.$vertexcontext.find('.Reference').hide();\r\n    this.$vertexcontext.find('.refli.dynamic').remove();\r\n    const mp: ModelPiece = ModelPiece.getLogic(target);\r\n    const model: IModel = mp.getModelRoot();\r\n    if (vertex) {\r\n      if (model.isM1()) {\r\n        this.$vertexcontext.find('.m1hide').hide();\r\n        this.$vertexcontext.find('.m2hide').show(); }\r\n      else {\r\n        this.$vertexcontext.find('.m1hide').show();\r\n        this.$vertexcontext.find('.m2hide').hide(); }\r\n\r\n      if (mp instanceof IClassifier) {\r\n        this.$vertexcontext.find('.Feature').hide();\r\n        this.$vertexcontext.find('.Vertex').show();\r\n      }\r\n      else {\r\n        if (mp instanceof MReference) {\r\n          let i: number;\r\n          const $refli = this.$vertexcontext.find('.refli.template');\r\n          for (i = 0; i < mp.mtarget.length; i++) {\r\n            const target = mp.mtarget[i];\r\n            const li = U.cloneHtml($refli[0], true);\r\n            li.classList.remove('template');\r\n            li.classList.add('dynamic');\r\n            li.dataset.index = '' + i;\r\n            const $li = $(li);\r\n            $li.find('.index').text('' + i);\r\n            $li.find('.text').text(target ? target.printableNameshort() : 'Empty');\r\n            $refli[0].parentNode.appendChild(li);\r\n          }\r\n          this.$vertexcontext.find('.Reference').show(); }\r\n        this.$vertexcontext.find('.Feature').show();\r\n        this.$vertexcontext.find('.Vertex').hide();\r\n      }\r\n      const mr: MReference = mp instanceof MReference ? mp : null;\r\n      const $indexinput = this.$vertexcontext.find('input.byindex');\r\n      const upperbound = mr ? mr.metaParent.upperbound : null;\r\n      if (mr) {\r\n        if (upperbound === -1) $indexinput[0].removeAttribute('max');\r\n        else $indexinput[0].setAttribute('max', '' + upperbound);\r\n      } else $indexinput[0].setAttribute('max', '-999');\r\n    }\r\n    this.addEventListeners(location); // [??? what?] must be done here, per facilità di fare binding usando variabili esterne agli eventi.\r\n\r\n  }\r\n  hide(): void {\r\n    this.$html.slideUp();\r\n  }\r\n\r\n  private addEventListeners(location: Point) {\r\n    const graphLocation: GraphPoint = Status.status.getActiveModel().graph.toGraphCoord(location);\r\n    const html = this.html;\r\n    const $html = $(html);\r\n    const v: IVertex = IVertex.getvertexByHtml(this.clickTarget);\r\n    const m: ModelPiece = ModelPiece.getLogic(this.clickTarget);\r\n    console.log('contextMenu target:', this.clickTarget, 'modelPiece:', m);\r\n    const mr: MReference = m instanceof MReference ? m : null;\r\n    const $indexinput = +$html.find('input.byindex');\r\n    const upperbound = mr ? mr.metaParent.upperbound : null;\r\n    U.pe(!v, 'vertex null:', v);\r\n    $html.find('.refli .firstempty').off('click.setref').on('click.setref', (e: ClickEvent) => {\r\n      let index = mr.getfirstEmptyTarget();\r\n      if (index === -1) { U.pw(true, 'This reference is already filled to his upperbound.'); e.preventDefault(); e.stopPropagation(); return; }\r\n      IVertex.linkVertexMouseDown(null, mr.edges[index], graphLocation);\r\n    });\r\n    $html.find('.refli button.byindex').off('click.setref').on('click.setref', (e: ClickEvent) => {\r\n      let index: number = +$indexinput[0].value;\r\n      if (index < 0 || index >= upperbound) {\r\n        U.pw(true, 'invalid reference index. It must be a value inside the [0,' + upperbound+'] interval.');\r\n        return; }\r\n      IVertex.linkVertexMouseDown(null, mr.edges[index], graphLocation);\r\n    });\r\n    $html.find('li.refli.dynamic').off('click.setref').on('click.setref', (e: ClickEvent) => {\r\n      const index: number = +e.currentTarget.dataset.index;\r\n      console.log('setting reference[' + index + '] = ', mr.mtarget[index], mr);\r\n      const edge = mr.edges[index] ? mr.edges[index] : new IEdge(mr, index, v);\r\n      IVertex.linkVertexMouseDown(null, edge, graphLocation);\r\n    });\r\n    // U.pe(true, $html.find('li.refli.dynamic'), $html);\r\n    $html.find('button.refli.delete').off('click.setref').on('click.setref', (e: ClickEvent) => {\r\n      e.preventDefault(); e.stopPropagation(); // impedisco di nascondere il contextmenù per tanto poco\r\n      const li = e.currentTarget.parentNode;\r\n      const index: number = li.dataset.index;\r\n      U.pe(!index || U.isNumber(index), 'failed to get index.');\r\n      mr.setTarget(index, null);\r\n      $(li).find('.text').text('Empty');\r\n    });\r\n    $html.find('.Vertex.duplicate').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { m.duplicate('_Copy', m.parent); });\r\n    $html.find('.Vertex.delete').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { m.delete(); });\r\n    $html.find('.Vertex.minimize').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { v.minimize(); });\r\n    $html.find('.Vertex.up').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { m.pushDown(); v.pushUp(); }); // must be opposites\r\n    $html.find('.Vertex.down').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { m.pushUp(); v.pushDown(); }); // must be opposites\r\n    $html.find('.Vertex.editStyle').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { U.pw(true, 'deprecato'); /*StyleEditor.editor.show(m);*/ });\r\n\r\n    $html.find('.Feature.autofix').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { alert('autofix conformity: todo.'); });\r\n    $html.find('.Feature.autofixinstances').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { alert('autofix instances: todo.'); });\r\n    $html.find('.Feature.duplicate').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { m.duplicate('_Copy', m.parent); });\r\n    $html.find('.Feature.delete').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { m.delete(); });\r\n    $html.find('.Feature.minimize').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { v.minimize(); });\r\n    $html.find('.Feature.up').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { m.pushUp(); v.refreshGUI(); });\r\n    $html.find('.Feature.down').off('click.ctxMenu').on('click.ctxMenu',\r\n      (e: ClickEvent) => { m.pushDown(); v.refreshGUI(); });\r\n    $html.find('.Feature.link').off('click.ctxMenu').on('click.ctxMenu', (e: ClickEvent) => {\r\n      let index: number = e.currentTarget.dataset.edgeindex;\r\n      let r: IReference | IClass = m as IReference | IClass;\r\n      let edge = r.edges[index];\r\n      if (!edge) new IEdge(r, index, null, null);\r\n      IVertex.linkVertexMouseDown(null, edge, graphLocation); /*StyleEditor.editor.show(m); */});\r\n\r\n  }\r\n  private checkIfHide(e: ClickEvent) {\r\n    const originalTarget: HTMLElement = e.target;\r\n    const cond: boolean = true; // !U.isParentOf(this.html, originalTarget);\r\n    if (cond) { this.hide(); }\r\n  }\r\n}\r\n","export default \".RatioBox{\\r\\n  position: relative;\\r\\n  width: 50%;\\t\\t/* desired width */\\r\\n}\\r\\n.RatioBox:before{\\r\\n  content: \\\"\\\";\\r\\n  display: block;\\r\\n  padding-top: 100%; \\t/* initial ratio of 1:1*/\\r\\n}\\r\\n.RatioContent{\\r\\n  position: absolute;\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n  bottom: 0;\\r\\n  right: 0;\\r\\n}\\r\\n.sidebarClassContainer{\\r\\n  padding-top: 16px;\\r\\n  padding-left: 10px;\\r\\n  padding-right: 5px;\\r\\n}\\r\\n.sidebarNode{\\r\\n  cursor: pointer;\\r\\n  margin-bottom: 10px;\\r\\n}\\r\\n.sidebarNodeName{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  margin: auto;\\r\\n}\\r\\n.modelTab{\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  margin-top: -11px;\\r\\n}\\r\\n.mat-tab-label{\\r\\n  border-top-left-radius: 20px;\\r\\n  border-top-right-radius: 20px;\\r\\n  border: var(--mainBorder);\\r\\n  border-bottom: unset;\\r\\n  opacity: 1 !important;\\r\\n  width: 160px !important;\\r\\n}\\r\\n.mat-tab-label.mat-tab-label-active{\\r\\n  background-color: var(--mainBorderColor);}\\r\\n.mat-tab-label{\\r\\n  background-color: var(--mainBackgroundColor);}\\r\\n.mat-tab-label-container{\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  border-bottom: var(--mainBorder);\\r\\n}\\r\\n/* property bar raws */\\r\\n.propertyTab{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  height: 40px;\\r\\n}\\r\\nh2.rawTitle{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  margin-left: auto;\\r\\n  margin-right: auto;\\r\\n}\\r\\n.rawecore{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  -webkit-box-flex:1;\\r\\n          flex-grow:1;\\r\\n  flex-shrink:1;\\r\\n}\\r\\n/*\\r\\n\\r\\n.tablist{\\r\\n  display: inline-block;\\r\\n  padding: 0px;\\r\\n  margin: 0px;\\r\\n}\\r\\n.tabButton{\\r\\n  cursor: default;\\r\\n  display: inline-block;\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  border: var(--mainBorder);\\r\\n  border-top-left-radius: 10px;\\r\\n  border-top-right-radius: 10px;\\r\\n  padding: 3px 15px;\\r\\n\\r\\n}\\r\\n.tabButton[data-tabselected=\\\"true\\\"]{\\r\\n  background-color: var(--mainBorderColor); }\\r\\n#editorTabContainer{\\r\\n  display: inline-block;\\r\\n  width: 100vw;\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  border-bottom: var(--mainBorder);\\r\\n  top: calc(var(--topbarH));\\r\\n  height: var(--tabH);\\r\\n}*/\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ndWlFbGVtZW50cy9ncmFwaC10YWItaHRtbC9ncmFwaC10YWItaHRtbC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQWtCO0VBQ2xCLFVBQVUsR0FBRyxrQkFBa0I7QUFDakM7QUFDQTtFQUNFLFdBQVc7RUFDWCxjQUFjO0VBQ2QsaUJBQWlCLEdBQUcsd0JBQXdCO0FBQzlDO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCxTQUFTO0VBQ1QsUUFBUTtBQUNWO0FBRUE7RUFDRSxpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsZUFBZTtFQUNmLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0VBQ2IsWUFBWTtBQUNkO0FBQ0E7RUFDRSw0Q0FBNEM7RUFDNUMsaUJBQWlCO0FBQ25CO0FBQ0E7RUFDRSw0QkFBNEI7RUFDNUIsNkJBQTZCO0VBQzdCLHlCQUF5QjtFQUN6QixvQkFBb0I7RUFDcEIscUJBQXFCO0VBQ3JCLHVCQUF1QjtBQUN6QjtBQUNBO0VBQ0Usd0NBQXdDLENBQUM7QUFDM0M7RUFDRSw0Q0FBNEMsQ0FBQztBQUMvQztFQUNFLDRDQUE0QztFQUM1QyxnQ0FBZ0M7QUFDbEM7QUFDQSxzQkFBc0I7QUFDdEI7RUFDRSxvQkFBYTtFQUFiLGFBQWE7RUFDYixZQUFZO0FBQ2Q7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLGlCQUFpQjtFQUNqQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLGtCQUFXO1VBQVgsV0FBVztFQUNYLGFBQWE7QUFDZjtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTBCRSIsImZpbGUiOiJzcmMvZ3VpRWxlbWVudHMvZ3JhcGgtdGFiLWh0bWwvZ3JhcGgtdGFiLWh0bWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5SYXRpb0JveHtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgd2lkdGg6IDUwJTtcdFx0LyogZGVzaXJlZCB3aWR0aCAqL1xyXG59XHJcbi5SYXRpb0JveDpiZWZvcmV7XHJcbiAgY29udGVudDogXCJcIjtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICBwYWRkaW5nLXRvcDogMTAwJTsgXHQvKiBpbml0aWFsIHJhdGlvIG9mIDE6MSovXHJcbn1cclxuLlJhdGlvQ29udGVudHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG4gIGxlZnQ6IDA7XHJcbiAgYm90dG9tOiAwO1xyXG4gIHJpZ2h0OiAwO1xyXG59XHJcblxyXG4uc2lkZWJhckNsYXNzQ29udGFpbmVye1xyXG4gIHBhZGRpbmctdG9wOiAxNnB4O1xyXG4gIHBhZGRpbmctbGVmdDogMTBweDtcclxuICBwYWRkaW5nLXJpZ2h0OiA1cHg7XHJcbn1cclxuLnNpZGViYXJOb2Rle1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG59XHJcbi5zaWRlYmFyTm9kZU5hbWV7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBtYXJnaW46IGF1dG87XHJcbn1cclxuLm1vZGVsVGFie1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW1haW5CYWNrZ3JvdW5kQ29sb3IpO1xyXG4gIG1hcmdpbi10b3A6IC0xMXB4O1xyXG59XHJcbi5tYXQtdGFiLWxhYmVse1xyXG4gIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDIwcHg7XHJcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDIwcHg7XHJcbiAgYm9yZGVyOiB2YXIoLS1tYWluQm9yZGVyKTtcclxuICBib3JkZXItYm90dG9tOiB1bnNldDtcclxuICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7XHJcbiAgd2lkdGg6IDE2MHB4ICFpbXBvcnRhbnQ7XHJcbn1cclxuLm1hdC10YWItbGFiZWwubWF0LXRhYi1sYWJlbC1hY3RpdmV7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbWFpbkJvcmRlckNvbG9yKTt9XHJcbi5tYXQtdGFiLWxhYmVse1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW1haW5CYWNrZ3JvdW5kQ29sb3IpO31cclxuLm1hdC10YWItbGFiZWwtY29udGFpbmVye1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW1haW5CYWNrZ3JvdW5kQ29sb3IpO1xyXG4gIGJvcmRlci1ib3R0b206IHZhcigtLW1haW5Cb3JkZXIpO1xyXG59XHJcbi8qIHByb3BlcnR5IGJhciByYXdzICovXHJcbi5wcm9wZXJ0eVRhYntcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGhlaWdodDogNDBweDtcclxufVxyXG5oMi5yYXdUaXRsZXtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gIG1hcmdpbi1yaWdodDogYXV0bztcclxufVxyXG4ucmF3ZWNvcmV7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWdyb3c6MTtcclxuICBmbGV4LXNocmluazoxO1xyXG59XHJcbi8qXHJcblxyXG4udGFibGlzdHtcclxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgcGFkZGluZzogMHB4O1xyXG4gIG1hcmdpbjogMHB4O1xyXG59XHJcbi50YWJCdXR0b257XHJcbiAgY3Vyc29yOiBkZWZhdWx0O1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tYWluQmFja2dyb3VuZENvbG9yKTtcclxuICBib3JkZXI6IHZhcigtLW1haW5Cb3JkZXIpO1xyXG4gIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDEwcHg7XHJcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDEwcHg7XHJcbiAgcGFkZGluZzogM3B4IDE1cHg7XHJcblxyXG59XHJcbi50YWJCdXR0b25bZGF0YS10YWJzZWxlY3RlZD1cInRydWVcIl17XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbWFpbkJvcmRlckNvbG9yKTsgfVxyXG4jZWRpdG9yVGFiQ29udGFpbmVye1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB3aWR0aDogMTAwdnc7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbWFpbkJhY2tncm91bmRDb2xvcik7XHJcbiAgYm9yZGVyLWJvdHRvbTogdmFyKC0tbWFpbkJvcmRlcik7XHJcbiAgdG9wOiBjYWxjKHZhcigtLXRvcGJhckgpKTtcclxuICBoZWlnaHQ6IHZhcigtLXRhYkgpO1xyXG59Ki9cclxuIl19 */\"","import {Component, OnInit, ViewChild, ViewEncapsulation} from '@angular/core';\r\n// import {MatTab, MatTabChangeEvent, MatTabGroup} from '@angular/material';\r\nimport {U, IModel, Status} from '../../common/Joiner';\r\n\r\n@Component({\r\n  encapsulation: ViewEncapsulation.None,\r\n  selector: 'app-graph-tab-html',\r\n  templateUrl: './graph-tab-html.component.html',\r\n  styleUrls: ['./graph-tab-html.component.css']\r\n})\r\nexport class GraphTabHtmlComponent implements OnInit {\r\n  // static matTabModel: MatTabGroup = null;\r\n // private static timesCanFailDuringInit = 1;\r\n  //private selectedTab = 0;\r\n  // @ViewChild('tabs') tabGroup: MatTabGroup;\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit() {\r\n    // this.selectModelTabOnInit(0);\r\n  }\r\n  /*\r\n    private selectModelTabOnInit(tentativi: number = 0) {\r\n      if (tentativi++ >= 10) { U.pe(true, 'failed to wait for Status initialization'); }\r\n      if (Status.status === null) {\r\n        setTimeout(() => this.selectModelTabOnInit(tentativi), 100);\r\n        return;\r\n      }\r\n      U.pe(!this.tabGroup, 'init fail on mat-tab');\r\n      this.tabGroup.selectedIndex = 1;\r\n      Status.status.modelMatTab = this.tabGroup;\r\n      GraphTabHtmlComponent.matTabModel = this.tabGroup;\r\n      // todo: qua devo ottimizzare un bordello e togliere il \"middle main\", il campo statico è l'unica cosa che funziona, non usare status.\r\n    }\r\n    ngAfterViewInit() {\r\n      console.log('afterViewInit => ', this.tabGroup.selectedIndex); }* /\r\n  doChangeTab() {\r\n    this.selectedTab += 1;\r\n    if (this.selectedTab >= 2) { this.selectedTab = 0; }\r\n  }\r\n  onTabChange(e: MatTabChangeEvent) {\r\n    const model: IModel = Status.status.getActiveModel();\r\n    if (!model && GraphTabHtmlComponent.timesCanFailDuringInit-- > 0) { return; }\r\n    let i;\r\n    // for (i = 0; i < model.childrens.length; i++) { model.childrens[i].refreshGUI(); }\r\n    const classes = model.getAllClasses();\r\n    for (i = 0; i < classes.length; i++) { classes[i].refreshGUI(); }\r\n  }*/\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvZ3VpRWxlbWVudHMvaXNpZGViYXIvaXNpZGViYXIuY29tcG9uZW50LmNzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  IModel,\r\n  U,\r\n  IPackage,\r\n  MetaModel,\r\n  ModelPiece,\r\n  Status,\r\n  Dictionary,\r\n  M2Class,\r\n  MClass,\r\n  MPackage,\r\n  IClass,\r\n  M3Class,\r\n  M3Package, IGraph, IClassifier, EEnum\r\n} from '../../common/Joiner';\r\nimport ClickEvent = JQuery.ClickEvent;\r\n\r\n\r\n@Component({\r\n  selector: 'app-isidebar',\r\n  templateUrl: './isidebar.component.html',\r\n  styleUrls: ['./isidebar.component.css']\r\n})\r\nexport class IsidebarComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\nexport class ISidebar {\r\n  // mm: boolean = null;\r\n  model: IModel;\r\n  container: HTMLElement = null;\r\n  packageContainer: HTMLElement = null;\r\n  classContainer: HTMLElement = null;\r\n  // htmls: Dictionary<string /*ModelPiece.fullname*/, HTMLElement | SVGGElement> = null;\r\n  // nodeContainer: HTMLDivElement = null;\r\n  constructor(model: IModel, container: HTMLElement) {\r\n    this.model = model;\r\n    // this.mm = (model instanceof MetaModel);\r\n    if (Status.status.mmm === this.model) { Status.status.mm.sidebar = this; } else  { Status.status.m.sidebar = this; }\r\n    this.container = container;\r\n    this.packageContainer = document.createElement('div');\r\n    this.packageContainer.classList.add('sidebarPackageContainer');\r\n    this.classContainer = document.createElement('div');\r\n    this.classContainer.classList.add('sidebarClassContainer');\r\n    this.container.appendChild(this.packageContainer);\r\n    this.container.appendChild(this.classContainer);\r\n    this.updateAll();\r\n    // this.htmls = this.loadDefaultHtmls();\r\n  }\r\n  /*\r\n    loadDefaultHtmls(): Dictionary<string, HTMLElement | SVGGElement> /*\r\n      console.log('refresh left iSidebar');\r\n      // bug: todo: not refreshing quando cambio il nome di un m2class. però i classSelector si aggiornano.\r\n      this.clear();\r\n      let arr: IClassifier[];\r\n      let i;\r\n      // this.htmls = {};\r\n      /*if (false && false) {\r\n        arr = this.model.childrens;\r\n        for (i = 0; i < arr.length; i++) { this.htmls[arr[i].fullname()] = IPackage.defaultSidebarHtml(); } } * /\r\n      // arr = this.model.getAllClasses();\r\n      // if (this.model.isM3()) Array.prototype.push.apply(arr, this.model.getAllEnums());\r\n      // for (i = 0; i < arr.length; i++) { this.htmls[arr[i].fullname()] = arr[i].getSidebarHtml();  }\r\n      this.updateAll();\r\n      return this.htmls; */\r\n\r\n  clear() {\r\n    U.clear(this.packageContainer);\r\n    U.clear(this.classContainer); }\r\n\r\n\r\n  updateAll() {\r\n    this.clear();\r\n    let i;\r\n    const cla: IClassifier[] = this.model.getAllClasses();\r\n    const enu: IClassifier[] = this.model.isM2() ? [] : this.model.getAllEnums();\r\n    for (i = 0; i < cla.length; i++) { this.updateNode(cla[i], this.classContainer); }\r\n    for (i = 0; i < enu.length; i++) { this.updateNode(enu[i], this.classContainer); }\r\n  }\r\n\r\n  addEventListeners(html: HTMLElement): void {\r\n    const $html = $(html);\r\n    $html.off('click.sidebarNode').on('click.sidebarNode', (e: ClickEvent) => {\r\n      Status.status.getActiveModel().sidebar.sidebarNodeClick(e);\r\n    });\r\n  }\r\n  sidebarNodeClick(e: ClickEvent): void {\r\n    console.log('sidebarNodeClick()', Status.status.getActiveModel() === Status.status.mm, Status.status.getActiveModel());\r\n    if (Status.status.getActiveModel().isMM()) { this.sidebarNodeClick0(e); } else { this.sidebarNodeClick0(e); } }\r\n\r\n  sidebarNodeClick0(e: ClickEvent): void {\r\n    console.log('sidebarNodeClick()');\r\n    let html: HTMLElement | SVGElement = e.currentTarget;\r\n    while (!html.dataset.modelPieceID) { html = html.parentNode as HTMLElement | SVGElement; }\r\n    const metaParent = ModelPiece.getLogic(html);\r\n    U.pe( !metaParent , 'the id does not match any class or package', e);\r\n    const modelOfSidebar: IModel /*m3*/ = metaParent.getModelRoot();\r\n    const modelOfGraph: IModel /*m2*/ = Status.status.getActiveModel();\r\n    const graph: IGraph = modelOfGraph.graph; /*m2*/\r\n    U.pe(!graph, 'invalid graph of model:', modelOfGraph);\r\n    const pkg: IPackage = modelOfGraph.getDefaultPackage();\r\n    if ( metaParent instanceof IClass /*m3*/) { pkg.addEmptyClass(metaParent); }\r\n    else if ( metaParent instanceof EEnum /*m3*/) { pkg.addEmptyEnum(); }\r\n    else { U.pe(true, 'unxpected class type of metaparent:', metaParent); }\r\n    console.log('addSidebarNodeClick done'); }\r\n\r\n  updateNode(piece: IClassifier, containerr: HTMLElement) {\r\n    const html: HTMLElement = U.replaceVars<HTMLElement>(piece, piece.getSidebarHtml(), true);\r\n    piece.linkToLogic(html);\r\n    this.addEventListeners(html);\r\n    containerr.appendChild(html); }\r\n/*\r\n  fullnameChanged(old: string, neww: string): void {\r\n    if (!this.htmls[old]) { return; }\r\n    this.htmls[neww] = this.htmls[old];\r\n    delete this.htmls[old]; }9*/\r\n}\r\n\r\n","export default \"/************************************************** statici */\\r\\n\\r\\n.template, .MDefaultStyles{\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.tabContent{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  flex-flow: nowrap;/*?*/\\r\\n  /*margin-top: calc( var(--mainBorderWidth) * 2 );*/\\r\\n}\\r\\n\\r\\n/*olds*/\\r\\n\\r\\n#defaultMGraphHtmlVertex, #defaultMSidebarHtmlVertex, replace{\\r\\n  display:none;\\r\\n}\\r\\n\\r\\n.HiddenStructures > *{\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n#mproperty_sidebar, .sidebarShell, .editorShell, .propertyBarContainer{\\r\\n  flex-basis: 0;/* calc(var(--sidebarW));*/\\r\\n  -webkit-box-flex: 1;\\r\\n          flex-grow: 1;\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  /*border-right: var(--mainBorder);*/\\r\\n  width: calc(var(--sidebarW));\\r\\n  /*height: calc(100vh - (var(--topbarH) + var(--tabH)));*/\\r\\n  overflow: hidden;\\r\\n  /*flex-wrap: wrap;\\r\\n  margin-top: 5px;\\r\\n  border-top: var(--mainBorder);*/\\r\\n}\\r\\n\\r\\n.sidebarShell{ border-right: var(--mainBorder); }\\r\\n\\r\\n.propertyBarContainer{ border-left: var(--mainBorder); }\\r\\n\\r\\n.editorShell{\\r\\n  -webkit-box-flex: 3;\\r\\n          flex-grow: 3;\\r\\n}\\r\\n\\r\\n/*#sidebar, */\\r\\n\\r\\n#metamodel_sidebar, #model_sidebar, .property_sidebar{\\r\\n                -webkit-box-orient: horizontal;\\r\\n                -webkit-box-direction: normal;\\r\\n                        flex-direction: row;\\r\\n                flex-wrap: wrap;\\r\\n                -webkit-box-pack: justify;\\r\\n                        justify-content: space-between;/*si attiva solo se entra tutto in una riga e avanza pure spazio*/\\r\\n                -webkit-box-align: start;\\r\\n                        align-items: flex-start;\\r\\n                align-content: flex-start;/*accatasta tutto verticalmente verso la cima invece di spaziarli.*/\\r\\n                padding-right:5px;\\r\\n              }\\r\\n\\r\\n#msidebar>*:first-child, #metamodel_sidebar>*:first-child, #model_sidebar>*:first-child{\\r\\n  background-color: var(--mainBorderColor);\\r\\n  width: var(--mainBorderWidth);\\r\\n  right: 0px;\\r\\n}\\r\\n\\r\\n#msidebar>*:not(:first-child), #metamodel_sidebar>*:not(:first-child), #model_sidebar>*:not(:first-child){\\r\\n  padding: 2px;\\r\\n  max-width: 200px;\\r\\n  min-width: 75px;\\r\\n  flex-basis: 75px;/*should === min-width per mantenere l'effetto.*/\\r\\n  -webkit-box-flex: 1;\\r\\n          flex-grow: 1;\\r\\n  flex-shrink: 1;\\r\\n}\\r\\n\\r\\n.sidebarVertex:hover{\\r\\n  background-color: var(--mainBorderColor);\\r\\n  border: 2px solid var(--secondaryBorderColor);\\r\\n  padding: 0px;\\r\\n}\\r\\n\\r\\n.sidebarVertex{\\r\\n  min-width: 50px;\\r\\n  min-height: 50px;\\r\\n  flex-basis:50px;\\r\\n}\\r\\n\\r\\n@media all and (min-width: 200px) {\\r\\n  .sidebarVertex {\\r\\n    -webkit-box-flex: 0;\\r\\n            flex-grow: 0; }\\r\\n}\\r\\n\\r\\n#metamodel_editor, #model_editor{\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\n.rawContainer{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n          flex-flow: column;\\r\\n  height: 100%;\\r\\n}\\r\\n\\r\\nh2.rawTitle{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  margin-left: auto;\\r\\n  margin-right: auto;\\r\\n}\\r\\n\\r\\n.rawecore{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  -webkit-box-flex:1;\\r\\n          flex-grow:1;\\r\\n  flex-shrink:1;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ndWlFbGVtZW50cy9tLWdyYXBoLWh0bWwvbS1ncmFwaC1odG1sLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsNkRBQTZEOztBQUU3RDtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLGlCQUFpQixDQUFDLElBQUk7RUFDdEIsa0RBQWtEO0FBQ3BEOztBQUVBLE9BQU87O0FBR1A7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxhQUFhO0FBQ2Y7O0FBRUE7RUFDRSxhQUFhLENBQUMsMEJBQTBCO0VBQ3hDLG1CQUFZO1VBQVosWUFBWTtFQUNaLDRDQUE0QztFQUM1QyxtQ0FBbUM7RUFDbkMsNEJBQTRCO0VBQzVCLHdEQUF3RDtFQUN4RCxnQkFBZ0I7RUFDaEI7O2lDQUUrQjtBQUNqQzs7QUFDQSxlQUFlLCtCQUErQixFQUFFOztBQUNoRCx1QkFBdUIsOEJBQThCLEVBQUU7O0FBQ3ZEO0VBQ0UsbUJBQVk7VUFBWixZQUFZO0FBQ2Q7O0FBQ0EsYUFBYTs7QUFBQztnQkFDRSw4QkFBbUI7Z0JBQW5CLDZCQUFtQjt3QkFBbkIsbUJBQW1CO2dCQUNuQixlQUFlO2dCQUNmLHlCQUE4Qjt3QkFBOUIsOEJBQThCLENBQUMsaUVBQWlFO2dCQUNoRyx3QkFBdUI7d0JBQXZCLHVCQUF1QjtnQkFDdkIseUJBQXlCLENBQUMsbUVBQW1FO2dCQUM3RixpQkFBaUI7Y0FDbkI7O0FBRWQ7RUFDRSx3Q0FBd0M7RUFDeEMsNkJBQTZCO0VBQzdCLFVBQVU7QUFDWjs7QUFDQTtFQUNFLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsZUFBZTtFQUNmLGdCQUFnQixDQUFDLGdEQUFnRDtFQUNqRSxtQkFBWTtVQUFaLFlBQVk7RUFDWixjQUFjO0FBQ2hCOztBQUNBO0VBQ0Usd0NBQXdDO0VBQ3hDLDZDQUE2QztFQUM3QyxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7O0FBRUE7RUFDRTtJQUNFLG1CQUFZO1lBQVosWUFBWSxFQUFFO0FBQ2xCOztBQUNBO0VBQ0UsV0FBVztFQUNYLFlBQVk7QUFDZDs7QUFHQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLDRCQUFpQjtFQUFqQiw2QkFBaUI7VUFBakIsaUJBQWlCO0VBQ2pCLFlBQVk7QUFDZDs7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLGlCQUFpQjtFQUNqQixrQkFBa0I7QUFDcEI7O0FBQ0E7RUFDRSxvQkFBYTtFQUFiLGFBQWE7RUFDYixrQkFBVztVQUFYLFdBQVc7RUFDWCxhQUFhO0FBQ2YiLCJmaWxlIjoic3JjL2d1aUVsZW1lbnRzL20tZ3JhcGgtaHRtbC9tLWdyYXBoLWh0bWwuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBzdGF0aWNpICovXHJcblxyXG4udGVtcGxhdGUsIC5NRGVmYXVsdFN0eWxlc3tcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4udGFiQ29udGVudHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZmxvdzogbm93cmFwOy8qPyovXHJcbiAgLyptYXJnaW4tdG9wOiBjYWxjKCB2YXIoLS1tYWluQm9yZGVyV2lkdGgpICogMiApOyovXHJcbn1cclxuXHJcbi8qb2xkcyovXHJcblxyXG5cclxuI2RlZmF1bHRNR3JhcGhIdG1sVmVydGV4LCAjZGVmYXVsdE1TaWRlYmFySHRtbFZlcnRleCwgcmVwbGFjZXtcclxuICBkaXNwbGF5Om5vbmU7XHJcbn1cclxuXHJcbi5IaWRkZW5TdHJ1Y3R1cmVzID4gKntcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcblxyXG4jbXByb3BlcnR5X3NpZGViYXIsIC5zaWRlYmFyU2hlbGwsIC5lZGl0b3JTaGVsbCwgLnByb3BlcnR5QmFyQ29udGFpbmVye1xyXG4gIGZsZXgtYmFzaXM6IDA7LyogY2FsYyh2YXIoLS1zaWRlYmFyVykpOyovXHJcbiAgZmxleC1ncm93OiAxO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW1haW5CYWNrZ3JvdW5kQ29sb3IpO1xyXG4gIC8qYm9yZGVyLXJpZ2h0OiB2YXIoLS1tYWluQm9yZGVyKTsqL1xyXG4gIHdpZHRoOiBjYWxjKHZhcigtLXNpZGViYXJXKSk7XHJcbiAgLypoZWlnaHQ6IGNhbGMoMTAwdmggLSAodmFyKC0tdG9wYmFySCkgKyB2YXIoLS10YWJIKSkpOyovXHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAvKmZsZXgtd3JhcDogd3JhcDtcclxuICBtYXJnaW4tdG9wOiA1cHg7XHJcbiAgYm9yZGVyLXRvcDogdmFyKC0tbWFpbkJvcmRlcik7Ki9cclxufVxyXG4uc2lkZWJhclNoZWxseyBib3JkZXItcmlnaHQ6IHZhcigtLW1haW5Cb3JkZXIpOyB9XHJcbi5wcm9wZXJ0eUJhckNvbnRhaW5lcnsgYm9yZGVyLWxlZnQ6IHZhcigtLW1haW5Cb3JkZXIpOyB9XHJcbi5lZGl0b3JTaGVsbHtcclxuICBmbGV4LWdyb3c6IDM7XHJcbn1cclxuLyojc2lkZWJhciwgKi8jbWV0YW1vZGVsX3NpZGViYXIsICNtb2RlbF9zaWRlYmFyLCAucHJvcGVydHlfc2lkZWJhcntcclxuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICAgICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XHJcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47LypzaSBhdHRpdmEgc29sbyBzZSBlbnRyYSB0dXR0byBpbiB1bmEgcmlnYSBlIGF2YW56YSBwdXJlIHNwYXppbyovXHJcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcclxuICAgICAgICAgICAgICAgIGFsaWduLWNvbnRlbnQ6IGZsZXgtc3RhcnQ7LyphY2NhdGFzdGEgdHV0dG8gdmVydGljYWxtZW50ZSB2ZXJzbyBsYSBjaW1hIGludmVjZSBkaSBzcGF6aWFybGkuKi9cclxuICAgICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6NXB4O1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiNtc2lkZWJhcj4qOmZpcnN0LWNoaWxkLCAjbWV0YW1vZGVsX3NpZGViYXI+KjpmaXJzdC1jaGlsZCwgI21vZGVsX3NpZGViYXI+KjpmaXJzdC1jaGlsZHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tYWluQm9yZGVyQ29sb3IpO1xyXG4gIHdpZHRoOiB2YXIoLS1tYWluQm9yZGVyV2lkdGgpO1xyXG4gIHJpZ2h0OiAwcHg7XHJcbn1cclxuI21zaWRlYmFyPio6bm90KDpmaXJzdC1jaGlsZCksICNtZXRhbW9kZWxfc2lkZWJhcj4qOm5vdCg6Zmlyc3QtY2hpbGQpLCAjbW9kZWxfc2lkZWJhcj4qOm5vdCg6Zmlyc3QtY2hpbGQpe1xyXG4gIHBhZGRpbmc6IDJweDtcclxuICBtYXgtd2lkdGg6IDIwMHB4O1xyXG4gIG1pbi13aWR0aDogNzVweDtcclxuICBmbGV4LWJhc2lzOiA3NXB4Oy8qc2hvdWxkID09PSBtaW4td2lkdGggcGVyIG1hbnRlbmVyZSBsJ2VmZmV0dG8uKi9cclxuICBmbGV4LWdyb3c6IDE7XHJcbiAgZmxleC1zaHJpbms6IDE7XHJcbn1cclxuLnNpZGViYXJWZXJ0ZXg6aG92ZXJ7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbWFpbkJvcmRlckNvbG9yKTtcclxuICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1zZWNvbmRhcnlCb3JkZXJDb2xvcik7XHJcbiAgcGFkZGluZzogMHB4O1xyXG59XHJcblxyXG4uc2lkZWJhclZlcnRleHtcclxuICBtaW4td2lkdGg6IDUwcHg7XHJcbiAgbWluLWhlaWdodDogNTBweDtcclxuICBmbGV4LWJhc2lzOjUwcHg7XHJcbn1cclxuXHJcbkBtZWRpYSBhbGwgYW5kIChtaW4td2lkdGg6IDIwMHB4KSB7XHJcbiAgLnNpZGViYXJWZXJ0ZXgge1xyXG4gICAgZmxleC1ncm93OiAwOyB9XHJcbn1cclxuI21ldGFtb2RlbF9lZGl0b3IsICNtb2RlbF9lZGl0b3J7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG5cclxuLnJhd0NvbnRhaW5lcntcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZmxvdzogY29sdW1uO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5oMi5yYXdUaXRsZXtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xyXG4gIG1hcmdpbi1yaWdodDogYXV0bztcclxufVxyXG4ucmF3ZWNvcmV7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWdyb3c6MTtcclxuICBmbGV4LXNocmluazoxO1xyXG59XHJcbiJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-m-graph-html',\r\n  templateUrl: './m-graph-html.component.html',\r\n  styleUrls: ['./m-graph-html.component.css']\r\n})\r\nexport class MGraphHtmlComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import {IEdge, GraphPoint, IVertex, Dictionary, EdgePointStyle, EdgeStyle, IGraph, Point, Status, U} from '../../../common/Joiner';\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport MouseUpEvent = JQuery.MouseUpEvent;\r\nimport MouseMoveEvent = JQuery.MouseMoveEvent;\r\nimport MouseDownEvent = JQuery.MouseDownEvent;\r\nimport MouseLeaveEvent = JQuery.MouseLeaveEvent;\r\nimport MouseEnterEvent = JQuery.MouseEnterEvent;\r\nimport MouseOverEvent = JQuery.MouseOverEvent;\r\nimport ContextMenuEvent = JQuery.ContextMenuEvent;\r\n\r\nexport interface IEdgePoint {\r\n  edge: IEdge;\r\n  // pos: GraphPoint;\r\n  // html: HTMLElement | SVGCircleElement;\r\n  getEndPoint(): GraphPoint;\r\n  getStartPoint(): GraphPoint;\r\n  moveTo(pos: GraphPoint, refresh: boolean, centra: boolean);\r\n  show(): void;\r\n  hide(): void;\r\n}\r\nexport class EdgePointFittizio {\r\n  pos: GraphPoint = null;\r\n  realPoint: EdgePoint = null;\r\n  constructor(pos: GraphPoint, realPoint: EdgePoint = null) {\r\n    this.pos = pos;\r\n    this.realPoint = realPoint;\r\n  }\r\n  link(realPoint: EdgePoint) { this.realPoint = realPoint; }\r\n\r\n  getPreviousRealPt(fittizi: EdgePointFittizio[], includeMySelf = true) {\r\n    let index = fittizi.indexOf(this);\r\n    U.pe(index < 0, 'the element must be inside the array. this:', this, ', arr:', fittizi, ', index:', index);\r\n    index += (includeMySelf ? 1 : 0);\r\n    while (--index >= 0) {\r\n      if (fittizi[index].realPoint) { return fittizi[index].realPoint; }\r\n    }\r\n    return null;\r\n  }\r\n  getNextRealPt(fittizi: EdgePointFittizio[], includeMySelf = true, debug: boolean = false) {\r\n    let index = fittizi.indexOf(this);\r\n    U.pe(index < 0, 'the element must be inside the array');\r\n    index -= (includeMySelf ? 1 : 0);\r\n    while (++index < fittizi.length) {\r\n      U.pif(debug, index + '/' + fittizi.length + ']', fittizi[index], 'fittiziAll:', fittizi);\r\n      if (fittizi[index].realPoint) { return fittizi[index].realPoint; } }\r\n    return null;\r\n  }\r\n}\r\nexport class EdgePoint implements IEdgePoint {\r\n  static ID = 0;\r\n  static all: Dictionary = {};\r\n  id: number = null;\r\n  pos: GraphPoint = null;\r\n  html: SVGCircleElement = null;\r\n  edge: IEdge = null;\r\n  endPointOfVertex: IVertex = null;\r\n  isSelected: boolean = null;\r\n  isHighlighted: boolean = null;\r\n\r\n  constructor(e: IEdge, pos: GraphPoint, endPointOfVertex: IVertex = null) {\r\n    this.edge = e;\r\n    this.endPointOfVertex = endPointOfVertex;\r\n    // edge = null is ok, è il cursorfollower statico.\r\n    U.pe(this.edge === undefined, 'edge === undefined on EdgePoint constructor.');\r\n    this.html = U.newSvg<SVGCircleElement>('circle');\r\n    this.id = EdgePoint.ID++;\r\n    if (e) { e.logic.linkToLogic(this.html); }\r\n    EdgePoint.all[this.id] = this;\r\n    this.html.dataset.EdgePointID = '' + this.id;\r\n    this.pos = new GraphPoint(0, 0);\r\n    this.isSelected = false;\r\n    this.isHighlighted = false;\r\n    this.refreshGUI();\r\n    this.moveTo(pos, false);\r\n    this.addEventListeners(); }\r\n\r\n  static getFromHtml(html: HTMLElement | SVGElement): EdgePoint { return EdgePoint.all[html.dataset.EdgePointID]; }\r\n\r\n  follow(e: MouseDownEvent = null): void {\r\n    CursorFollowerEP.activeEP = this;\r\n    const edge: IEdge = this.edge;\r\n    if (this as EdgePoint !== CursorFollowerEP.cursorFollower && this === edge.endNode) {\r\n      CursorFollowerEP.activeEP = null;\r\n      IVertex.linkVertexMouseDown(e, edge);\r\n    }\r\n  }\r\n\r\n  unfollow(): void {\r\n    console.log('un-follow');\r\n    CursorFollowerEP.activeEP = null; }\r\n\r\n  addEventListeners(): void {\r\n    const $html = $(this.html);\r\n    // $html.off('click.ep').on('click.ep', (e: ClickEvent) => { EdgePoint.getFromHtml(e.currentTarget).onClick(e); });\r\n    $html.off('mousedown.ep').on('mousedown.ep', (e: MouseDownEvent) => { EdgePoint.getFromHtml(e.currentTarget).onMouseDown(e); });\r\n    // $html.off('mousemove.ep').on('mousemove.ep', (e: MouseMoveEvent) => { EdgePoint.getFromHtml(e.currentTarget).onMouseMove(e); });\r\n    $html.off('mouseup.ep').on('mouseup.ep', (e: MouseUpEvent) => { EdgePoint.getFromHtml(e.currentTarget).onMouseUp(e); });\r\n    $html.off('mouseenter.ep').on('mouseenter.ep', (e: MouseEnterEvent) => { EdgePoint.getFromHtml(e.currentTarget).onMouseEnter(e); });\r\n    $html.off('mouseleave.ep').on('mouseleave.ep', (ee: MouseLeaveEvent) => { EdgePoint.getFromHtml(ee.currentTarget).onMouseLeave(ee); });\r\n    // $html.off('mouseover.ep').on('mouseover.ep', (e: MouseLeaveEvent) => { EdgePoint.getFromHtml(e.currentTarget).onMouseOver(e); });\r\n    $html.off('contextmenu.deleteEdgePoint').on('contextmenu.deleteEdgePoint',\r\n      (e: ContextMenuEvent) => { this.detach(); return false; });\r\n  }\r\n\r\n  isAttached(): boolean { return this.edge !== null; }\r\n\r\n  detach(refreshGUI: boolean = true): void {\r\n    if (!this.isAttached()) { return; }\r\n    U.arrayRemoveAll(this.edge.midNodes, this);\r\n    if (this.html && this.html.parentNode) { this.html.parentNode.removeChild(this.html); }\r\n    if (refreshGUI) { this.edge.refreshGui(); }\r\n    this.edge = null;\r\n    this.unfollow(); }\r\n\r\n  onClick(e: ClickEvent): void { }\r\n\r\n  onMouseEnter(e: MouseEnterEvent): void {\r\n    // console.log('enter');\r\n    this.refreshGUI(null, true);  }\r\n\r\n  onMouseLeave(e: MouseLeaveEvent): void {\r\n    // console.log('leave');\r\n    // if (this.isMoving) { this.onMouseMove(e); }\r\n    this.refreshGUI(null, false); }\r\n\r\n  onMouseDown(e: MouseDownEvent): void {\r\n    this.refreshGUI(true);\r\n    // console.log('leave');\r\n    this.follow(e);\r\n    e.preventDefault(); e.stopPropagation(); }\r\n  // onMouseOver(e: MouseOverEvent): void { e.preventDefault(); e.stopPropagation(); }\r\n  /* onMouseMoveOld(e: MouseMoveEvent | MouseLeaveEvent): void {\r\n    if (!this.isMoving) { return; }\r\n    const screenPt: Point = new Point(e.pageX, e.pageY);\r\n    const graphPt: GraphPoint = this.edge.owner.toGraphCoord(screenPt);\r\n    this.moveTo(graphPt, true); }*/\r\n\r\n  onMouseUp(e: MouseUpEvent): void {\r\n    this.refreshGUI(false);\r\n    e.stopPropagation();\r\n    // console.log('up');\r\n    this.unfollow(); }\r\n\r\n  getCenter(fitHorizontal: boolean = false, fitVertical: boolean = false): GraphPoint {\r\n    return this.edge.owner.fitToGrid(this.pos, true, false, fitHorizontal, fitVertical); }\r\n  getStartPoint(fitHorizontal: boolean = true, fitVertical: boolean = true): GraphPoint {\r\n    return this.getCenter(fitHorizontal, fitVertical); }\r\n  getEndPoint(fitHorizontal: boolean = true, fitVertical: boolean = true): GraphPoint {\r\n    return this.getCenter(fitHorizontal, fitVertical); }\r\n\r\n  moveTo(pos: GraphPoint, refresh: boolean, centra: boolean = true) {\r\n    if (!this.edge) { return; }\r\n    const r: number = centra ? 0 : (isNaN(-this.html.r) ? 0 : -this.html.r);\r\n    U.pe(!this.pos || this.pos.x === null || this.pos.x === undefined, 'this.pos.x undefined', this.pos);\r\n    U.pe(!pos || pos.x === null || pos.x === undefined, 'pos.x undefined', pos);\r\n    this.pos.x = (pos.x + r);\r\n    this.pos.y = (pos.y + r);\r\n    this.html.setAttribute('cx', '' + this.pos.x);\r\n    this.html.setAttribute('cy', '' + this.pos.y);\r\n    this.show();\r\n    if (refresh) { this.edge.refreshGui(); } }\r\n\r\n  show(debug: boolean = false): void {\r\n    const oldParent: HTMLElement | SVGElement = this.html.parentNode as HTMLElement | SVGElement;\r\n    if (oldParent) { oldParent.removeChild(this.html); }\r\n    this.edge.shell.appendChild(this.html);\r\n    this.html.style.display = 'block';\r\n    this.refreshGUI(null, null, debug); }\r\n\r\n  hide(): void { this.html.style.display = 'none'; }\r\n\r\n  public refreshGUI(select: boolean = null, highlight: boolean = null, debug: boolean = false): void {\r\n    if (select !== null) { this.isSelected = select; }\r\n    if (highlight !== null) { this.isHighlighted = highlight; }\r\n    if (this.isSelected) { this.styleSelected(); } else\r\n    if (this.isHighlighted) { this.styleHighlight(); } else { this.styleCommon(debug); } }\r\n\r\n  private styleCommon(debug: boolean = false): void {\r\n    if (!this.isAttached()) { U.pw(debug, 'not attached', this); return; }\r\n    const eps: EdgePointStyle = this.edge.logic.edgeStyleCommon.edgePointStyle;\r\n    if (debug) { this.html.setAttributeNS(null, 'debug', 'styleCommon'); }\r\n    this.html.setAttributeNS(null, 'r', '' + eps.radius);\r\n    this.html.setAttributeNS(null, 'stroke-width', '' + eps.strokeWidth);\r\n    this.html.setAttributeNS(null, 'stroke', eps.strokeColor);\r\n    this.html.setAttributeNS(null, 'fill', eps.fillColor); }\r\n\r\n  private styleHighlight(): void {\r\n    if (!this.isAttached()) { return; }\r\n    const eps: EdgePointStyle = this.edge.logic.edgeStyleHighlight.edgePointStyle;\r\n    this.html.setAttributeNS(null, 'r', '' + eps.radius);\r\n    this.html.setAttributeNS(null, 'stroke-width', '' + eps.strokeWidth);\r\n    this.html.setAttributeNS(null, 'stroke', eps.strokeColor);\r\n    this.html.setAttributeNS(null, 'fill', eps.fillColor); }\r\n\r\n  private styleSelected(): void {\r\n    if (!this.isAttached()) { return; }\r\n    const eps: EdgePointStyle = this.edge.logic.edgeStyleSelected.edgePointStyle;\r\n    this.html.setAttributeNS(null, 'r', '' + eps.radius);\r\n    this.html.setAttributeNS(null, 'stroke-width', '' + eps.strokeWidth);\r\n    this.html.setAttributeNS(null, 'stroke', eps.strokeColor);\r\n    this.html.setAttributeNS(null, 'fill', eps.fillColor); }\r\n}\r\n\r\nexport class CursorFollowerEP extends EdgePoint {\r\n  static cursorFollower: CursorFollowerEP = null;\r\n  static activeEP: EdgePoint = null;\r\n  private graph: IGraph;\r\n\r\n  public static get(): CursorFollowerEP {\r\n    if (!this.cursorFollower) { this.cursorFollower = new CursorFollowerEP(); }\r\n    return this.cursorFollower; }\r\n\r\n  constructor() {\r\n    super(null, new GraphPoint(0, 0));\r\n    this.endPointOfVertex = undefined;\r\n    this.html.setAttributeNS(null, 'fill', 'purple');\r\n    this.html.setAttributeNS(null, 'stroke', 'purple');\r\n    this.html.setAttributeNS(null, 'r', '5');\r\n    U.eventiDaAggiungereAlBody('cursor follower');\r\n    const $b = $(document.body);\r\n    $b.off('mousemove.cursorFollowerEdgePoint_Move').on('mousemove.cursorFollowerEdgePoint_Move',\r\n      (e: MouseMoveEvent) => {\r\n        const debug: boolean = false && false;\r\n        U.pif(debug, 'mousemove.cursorFollowerEdgePoint_Move()');\r\n        const f: EdgePoint = CursorFollowerEP.activeEP;\r\n        if (!f || !f.isAttached()) { return; }\r\n        const graph = Status.status.getActiveModel().graph;\r\n        f.moveTo(graph.toGraphCoord(new Point(e.pageX, e.pageY)), true);\r\n        f.edge.refreshGui(true);\r\n        /// here bug edge\r\n      });\r\n    $b.off('click.cursorFollowerEdgePoint_Detach').on('click.cursorFollowerEdgePoint_Detach',\r\n      (e: ClickEvent) => {\r\n        const f: CursorFollowerEP = CursorFollowerEP.get();\r\n        f.detach(); });\r\n    this.addEventListeners();\r\n  }\r\n/*\r\n  cursorFollowerClick(e: ClickEvent) {\r\n    const coord: GraphPoint = this.getCenter();\r\n    this.detach();\r\n    const useless = new EdgePoint(this.edge, coord);\r\n    this.attach(this.edge, null);\r\n  }*/\r\n  onMouseUp(e: JQuery.MouseUpEvent): void { if (this.isAttached()) { this.edge.onMouseUp(e); }}\r\n\r\n  moveTo(pos: GraphPoint, refresh: boolean, centra: boolean = true) {\r\n    super.moveTo(pos, refresh, centra);\r\n    if (!this.isAttached()) { return; }\r\n    if (refresh) { this.edge.refreshGui(); }\r\n  }\r\n\r\n  isAttached(): boolean { return this.edge !== null; }\r\n\r\n  attach(edge: IEdge, position: GraphPoint, index: number = Number.POSITIVE_INFINITY): void {\r\n    this.detach();\r\n    edge.logic.linkToLogic(this.html);\r\n    this.graph = edge.owner;\r\n    if (index < 0) { index = -1; }\r\n    if (index === null || index === Number.POSITIVE_INFINITY) { index = this.edge.midNodes.length; }\r\n    // console.log('CursorFollower.Attach()');\r\n    this.edge = edge;\r\n    this.html.dataset.modelPieceID = '' + this.edge.logic.id;\r\n    U.insertAt(this.edge.midNodes, index + 1, this);\r\n    if (position) { this.moveTo(position, false); }\r\n    this.graph.container.appendChild(this.html);\r\n    this.follow();\r\n    this.refreshGUI(true); }\r\n\r\n  addEventListeners() {\r\n    super.addEventListeners();\r\n    /*$(this.html).off('click.makeEdgePoint').on('click.makeEdgePoint',\r\n      (e: ClickEvent) => { CursorFollowerEP.cursorFollower.cursorFollowerClick(e); });*/\r\n    $(this.html).off('mouseup.makeEdgePoint').on('mouseup.makeEdgePoint',\r\n      (e: MouseUpEvent) => { CursorFollowerEP.get().onMouseUp(e); });\r\n  }\r\n}\r\n","import {IClass, IEdge, IReference, IVertex, M2Class} from '../../../common/Joiner';\r\n\r\nexport class ExtEdge extends IEdge{\r\n  logic: M2Class;\r\n\r\n  constructor(logic: IClass | IReference, startv: IVertex = null, end: IVertex = null) {\r\n    super(logic, null, startv, end);\r\n  }\r\n  canBeLinkedTo(target0: IClass): boolean {\r\n    const target: M2Class = target0 as M2Class;\r\n    return target && this.logic !== target && target.extends.indexOf(this.logic) === -1;\r\n  }\r\n}\r\n","import {IEdge, GraphPoint, IVertex, U, EdgeModes} from '../../../common/Joiner';\r\n\r\nexport class EdgePointStyle {\r\n  radius: number = null;\r\n  strokeWidth: number = null;\r\n  strokeColor: string = null;\r\n  fillColor: string = null;\r\n  constructor(radius: number = null, strokeWidth: number = null, strokeColor: string = null, fillColor: string = null) {\r\n    this.radius = radius;\r\n    this.strokeColor = strokeColor;\r\n    this.strokeWidth = strokeWidth;\r\n    this.fillColor = fillColor; }\r\n}\r\nexport class EdgeHeadStyle {\r\n  width: number;\r\n  height: number;\r\n  fill: string;\r\n  stroke: string;\r\n  constructor (width: number, height: number, fill: string, stroke: string) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.fill = fill;\r\n    this.stroke = stroke; }\r\n\r\n  clone(): EdgeHeadStyle { return new EdgeHeadStyle(this.width, this.height, this.fill, this.stroke); }\r\n}\r\nexport class EdgeStyle {\r\n  style: EdgeModes = null;\r\n  width: number = null;\r\n  color: string = null;\r\n  edgePointStyle: EdgePointStyle;\r\n  edgeHeadStyle: EdgeHeadStyle;\r\n\r\n  constructor(style: EdgeModes = EdgeModes.angular23Auto, width: number = 2, color: string = '#ffffff',\r\n              edgePointStyle: EdgePointStyle, edgeHeadStyle: EdgeHeadStyle) {\r\n    this.edgePointStyle = edgePointStyle;\r\n    this.edgeHeadStyle = edgeHeadStyle;\r\n    this.style = style;\r\n    this.width = width;\r\n    this.color = color; }\r\n\r\n  clone(): EdgeStyle { return new EdgeStyle(this.style, this.width, this.color, this.edgePointStyle, this.edgeHeadStyle); }\r\n}\r\n","import {\r\n  Json,\r\n  U,\r\n  IVertex, EdgePoint, IField,\r\n  IPackage,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  IModel,\r\n  Status, IReference, CursorFollowerEP, EdgePointFittizio,\r\n  Point, GraphPoint, Size, GraphSize, EdgeStyle, PropertyBarr, Dictionary, IClass, ExtEdge\r\n} from '../../../common/Joiner';\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport MouseDownEvent = JQuery.MouseDownEvent;\r\nimport MouseUpEvent = JQuery.MouseUpEvent;\r\nimport MouseMoveEvent = JQuery.MouseMoveEvent;\r\nimport MouseOverEvent = JQuery.MouseOverEvent;\r\nimport MouseEnterEvent = JQuery.MouseEnterEvent;\r\nimport MouseLeaveEvent = JQuery.MouseLeaveEvent;\r\nimport {EdgeHeadStyle} from './edgeStyle';\r\n\r\nenum EdgeDecoratorType {\r\n  containment = 'containment',\r\n  generalization = 'generalization',\r\n  simple = 'simple' }\r\n\r\nexport enum EdgeModes {\r\n  straight = 'straight',\r\n  angular2 = 'angular con 2 segmenti.',\r\n  angular3 = 'angular con 3 segmenti (un break centrale)',\r\n  angular23Auto = 'angular 2 o angular 3 automatico' }\r\n\r\n  export class IEdge {\r\n  static selecteds: IEdge[] = [];\r\n  static all: IEdge[] = null;\r\n  private static shadowWidthIncrease = 7;\r\n  static edgeChanging: IEdge;\r\n  static edgeChangingStopTime: number = Date.now();\r\n  static idToEdge: Dictionary<number, IEdge> = {};\r\n  static edgeCount: number = 0 || 0;\r\n  private headtype: EdgeDecoratorType = EdgeDecoratorType.simple;\r\n  private tailtype: EdgeDecoratorType = EdgeDecoratorType.simple;\r\n  // private static tempMidPoint_Clicked: GraphPoint = null;\r\n  // private static tempMidPoint_ModelPiece: ModelPiece = null;\r\n  owner: IGraph = null;\r\n  start: IVertex = null;\r\n  end: IVertex = null;\r\n  midNodes: EdgePoint[] = null;\r\n  startNode: EdgePoint;\r\n  endNode: EdgePoint;\r\n  shell: SVGGElement = null;\r\n  html: SVGPathElement = null;\r\n  shadow: SVGPathElement = null;\r\n  logic: IClass | IReference = null;\r\n  isSelected: boolean = null;\r\n  isHighlighted: boolean = null;\r\n  // mode: EdgeModes = null;\r\n  edgeHead: SVGSVGElement = null;\r\n  edgeTail: SVGSVGElement = null;\r\n  headShell: SVGGElement = null;\r\n  tailShell: SVGGElement = null;\r\n  tmpEnd: GraphPoint = null;\r\n  tmpEndVertex: IVertex = null;\r\n  useMidNodes: boolean = true || true;\r\n  useRealEndVertex: boolean = true || true;\r\n  id: number = null;\r\n\r\n  static staticInit(): IEdge[] {\r\n    IEdge.all = [];\r\n    IEdge.selecteds = [];\r\n    // todo: prevent propagation on click on edges.\r\n    U.eventiDaAggiungereAlBody('trigger onBlur of all IEdge.selecteds.');\r\n    $(document.body).off('click.blurEdgeSelection').on('click.blurEdgeSelection',\r\n      (ee: ClickEvent) => {\r\n        const debug = false;\r\n        U.pif(debug, 'body.click(): clear All Edge Selections');\r\n        let i = -1;\r\n        while (++i < IEdge.selecteds.length) { IEdge.selecteds[i].onBlur(); }\r\n        U.pif(debug, 'graph clicked:', ee);\r\n        const modelPieceClicked: ModelPiece = ModelPiece.get(ee);\r\n        const edgeClicked: IEdge = IEdge.get(ee);\r\n        U.pif(debug, 'modelPieceClicked ? ', modelPieceClicked);\r\n        if (!modelPieceClicked) { return; }\r\n        const htmlClicked = ee.target;\r\n        let parent: HTMLElement = htmlClicked;\r\n        while (parent && parent.classList && !parent.classList.contains('EdgeShell')) { parent = parent.parentNode as HTMLElement; }\r\n        // const edgeClicked: IEdge = (parent && parent.classList) ? edge : null;\r\n        U.pif(debug, 'edgeClicked ? ', edgeClicked);\r\n        if (!edgeClicked) { return; }\r\n        edgeClicked.onClick(ee);\r\n      });\r\n    return IEdge.all; }\r\n\r\n  static get(e: ClickEvent | MouseMoveEvent | MouseDownEvent | MouseUpEvent | MouseLeaveEvent | MouseEnterEvent | MouseEvent): IEdge {\r\n    // return ModelPiece.getLogic(e.classType).edge;\r\n    return IEdge.getByHtml(e.target); }\r\n\r\n  static getByHtml(html0: HTMLElement | SVGElement, debug: boolean = true): IEdge {\r\n    if (!html0) { return null; }\r\n    let html = html0;\r\n    while ( html && (!html.dataset || !html.dataset.edgeid)) { html = html.parentNode as HTMLElement | SVGElement; }\r\n    const ret = html ? IEdge.getByID(+html.dataset.edgeid) : null;\r\n    // U.pe(debug && !ret, 'failed to find edge. html0:', html0, 'html:', html, 'map:', IEdge.idToEdge);\r\n    return ret; }\r\n\r\n  static getByID(id: number): IEdge { return IEdge.idToEdge[id]; }\r\n\r\n  constructor(logic: IClass | IReference, index: number, startv: IVertex = null, end: IVertex = null) {\r\n    if (!startv) {\r\n      if (logic instanceof IClass) { startv = (logic as IClass).getVertex(); }\r\n      if (logic instanceof IReference) { startv = (logic as IReference).getVertex(); } }\r\n    U.pe(!startv, 'startVertex missing');\r\n    U.pe(!logic || !startv, 'new Edge() invalid parameters. logic:', logic, 'start:', startv, 'end:', end);\r\n    IEdge.all.push(this);\r\n    this.id = IEdge.edgeCount++;\r\n    IEdge.idToEdge[this.id] = this;\r\n    this.logic = logic;\r\n    if (!(this instanceof ExtEdge)) {\r\n      U.pe(index === null || index === undefined, 'index must be set.');\r\n      this.logic.edges[index] = this; }\r\n    this.shell = document.createElementNS('http://www.w3.org/2000/svg', 'g'); // U.newSvg<SVGGElement>('g');\r\n    this.html = document.createElementNS('http://www.w3.org/2000/svg', 'path'); // U.newSvg<SVGPathElement>('Path');\r\n    this.shadow = U.newSvg<SVGPathElement>('path');\r\n    this.shell.appendChild(this.html);\r\n    this.shell.appendChild(this.shadow);\r\n    this.shadow.dataset.edgeid = this.shell.dataset.edgeid = this.html.dataset.edgeid = '' + this.id;\r\n    this.start = startv;\r\n    this.start.edgesStart.push(this);\r\n    this.setTarget(end);\r\n    this.startNode = new EdgePoint(this, new GraphPoint(0, 0), this.start);\r\n    this.midNodes = [];\r\n    this.endNode = new EdgePoint(this, new GraphPoint(0, 0), this.end);\r\n    this.owner = this.start.owner;\r\n    this.isSelected = false;\r\n    this.isHighlighted = false;\r\n    this.edgeHead = null;\r\n    this.edgeTail = null;\r\n    this.headShell = null;\r\n    this.tailShell = null;\r\n\r\n    this.owner.edgeContainer.append(this.shell);\r\n    this.shell.classList.add('EdgeShell');\r\n    this.html.classList.add('Edge');\r\n    this.shadow.classList.add('Edge', 'Shadow');\r\n    this.shell.dataset.modelPieceID = '' + this.logic.id;\r\n    this.html.dataset.modelPieceID = '' + this.logic.id;\r\n    this.shadow.dataset.modelPieceID = '' + this.logic.id;\r\n    this.html.setAttribute('fill', 'none');\r\n    this.shadow.setAttribute('fill', 'none');\r\n    this.shadow.setAttribute('stroke', 'none');\r\n    this.shadow.setAttribute('visibility', 'hidden');\r\n    this.shadow.setAttribute('pointer-events', 'stroke');\r\n    this.addEventListeners(true, false);\r\n    if (end) this.refreshGui(); }\r\n\r\n\r\n  generateAggregationHead(style: EdgeHeadStyle): SVGSVGElement { return null; }\r\n  generateContainmentHead(style: EdgeHeadStyle): SVGSVGElement { return this.generateAggregationHead(style); }\r\n  generateContainmentTail(style: EdgeHeadStyle): SVGSVGElement { return this.generateAggregationTail(style); }\r\n\r\n  generateAggregationTail(style: EdgeHeadStyle): SVGSVGElement { // https://jsfiddle.net/Naraku/3hngkrc1/\r\n    let svg: SVGSVGElement;\r\n    const bugfigo = false;\r\n    // if (this instanceof ExtEdge) svg = this.edgeTail = this.edgeHead || U.newSvg('svg');\r\n    if (bugfigo || this.edgeTail && this.tailtype === EdgeDecoratorType.containment) { svg = this.edgeTail; }\r\n    else { svg = U.newSvg<SVGSVGElement>('svg'); } // don't set it here, it will be set and eventlistened later.\r\n    this.tailtype = EdgeDecoratorType.containment;\r\n    svg.setAttributeNS(null, 'width', '' + style.width);\r\n    svg.setAttributeNS(null, 'height', '' + style.width);\r\n    svg.setAttributeNS(null, 'viewBox',\r\n      (-style.width) + ' ' + (-style.width) + ' ' + (200 + style.width * 2) + ' ' +  (200 + style.width * 2));\r\n    const path: SVGPathElement = U.newSvg<SVGPathElement>('path');\r\n    path.setAttributeNS(null, 'fill', style.fill);\r\n    path.setAttributeNS(null, 'stroke', style.stroke);\r\n    path.setAttributeNS(null, 'stroke-width', '' + style.width);\r\n    path.setAttributeNS(null, 'd', 'M100 0 L200 100 L100 200 L0 100 Z');\r\n    svg.appendChild(path);\r\n    return svg; }\r\n\r\n  generateGeneralizationHead(style: EdgeHeadStyle): SVGSVGElement {\r\n    let svg: SVGSVGElement;\r\n    const bugfigo = false;\r\n    if (bugfigo || this.edgeHead && this.headtype === EdgeDecoratorType.generalization) { svg = this.edgeHead; }\r\n    else { svg = U.newSvg<SVGSVGElement>('svg'); }\r\n    this.headtype = EdgeDecoratorType.generalization;\r\n    svg.setAttributeNS(null, 'width', '' + style.width);\r\n    svg.setAttributeNS(null, 'height', '' + style.width);\r\n    svg.setAttributeNS(null, 'viewBox',\r\n      (-style.width) + ' ' + (-style.width) + ' ' + (200 + style.width * 2) + ' ' +  (200 + style.width * 2));\r\n    const path: SVGPathElement = U.newSvg<SVGPathElement>('path');\r\n    path.setAttributeNS(null, 'fill', style.fill);\r\n    path.setAttributeNS(null, 'stroke', style.stroke);\r\n    path.setAttributeNS(null, 'stroke-width', '' + style.width);\r\n    path.setAttributeNS(null, 'd', 'M100 0 L200 200 L000 200 Z');\r\n    svg.appendChild(path);\r\n    return svg; }\r\n\r\n  generateGeneralizationTail(style: EdgeHeadStyle): SVGSVGElement { return null; }\r\n\r\n  static makePathSegment(prevPt: GraphPoint, nextPt: GraphPoint, mode0: EdgeModes, angularFavDirectionIsHorizontal: boolean = null,\r\n                                 prevVertexSize: GraphSize, nextVertexSize: GraphSize, type: string = ' L', debug = false): string {\r\n    // todo: devi rifare totalmente la parte di \"angularFavDirection\" basandoti su se cade perpendicolare sul vertice e devi usare\r\n    // 2 variabili, forzando la direzione ad essere per forza perpendicolare sul lato su cui risiede il vertex.startPt o .endPt\r\n    // poi: se le direzioni forzate coincidono, allora è un angular3, se sono vertical+horizontal, allora è un angular2.\r\n    // nb: in prevVertexSize e nextVertexSize la favDirection viene calcolata uguale, ma l'assenamento prevVertexSize = nextVertexSize;\r\n    // poi deve sparire perchè devo generare 2 diverse favDirection e non una sola.\r\n    let m;\r\n    let pathStr = '';\r\n    const pt1IsOnHorizontalSide = !prevVertexSize ? null : U.isOnHorizontalEdges(prevPt, prevVertexSize);\r\n    const pt2IsOnHorizontalSide = !nextVertexSize ? null : U.isOnHorizontalEdges(nextPt, nextVertexSize);\r\n\r\n    // if (prevVertexSize) { prevPt = prevVertexSize} //IVertex.closestIntersection(); }\r\n    if (debug) {\r\n      U.cclear();\r\n      Status.status.getActiveModel().graph.markg(prevPt, true, 'green');\r\n      if (prevVertexSize) { Status.status.getActiveModel().graph.markgS(prevVertexSize, false, 'white'); }\r\n      Status.status.getActiveModel().graph.markg(nextPt, false, 'green');\r\n      if (nextVertexSize) { Status.status.getActiveModel().graph.markgS(nextVertexSize, false); }\r\n    }\r\n    U.pif(debug, 'prev:' + (pt1IsOnHorizontalSide) + ', next:' + (pt2IsOnHorizontalSide),\r\n      'm0:' + mode0 + ' --> ' + mode0 + ', favDirection' + angularFavDirectionIsHorizontal);\r\n    // return '';\r\n    U.pif(debug, 'directions:', pt1IsOnHorizontalSide, pt2IsOnHorizontalSide);\r\n    if (prevVertexSize && !U.isOnEdge(prevPt, prevVertexSize)) { U.pw(debug, 'prev not on border'); return ''; }\r\n    if (nextVertexSize && !U.isOnEdge(nextPt, nextVertexSize)) { U.pw(debug, 'next not on border'); return ''; }\r\n    U.pe(prevVertexSize && !U.isOnEdge(prevPt, prevVertexSize) || nextVertexSize && !U.isOnEdge(nextPt, nextVertexSize), 'not on border');\r\n\r\n    if (prevVertexSize && !U.isOnEdge(prevPt, prevVertexSize) || nextVertexSize && !U.isOnEdge(nextPt, nextVertexSize)) {\r\n      /*console.clear();\r\n      const g = Status.status.getActiveModel().graph;\r\n      g.markg(prevPt, false, 'green');\r\n      g.markgS(prevVertexSize, false, 'green');\r\n      g.markg(prevPt, false);\r\n      g.markgS(prevVertexSize, false);\r\n      console.log('not on vertex border. pt:', prevPt, 'vertex:', prevVertexSize);\r\n      console.log('not on vertex border. nextpt:', nextPt, 'nextvertex:', nextVertexSize);\r\n      U.pw(true, (!U.isOnEdge(prevPt, prevVertexSize) ? 'prev' : 'next') + ' not on vertex border.');\r\n      return '';\r\n      */\r\n    }\r\n    let mode: EdgeModes = mode0;\r\n    if (prevVertexSize && nextVertexSize) {\r\n      // mode = (pt1IsOnHorizontalSide && pt2IsOnHorizontalSide) ? EdgeModes.angular3 : EdgeModes.angular2;\r\n    }\r\n    // if (mode === EdgeModes.angular23Auto) { mode = EdgeModes.angular3; }\r\n\r\n    /*\r\n    if (prevVertexSize && mode === EdgeModes.angular23Auto) {\r\n      // U.pe(angularFavDirectionIsHorizontal === null, 'preferred direction is useless with prevVertexSize');\r\n      U.pif(debug, 'favdirection pre:', angularFavDirectionIsHorizontal,\r\n        'isOnVerticalEdge:', U.isOnVerticalEdges(prevPt, prevVertexSize),\r\n        'isOnHorizontalEdge:', U.isOnHorizontalEdges(prevPt, prevVertexSize), 'prevPt:', prevPt, 'prevSize:', prevVertexSize);\r\n      if (angularFavDirectionIsHorizontal === false && U.isOnVerticalEdges(prevPt, prevVertexSize)) {\r\n        mode = EdgeModes.angular2; angularFavDirectionIsHorizontal = true; }\r\n      if (angularFavDirectionIsHorizontal === true && U.isOnHorizontalEdges(prevPt, prevVertexSize)) {\r\n        mode = EdgeModes.angular2; angularFavDirectionIsHorizontal = false; }\r\n      U.pif(debug, 'favdirection post:', angularFavDirectionIsHorizontal);\r\n    } */\r\n    /* compute last favorite direction * /\r\nlet lastIsHorizontalSide: boolean = null;\r\nconst endPt: GraphPoint = allRealPt[allRealPt.length - 1].pos;\r\nconst penultimoPt: GraphPoint = allRealPt[allRealPt.length - 2].getStartPoint();\r\nconsole.log('endVertex:', endVertex, 'endPt:', endPt, '; useRealEnd ? ', useRealEndVertex, ' = ', this.tmpEnd, this.tmpEndVertex);\r\nif (!endVertex) { lastIsHorizontalSide = Math.abs(GraphPoint.getM(penultimoPt, endPt)) < 1; } else\r\nif (endPt.x === endVertexSize.x) {                   /*from Left* /   lastIsHorizontalSide = true; } else\r\nif (endPt.x === endVertexSize.x + endVertexSize.w) { /*from Right* /  lastIsHorizontalSide = true; } else\r\nif (endPt.y === endVertexSize.y) {                   /*from Top* /    lastIsHorizontalSide = false; } else\r\nif (endPt.y === endVertexSize.y + endVertexSize.h) { /*from Bottom* / lastIsHorizontalSide = false;\r\n} else { lastIsHorizontalSide = null; }\r\nU.pe(lastIsHorizontalSide === null, 'endpoint is not on the boundary of vertex.',\r\n  ' Vertex.endpoint:', endPt, '; vertexSize:', endVertexSize);*/\r\n    /* done setting realpoints.pos, now draw path */\r\n    let oldPathStr = pathStr;\r\n\r\n    if (mode === EdgeModes.angular23Auto) { mode = mode0 = EdgeModes.angular3; }\r\n    const angular23: EdgeModes = EdgeModes.angular3;\r\n    // if (mode0 === angular23 && prevVertexSize && !pt1IsOnHorizontalSide && nextVertexSize && pt2IsOnHorizontalSide) {\r\n    U.pif(debug, mode0 === angular23, !!prevVertexSize, pt1IsOnHorizontalSide);\r\n    if (mode0 === angular23 && prevVertexSize && pt1IsOnHorizontalSide) {\r\n      angularFavDirectionIsHorizontal = false;\r\n      mode = EdgeModes.angular3;\r\n      U.pif(debug, 'fixed'); }\r\n    // if (prevVertexSize) { angularFavDirectionIsHorizontal = pt1IsOnHorizontalSide; }\r\n    // if (nextVertexSize) { angularFavDirectionIsHorizontal = !pt2IsOnHorizontalSide; }\r\n    // if (mode === angular23 && prev)\r\n    switch (mode) {\r\n      default: U.pe(true, 'unexpected EdgeMode:', mode); break;\r\n      case EdgeModes.angular2:\r\n        m = GraphPoint.getM(prevPt, nextPt); // coefficiente angolare della prossima linea disegnata (come se fosse dritta)\r\n        if (angularFavDirectionIsHorizontal === null) { angularFavDirectionIsHorizontal = Math.abs(m) <= 1; } // angolo <= abs(45°)\r\n        if (angularFavDirectionIsHorizontal) {\r\n          // qui resizer orizzontale\r\n          oldPathStr = pathStr;\r\n          pathStr += type + (nextPt.x) + ' ' + (prevPt.y);\r\n          U.pif(debug, 'pathStr: ', oldPathStr, ' --> ', pathStr, '; ang2 favdirectionHorizontal');\r\n        } else {\r\n          // qui resizer verticale.\r\n          oldPathStr = pathStr;\r\n          pathStr += type + (prevPt.x) + ' ' + (nextPt.y);\r\n          U.pif(debug, 'pathStr: ', oldPathStr, ' --> ', pathStr, '; ang2 favdirectionVertical');\r\n        }\r\n        // qui resizer opposto al precedente.\r\n        // oldPathStr = pathStr;\r\n        // pathStr += type + (nextPt.x) + ' ' + (nextPt.y);\r\n        // U.pif(debug, 'pathStr: ', oldPathStr, ' --> ', pathStr, '; ang2 end ridondante?');\r\n        break;\r\n      case EdgeModes.angular23Auto + '': U.pw(true, 'mode.angular23Auto should be replaced before entering here'); break;\r\n      case EdgeModes.angular3:\r\n        m = GraphPoint.getM(prevPt, nextPt); // coefficiente angolare della prossima linea disegnata (come se fosse dritta)\r\n        if (angularFavDirectionIsHorizontal === null) { angularFavDirectionIsHorizontal = Math.abs(m) <= 1; } // angolo <= abs(45°)\r\n        if (angularFavDirectionIsHorizontal) {\r\n          const midX = (nextPt.x + prevPt.x) / 2;\r\n          // todo: e qui dovrei appendere un path invisibile che cambia cursore in HorizontalResizer intercettare gli eventi edge.\r\n          oldPathStr = pathStr;\r\n          pathStr += type + (midX) + ' ' + (prevPt.y);\r\n          U.pif(debug, 'pathStr: ', oldPathStr, ' --> ', pathStr, '; angular3 orizzontale: orizzontale big');\r\n          // qui invece uno piccolino verticale\r\n          oldPathStr = pathStr;\r\n          pathStr += type + (midX) + ' ' + (nextPt.y);\r\n          U.pif(debug, 'pathStr: ', oldPathStr, ' --> ', pathStr, '; angular3 orizzontale: verticale small');\r\n        } else {\r\n          const midY = (nextPt.y + prevPt.y) / 2;\r\n          // todo: qui resizer verticale.\r\n          oldPathStr = pathStr;\r\n          pathStr += type + prevPt.x + ' ' + (midY);\r\n          U.pif(debug, 'pathStr: ', oldPathStr, ' --> ', pathStr, '; angular3 verticale: verticale big');\r\n          // qui invece uno piccolino orizzontale\r\n          oldPathStr = pathStr;\r\n          pathStr += type + nextPt.x + ' ' + (midY);\r\n          U.pif(debug, 'pathStr: ', oldPathStr, ' --> ', pathStr, '; angular3 verticale: orizzontale small');\r\n        }\r\n        // todo: qui resizer opposto al precedente.\r\n        break;\r\n      case EdgeModes.straight: /* nessun punto fittizio di mezzo */ break;\r\n    }\r\n    oldPathStr = pathStr;\r\n    pathStr += type + (nextPt.x) + ' ' + (nextPt.y);\r\n    U.pif(debug, 'pathStr: ', oldPathStr, ' --> ', pathStr, '; lastPt comune a tutti.');\r\n\r\n    return pathStr; }\r\n  /*private static midPointMouseDown(e: JQuery.MouseDownEvent) {\r\n    IEdge.tempMidPoint_ModelPiece = ModelPiece.getLogic(e.currentTarget);\r\n    IEdge.tempMidPoint_Clicked = Status.status.getActiveModel().graph.toGraphCoord( new Point(e.pageX, e.pageY) );\r\n  }*//*\r\n  private static midPointMouseMove(e: JQuery.MouseMoveEvent) {\r\n    const p: GraphPoint = Status.status.getActiveModel().graph.toGraphCoord( new Point(e.pageX, e.pageY) );\r\n\r\n  }\r\n  private static midPointMouseUp(e: JQuery.MouseUpEvent) { }*/\r\n  canBeLinkedTo(target: IClass): boolean { return this.logic.canBeLinkedTo(target); }\r\n\r\n  refreshGui(debug: boolean = false, useRealEndVertex: boolean = null, usemidnodes: boolean = null) {\r\n    debug = false;\r\n    let debugi: number = window['' + 'debug'];\r\n    if (debugi === 1) return;\r\n    U.pe(!this.logic, 'IEdge.logic is null:', this);\r\n    if (useRealEndVertex === null) { useRealEndVertex = this.useRealEndVertex; }\r\n    if (usemidnodes === null) { usemidnodes = this.useMidNodes; }\r\n    /* setup variables */\r\n    const startVertex: IVertex = this.start;\r\n    const startVertexSize: GraphSize = this.start.getSize();\r\n    let endVertex: IVertex = null;\r\n    let endVertexSize: GraphSize = null;\r\n    let allRealPt: EdgePoint[] = this.getAllRealMidPoints();\r\n    if (!usemidnodes) { allRealPt = [allRealPt[0], allRealPt[allRealPt.length - 1]]; }\r\n    if (useRealEndVertex) {\r\n      endVertex = this.end;\r\n      endVertexSize = endVertex.getSize();\r\n      this.startNode.moveTo(startVertex.getStartPoint(allRealPt[1].getEndPoint()), false);\r\n      this.endNode.moveTo(endVertex.getEndPoint(allRealPt[allRealPt.length - 2].getStartPoint()), false);\r\n    } else {\r\n      endVertex = this.tmpEndVertex;\r\n      endVertexSize = endVertex ? endVertex.getSize() : null;\r\n      this.startNode.moveTo(startVertex.getStartPoint(allRealPt[1].getEndPoint()), false);\r\n      this.endNode.moveTo(endVertex ? endVertex.getEndPoint(allRealPt[allRealPt.length - 2].getStartPoint()) : this.tmpEnd, false);\r\n    }\r\n    if (debugi === 2) return;\r\n    U.pif(debug, 'allRealPt:', allRealPt);\r\n    let i;\r\n    let pathStr: string; // 'M' + (allRealPt[0].getStartPoint().x) + ' ' + (allRealPt[0].getStartPoint().y);\r\n    let oldpathStr: string;\r\n    const graph: IGraph = this.logic.getModelRoot().graph;\r\n\r\n    if (debugi === 3) return;\r\n    if (debug) {\r\n      U.cclear();\r\n      if (startVertexSize) { graph.markgS(startVertexSize, true, 'blue'); }\r\n      if (endVertexSize) { graph.markgS(endVertexSize, false); } }\r\n\r\n    for (i = 1; i < allRealPt.length; i++) { // escludo il primo punto dal loop.\r\n      const curr: EdgePoint = allRealPt[i];\r\n      const prev: EdgePoint = allRealPt[i - 1];\r\n      const favdirection: boolean = null; // i === allRealPt.length - 1 ? lastdirectionIsHorizontal : null;\r\n      const prevVertexSize: GraphSize = i === 1 ? startVertexSize : null;\r\n      const nextVertexSize: GraphSize = i === allRealPt.length - 1 ? endVertexSize : null;\r\n      /* const prevFitGridVertical: boolean = false; // prevVertexSize ? U.isOnHorizontalEdges(prev.getStartPoint(), prevVertexSize) : true;\r\n      const prevFitGridHorizontal: boolean = false; // prevVertexSize ? U.isOnHorizon todo;\r\n      const nextFitToGridHorizontal: boolean = false;\r\n      const nextFitToGridVertical: boolean = false;*/\r\n      const prevPt: GraphPoint = prev.getStartPoint(!prevVertexSize, !prevVertexSize);\r\n      const currPt: GraphPoint = curr.getEndPoint(!nextVertexSize, !nextVertexSize);\r\n      if (debug) {\r\n        graph.markg(prevPt, false, 'green');\r\n        graph.markg(currPt, false, 'green');\r\n        if (prevVertexSize) { graph.markgS(prevVertexSize, false, 'blue'); }\r\n        if (nextVertexSize) { graph.markgS(nextVertexSize, false); } }\r\n      // if (i === 1) { pt1.moveOnNearestBorder(startVertexSize, false); }\r\n      // if (i === allRealPt.length - 1) { pt2.moveOnNearestBorder(endVertexSize, false); }\r\n      if (i === 1) { pathStr = 'M' + prevPt.x + ' ' + prevPt.y; }\r\n      oldpathStr = pathStr;\r\n      pathStr += IEdge.makePathSegment(prevPt, currPt, this.getEdgeMode(), favdirection, prevVertexSize, nextVertexSize);\r\n      U.pif(debug, 'pathStr: RealPts:' + '[' + i + '] = ' + currPt.toString() + '; prev:' + prevPt.toString());\r\n      U.pif(debug, 'pathStr[' + (i) + '/' + allRealPt.length + ']: ' + oldpathStr + ' --> ' + pathStr);\r\n    }\r\n\r\n    if (debugi === 3) return;\r\n    this.setPath(pathStr, debug);\r\n    if (debugi === 4) return;\r\n    this.getEdgeHead();\r\n    this.getEdgeTail();\r\n    if (debugi === 5) return;\r\n    this.appendTailHead(true, pathStr);\r\n    this.appendTailHead(false, pathStr);\r\n    if (debugi === 6) return;\r\n    // this.addEventListeners(true, false);\r\n  }\r\n\r\n  getEdgeMode(): EdgeModes {\r\n    let tmp = this.logic.edgeStyleCommon.style;\r\n    return tmp ? tmp : this.logic.edgeStyleCommon.style = EdgeModes.straight; }\r\n\r\n  private getStyle(): EdgeStyle {\r\n    if (this.isHighlighted) {\r\n      return this.logic.edgeStyleHighlight;\r\n    } else if (this.isSelected) {\r\n      return this.logic.edgeStyleSelected;\r\n    } else { return this.logic.edgeStyleCommon; } }\r\n\r\n  private setPath(pathStr: string, debug: boolean = false): void {\r\n    let style: EdgeStyle = this.getStyle();\r\n    /* update style */\r\n    this.html.setAttribute('stroke', style.color);\r\n    this.html.setAttribute('stroke-width', '' + style.width);\r\n    this.shadow.setAttribute('stroke-width', '' + (style.width + IEdge.shadowWidthIncrease));\r\n    // U.clear(this.shell);\r\n    this.shell.appendChild(this.html);\r\n    this.shell.appendChild(this.shadow);\r\n    U.pif(debug, 'edgeHead:', this.edgeHead, 'tail:', this.edgeTail);\r\n    this.html.setAttributeNS(null, 'd', pathStr);\r\n    this.shadow.setAttributeNS(null, 'd', pathStr);\r\n    let i: number;\r\n    if (this.isSelected) {\r\n      this.startNode.show();\r\n      for (i = 0; i < this.midNodes.length; i++) { this.midNodes[i].show(); }\r\n      this.endNode.show(); } else\r\n    if (this.isHighlighted) {\r\n      this.startNode.hide();\r\n      for (i = 0; i < this.midNodes.length; i++) { this.midNodes[i].show(); }\r\n      this.endNode.hide();\r\n    } else {\r\n      this.startNode.hide();\r\n      for (i = 0; i < this.midNodes.length; i++) { this.midNodes[i].hide(); }\r\n      this.endNode.hide();\r\n    }\r\n  }\r\n\r\n  addEventListeners(foredge: boolean, forheadtail: boolean): void {\r\n    const $edgetail: JQuery<Element> = forheadtail ? $(this.headShell).add(this.tailShell) : $();\r\n    const $shell: JQuery<Element> = foredge ? $(this.shell) : $();\r\n    const $edgeparts = $shell.find('.Edge').add($edgetail as any as JQuery<HTMLElement>);\r\n    // U.pe(!$shell.length, 'html+', $htmlplus, 'html', $html, 'tailhead', $edgetail);\r\n    //  U.pe(!$edgetail.length, 'html+', $htmlplus, 'html', $html, 'tailhead', $edgetail, 'head-tail:', this.edgeHead, this.edgeTail);\r\n    $shell.off('click.pbar').on('click.pbar', (e: ClickEvent) => IVertex.ChangePropertyBarContentClick(e, this) );\r\n    /*$html.off('mousedown.showStyle').on('mousedown.showStyle',\r\n      (e: MouseDownEvent) => { Status.status.getActiveModel().graph.propertyBar.styleEditor.showE(this.logic); });*/\r\n    $shell.off('mousedown.startSetMidPoint').on('mousedown.startSetMidPoint',\r\n      (e: MouseDownEvent) => {\r\n        // const ownermp: M2Class | IReference = ModelPiece.getLogic(e.currentTarget) as M2Class | IReference;\r\n        // U.pe( ownermp === null || ownermp === undefined, 'unable to get logic of:', e.currentTarget);\r\n        const edge: IEdge = IEdge.get(e);\r\n        U.pe( !e , 'unable to get edge of:', e.currentTarget);\r\n        edge.onMouseDown(e); } );\r\n    $shell.off('mousemove.startSetMidPoint').on('mousemove.startSetMidPoint',\r\n      (e: MouseMoveEvent) => {\r\n        // const ownermp: M2Class | IReference = ModelPiece.getLogic(e.currentTarget) as M2Class | IReference;\r\n        // U.pe( ownermp === null || ownermp === undefined, 'unable to get logic of:', e.currentTarget);\r\n        const edge: IEdge = IEdge.getByHtml(e.target, true);\r\n        edge.onMouseMove(e); } );\r\n    $shell.off('click.addEdgePoint').on('click.addEdgePoint', (e: ClickEvent) => { IEdge.get(e).onClick(e); });\r\n    $edgeparts.off('mouseover.cursor').on('mouseover.cursor', (e: MouseOverEvent) => { IEdge.get(e).onMouseOver(e); });\r\n    $edgeparts.off('mouseenter.cursor').on('mouseenter.cursor', (e: MouseEnterEvent) => { IEdge.get(e).onMouseEnter(e); });\r\n    $edgeparts.off('mouseleave.cursor').on('mouseleave.cursor', (e: MouseLeaveEvent) => { IEdge.get(e).onMouseLeave(e); });\r\n\r\n  }\r\n  onBlur() {\r\n    this.isSelected = false;\r\n    this.html.classList.remove('selected_debug');\r\n    U.arrayRemoveAll(IEdge.selecteds, this);\r\n    let i;\r\n    for (i = 0; i < this.midNodes; i++) { this.midNodes[i].hide(); }\r\n    this.refreshGui(); }\r\n\r\n  getAllRealMidPoints(): EdgePoint[] {\r\n    const allNodes: EdgePoint[] =  [];\r\n    allNodes.push(this.startNode);\r\n    let i = 0;\r\n    while (i < this.midNodes.length) { allNodes.push(this.midNodes[i++]); }\r\n    allNodes.push(this.endNode);\r\n    return allNodes; }\r\n\r\n  getAllFakePoints(debug: boolean = false): EdgePointFittizio[] {\r\n    // if (!this.html) { return null; }\r\n    const d = this.html.getAttributeNS(null, 'd'); // .replace('M', 'L');\r\n    // let dArr: string[] = d.split('L'); /// consider instead: U.parseSvgPath(pathStr).pts;\r\n    // if (dArr.length === 1) { dArr = [dArr[0], dArr[0]]; }\r\n    let i;\r\n    const realMidPoints: EdgePoint[] = this.getAllRealMidPoints();\r\n    const nodiFittizi: EdgePointFittizio[] = [];\r\n    let realNodeIndex = 0;\r\n    let puntiReali = 0;\r\n    const parsedpts:{assoc: {letter: string, pt: Point}[], pts: Point[]} = U.parseSvgPath(d);\r\n    for (i = 0; i < parsedpts.pts.length; i++) {\r\n      const pt: GraphPoint = new GraphPoint(parsedpts.pts[i].x, parsedpts.pts[i].y);\r\n      let target: EdgePoint = null;\r\n      U.pif(debug, 'getAllFakePoints() d:', d, 'pt', pt, 'realMidPoints:', realMidPoints, 'index:', realNodeIndex, 'match?',\r\n        realNodeIndex >= realMidPoints.length ? 'overflow' : realMidPoints[realNodeIndex].pos.equals(pt));\r\n      const fitToGrid: boolean = i !== 0 || i !== parsedpts.pts.length - 1;\r\n      let fitHorizontal: boolean;\r\n      let fitVertical: boolean;\r\n      if (i !== 0 && i !== parsedpts.pts.length - 1) { fitHorizontal = fitVertical = true; }\r\n      if (i === 0 && !U.isOnHorizontalEdges(pt, this.start.getSize())) { fitHorizontal = false; fitVertical = true; }\r\n      if (i === 0 && U.isOnHorizontalEdges(pt, this.start.getSize())) { fitHorizontal = true; fitVertical = false; }\r\n      if (i === parsedpts.pts.length - 1 && !U.isOnHorizontalEdges(pt, this.end.getSize())) { fitHorizontal = false; fitVertical = true; }\r\n      if (i === parsedpts.pts.length - 1 && U.isOnHorizontalEdges(pt, this.end.getSize())) { fitHorizontal = true; fitVertical = false; }\r\n      // fitHorizontal = (i === 0 && U.isOnHorizontalEdges(pt, this.start.getSize()));\r\n      const midPoint: GraphPoint = realMidPoints[realNodeIndex].getStartPoint(fitHorizontal, fitVertical);\r\n      // todo: se cambi endpoint !== startpoint, devi fare due check.\r\n      // const prevPt: GraphPoint = allNodes[realNodeIndex].getStartPoint(!!prevVertexSize, !!prevVertexSize);\r\n      // const currPt: GraphPoint = curr.getEndPoint(!!nextVertexSize, !!nextVertexSize);\r\n      U.pif(debug, pt, ' =?= ', midPoint, pt.equals(midPoint));\r\n      if (pt.equals(midPoint)) {\r\n        puntiReali++;\r\n        target = realMidPoints[realNodeIndex++];\r\n      }\r\n      nodiFittizi.push( new EdgePointFittizio(pt, target)); }\r\n    if (puntiReali < 2 || puntiReali < realMidPoints.length) {\r\n      const prettyFittizi: string[] = [];\r\n      const prettyRealMidPoints: string[] = [];\r\n      i = -1;\r\n      while (++i < nodiFittizi.length) { prettyFittizi.push(nodiFittizi[i].pos.toString()); }\r\n      i = -1;\r\n      while (++i < realMidPoints.length) { prettyRealMidPoints.push(realMidPoints[i].pos.toString()); }\r\n      U.pw(debug, 'fallimento nell\\'assegnare fakepoints ai punti reali. Assegnati:' + puntiReali + ' / ' + prettyRealMidPoints.length\r\n        + '; fittizi trovati:', prettyFittizi, ' reali:', prettyRealMidPoints, ', parsedpts:', parsedpts, ', path:', d);\r\n    }\r\n    return nodiFittizi; }\r\n\r\n  getBoundingMidPoints(e: ClickEvent | MouseMoveEvent | MouseUpEvent | MouseDownEvent | MouseEvent | MouseEnterEvent | MouseLeaveEvent,\r\n                       style: EdgeStyle = null, canFail: boolean = false, arrFittizi: EdgePointFittizio[] = null): {prev: EdgePoint, next: EdgePoint} {\r\n    const fittizi: EdgePointFittizio[] = arrFittizi ? arrFittizi : this.getAllFakePoints();\r\n    const tmp: EdgePointFittizio[] = this.getBoundingMidPointsFake(e, style, canFail, fittizi);\r\n    return {prev:tmp[0].getPreviousRealPt(fittizi), next: tmp[1].getNextRealPt(fittizi)}; }\r\n\r\n  getBoundingMidPointsFake(e: ClickEvent | MouseMoveEvent | MouseUpEvent | MouseDownEvent | MouseEvent | MouseEnterEvent | MouseLeaveEvent,\r\n                           style: EdgeStyle = null, canFail: boolean = false, arrFittizi: EdgePointFittizio[] = null): EdgePointFittizio[] {\r\n\r\n    // if (style.style === EdgeModes.straight) { return this.getBoundingMidPointsStraight(e, canFail); }\r\n    // const edge: IEdge = ModelPiece.getLogic(e.classType).edge;\r\n    const clickedPt: GraphPoint = GraphPoint.fromEvent(e);\r\n    const lineWidth: number = +this.shadow.getAttributeNS(null, 'stroke-width');\r\n\r\n    const allNodes: EdgePoint[] =  this.getAllRealMidPoints();\r\n    const fittizi: EdgePointFittizio[] = arrFittizi ? arrFittizi : this.getAllFakePoints();\r\n\r\n    let i = 0;\r\n    let closestPrev: EdgePointFittizio = null;\r\n    let closestNext: EdgePointFittizio = null;\r\n    let closestDistance: number = Number.POSITIVE_INFINITY;\r\n    if (fittizi.length <= 2) return null;\r\n    while (++i < fittizi.length) {\r\n      const prev: EdgePointFittizio = fittizi[i - 1];\r\n      const next: EdgePointFittizio = fittizi[i];\r\n      const currentDistance = clickedPt.distanceFromLine(prev.pos, next.pos);\r\n      /*if (clickedPt.isInTheMiddleOf(prev.pos, next.pos, lineWidth)) { return [prev, next]; }*/\r\n      if (currentDistance < closestDistance) { closestPrev = prev; closestNext = next; closestDistance = currentDistance; }\r\n    }\r\n    return [closestPrev, closestNext]; }\r\n\r\n  getBoundingMidPointsStraight_OLD(\r\n    e: ClickEvent | MouseMoveEvent | MouseUpEvent | MouseDownEvent | MouseEvent | MouseEnterEvent | MouseLeaveEvent,\r\n    canFail: boolean = false): EdgePoint[] {\r\n\r\n    const edge: IEdge = null; // ModelPiece.getLogic(e.classType).edge;\r\n    const clickedPt: GraphPoint = GraphPoint.fromEvent(e);\r\n    const first: EdgePoint = this.startNode;\r\n    const second: EdgePoint = (this.midNodes.length === 0 ? this.endNode : this.midNodes[0]);\r\n    const penultimo: EdgePoint = (this.midNodes.length === 0 ? this.startNode : this.midNodes[this.midNodes.length - 1]);\r\n    const last: EdgePoint = this.endNode;\r\n    const lineWidth: number = +this.shadow.getAttributeNS(null, 'stroke-width');\r\n    if (clickedPt.isInTheMiddleOf(first.pos, second.pos, lineWidth)) {\r\n      /*console.log('bounding (first[' + edge.midNodes.indexOf(second)\r\n        + '] && second[' + + edge.midNodes.indexOf(penultimo) + ']); e:', edge);*/\r\n      return [first, second]; }\r\n    /* if (penultimo !== first && second !== penultimo && clickedPt.isInTheMiddleOf(second.pos, penultimo.pos, lineWidth)) {\r\n      console.log('bounding (second[' + edge.midNodes.indexOf(second)\r\n        + '] && penultimo[' + + edge.midNodes.indexOf(penultimo) + ']), e:', edge);\r\n      U.pe(edge.midNodes.indexOf(second) + 1 !== edge.midNodes.indexOf(penultimo), 'non conseguenti');\r\n      return [second, penultimo]; } */\r\n    if (last !== second && clickedPt.isInTheMiddleOf(penultimo.pos, last.pos, lineWidth)) {\r\n      /*console.log('bounding (penultimo[' + edge.midNodes.indexOf(penultimo)\r\n        + '] && ultimo[' + + edge.midNodes.indexOf(last) + ']); e:', edge);*/\r\n      return [penultimo, last]; }\r\n    let i;\r\n    for (i = 0; i < this.midNodes.length; i++) { // ottimizzazione: può partire da 1 e terminare 1 prima (penultimo)\r\n      const pre: EdgePoint = i === 0 ? first : this.midNodes[i - 1];\r\n      const now: EdgePoint = this.midNodes[i];\r\n      if (clickedPt.isInTheMiddleOf(pre.pos, now.pos, lineWidth)) {\r\n        /*console.log('bounding (pre[' + edge.midNodes.indexOf(pre)\r\n          + '] && now[' + + edge.midNodes.indexOf(now) + ']), e:', edge);*/\r\n        U.pe(edge.midNodes.indexOf(pre) + 1 !== edge.midNodes.indexOf(now), 'non consecutivi.');\r\n        return [pre, now]; }\r\n    }\r\n    console.log('clickedPt:', clickedPt, ', start:', this.startNode.pos, ', mids:', this.midNodes, ', end:', this.endNode.pos);\r\n    U.pe(!canFail, 'bounding points not found:', e, this, 'edge:', IEdge.get(e));\r\n    return null; }\r\n\r\n  onMouseLeave(e: MouseLeaveEvent): void {\r\n    if(e) console.log('mouseleave');\r\n    this.isHighlighted = false;\r\n    this.startNode.refreshGUI(null, false);\r\n    this.endNode.refreshGUI(null, false);\r\n    let i;\r\n    for (i = 0; i < this.midNodes.length; i++) { this.midNodes[i].refreshGUI(null, false); }\r\n    this.refreshGui(); }\r\n\r\n  onMouseEnter(e: MouseEnterEvent): void {\r\n    this.onMouseLeave(null);\r\n    console.log('enter', e.target, e.currentTarget);\r\n    this.isHighlighted = true;\r\n    this.refreshGui(true);\r\n  }\r\n\r\n  onMouseMove(e: MouseMoveEvent): void { this.onMouseOver(e as any, false); }\r\n\r\n  onMouseOver(e: MouseOverEvent | MouseMoveEvent, canFail: boolean = false, debug: boolean = false): void {\r\n    console.log('over');\r\n    if (CursorFollowerEP.get().isAttached() || IEdge.edgeChanging) { return; }\r\n    const fakePoints: EdgePointFittizio[] = this.getAllFakePoints();\r\n    const tmp: EdgePointFittizio[] = this.getBoundingMidPointsFake(e, null, canFail, fakePoints);\r\n    if (!tmp || tmp.length < 2) { return; }\r\n    const preFake: EdgePointFittizio = tmp[0];\r\n    const nextFake: EdgePointFittizio = tmp[1];\r\n    const pre: EdgePoint = preFake.getPreviousRealPt(fakePoints);\r\n    const next: EdgePoint = nextFake.getNextRealPt(fakePoints);\r\n    U.pe(!pre, 'failed to get previousRealPt of point:', preFake, ', all fakePoints:', fakePoints);\r\n    U.pe(!next, 'failed to get nextRealPt of point:', nextFake, ', all fakePoints:', fakePoints);\r\n    let i = -1;\r\n    this.startNode.refreshGUI(null, false);\r\n    this.endNode.refreshGUI(null, false);\r\n    let cursor: string;\r\n    switch (this.getEdgeMode()) {\r\n      default: cursor = 'help'; break;\r\n      case EdgeModes.straight: cursor = 'select'; break;\r\n      case EdgeModes.angular2:\r\n      case EdgeModes.angular3:\r\n      case EdgeModes.angular23Auto:\r\n        if (preFake.pos.x === nextFake.pos.x) { cursor = 'col-resize';\r\n        } else if (preFake.pos.y === nextFake.pos.y) { cursor = 'row-resize';\r\n        } else { cursor = 'no-drop'; }\r\n        break;\r\n    }\r\n    this.shadow.style.cursor = this.html.style.cursor = cursor;\r\n    while (++i < this.midNodes.length) { this.midNodes[i].refreshGUI(null, false); }\r\n    if (debug) { U.cclear(); }\r\n    U.pif(debug, 'fake     pre: ', preFake, ', next:', nextFake);\r\n    U.pif(debug, 'real     pre: ', pre, ', next:', next);\r\n    pre.refreshGUI(null, true);\r\n    next.refreshGUI(null, true); }\r\n\r\n  onClick(e: ClickEvent): void {\r\n    // console.log('IEdge.clicked:', this);\r\n    const debug = false;\r\n    this.isSelected = true;\r\n    IEdge.selecteds.push(this);\r\n    let i;\r\n    this.html.setAttributeNS(null, 'stroke-width', '' + 5);\r\n    this.html.classList.add('selected_debug');\r\n    this.startNode.show();\r\n    if (debug) { U.cclear(); }\r\n    U.pif(debug, 'midnodes:', this.midNodes);\r\n    for (i = 0; i < this.midNodes; i++) { this.midNodes[i].show(debug); }\r\n    this.endNode.show();\r\n    // if (!triggered) { Status.status.getActiveModel().graph.propertyBar.styleEditor.showE(this.logic); }\r\n    this.refreshGui();\r\n    IVertex.ChangePropertyBarContentClick(e, this);\r\n    e.stopPropagation(); }\r\n\r\n  onMouseDown(e: MouseDownEvent): void {\r\n    if (!this.isSelected) { return; }\r\n    const tmp = this.getBoundingMidPoints(e);\r\n    const pos: GraphPoint = this.owner.toGraphCoord(new Point(e.pageX, e.pageY));\r\n    CursorFollowerEP.get().attach(this, pos, this.midNodes.indexOf(tmp.prev)); }\r\n\r\n  onMouseUp(e: MouseUpEvent): void {\r\n    const len0: number = this.midNodes.length;\r\n    const index = this.midNodes.indexOf(CursorFollowerEP.get());\r\n    if (!this.isSelected) { return; }\r\n    // console.log('point inserted Pre', this.midNodes, ' [0]:', this.midNodes[0], this.midNodes[1]);\r\n    CursorFollowerEP.get().detach(false);\r\n    const len1: number = this.midNodes.length;\r\n    U.insertAt(this.midNodes, index, new EdgePoint(this, CursorFollowerEP.get().pos));\r\n    const len2: number = this.midNodes.length;\r\n    U.pe(len0 !== this.midNodes.length, 'size varied: ' + len0 + ' --> ' + len1 + ' --> ' + len2 + ' --> ' + this.midNodes.length);\r\n    // console.log('point inserted Post:', this.midNodes,  len0 + ' --> ' + this.midNodes.length);\r\n    this.refreshGui(); }\r\n\r\n  remove() {\r\n    U.arrayRemoveAll(this.start.edgesStart, this);\r\n    U.arrayRemoveAll(this.end.edgesEnd, this);\r\n    U.arrayRemoveAll(IEdge.all, this);\r\n    if (!(this instanceof ExtEdge)) {\r\n      const index = this.getIndex();\r\n      U.pe(this.logic.edges[index] !== this, 'deleting wrong edge.');\r\n      this.logic.edges[index] = null; }\r\n    U.arrayRemoveAll(this.owner.edges, this);\r\n    let shell = '.EdgeShell';\r\n    this.shell.parentNode.removeChild(this.shell);\r\n    // gc helper\r\n    this.end = null;\r\n    this.logic = null;\r\n    this.tmpEnd = null;\r\n    this.tmpEndVertex = null;\r\n    this.endNode = null;\r\n    this.midNodes = null;\r\n    this.owner = null;\r\n    this.start = null;\r\n    this.startNode = null;\r\n  }\r\n\r\n  unsetTarget(): IVertex {\r\n    const v: IVertex = this.end;\r\n    if (!v) { return null; }\r\n    this.end = null;\r\n    U.arrayRemoveAll(v.edgesEnd, this);\r\n    return v; }\r\n\r\n  setTarget(v: IVertex): void {\r\n    this.unsetTarget();\r\n    this.end = v;\r\n    if (v) { v.edgesEnd.push(this); } }\r\n  mark(markb: boolean, key: string = 'errorGeneric', color: string = 'red'): void {\r\n    U.pe(true, 'IEdge.mark() todo.');\r\n  }\r\n\r\n// bug: https://bugzilla.mozilla.org/show_bug.cgi?id=577785#c2\r\n    private getEdgeHead(): SVGSVGElement {\r\n      const logic: IReference | IClass = this.logic;\r\n      const logicref: IReference = this.logic instanceof IReference ? this.logic : null;\r\n      const logicclass: IClass = this.logic instanceof IClass ? this.logic : null;\r\n      let html: SVGSVGElement = null;\r\n      //console.trace();\r\n      //console.log('getEdgeHead(), ', this.getStyle().edgeHeadStyle, this.isHighlighted);\r\n      let debugi: number = window['' + 'debug'];\r\n      if (debugi === 4.1) return this.edgeHead ? this.edgeHead : html;\r\n      if (logicref && logicref.isContainment()) { html = this.generateContainmentHead(this.getStyle().edgeHeadStyle); }\r\n      if (this instanceof ExtEdge) { html = this.generateGeneralizationHead(this.getStyle().edgeHeadStyle); }\r\n      U.pe(this instanceof ExtEdge && !html, 'cannot return null on extedge:', html, this);\r\n      if (debugi === 4.2) return this.edgeHead ? this.edgeHead : html;\r\n      if (!html) { return this.edgeHead = null; }\r\n      if (html === this.edgeHead) return;\r\n      this.edgeHead = html;\r\n      html.classList.add('Edge', 'EdgeHead');\r\n      if (this.headShell) this.headShell.appendChild(this.edgeHead);\r\n      return this.edgeHead; }\r\n\r\n    private getEdgeTail(): SVGSVGElement {\r\n      const logic: IReference | IClass = this.logic;\r\n      const logicref: IReference = this.logic instanceof IReference ? this.logic : null;\r\n      const logicclass: IClass = this.logic instanceof IClass ? this.logic : null;\r\n      let html: SVGSVGElement = null;\r\n      if (logicref && logicref.isContainment()) { html = this.generateContainmentTail(this.getStyle().edgeHeadStyle); }\r\n      if (this instanceof ExtEdge) { html = this.generateGeneralizationTail(this.getStyle().edgeHeadStyle); }\r\n      if (!html) { return this.edgeTail = null; }\r\n      if (html === this.edgeTail) return;\r\n      this.edgeTail = html;\r\n      html.classList.add('Edge', 'EdgeTail');\r\n      if (this.tailShell) this.tailShell.appendChild(this.edgeTail);\r\n      return this.edgeTail = html; }\r\n\r\n  private appendTailHead(tail: boolean, pathStr: string, debug: boolean = false) {\r\n    const svg: SVGSVGElement = tail ? this.edgeTail : this.edgeHead;\r\n    const shell: SVGGElement = tail ? this.tailShell : this.headShell;\r\n    if (!svg) { return; }\r\n    // debug = true;\r\n    if (debug) U.cclear();\r\n    const oldPathStr: string = pathStr;\r\n    let startsub: number;\r\n    let endsub: number;\r\n    // filtro il pathStr estraendo solo i primi 2 o gli ultimi 2 punti. (migliora performance su edge pieni di edgepoints)\r\n    let pt1: Point;\r\n    let pt2: Point;\r\n    if (!tail) {\r\n      endsub = pathStr.length;\r\n      startsub = pathStr.lastIndexOf('L');\r\n      U.pe(startsub === -1, 'the pathString have no L (but should have at least 2 points)');\r\n      startsub = pathStr.lastIndexOf('L', startsub - 1);\r\n      if (startsub === -1) { startsub = 0; }\r\n    } else {\r\n      startsub = 0;\r\n      endsub = pathStr.indexOf('L');\r\n      U.pe(endsub === -1, 'the pathString have no L (but should have at least 2 points)');\r\n      endsub = pathStr.indexOf('L', endsub + 1);\r\n      if (endsub === -1) { endsub = pathStr.length; } }\r\n    pathStr = pathStr.substring(startsub, endsub);\r\n    U.pif(debug, 'pathStr: ' + oldPathStr + ' --> ' + pathStr, 'onEnd ? ', !tail);\r\n    const points: Point[] = U.parseSvgPath(pathStr).pts;\r\n    U.pe(points.length !== 2, 'expected exactly 2 points, the pathStr got substringed for that.', points);\r\n    if (!tail) { pt1 = points[1]; pt2 = points[0]; } else { pt1 = points[0]; pt2 = points[1]; }\r\n    if (debug) { this.owner.markg(pt1, true, 'red'); this.owner.markg(pt2, false, 'blue'); }\r\n\r\n    U.pif(debug, 'size of head: ', svg, 'pt1:', pt1, 'pt2:', pt2, ', pts:', points, pathStr, oldPathStr);\r\n    this.appendTailHead2(tail, pt1, pt2); }\r\n\r\n  private appendTailHead2(tail: boolean, pt1: GraphPoint, pt2real: GraphPoint, debug: boolean = false): void {\r\n    const m = GraphPoint.getM(pt1, pt2real);\r\n    const svg: SVGSVGElement = tail ? this.edgeTail : this.edgeHead;\r\n    let shell: SVGGElement = tail ? this.tailShell : this.headShell;\r\n    const HeadSize: GraphSize = U.getSvgSize(svg);\r\n\r\n    const firstEdgePointHtml: Node = this.html.nextElementSibling;\r\n    if (!shell) {\r\n      shell = U.newSvg('g');\r\n      shell.appendChild(svg);\r\n      if (tail) { this.tailShell = shell; } else { this.headShell = shell; }\r\n      if (firstEdgePointHtml) {\r\n        this.shell.insertBefore(shell, firstEdgePointHtml); }\r\n      else { this.shell.appendChild(shell); }\r\n      this.addEventListeners(false, true);\r\n    }\r\n    // const HeadSize: GraphSize = this.owner.toGraphCoordS(U.sizeof(this.edgeHead));\r\n    debug = false;\r\n    if (debug) { this.owner.markg(pt1, true, 'white'); this.owner.markg(pt2real, false, 'green'); }\r\n    U.pif(debug, 'size of head: ', HeadSize, 'pt1:', pt1, 'pt2:', pt2real, 'm:', m);\r\n    if (m === Number.POSITIVE_INFINITY) {\r\n      // link hit on top\r\n      (svg).setAttributeNS(null, 'x', '' + (pt1.x - HeadSize.w / 2));\r\n      (svg).setAttributeNS(null, 'y', '' + (pt1.y - HeadSize.h));\r\n    } else if (m === Number.NEGATIVE_INFINITY) {\r\n      // link hit on bot\r\n      (svg).setAttributeNS(null, 'y', '' + (pt1.y));\r\n      (svg).setAttributeNS(null, 'x', '' + (pt1.x - HeadSize.w / 2));\r\n    }/* else if (U.isPositiveZero(m)) {\r\n      // link hit on left\r\n      (svg).setAttributeNS(null, 'y', '' + (pt1.y - HeadSize.h / 2));\r\n      (svg).setAttributeNS(null, 'x', '' + (pt1.x - HeadSize.w));\r\n    } else if (U.isNegativeZero(m)) {\r\n      // link hit on right\r\n      (svg).setAttributeNS(null, 'y', '' + (pt1.y - HeadSize.h / 2));\r\n      (svg).setAttributeNS(null, 'x', '' + (pt1.x));\r\n    }*/ else {\r\n      const degreeRad: number = pt1.degreeWith(pt2real, true); // U.TanToDegree(m);\r\n      const center: GraphPoint = new GraphPoint(0, 0);\r\n      const pt2: GraphPoint = new GraphPoint(0, 0);\r\n      //todo: perchè zindex e position?\r\n      svg.style.zIndex = '' + 100;\r\n      svg.style.position = 'absolute';\r\n      if (pt1.x < pt2.x && pt1.y < pt2.y) {\r\n        U.pe(true, 'what\\'s this?? can that happen?');\r\n        svg.setAttributeNS(null, 'fill', 'blue'); }\r\n      pt2.x = pt1.x - HeadSize.w * Math.cos(degreeRad);\r\n      pt2.y = pt1.y - HeadSize.h * Math.sin(degreeRad);\r\n      center.x = (pt1.x + pt2.x) / 2;\r\n      center.y = (pt1.y + pt2.y) / 2;\r\n      const degree = U.RadToDegree(degreeRad) + 90; // don't know why +90.\r\n      if (debug) { this.owner.markg(pt2, false, 'blue'); }\r\n      shell.setAttributeNS(null, 'transform', 'rotate(' + degree + ' ' + center.x + ' ' + center.y + ')');\r\n      (svg).setAttributeNS(null, 'x', '' + (center.x - HeadSize.w / 2));\r\n      (svg).setAttributeNS(null, 'y', '' + (center.y - HeadSize.h / 2));\r\n      // link hit diagonally\r\n    }\r\n  }\r\n\r\n  getIndex(): number { return this.logic.edges.indexOf(this); }\r\n}\r\n","import {\r\n  Json,\r\n  U,\r\n  IEdge,\r\n  IVertex,\r\n  IPackage,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  IModel,\r\n  Status, Typedd\r\n} from '../../../common/Joiner';\r\n\r\nexport class IField {\r\n  owner: IVertex;\r\n  logic: Typedd;\r\n  private html: HTMLElement | SVGElement;\r\n\r\n  constructor(logic: Typedd) { this.logic = logic; }\r\n\r\n  getHtml(): HTMLElement | SVGElement { return this.html; }\r\n\r\n  refreshGUI(debug: boolean = true): void { }\r\n\r\n  remove(): void {\r\n    if (this.html && this.html.parentNode) { this.html.parentNode.removeChild(this.html); }\r\n    this.logic.field = null;\r\n    U.arrayRemoveAll(this.owner.fields, this);\r\n  }\r\n}\r\n","import {\r\n  Json,\r\n  U,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  IModel,\r\n  IClass,\r\n  Point,\r\n  DamContextMenuComponent,\r\n  Typedd,\r\n  Status,\r\n  Size,\r\n  Model,\r\n  IReference,\r\n  Dictionary,\r\n  DetectZoom,\r\n  PropertyBarr,\r\n  MClass,\r\n  MReference,\r\n  M2Reference,\r\n  EOperation,\r\n  EParameter,\r\n  MAttribute, MeasurableArrays, IPoint, GraphSize, GraphPoint, StyleComplexEntry, Type, EEnum, ELiteral, ExtEdge, IClassifier\r\n} from '../../../common/Joiner';\r\nimport MouseMoveEvent = JQuery.MouseMoveEvent;\r\nimport MouseDownEvent = JQuery.MouseDownEvent;\r\nimport MouseUpEvent = JQuery.MouseUpEvent;\r\nimport MouseEnterEvent = JQuery.MouseEnterEvent;\r\nimport MouseLeaveEvent = JQuery.MouseLeaveEvent;\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\nimport ContextMenuEvent = JQuery.ContextMenuEvent;\r\nimport KeyDownEvent = JQuery.KeyDownEvent;\r\nimport KeyUpEvent = JQuery.KeyUpEvent;\r\nimport KeyPressEvent = JQuery.KeyPressEvent;\r\nimport ResizableOptions = JQueryUI.ResizableOptions;\r\nimport DraggableOptions = JQueryUI.DraggableOptions;\r\nimport ResizableUIParams = JQueryUI.ResizableUIParams;\r\nimport DraggableEventUIParams = JQueryUI.DraggableEventUIParams;\r\n\r\nexport class IVertex {\r\n  static all: Dictionary = {};\r\n  static ID = 0;\r\n  static selected: IVertex = null;\r\n  static selectedGridWasOn: GraphPoint = null;\r\n  static selectedStartPt: GraphPoint = null;\r\n  private static oldEdgeLinkHoveringVertex: IVertex = null;\r\n  private static minSize: GraphSize = null;\r\n  classe: IClassifier;\r\n  // package: IPackage;\r\n  owner: IGraph;\r\n  fields: IField[] = [];\r\n  edgesStart: IEdge[] = [];\r\n  edgesEnd: IEdge[] = [];\r\n  // styleRaw: SVGForeignObjectElement = null;\r\n  // style: SVGForeignObjectElement = null;\r\n  // position: GraphPoint;\r\n  size: GraphSize;\r\n  contains: IVertex[];\r\n  id: number;\r\n  private htmlForeign: SVGForeignObjectElement;\r\n  private html: HTMLElement;\r\n  private Vmarks: Dictionary<string, SVGRectElement> = {};\r\n  private static defaultSize: GraphSize = null;\r\n\r\n  static staticinit(): GraphPoint {\r\n    const g: GraphPoint = new GraphPoint(0, 0);\r\n    g.x = 'prevent_doublemousedowncheck' as any;\r\n    g.y = 'prevent_doublemousedowncheck' as any;\r\n    IVertex.minSize = new GraphSize(null, null, 0, 0);\r\n    IVertex.defaultSize = new GraphSize(5, 5, 201, 41);\r\n    return IVertex.selectedGridWasOn = g; }\r\n/*\r\n  static linkVertexMouseDownButton(e: MouseDownEvent): void {\r\n    const ref: IReference = ModelPiece.get(e) as IReference;\r\n    U.pe(!(ref instanceof IReference), 'linkVertexButtons are currently only allowed on IReferences.');\r\n    const edges: IEdge[] = ref.getEdges();\r\n    U.pe(!edges, 'ref.edges === null', ref);\r\n    let edge: IEdge;\r\n    let index: number;\r\n    if (ref.getModelRoot().isMM()) { edge = edges[index = 0]; } else\r\n    if (ref.upperbound > 0 && edges.length >= ref.upperbound) { edge = edges[index = ref.upperbound - 1]; }\r\n    else { edge = new IEdge(ref); index = edges.length - 1; }\r\n    if (!edge) edge = new IEdge(ref);\r\n    IVertex.linkVertexMouseDown(e, edge); }*/\r\n\r\n  static linkVertexMouseDown(e: MouseDownEvent, edge: IEdge = null, location: GraphPoint = null): void {\r\n    if (e) { e.stopPropagation(); }\r\n    if (IEdge.edgeChanging) { IEdge.edgeChanging.owner.edgeChangingAbort(e); }\r\n    edge = edge ? edge : IEdge.get(e);\r\n    U.pe(!edge, 'IVertex.linkVertexMouseDown() failed to get edge:', e);\r\n    const logic: IClass | IReference = edge.logic;\r\n    const classe: IClass = logic instanceof IClass ? logic : null;\r\n    const ref: IReference = logic instanceof IReference ? logic : null;\r\n    // U.pe( !ref, 'The .LinkVertex element must be inserted only inside a reference field.');\r\n    IEdge.edgeChanging = edge;\r\n    edge.useRealEndVertex = false;\r\n    edge.useMidNodes = true;\r\n    edge.tmpEnd = location ? location : GraphPoint.fromEvent(e);\r\n    U.pe(!edge.tmpEnd, 'failed to get coordinates from event:', e);\r\n    edge.tmpEndVertex = null;\r\n    // edge.tmpEndVertex = ref.parent.getVertex();\r\n    edge.refreshGui(); }\r\n\r\n  static getvertex(e: Event | MouseEvent | MouseDownEvent | MouseUpEvent | MouseMoveEvent | MouseEnterEvent | MouseLeaveEvent | ClickEvent\r\n    | KeyDownEvent | KeyUpEvent | KeyPressEvent | ChangeEvent): IVertex {\r\n    return IVertex.getvertexByHtml(e.currentTarget as HTMLElement | SVGElement); }\r\n\r\n  static getvertexByHtml(node: HTMLElement | SVGElement): IVertex {\r\n    U.pe(!node || !(node instanceof Element), 'getVertexByHtml: parameter is not a DOM node:', node);\r\n    while (!node.dataset.vertexID) { node = node.parentNode as HTMLElement | SVGElement; }\r\n    // console.log('getVertex by id:' + node.dataset.vertexID, 'all:', IVertex.all);\r\n    return IVertex.getByID(+(node.dataset.vertexID)); }\r\n\r\n  static getByID(id: number): IVertex { return IVertex.all[id]; }\r\n\r\n  static FieldNameChanged(e: ChangeEvent) {\r\n    const html: HTMLElement | SVGElement = e.currentTarget;\r\n    const modelPiece: ModelPiece = ModelPiece.getLogic(html);\r\n    modelPiece.fieldChanged(e);\r\n    modelPiece.getModelRoot().graph.propertyBar.show(null, html, null, true);\r\n    // $(html).trigger('click'); // updates the propertyBar\r\n    // const m: IModel = modelPiece.getModelRoot();\r\n    const mm: IModel = Status.status.mm;\r\n    const m: IModel = Status.status.m;\r\n    setTimeout( () => { mm.refreshGUI(); m.refreshGUI(); }, 1); }\r\n\r\n  static ChangePropertyBarContentClick(e: ClickEvent, isEdge: IEdge = null): ModelPiece {\r\n    const html: HTMLElement | SVGElement = e.target; // todo: approfondisci i vari tipi di classType (current, orginal...)\r\n    const modelPiece: ModelPiece = ModelPiece.getLogic(html);\r\n    const model: IModel = modelPiece.getModelRoot();\r\n    U.pe(!modelPiece, 'failed to get modelPiece from html:', html);\r\n    const pbar: PropertyBarr = model.graph.propertyBar;\r\n    pbar.show(modelPiece, html, isEdge, false);\r\n    return modelPiece; }\r\n\r\n  static GetMarkedWith(markKey: string, colorFilter: string = null): IVertex[] {\r\n    const ret: IVertex[] = [];\r\n    for (const id in IVertex.all) {\r\n      if (!IVertex.all[id]) { continue; }\r\n      const vertex: IVertex = IVertex.all[id];\r\n      if (vertex.isMarkedWith('refhover', colorFilter)) { ret.push(vertex); } }\r\n    return ret; }\r\n\r\n  constructor(logical: IClassifier, size: GraphSize = null) {\r\n    this.id = IVertex.ID++;\r\n    IVertex.all[this.id] = this;\r\n    const graph: IGraph = logical.getModelRoot().graph;\r\n    this.logic(logical);\r\n    if (graph) { graph.addVertex(this); }\r\n    this.contains = [];\r\n    this.fields = [];\r\n    this.edgesStart = [];\r\n    this.edgesEnd = [];\r\n    this.classe = logical;\r\n    this.classe.vertex = this;\r\n    this.setGraph(logical.getModelRoot().graph);\r\n    if (!size) {\r\n      size = IVertex.defaultSize;\r\n      const gsize: Size = this.owner.getSize();\r\n      size.x = this.owner.scroll.x + (gsize.w - size.w) / 2;\r\n      size.y = this.owner.scroll.y + (gsize.h - size.h) / 2;\r\n    }\r\n    this.size = size;\r\n    this.refreshGUI();\r\n    // this.refreshGUI(); // need both refresh\r\n  }\r\n\r\n  mark(markb: boolean, key: string, color: string = 'red', radiusX: number = 10, radiusY: number = 10,\r\n       width: number = 5, backColor: string = 'none', extraOffset: GraphSize = null): void {\r\n    if (!this.isDrawn()) { return; }\r\n    if (color === null) { color = 'yellow'; }\r\n    if (radiusX === null) { radiusX = 10; }\r\n    if (radiusY === null) { radiusY = 10; }\r\n    if (backColor === null) { backColor = 'none'; }\r\n    if (width === null) { width = 5; }\r\n    let mark: SVGRectElement = this.Vmarks[key];\r\n    if (key === 'refhover') { // crosshair (+), alias (default+link), cell (excel)\r\n      const vertexRoot: SVGForeignObjectElement = this.htmlForeign;\r\n      const $inputs = $(vertexRoot).find('input, textarea, select, button');\r\n      let cursor: string = null;\r\n      console.log('markedHover', markb, vertexRoot, $inputs);\r\n      if (markb) {\r\n        vertexRoot.style.cursor = cursor = (color === 'red' ? 'no-drop' : 'crosshair'); // NO important, bugga e non setta il campo.\r\n      } else { vertexRoot.style.removeProperty('cursor'); }\r\n      let i: number;\r\n      for (i = 0; i < $inputs.length; i++) {\r\n        if (!cursor) { $inputs[i].style.removeProperty('cursor'); } else { $inputs[i].style.cursor = cursor; }\r\n      }\r\n    }\r\n    // mark off\r\n    if (!markb) { // se non deve essere marchiato\r\n      if (mark) { // ma lo è attualmente\r\n        if (mark.parentNode) { mark.parentNode.removeChild(mark); }\r\n        delete this.Vmarks[key]; }\r\n      return; }\r\n    // mark on\r\n    if (!extraOffset) { const same = 5; extraOffset = new GraphSize(same, same, same, same); }\r\n    mark = this.Vmarks[key] = U.newSvg<SVGRectElement>('rect');\r\n    const size: GraphSize = this.getSize();\r\n    // console.log('extraoffset:', extraOffset, 'size:', size);\r\n    size.x -= extraOffset.x;\r\n    size.y -= extraOffset.y;\r\n    size.w += extraOffset.x + extraOffset.w;\r\n    size.h += extraOffset.y + extraOffset.h;\r\n    U.setSvgSize(mark, size, null);\r\n    /*\r\n    mark.setAttributeNS(null, 'x', '' + size.x);\r\n    mark.setAttributeNS(null, 'y', '' + size.y);\r\n    mark.setAttributeNS(null, 'width', '' + (size.w));\r\n    mark.setAttributeNS(null, 'height', '' + (size.h));*/\r\n    mark.setAttributeNS(null, 'rx', '' + (radiusX));\r\n    mark.setAttributeNS(null, 'ry', '' + (radiusY));\r\n    mark.setAttributeNS(null, 'stroke', '' + (color));\r\n    mark.setAttributeNS(null, 'stroke-width', '' + (width));\r\n    mark.setAttributeNS(null, 'fill', '' + (backColor));\r\n    this.logic().getModelRoot().graph.vertexContainer.prepend(mark); }\r\n\r\n  getStartPoint(nextPt: GraphPoint = null): GraphPoint { return this.getMidPoint(nextPt); }\r\n  getEndPoint(nextPt: GraphPoint = null): GraphPoint { return this.getMidPoint(nextPt); }\r\n  getMidPoint(prevPt: GraphPoint = null): GraphPoint {\r\n    // NB: MAI fare sizeof() di un SVGForeignObjectElement, ridà valori sballati. fallo ai suoi childs.\r\n    const html: HTMLElement = this.getHtml();\r\n    const $htmlEP = $(html).find('.EndPoint');\r\n    let htmlEP: HTMLElement;\r\n    let endPointSize: Size;\r\n    let pt: GraphPoint;\r\n    if ($htmlEP.length === 0) { htmlEP = html; } else { htmlEP = $htmlEP[0]; }\r\n    endPointSize = U.sizeof(htmlEP);\r\n    // console.log('htmlsize:', htmlSize, 'childSize:', U.sizeof(html.firstChild as HTMLElement));\r\n    // console.log('real size(', htmlSize, ') vs graphSize(', this.toGraphCoordS(htmlSize), '), html:', html);\r\n    const endPointGSize: GraphSize = this.owner.toGraphCoordS(endPointSize);\r\n    const vertexGSize = this.getSize();\r\n    pt = endPointGSize.tl();\r\n    pt.x += endPointGSize.w / 2;\r\n    pt.y += endPointGSize.h / 2;\r\n    if (! prevPt ) { return pt; }\r\n    pt = GraphSize.closestIntersection(vertexGSize, prevPt, pt, this.owner.grid);\r\n    U.pe(!U.isOnEdge(pt, vertexGSize), 'not on Vertex edge.');\r\n    return pt; }\r\n\r\n  setSize(size: GraphSize, refreshVertex: boolean = true, refreshEdge: boolean = true): void {\r\n    if (!size) return;\r\n    this.size = size;\r\n    const htmlForeign: SVGForeignObjectElement = this.getHtmlRawForeign();\r\n    U.setSvgSize(htmlForeign, this.size, IVertex.defaultSize);\r\n    // todo: cerca tutti gli as string, non è un vero cast ma solo un cambiotipo senza trasformazione, crea errori.\r\n    // const spostamento: GraphPoint = this.size.tl().subtract(oldSize.tl(), true);\r\n    // todo: cambia struttura interna size in tl+br, controlla tutti i riferimenti a tl(newinstnce = false) e considera di cambiarli a true.\r\n    if (refreshVertex) { this.refreshGUI(); }\r\n    if (!refreshEdge) { return; }\r\n    const refEnd: IEdge[] = this.edgesEnd; // this.getReferencesEnd();\r\n    const refStart: IEdge[] = this.edgesStart; // this.getReferencesStart();\r\n    let i: number;\r\n    for (i = 0; i < refEnd.length; i++) { if (refEnd[i]) { refEnd[i].refreshGui(); } }\r\n    for (i = 0; i < refStart.length; i++) { if (refStart[i]) { refStart[i].refreshGui(); } } }\r\n\r\n  private draw(): void {\r\n    try { this.draw0(); }\r\n    catch(e) {\r\n      U.pw(true, 'failed to draw vertex of \"' + this.logic().printableNameshort() + '\".', e);\r\n    }\r\n  }\r\n  private draw0(): void {\r\n    /*const htmlRaw: SVGForeignObjectElement = U.newSvg('foreignObject');\r\n    htmlRaw.appendChild(this.classe.getStyleObj().html);*/\r\n    const style: StyleComplexEntry = this.classe.getStyle();\r\n    const htmlRaw: SVGForeignObjectElement = style.html as SVGForeignObjectElement;\r\n\r\n    U.pe(!this.classe || !(htmlRaw instanceof Element), 'class null?', this, htmlRaw);\r\n    this.setHtmls(this.classe, htmlRaw);\r\n    if (this.classe instanceof IClass) this.drawC(this.classe);\r\n    if (this.classe instanceof EEnum) this.drawE(this.classe);\r\n    this.addEventListeners();\r\n    U.fixHtmlSelected($(htmlRaw));\r\n    this.autosize(false, false);\r\n    Type.updateTypeSelectors($(this.getHtml()));\r\n    let onrefresh: string = this.htmlForeign.getAttribute('onrefreshgui');\r\n    const $htmlraw = $(htmlRaw);\r\n    let i: number;\r\n    const parenttmp = htmlRaw.parentNode;\r\n    const next = htmlRaw.nextSibling;\r\n    if (parenttmp) parenttmp.removeChild(htmlRaw);\r\n    // duplicate id removal. TODO: non funziona, forse rileva ancora gli id del vecchio html generato e risultano già inseriti on refresh.\r\n    /*const idarr = $htmlraw.find('[id]').addBack('[id]');\r\n    for (i = 0; i < idarr.length; i++) {\r\n      if (!document.getElementById(idarr[i].id)) { continue; }\r\n      idarr[i].innerHTML = '';\r\n      U.clearAttributes(idarr[i]);\r\n      idarr[i].style.display = 'none';\r\n    }*/\r\n    const scripts: JQuery<HTMLScriptElement> =  $htmlraw.find('script') as any;\r\n\r\n    for(i = 0; i < scripts.length; i++) {\r\n      // clone the script, empty it while keeping (to keep same indexedPath structure as the template), execute id\r\n      // todo: problema: tutti i successivi elementi con id statici verranno rimossi e avranno struttura template != struttura ongraph\r\n      //  e falliranno a mostrare il clicked fragment nello styleeditor.\r\n      // non va bene: se cambio lo stile quello script appeso al body rimane e devo aggiornare la pagina.\r\n      // since newlines are replaced with spaces, scripts inline // comments are not allowed. use /*comments*/\r\n      // const oldid = scripts[i].id;\r\n      // delete scripts[i].id;\r\n\r\n      //console.log('script:', scripts[i], 'length:', scripts[i].innerHTML.length, scripts[i].innerText.length);\r\n      if (!scripts[i].innerHTML.length) { continue; } // \"deleted\" empty element\r\n      const cloned = scripts[i];\r\n      /*const cloned: HTMLScriptElement = U.cloneHtml(scripts[i]); bug: probably getbyid is working on detached elements too.\r\n      it is altering the ViewRule.\r\n      cloned.id = oldid;\r\n      scripts[i].innerHTML = '';\r\n      document.body.appendChild(cloned);*/\r\n      console.log('eval:', cloned.innerHTML);\r\n      try { eval(cloned.innerHTML); } catch(e) { U.pw(true, 'error in user script of \"' + this.logic().printableName()+ '\":', e, 'script:', cloned); }\r\n    }\r\n    if (parenttmp) { if (next) parenttmp.insertBefore(htmlRaw, next); else parenttmp.appendChild(htmlRaw); }\r\n    // console.log('onrefresh:', onrefresh, 'window.onrefresh:', window[onrefresh]);\r\n    if (onrefresh) { window[onrefresh](this, this.logic(), htmlRaw); }\r\n  }\r\n\r\n  private autosize(refreshVertex: boolean = true, refreshEdge: boolean = true, debug: boolean = false): IVertex {\r\n    const html: HTMLElement = this.getHtml();\r\n    const autosize: string = html.dataset.autosize;\r\n    // console.log('autosize() ? ', modelPiece.html, ' dataset.autosize:', autosize);\r\n    U.pe(autosize !== '1' && autosize !== 't' && autosize !== 'true',\r\n      'foreignObject:first-child must have data-autosize=\"true\", and style {height: 100%;} required for now.' +\r\n      ' html:', html, 'foreign:', this.htmlForeign);\r\n    if (autosize !== '1' && autosize !== 't' && autosize !== 'true') { return this; }\r\n    // console.log('autosize() started');\r\n    if (html.style.height !== 'auto') {\r\n      U.pw(true, 'To use autosize the root node must have \"height: auto;\", this has been automatically solved. was:' + html.style.height);\r\n      html.style.height = 'auto'; }\r\n    // const zoomLevel: number = DetectZoom.device();\r\n    const actualSize: GraphSize = this.owner.toGraphCoordS(U.sizeof(html));\r\n    // const minSize: GraphSize = new GraphSize(null, null, 200, 30);\r\n    actualSize.min(IVertex.minSize, false);\r\n    U.pe(actualSize.h === 100, '', IVertex.minSize, actualSize, html);\r\n    this.setSize(new GraphSize(this.size.x, this.size.y, actualSize.w, actualSize.h), refreshVertex, refreshEdge);\r\n    return this; }\r\n\r\n  private drawE(data: EEnum, canfail: boolean = true): void {\r\n    try { this.drawE0(data); }\r\n    catch(e) {\r\n      if (!canfail) { throw e; }\r\n      const style = data.getStyle();\r\n      const styletype = style.isinstanceshtml ? 'inherited' : ( style.isownhtml ? 'personal' : 'default');\r\n      U.pw(true, 'failed to draw ' + styletype + ' style of enum \"' + data.printableNameshort() + '\", his style will be resetted.', e);\r\n      if (style.isinstanceshtml) style.view.htmli = null;\r\n      if (style.isownhtml) style.view.htmlo = null;\r\n      this.htmlForeign = null;\r\n      this.drawE(data, false); }\r\n  }\r\n  private drawC(data: IClass, canfail: boolean = true): void {\r\n    try { this.drawC0(data); }\r\n    catch(e) {\r\n      if (!canfail) { throw e; }\r\n      const m: IModel = data.getModelRoot();\r\n      const style = data.getStyle();\r\n      const styletype = style.isinstanceshtml ? 'inherited' : ( style.isownhtml ? 'personal' : 'default');\r\n      U.pw(true, 'failed to draw ' + styletype + ' style of ' + (m.isM() ? 'm1-object' : 'class') + ' \"' + data.printableNameshort() + '\", his style will be resetted.', e);\r\n      if (style.isinstanceshtml) style.view.htmli = null;\r\n      if (style.isownhtml) style.view.htmlo = null;\r\n      this.htmlForeign = null;\r\n      this.drawC(data, false); }\r\n  }\r\n  drawO(data: EOperation, canfail: boolean = true): Element {\r\n    try { return this.drawO0(data); }\r\n    catch(e) {\r\n      if (!canfail) { throw e; }\r\n      const m: IModel = data.getModelRoot();\r\n      const style = data.getStyle();\r\n      const styletype = style.isinstanceshtml ? 'inherited' : ( style.isownhtml ? 'personal' : 'default');\r\n      U.pw(true, 'failed to draw ' + styletype + ' style of ' + m.getPrefix() + '-operation \"' + data.printableNameshort() + '\", his style will be resetted.', e);\r\n      if (style.isinstanceshtml) style.view.htmli = null;\r\n      if (style.isownhtml) style.view.htmlo = null;\r\n      return this.drawO(data, false); }\r\n  }\r\n  drawParam(data: EParameter, canfail: boolean = true): Element {\r\n    try { return this.drawParam0(data); }\r\n    catch(e) {\r\n      if (!canfail) { throw e; }\r\n      const m: IModel = data.getModelRoot();\r\n      const style = data.getStyle();\r\n      const styletype = style.isinstanceshtml ? 'inherited' : ( style.isownhtml ? 'personal' : 'default');\r\n      U.pw(true, 'failed to draw ' + styletype + ' style of ' + m.getPrefix() + '-parameter \"' + data.printableNameshort() + '\", his style will be resetted.', e);\r\n      if (style.isinstanceshtml) style.view.htmli = null;\r\n      if (style.isownhtml) style.view.htmlo = null;\r\n      return this.drawParam(data, false); }\r\n  }\r\n  drawEChild(data: ELiteral): Element { return this.drawTerminal(data); }\r\n  drawA(data: IAttribute): Element { return this.drawTerminal(data); }\r\n  drawR(data: IReference): Element { return this.drawTerminal(data); }\r\n  drawTerminal(data: Typedd, canfail: boolean = true): Element {\r\n    try { return this.drawTerminal0(data); }\r\n    catch(e) {\r\n      if (!canfail) { throw e; }\r\n      const m: IModel = data.getModelRoot();\r\n      const style = data.getStyle();\r\n      const styletype = style.isinstanceshtml ? 'inherited' : ( style.isownhtml ? 'personal' : 'default');\r\n      U.pw(true, 'failed to draw ' + styletype + ' style of ' + m.getPrefix() + '\"' + data.printableNameshort() + '\", his style will be resetted.', e);\r\n      if (style.isinstanceshtml) style.view.htmli = null;\r\n      if (style.isownhtml) style.view.htmlo = null;\r\n      return this.drawTerminal(data, false); }\r\n  }\r\n  private drawE0(logic: EEnum): void {\r\n    if (!this.htmlForeign) {\r\n      const style: StyleComplexEntry = this.classe.getStyle();\r\n      this.htmlForeign = style.html as SVGForeignObjectElement; }\r\n    const html: SVGForeignObjectElement = this.htmlForeign;\r\n    /// append childrens:\r\n    const $eContainer = $(html).find('.LiteralContainer');\r\n    let i: number;\r\n    for (i = 0; i < logic.childrens.length; i++) {\r\n      const field = this.drawEChild(logic.childrens[i]);\r\n      $eContainer.append(field); }\r\n  }\r\n  private drawC0(data: IClass): void {\r\n    // console.log('drawC()');\r\n    if (!this.htmlForeign) {\r\n      const style: StyleComplexEntry = this.classe.getStyle();\r\n      this.htmlForeign = style.html as SVGForeignObjectElement; }\r\n    const html: SVGForeignObjectElement = this.htmlForeign;\r\n    /// append childrens:\r\n    const $attContainer = $(html).find('.AttributeContainer');\r\n    const $refContainer = $(html).find('.ReferenceContainer');\r\n    const $opContainer = $(html).find('.OperationContainer');\r\n\r\n    // U.pe($attContainer.length !== 1, 'there must be exactly one element with class \"AttributeContainer\".', $attContainer);\r\n    // U.pe($refContainer.length !== 1, 'there must be exactly one element with class \"ReferenceContainer\".', $refContainer);\r\n    // U.pe($opContainer.length !== 1, 'there must be exactly one element with class \"OperationContainer\".', $opContainer);\r\n    // const attContainer = $attContainer[0];\r\n    // const refContainer = $refContainer[0];\r\n    // const opContainer = $opContainer[0];\r\n\r\n    let i: number;\r\n\r\n    for (i = 0; i < data.attributes.length; i++) {\r\n      const field = this.drawA(data.attributes[i]);\r\n      field.id = 'ID' + data.attributes[i].id;\r\n      $attContainer.append(field);\r\n    }\r\n\r\n    for (i = 0; i <  data.references.length; i++) {\r\n      const field = this.drawR(data.references[i]);\r\n      field.id = 'ID' + data.references[i].id;\r\n      $refContainer.append(field);\r\n    }\r\n\r\n    const operations: EOperation[] = data.getOperations();\r\n    for (i = 0; i < operations.length; i++) {\r\n      // console.log('append ref:', data.references[i]);\r\n      const field = this.drawO(operations[i]);\r\n      field.id = 'ID' + operations[i].id;\r\n      $opContainer.append(field); }\r\n  }\r\n  getStartPointHtml(): HTMLElement | SVGElement {\r\n    const html: HTMLElement = this.getHtml();\r\n    const $start = $(html).find('.StartPoint');\r\n    if ($start.length > 0) { return $start[0]; } else { return html; } }\r\n  getEndPointHtml(): HTMLElement | SVGElement {\r\n    const html: HTMLElement | SVGElement = this.getHtml();\r\n    const $start = $(html).find('.EndPoint');\r\n    if ($start.length > 0) { return $start[0]; }\r\n    return (html.tagName.toLowerCase() === 'foreignobject') ? html.firstChild as HTMLElement | SVGElement : html; }\r\n\r\n  private setHtmls(data: IClassifier, htmlRaw: SVGForeignObjectElement): SVGForeignObjectElement {\r\n    // console.log('drawCV()');\r\n    const graphHtml: HTMLElement | SVGElement = this.owner.vertexContainer;\r\n    const $graphHtml: JQuery<HTMLElement | SVGElement> = $(graphHtml);\r\n    if (graphHtml.contains(this.htmlForeign)) { graphHtml.removeChild<SVGElement>(this.htmlForeign); }\r\n    // console.log('drawing Vertex[' + data.name + '] with style:', htmlRaw, 'logic:', data);\r\n    // console.log('drawVertex: template:', htmlRaw);\r\n    const foreign: SVGForeignObjectElement = this.htmlForeign = U.textToSvg(U.replaceVars<SVGForeignObjectElement>(data, htmlRaw, true).outerHTML);\r\n    const $foreign = $(foreign);\r\n    data.linkToLogic(foreign);\r\n    const $elementWithID = $foreign.find('[id]');\r\n    let i: number;\r\n    // duplicate prevention.\r\n    for (i = 0; i < $elementWithID.length; i++) {\r\n      const elem = $elementWithID[i];\r\n      const id = '#' + elem.id;\r\n      const $duplicate = $graphHtml.find(id);\r\n      if ($duplicate.length) { $foreign.remove(id); }\r\n    }\r\n    graphHtml.appendChild(foreign);\r\n    foreign.id = 'ID' + data.id;\r\n    foreign.dataset.vertexID = '' + this.id;\r\n    // graphHtml.innerHTML += foreign.outerHTML;\r\n    // unica soluzione: chiedi a stack e crea manualmente il foreignobject copiando tutti gli attributi.\r\n    // graphHtml.appendChild<HTMLElement | SVGElement>(foreign); problema: non renderizza gli svg che non sono stati creati con document.createElementNS()\r\n    // $(graphHtml).append(foreign.outerHTML); doesn't work either\r\n    // console.log('this.style:', this.style);\r\n    // console.log('this.size? (' + (!!this.size) + ': setSize() : ', U.getSvgSize(this.style));\r\n    // console.log('drawC_Vertex. size:', this.size, data.html, this.size = U.getSvgSize(data.html as SVGForeignObjectElement));\r\n    if (!this.size) { this.size = this.getSize(); } else { this.setSize(this.size, false, false); }\r\n\r\n    U.pe(this.htmlForeign.tagName.toLowerCase() !== 'foreignobject', 'The custom style root must be a foreignObject node.', this.htmlForeign);\r\n    U.pe(this.htmlForeign.childNodes.length !== 1, 'The custom style must have a single child node,' +\r\n      ' without spaces between <foreignObject> and the next tag. found ' + this.htmlForeign.childNodes.length + ' childrens.',\r\n      this.htmlForeign, this.htmlForeign.childNodes);\r\n    // this.html = this.htmlForeign.firstChild as HTMLElement;\r\n    return foreign; }\r\n\r\n  drawO0(data: EOperation): Element {\r\n    const html: Element =  this.drawTerminal(data);\r\n    const $html = $(html);\r\n    const $signature = $html.find('.specialjs.signature');\r\n    let i: number;\r\n    for (i = 0; i < $signature.length; i++) {\r\n      const htmldataset: HTMLElement = $signature[0] as HTMLElement;\r\n      data.setSignatureHtml(htmldataset, ', ', +htmldataset.dataset.maxargumentchars, +htmldataset.dataset.maxarguments); }\r\n    const $detailHtml: JQuery<HTMLElement> = $html.find('.operationDetail') as JQuery<HTMLElement> ;\r\n    $signature.off('click.show').on('click.show', (e: Event) => {\r\n      const target: HTMLElement | SVGElement = e.target as HTMLElement | SVGElement;\r\n      let avoidToggle: boolean;\r\n      switch (target.tagName.toLowerCase()) {\r\n        case 'input':\r\n        case 'textarea':\r\n        case 'select': avoidToggle = true; break;\r\n        default: avoidToggle = ((target instanceof HTMLElement) && target.isContentEditable); break; }\r\n      if (avoidToggle) { return; }\r\n      data.detailIsOpened = !data.detailIsOpened;\r\n      data.detailIsOpened ? $detailHtml.show() : $detailHtml.hide();\r\n      this.autosize(false, true);\r\n    });\r\n    data.detailIsOpened ? $detailHtml.show() : $detailHtml.hide();\r\n\r\n    $html.find('input.name').val(data.name);\r\n    const $parameterList = $detailHtml.find('.parameterList');\r\n    let j: number;\r\n    for (j = 0; j < $parameterList.length; j++) {\r\n      const parameterList = $parameterList[j];\r\n      // U.clear(parameterList);\r\n      const lastChild: Node = parameterList.childNodes[parameterList.childNodes.length - 1];\r\n      for (i = 0; i < data.childrens.length; i++) {\r\n        const field = this.drawParam(data.childrens[i]);\r\n        parameterList.insertBefore(field, lastChild); }\r\n      // for (i = oldChilds.length; i > 0; i--) { parameterList.prepend(oldChilds.item(i)); }\r\n    }\r\n\r\n    const $addParamButton = $html.find('.addParameterButton');\r\n    // $addParamButton.html('<button style=\"width: 100%; height: 100%;\">+</button>');\r\n    $addParamButton.off('click.add').on('click.add', (e: Event) => { data.addParameter(); this.refreshGUI(); });\r\n    return html; }\r\n\r\n  drawParam0(data: EParameter): Element {\r\n    let i: number;\r\n    const html: Element = this.drawTerminal(data);\r\n    const $html = $(html);\r\n    // const $typeHtml: JQuery<HTMLSelectElement> = $html.find('select.fullType') as JQuery<HTMLSelectElement>;\r\n    const $nameHtml: JQuery<HTMLInputElement> = $html.find('input.name') as JQuery<HTMLInputElement>;\r\n    $nameHtml.val(data.name);\r\n    return html; }\r\n\r\n\r\n  drawTerminal0(data: Typedd): Element {\r\n    data.replaceVarsSetup();\r\n    const style: StyleComplexEntry = data.getStyle();\r\n    const htmlRaw: Element = style.html;\r\n    U.pe(!htmlRaw, 'failed to get attribute style:', data);\r\n    // todo: sposta l'opearzione nei Graph.Field\r\n    const html: Element = U.replaceVars<Element>(data, htmlRaw, true);\r\n    data.linkToLogic(html as any);\r\n    return html; }\r\n\r\n  toEdge(start: IVertex, end: IVertex): IEdge {\r\n    // todo\r\n    U.pe(true, 'vertexToEdge() todo.');\r\n    return null; }\r\n\r\n  private addEventListeners(): void {\r\n    // todo: viene chiamato 1 volta per ogni elementNode con modelID, ma io eseguo tutto dalla radice.\r\n    // quindi viene eseguito N +1 volte per ogni vertice dove N sono i suoi (attributes + references)\r\n    // console.log(html.tagName, html.dataset.modelPieceID);\r\n    // if (html.tagName.toLowerCase() === 'foreignobject' && html.dataset.modelPieceID )\r\n    //   { html = html.firstChild as HTMLElement | SVGElement; }\r\n    // while (!(html.classList.contains('Vertex'))) { console.log(html); html = html.parentNode as HTMLElement | SVGElement; }\r\n    const $html = $(this.getHtmlRawForeign());\r\n    $html.off('mousedown.vertex').on('mousedown.vertex', (e: MouseDownEvent) => { this.onMouseDown(e); });\r\n    $html.off('mouseup.vertex').on('mouseup.vertex', (e: MouseUpEvent) => { this.onMouseUp(e); });\r\n    $html.off('mousemove.vertex').on('mousemove.vertex', (e: MouseMoveEvent) => { this.onMouseMove(e); });\r\n    $html.off('mouseenter.vertex').on('mouseenter.vertex', (e: MouseEnterEvent) => { this.onMouseEnter(e); });\r\n    $html.off('mouseleave.vertex').on('mouseleave.vertex', (e: MouseLeaveEvent) => { this.onMouseLeave(e); });\r\n    $html.off('click').on('click', (e: ClickEvent) => { this.onClick(e); });\r\n    // const $addFieldButtonContainer: JQuery<HTMLElement> = $html.find('.addFieldButtonContainer') as any as JQuery<HTMLElement>;\r\n    // this.setAddButtonContainer($addFieldButtonContainer[0]);\r\n    $html.find('.addFieldButton').off('click.addField').on('click.addField', (e: ClickEvent) => { this.addFieldClick(e); });\r\n    $html.find('.AddFieldSelect').off('change.addField').on('change.addField',  (e: ChangeEvent) => { this.addFieldClick(e as any); });\r\n    $html.find('input, select, textarea').off('change.fieldchange').on('change.fieldchange', (e: ChangeEvent) => IVertex.FieldNameChanged(e));\r\n    // NB: deve essere solo un off, oppure metti selettore .NOT(class) nel selettore dei 'select' di sopra\r\n    // if (!IVertex.contextMenu) { IVertex.contextMenu = new MyContextMenuClass(new ContextMenuService()); }\r\n    $html.off('contextmenu').on('contextmenu', (e: ContextMenuEvent): boolean => { return this.vertexContextMenu(e); });\r\n    $html.find('.Attribute, .Reference').off('contextmenu').on('contextmenu', (e: ContextMenuEvent): boolean => { return this.featureContextMenu(e); });\r\n    // $html.find('.LinkVertex').off('mousedown.setReference').on('mousedown.setReference', IVertex.linkVertexMouseDownButton);\r\n    const defaultResizeConfig: ResizableOptions = {};\r\n    const defaultDragConfig: DraggableOptions = {};\r\n    // NB: do not delete the apparantly useless dynamic functions.\r\n    // jqueryui is binding this to e.currentTarget and e.currentTarget to document.body, the dynamic function makes this instanceof iVertex again.\r\n    defaultResizeConfig.create = (e: Event, ui: ResizableUIParams) => this.measuringInit(ui, e);\r\n    defaultDragConfig.create = (e: Event, ui: DraggableEventUIParams) => this.measuringInit(ui, e);\r\n    defaultResizeConfig.resize = (e: Event, ui: ResizableUIParams) => this.measuringChanging(ui, e);\r\n    defaultDragConfig.drag = (e: Event, ui: DraggableEventUIParams) => this.measuringChanging(ui, e);\r\n    defaultResizeConfig.stop = (e: Event, ui: ResizableUIParams) => this.measuringChanged(ui, e);\r\n    defaultDragConfig.stop = (e: Event, ui: DraggableEventUIParams) => this.measuringChanged(ui, e);\r\n//     console.log('measurableElementSetup:', defaultResizeConfig, defaultDragConfig);\r\n    U.measurableElementSetup($html, defaultResizeConfig, defaultDragConfig); }\r\n\r\n  measuringInit(ui: ResizableUIParams | DraggableEventUIParams, e: Event): void {\r\n    const m = U.measurableGetArrays(null, e);\r\n    console.log('measuringInit:', ui, e, m);\r\n    let i: number;\r\n    const size: Size = U.sizeof(m.html);\r\n    const absTargetSize: Size = this.owner.getSize();\r\n    const logic: IClassifier = this.logic();\r\n    for (i = 0; i < m.variables.length; i++) { U.processMeasurableVariable(m.variables[i], logic, m.html, size, absTargetSize); }\r\n    for (i = 0; i < m.dstyle.length; i++) { U.processMeasurableDstyle(m.dstyle[i], logic, m.html, null, absTargetSize); }\r\n    for (i = 0; i < m.imports.length; i++) { U.processMeasurableImport(m.imports[i], logic, m.html, null, absTargetSize); }\r\n  }\r\n\r\n  measuringChanging(ui: ResizableUIParams | DraggableEventUIParams, e: Event, measurHtml: HTMLElement | SVGElement = null): void {\r\n    const m: MeasurableArrays = U.measurableGetArrays(measurHtml, e);\r\n    console.log('Changing.measurableHtml parsed special attributes:', m);\r\n    m.imports = [];\r\n    m.chainFinal = [];\r\n    // m.dstyle = [];\r\n    // m.rules = [];\r\n    // m.variables = [];\r\n    U.processMeasuring(this.logic(), m, ui);\r\n  }\r\n\r\n  measuringChanged(ui: ResizableUIParams | DraggableEventUIParams, e: Event, measurHtml: HTMLElement | SVGElement = null): void {\r\n    const m = U.measurableGetArrays(measurHtml, e);\r\n    console.log('Changed.measurableHtml parsed special attributes:', m);\r\n    m.chain = [];\r\n    m.imports = [];\r\n    U.processMeasuring(this.logic(), m, ui);\r\n  }\r\n\r\n\r\n  clickSetReference(e: ClickEvent | MouseUpEvent | MouseDownEvent, debug: boolean = true): void {\r\n    if (e) { e.stopPropagation(); e.preventDefault(); }\r\n    const edge: IEdge = IEdge.edgeChanging;\r\n    if (!edge) { return; }\r\n    U.pif(debug, 'setreferenceClick success!');\r\n    const vertexLogic: IClassifier = this.logic();\r\n    if (!(vertexLogic instanceof IClass)) return;\r\n    if (!edge.canBeLinkedTo(vertexLogic)) {\r\n      U.pif(debug, 'edge ', edge.logic, 'cannot be linked to ', vertexLogic, 'hoveringvertex:', this);\r\n      return; }\r\n    if (edge.logic instanceof MReference) edge.logic.linkClass(vertexLogic as MClass, edge.getIndex(), true);\r\n    if (edge.logic instanceof M2Reference) edge.logic.setType((vertexLogic as M2Class).getEcoreTypeName());\r\n    if (edge instanceof ExtEdge) {\r\n      U.arrayRemoveAll(edge.logic.extends, edge.end.logic() as M2Class);\r\n      U.ArrayAdd(edge.logic.extends, this.logic() as M2Class);\r\n    } else {\r\n      U.pe(edge.logic instanceof MClass, 'cst: class edges are currently not supported');\r\n    }\r\n    this.mark(false, 'refhover');\r\n    // altrimenti parte l'onClick su AddFieldButton quando fissi la reference.\r\n    // setTimeout( () => { IEdge.edgeChanging = null; }, 1);\r\n    IEdge.edgeChangingStopTime = Date.now();\r\n    IEdge.edgeChanging = null;\r\n    edge.tmpEnd = null;\r\n    edge.useMidNodes = true;\r\n    edge.useRealEndVertex = true;\r\n    edge.end = this;\r\n    edge.refreshGui(); }\r\n\r\n  onClick(e: ClickEvent): void {\r\n    IVertex.ChangePropertyBarContentClick(e); }\r\n\r\n\r\n  featureContextMenu(evt: ContextMenuEvent): boolean {\r\n    DamContextMenuComponent.contextMenu.show(new Point(evt.pageX, evt.pageY), '.Feature', evt.currentTarget);\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    return false; }\r\n\r\n  vertexContextMenu(evt: ContextMenuEvent): boolean {\r\n    DamContextMenuComponent.contextMenu.show(new Point(evt.pageX, evt.pageY), '.Vertex', evt.currentTarget);\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n    return false; }\r\n\r\n  onMouseDown(e: MouseDownEvent): void {\r\n    if (IEdge.edgeChanging) { this.clickSetReference(e); return; }\r\n    let tmp: HTMLElement = e.target as HTMLElement;\r\n    const thisHtml = this.getHtml();\r\n    // i will not move the vertex while moving a measurable children.\r\n    while (tmp && tmp !== thisHtml) { if (tmp.classList.contains('measurable')) { return; } tmp = tmp.parentElement; }\r\n    IVertex.selected = this;\r\n    if (IVertex.selectedGridWasOn.x as any === 'prevent_doublemousedowncheck') {\r\n      IVertex.selectedGridWasOn.x = IVertex.selected.owner.grid.x; }\r\n    if (IVertex.selectedGridWasOn.y as any === 'prevent_doublemousedowncheck') {\r\n      IVertex.selectedGridWasOn.y = IVertex.selected.owner.grid.y; }\r\n    IVertex.selected.owner.grid.x = null;\r\n    IVertex.selected.owner.grid.y = null;\r\n    IVertex.selectedStartPt = this.owner.toGraphCoord(new Point(e.pageX, e.pageY));\r\n    IVertex.selectedStartPt.subtract(this.size.tl(), false); }\r\n\r\n  onMouseUp(e: MouseUpEvent): void {\r\n    if (IEdge.edgeChanging) { this.clickSetReference(e); return; }\r\n    const v: IVertex = IVertex.selected;\r\n    if (!v) return;\r\n    v.owner.grid.x = IVertex.selectedGridWasOn.x;\r\n    v.owner.grid.y = IVertex.selectedGridWasOn.y;\r\n    IVertex.selectedGridWasOn.x = 'prevent_doublemousedowncheck' as any;\r\n    IVertex.selectedGridWasOn.y = 'prevent_doublemousedowncheck' as any;\r\n    this.owner.fitToGridS(v.size, false);\r\n    this.setSize(this.size, false, true);\r\n    IVertex.selected = null; }\r\n\r\n  onMouseMove(e: MouseMoveEvent): void { }\r\n  onMouseEnter(e: MouseEnterEvent): void { this.mouseEnterLinkPreview(e); }\r\n  onMouseLeave(e: MouseLeaveEvent): void { this.mouseLeaveLinkPreview(e); }\r\n\r\n  mouseEnterLinkPreview(e: MouseEnterEvent): void {\r\n    const edge: IEdge = IEdge.edgeChanging;\r\n    if (!edge) { return; }\r\n    const ref: IReference | IClass = edge.logic;\r\n    /*const edges: IEdge[] = ref.getEdges();\r\n    U.pe(!edges, 'ref.edges === null', ref);\r\n    let edge: IEdge;\r\n    if (ref.upperbound > 0 && edges.length - 1 >= ref.upperbound) { edge = edges[edges.length - 1]; } else { edge = new IEdge(ref); }*/\r\n    const html2: HTMLElement | SVGElement = e.currentTarget as HTMLElement | SVGGElement;\r\n    // while (html2 && html2.classList && !html2.classList.contains('vertexShell')) { html2 = html2.parentNode as HTMLElement | SVGElement;}\r\n    let hoveringTarget: IClassifier = html2 ? ModelPiece.getLogic(html2) as IClassifier : null;\r\n    U.pe(!hoveringTarget || !(hoveringTarget instanceof IClassifier),\r\n      'the currentTarget should point to the vertex root, only classifier should be retrieved.', hoveringTarget, e, html2);\r\n    const linkable: boolean = hoveringTarget instanceof IClass ? edge.canBeLinkedTo(hoveringTarget) : false;\r\n    const size: GraphSize = hoveringTarget.getVertex().getSize();\r\n    const width = 3;\r\n    const pad = 5 + width;\r\n    const padding: GraphSize = new GraphSize(pad, pad, pad, pad);\r\n    const vertex: IVertex = hoveringTarget.getVertex();\r\n    // const oldHoverVertex: IVertex = window.oldEdgeLink_HoveringVertex;\r\n    // if (oldHoverVertex) { vertex.mark(false, 'refhover'); }\r\n    // window.oldEdgeLink_HoveringVertex = vertex;\r\n    vertex.mark(true, 'refhover',\r\n      linkable ? 'green' : 'red',\r\n      (size.w + padding.x + padding.w) / 10,\r\n      (size.h + padding.y + padding.h) / 10,\r\n      width, null, padding);\r\n    edge.tmpEndVertex = hoveringTarget.getVertex();\r\n    // NB: serve farlo 2 volte, alla prima ripristina il targetEnd ma non corregge lo startingpoint adattandolo alla nuova destinazione.\r\n    edge.refreshGui(null, false); edge.refreshGui(null, false); }\r\n\r\n  mouseLeaveLinkPreview(evt: MouseLeaveEvent, debug: boolean = true): void {\r\n    if (!IEdge.edgeChanging) { return; }\r\n    const edge: IEdge = IEdge.edgeChanging;\r\n    U.pif(debug, 'vertexLeave()');\r\n    edge.tmpEndVertex = null;\r\n    edge.tmpEnd = GraphPoint.fromEvent(evt);\r\n    this.mark(false, 'refhover'); }\r\n\r\n  addFieldClick(e: ClickEvent): void {\r\n    // impedisco che un click mentre fisso un edge triggeri altre cose, 100ms di \"cooldown\"\r\n    if (IEdge.edgeChanging || Date.now() - IEdge.edgeChangingStopTime < 100) { return; }\r\n    const modelPiece: IClassifier = this.logic();\r\n    const classe: M2Class = modelPiece instanceof M2Class ? modelPiece : null;\r\n    const enumm: EEnum = modelPiece instanceof EEnum ? modelPiece : null;\r\n    U.pe(!enumm && !classe, 'AddFieldClick should only be allowed on M2-Classes or enumerations.');\r\n\r\n    U.pe(!this.classe, 'called addFieldClick on a package');\r\n    Status.status.debug = true;\r\n    const html = this.getHtml();\r\n    let select: HTMLSelectElement;\r\n    // const debugOldJson = U.cloneObj(modelPiece.generateModel());\r\n    select = $(html).find('.AddFieldSelect')[0] as unknown as HTMLSelectElement;\r\n    switch (select.value.toLowerCase()) {\r\n      default: U.pe(true, 'unexpected select value for addField:' + select.value + ' allowed values are: [\"Reference\", \"Attribute\", \"Operation\", \"Literal\"]'); break;\r\n      case 'reference': U.pe(!classe, '\"Reference\" as .AddFieldSelect value is only allowed on M2-classes'); classe.addReference(); break;\r\n      case 'attribute': U.pe(!classe, '\"Attribute\" as .AddFieldSelect value is only allowed on M2-classes'); classe.addAttribute(); break;\r\n      case 'operation': U.pe(!classe, '\"Operation\" as .AddFieldSelect value is only allowed on M2-classes'); classe.addOperation(); break;\r\n      case 'literal': U.pe(!enumm, '\"Literal\" as .AddFieldSelect value is only allowed on Enumerations'); enumm.addLiteral(); break; }\r\n  }\r\n/*\r\n  setAddButtonContainer(container: HTMLElement): void {\r\n    U.toHtml('<span style=\"display:flex; margin:auto;\">Add&nbsp;</span>' +\r\n      '<select class=\"AddFieldSelect\" style=\"display:flex; margin:auto;\"><optgroup label=\"FeatureType\">' +\r\n      '<option value=\"Attribute\" selected=\"\">Attribute</option>' +\r\n      '<option value=\"Reference\">Reference</option>' +\r\n      '<option value=\"Operation\">Operation</option>' +\r\n      '</optgroup></select>' +\r\n      '<span style=\"display:flex; margin:auto;\">&nbsp;field</span>\\n' +\r\n      '<button>Go</button>', container); }\r\n*/\r\n  setFields(f: IField[]) {\r\n    this.fields = f;\r\n  }\r\n\r\n  setGraph(graph: IGraph) {\r\n    U.pe(!graph, 'Vertex should only be created after Graph initialization.');\r\n    this.owner = graph; }\r\n\r\n  refreshGUI(): void { this.draw(); }\r\n\r\n  moveTo(graphPoint: GraphPoint, gridIgnore: boolean = false): void {\r\n    // console.log('moveTo(', graphPoint, '), gridIgnore:', gridIgnore, ', grid:');\r\n    const oldsize: GraphSize = this.size; // U.getSvgSize(this.logic().html as SVGForeignObjectElement);\r\n    if (!gridIgnore) { graphPoint = this.owner.fitToGrid(graphPoint); }\r\n    this.setSize(new GraphSize(graphPoint.x, graphPoint.y, oldsize.w, oldsize.h), false, true); }\r\n\r\n  logic(set: IClassifier = null): IClassifier {\r\n    if (set) { return this.classe = set; }\r\n    return this.classe; }\r\n    // todo: elimina differenze html e htmlforeign o almeno controlla e riorganizza\r\n  getHtmlRawForeign(): SVGForeignObjectElement { return this.htmlForeign; }\r\n  getHtml(): HTMLElement { return this.htmlForeign.firstChild as HTMLElement; }\r\n  minimize(): void {\r\n    U.pe(true, 'minimize() to do.');\r\n  }\r\n\r\n  isDrawn(): boolean { return !!(this.htmlForeign && this.htmlForeign.parentNode); }\r\n\r\n  pushDown(): void {\r\n    if (!this.isDrawn()) { return; }\r\n    const html = this.htmlForeign;\r\n    const parent = html.parentNode;\r\n    parent.removeChild(html);\r\n    parent.appendChild(html); }\r\n\r\n  pushUp(): void {\r\n    if (!this.isDrawn()) { return; }\r\n    const html = this.htmlForeign;\r\n    const parent = html.parentNode;\r\n    parent.removeChild(html);\r\n    parent.prepend(html); }\r\n\r\n  remove() {\r\n    console.log('IVertex.delete();');\r\n    let i: number;\r\n    // for (i = 0; i < this.edgesStart.length; i++) {}\r\n    let arr: IEdge[];\r\n    arr = U.ArrayCopy(this.edgesStart, false);\r\n    for (i = 0; i < arr.length; i++) { arr[i].remove(); }\r\n    arr = U.ArrayCopy(this.edgesEnd, false);\r\n    for (i = 0; i < arr.length; i++) { arr[i].remove(); }\r\n    const html = this.htmlForeign;\r\n    html.parentNode.removeChild(html);\r\n    delete IVertex.all[this.id];\r\n    for (const key in this.Vmarks) {\r\n      if (this.Vmarks[key]) { continue; }\r\n      const mark: SVGRectElement = this.Vmarks[key];\r\n      if (mark.parentNode) { mark.parentNode.removeChild(mark); } }\r\n    U.arrayRemoveAll(this.owner.vertex, this);\r\n    this.classe.vertex = null;\r\n\r\n    const fields: IField[] = U.ArrayCopy(this.fields, false);\r\n    for (i = 0; i < fields.length; i++) { fields[i].remove(); }\r\n\r\n    // gc helper\r\n    this.owner = null;\r\n    this.size = null;\r\n    this.edgesStart = null;\r\n    this.edgesEnd = null; }\r\n\r\n  getSize(debug: boolean = false): GraphSize {\r\n    const html0: SVGForeignObjectElement = this.htmlForeign;\r\n    let sizeOld: GraphSize;\r\n    if (debug) {\r\n      sizeOld = this.size ? this.size.duplicate() : null;\r\n      if (this.size) { this.owner.markgS(this.size, true, 'blue'); }\r\n    }\r\n    const size: GraphSize = this.size = U.getSvgSize(html0, IVertex.minSize);\r\n    U.pe(debug && !sizeOld.equals(size), 'Wrong size. this:', this);\r\n    return this.size; }\r\n\r\n/// end of IVertex\r\n  isMarkedWith(markKey: string, colorFilter: string = null) {\r\n    if (!this.Vmarks.hasOwnProperty(markKey)) { return false; }\r\n    if (!colorFilter) { return true; }\r\n    const markRect: SVGRectElement = this.Vmarks[markKey];\r\n    return (markRect.getAttributeNS(null, 'stroke') === colorFilter);\r\n  }\r\n\r\n}\r\n","import {\r\n  Json,\r\n  U,\r\n  IEdge,\r\n  IVertex,\r\n  IPackage,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IModel,\r\n  Status,\r\n  Size,\r\n  IReference, GraphPoint, GraphSize,\r\n  PropertyBarr, Dictionary, IClass, ViewPoint, EOperation, EParameter, Point, EEnum\r\n} from '../../common/Joiner';\r\nimport MouseDownEvent = JQuery.MouseDownEvent;\r\nimport MouseUpEvent = JQuery.MouseUpEvent;\r\nimport MouseMoveEvent = JQuery.MouseMoveEvent;\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport KeyDownEvent = JQuery.KeyDownEvent;\r\nimport BlurEvent = JQuery.BlurEvent;\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\n\r\n\r\nexport class ViewPointShell {\r\n  graph: IGraph;\r\n  model: IModel;\r\n  html: HTMLElement;\r\n  $html: JQuery<HTMLElement>;\r\n  $template: JQuery<HTMLLIElement>;\r\n  template: HTMLLIElement;\r\n  lastVP: ViewPoint = null; // se ne sono attivi multipli e modifichi lo stile di qualcosa, questo sarà quello che viene aggiornato.\r\n  defaultCheckbox: HTMLInputElement;\r\n  checkboxes: HTMLInputElement[];\r\n  ignoreEvents: boolean;\r\n  getViewpointGUI: Dictionary<number /*Viewpoint.id*/, HTMLLIElement> = {};\r\n  constructor(g: IGraph) {\r\n    this.graph = g;\r\n    this.model = g.model;\r\n    this.$html = $(g.container.parentElement).find('.viewpointShell');\r\n    this.html = this.$html[0];\r\n    this.$template = this.$html.find('li.viewpointrow.template') as JQuery<HTMLLIElement>;\r\n    this.template = this.$template[0];\r\n    const $checkboxlidefault = this.$html.find('li.viewpointrow.default');\r\n    const $defaultCheckbox = $checkboxlidefault.find('input[type=\"radio\"]') as JQuery<HTMLInputElement>;\r\n    this.defaultCheckbox = $defaultCheckbox[0];\r\n    this.checkboxes = [];\r\n    this.getViewpointGUI = {};\r\n    let i: number;\r\n    // this.ignoreEvents = false;\r\n    $defaultCheckbox.on('click', (e: ClickEvent) => { this.undoAll(true); });\r\n    $checkboxlidefault.find('button.duplicate').on('click', (e: ClickEvent) => this.duplicateEvent(e, null, this.defaultCheckbox) );\r\n  }\r\n  /*undoAllOld(model :IModel): void {\r\n    let i1: number;\r\n    let i2: number;\r\n    let i3: number;\r\n    let i4: number;\r\n    model.graph.gridDisplay = IGraph.defaultGridDisplay;\r\n    model.graph.scroll = new GraphPoint(0, 0);\r\n    model.graph.setZoom(IGraph.defaultZoom);\r\n    model.graph.setGrid(IGraph.defaultGrid);\r\n    const undostyle = (m: ModelPiece) => { m.resetViews(); };\r\n    for (i1 = 0; i1 < model.childrens.length; i1++) {\r\n      const pkg: IPackage = model.childrens[i1];\r\n      undostyle(pkg);\r\n      for (i2 = 0; i2 < pkg.childrens.length; i2++) {\r\n        const c: IClass = pkg.childrens[i2];\r\n        undostyle(c);\r\n        c.shouldBeDisplayedAsEdge(false);\r\n        for (i3 = 0; i3 < c.attributes.length; i3++) {\r\n          const a: IAttribute = c.attributes[i3];\r\n          undostyle(a); }\r\n        for (i3 = 0; i3 < c.references.length; i3++) {\r\n          const r: IReference = c.references[i3];\r\n          undostyle(r); }\r\n        const operations = c.getOperations();\r\n        for (i3 = 0; i3 < operations.length; i3++) {\r\n          const o: EOperation = operations[i3];\r\n          undostyle(o);\r\n          for (i4 = 0; i4 < o.childrens.length; i4++) {\r\n            const p: EParameter = o.childrens[i4];\r\n            undostyle(p); }\r\n        }\r\n      }\r\n    }\r\n    model.refreshGUI_Alone();\r\n  }*/\r\n  undoAll(changingGuiChecked: boolean): void {\r\n    let i: number;\r\n    // de-apply all\r\n    for (i = 0; i < this.model.viewpoints.length; i++) { this.model.viewpoints[i].detach(); }\r\n    // update gui\r\n    this.ignoreEvents = true;\r\n    if (changingGuiChecked) {\r\n      for (i = 0; i < this.checkboxes.length; i++) { this.checkboxes[i].checked = false; }\r\n      this.graph.model.refreshGUI_Alone();\r\n    }\r\n    const defaultradio: HTMLInputElement = this.$html.find('input[type=\"radio\"]')[0] as HTMLInputElement;\r\n    defaultradio.checked = true;\r\n    this.ignoreEvents = false;\r\n  }\r\n  refreshApplied(): void {\r\n    // this.undoAll(false);\r\n    let i: number;\r\n    let stylecustomized: boolean = false;\r\n    const makeSureAllCheckboxesAreProcessed: HTMLInputElement[] = this.checkboxes.slice();\r\n    for (i = this.model.viewpoints.length; --i >= 0; ) {\r\n      const vp: ViewPoint = this.model.viewpoints[i];\r\n      const checkbox: HTMLInputElement = this.getCheckbox(vp);\r\n      U.pe(!checkbox, 'failed to get checkbox of:', vp, this);\r\n      U.arrayRemoveAll(makeSureAllCheckboxesAreProcessed, checkbox);\r\n      stylecustomized = stylecustomized || checkbox.checked;\r\n      if (vp.isApplied === checkbox.checked) { continue; }\r\n      if (vp.isApplied) { vp.detach(); } else { vp.apply(); }\r\n    }/*\r\n    for (i = 0; i < makeSureAllCheckboxesAreProcessed.length; i++) {\r\n      const cbox: HTMLInputElement = makeSureAllCheckboxesAreProcessed[i];\r\n      const vp = ViewPoint.getbyID(+cbox.dataset.vpid);\r\n      if (vp.isApplied === checkbox.checked) { continue; }\r\n      if (vp.isApplied) { vp.detach(); } else { vp.apply(); }\r\n    }*/\r\n    U.pe(!!makeSureAllCheckboxesAreProcessed.length, 'Error: some checkbox are not yet processed.', makeSureAllCheckboxesAreProcessed, this);\r\n    // U.pe(true, 'stopped here still works? 2');\r\n    const defaultradio: HTMLInputElement = this.$html.find('input[type=\"radio\"]')[0] as HTMLInputElement;\r\n    defaultradio.checked = !stylecustomized;\r\n    this.updatelastvp();\r\n    this.graph.model.refreshGUI_Alone();\r\n    this.graph.propertyBar.refreshGUI();\r\n  }\r\n  duplicateEvent(e: ClickEvent, oldvp: ViewPoint, oldvpCheckbox: HTMLInputElement, debug: boolean = false): void {\r\n    U.pif(debug, 'duplicate(' + (oldvp ? oldvp.name : null) + ') Start:', this.model.viewpoints);\r\n    // const vp: ViewPoint = ViewPoint.get($input[0].value);\r\n    let newvp: ViewPoint = new ViewPoint(this.model, oldvp ? oldvp.name : null);\r\n    if (oldvp) { newvp.clone(oldvp); newvp.updateTarget(this.model); }\r\n    this.ignoreEvents = true;\r\n    this.add(newvp, false);\r\n    if (oldvpCheckbox) { oldvpCheckbox.checked = false; }\r\n    this.ignoreEvents = false;\r\n    this.refreshApplied();\r\n    U.pif(debug, 'duplicate() End:', this.model.viewpoints);\r\n  }\r\n\r\n  add(v: ViewPoint, allowApply: boolean): void {\r\n    const $li: JQuery<HTMLLIElement> = this.$template.clone();\r\n    const li: HTMLLIElement = $li[0];\r\n    const $checkbox: JQuery<HTMLInputElement> = $li.find('input[type=\"checkbox\"]') as any;\r\n    const checkbox: HTMLInputElement = $checkbox[0];\r\n    this.checkboxes.push(checkbox);\r\n    this.getViewpointGUI[v.id] = li;\r\n    const $input: JQuery<HTMLInputElement> = $li.find('input.name') as any;\r\n    const input: HTMLInputElement = $input[0];\r\n    const $duplicate: JQuery<HTMLButtonElement> = $li.find('button.duplicate') as any;\r\n    const $delete: JQuery<HTMLButtonElement> = $li.find('button.remove') as any;\r\n    const $rename: JQuery<HTMLButtonElement> = $li.find('button.edit') as any;\r\n\r\n    $duplicate.on('click', (e: ClickEvent) => this.duplicateEvent(e, v, checkbox));\r\n    $delete.on('click', (e: ClickEvent) => {\r\n      this.html.removeChild(li);\r\n      U.arrayRemoveAll(this.checkboxes, checkbox);\r\n      delete this.getViewpointGUI[v.id];\r\n      v.delete(); });\r\n    $rename.on('click', (e: ClickEvent) => {\r\n      input.readOnly = false;\r\n      input.focus();\r\n      //\r\n      //\r\n      // $rename.hide(); $delete.hide(); $duplicate.hide();\r\n    });\r\n    const inputConfirm = (confirm: boolean = true) => {\r\n      if (confirm) { v.setname(input.name); }\r\n      input.value = v.name;\r\n      input.readOnly = true;\r\n      // $rename.show();\r\n      // $delete.show();\r\n      // $duplicate.show();\r\n    };\r\n    $input.on('keydown', (e: KeyDownEvent) => { if (e.key === 'return') { inputConfirm(true); } else if (e.key === 'escape') { inputConfirm(false); }});\r\n    $input.on('blur', (e: BlurEvent) => { inputConfirm(false); });\r\n    $input.on('click', (e: ClickEvent) => {\r\n      // todo: se non lo fa già di suo: (per triggerare default.click() = this.undoAll();\r\n      // if (input.readOnly) { this.undoAll(true); }\r\n    });\r\n    checkbox.dataset.vpid = '' + v.id;\r\n    input.value = v.name;\r\n    checkbox.checked = v.isApplied;\r\n    $checkbox.on('change', (e: ChangeEvent): boolean => {\r\n      if (this.ignoreEvents) { e.preventDefault(); return false; }\r\n      this.refreshApplied();\r\n      return true; });\r\n    if (allowApply && v.isApplied) {\r\n      $checkbox.trigger('change');\r\n    }\r\n    li.classList.remove('template');\r\n    this.html.appendChild(li);\r\n  }\r\n  updatelastvp(): void {\r\n    this.$html.find('li[islastvp]').removeAttr('islastvp');\r\n    const vp: ViewPoint = this.model.getLastView();\r\n    console.log('updatelastvp() ', this.model.viewpoints, this.getViewpointGUI, this);\r\n    if (!vp) return;\r\n    this.lastVP = vp;\r\n    const li: HTMLLIElement = this.getViewpointGUI[vp.id];\r\n    li.setAttribute('islastvp', 'true');\r\n  }\r\n\r\n  getCheckbox(vp: ViewPoint): HTMLInputElement {\r\n    let i: number;\r\n    for (i = 0; i < this.checkboxes.length; i++) {\r\n      const cbox: HTMLInputElement = this.checkboxes[i];\r\n      if (cbox.dataset.vpid === '' + vp.id) return cbox;\r\n    }\r\n    return null;\r\n  }\r\n}\r\nenum CursorAction { drag, select, multiselect }\r\nexport class IGraph {\r\n// todo: this.vertex non è mai aggiornato reealmente.\r\n  static all: Dictionary<number, IGraph> = {};\r\n  static ID = 0;\r\n  private static allMarkp: HTMLElement[] = []; // campo per robe di debug\r\n  static defaultGridDisplay: boolean = true;\r\n  static defaultGrid: GraphPoint = new GraphPoint(20, 20);\r\n  static defaultZoom: Point = new Point(1, 1);\r\n  id: number = null;\r\n  container: SVGElement = null;\r\n  model: IModel = null;\r\n  vertex: IVertex[] = null;\r\n  edges: IEdge[] = null;\r\n  scroll: GraphPoint = null;\r\n  propertyBar: PropertyBarr = null;\r\n  zoom: Point = null;\r\n  grid: GraphPoint = null;\r\n  gridDisplay: boolean = false && false;\r\n  edgeContainer: SVGGElement;\r\n  vertexContainer: SVGGElement;\r\n\r\n  // campi per robe di debug\r\n  private allMarkgp: SVGCircleElement[] = [];\r\n  private markp: HTMLElement;\r\n  private markgp: SVGCircleElement;\r\n  // private svg: SVGElement;\r\n  public viewPointShell: ViewPointShell;\r\n  private size: Size;\r\n  private cursorAction: CursorAction;\r\n  private isMoving: GraphPoint;\r\n  private clickedScroll: GraphPoint;\r\n  private gridPos: Point;\r\n  private gridHtml: SVGRectElement;\r\n  private gridDefsHtml: SVGDefsElement;\r\n\r\n  static getByID(id: string): IGraph { return IGraph.all[id]; }\r\n  static getByHtml(html: HTMLElement | SVGElement): IGraph {\r\n    for (const id in IGraph.all) {\r\n      if (!IGraph.all.hasOwnProperty(id)) { continue; }\r\n      const graph = IGraph.all[id] as IGraph;\r\n      if (U.isParentOf(graph.container, html)) { return graph; }\r\n    }\r\n    U.pe(true, 'failed to find parent graph of:', html);\r\n    return null; }\r\n\r\n  constructor(model: IModel, container: SVGElement) {\r\n    U.pe(!container, 'graph container is null. model:', model);\r\n    this.id = IGraph.ID++;\r\n    IGraph.all[this.id + ''] = this;\r\n    this.model = model;\r\n    this.model.graph = this;\r\n    this.container = container;\r\n    this.container.dataset.graphID = '' + this.id;\r\n    this.edgeContainer = U.newSvg('g');\r\n    this.edgeContainer.classList.add('allEdgeContainer');\r\n    this.vertexContainer = U.newSvg('g');\r\n    this.vertexContainer.classList.add('allVertexContainer');\r\n    this.container.appendChild(this.edgeContainer);\r\n    this.container.appendChild(this.vertexContainer);\r\n    this.gridDefsHtml = $(this.container).find('g.gridContainer>defs')[0] as any;\r\n    this.gridHtml = $(this.container).find('g.gridContainer>rect.grid')[0] as any;\r\n    this.gridHtml.setAttributeNS(null, 'fill', 'url(#grid_' + this.id + ')');\r\n    this.isMoving = null;\r\n    this.clickedScroll = null;\r\n    this.cursorAction = CursorAction.select;\r\n    // this.svg = $(this.container).find('svg.graph')[0] as unknown as SVGElement;\r\n    this.vertex = [];\r\n    this.edges = [];\r\n    this.zoom = new Point(1, 1);\r\n    this.scroll = new GraphPoint(0, 0);\r\n    this.grid = new GraphPoint(20, 20);\r\n    this.gridPos = new Point(0, 0);\r\n    this.gridDisplay = true;\r\n    let i: number;\r\n    let j: number;\r\n    const earr: EEnum[] = this.model.getAllEnums();\r\n    for (i = 0; i < earr.length; i++) { earr[i].generateVertex(); }\r\n    const classArr: IClass[] = this.model.getAllClasses();\r\n    const classEdges: IClass[] = [];\r\n    for (i = 0; i < classArr.length; i++) {\r\n      if (classArr[i].shouldBeDisplayedAsEdge()) { classEdges.push(classArr[i]); continue; }\r\n      classArr[i].generateVertex();\r\n    }\r\n    // vertex disegnati, ora disegno gli edges.\r\n    // Class-extends-edges\r\n    if (this.model.isM2()) {\r\n      for (i = 0; i < classArr.length; i++) {\r\n        const classe: M2Class = classArr[i] as M2Class;\r\n        for (j = 0; j < classe.extends.length; j++) { U.ArrayAdd(this.edges, classe.makeExtendEdge(classe.extends[j])); }\r\n      }\r\n    }\r\n    // Class-edges\r\n    for (i = 0; i < classEdges.length; i++) { U.ArrayMerge(this.edges, classEdges[i].generateEdge()); }\r\n    // Reference-edges\r\n    const arrReferences: IReference[] = this.model.getAllReferences();\r\n    for (i = 0; i < arrReferences.length; i++) { U.ArrayMerge(this.edges, arrReferences[i].generateEdges()); }\r\n    this.propertyBar = new PropertyBarr(this.model);\r\n    this.viewPointShell = new ViewPointShell(this);\r\n    this.addGraphEventListeners();\r\n    this.ShowGrid(); }\r\n\r\n  fitToGrid(pt0: GraphPoint, clone: boolean = true, debug: boolean = false, fitHorizontal = true, fitVertical = true): GraphPoint {\r\n    const pt: GraphPoint = clone ? pt0.clone() : pt0;\r\n    U.pe(!this.grid, 'grid not initialized.');\r\n    if (fitHorizontal && !isNaN(this.grid.x) && this.grid.x > 0) { pt.x = Math.round(pt.x / this.grid.x) * this.grid.x; }\r\n    if (fitVertical && !isNaN(this.grid.y) && this.grid.y > 0) { pt.y = Math.round(pt.y / this.grid.y) * this.grid.y; }\r\n    U.pif(debug, 'fitToGrid(', pt0, '); this.grid:', this.grid, ' = ', pt);\r\n    return pt; }\r\n\r\n  fitToGridS(pt0: GraphSize, clone: boolean = true, debug: boolean = false, fitHorizontal = true, fitVertical = true): GraphSize {\r\n    const pt: GraphSize = clone ? pt0.duplicate() : pt0;\r\n    U.pe(!this.grid, 'grid not initialized.');\r\n    if (fitHorizontal && !isNaN(this.grid.x) && this.grid.x > 0) { pt.x = Math.round(pt.x / this.grid.x) * this.grid.x; }\r\n    if (fitVertical && !isNaN(this.grid.y) && this.grid.y > 0) { pt.y = Math.round(pt.y / this.grid.y) * this.grid.y; }\r\n    U.pif(debug, 'fitToGrid(', pt0, '); this.grid:', this.grid, ' = ', pt);\r\n    return pt; }\r\n\r\n  addGraphEventListeners() {\r\n    const $graph = $(this.container);\r\n    const thiss: IGraph = this;\r\n    this.model.linkToLogic(this.container);\r\n    $graph.off('mousedown.graph').on('mousedown.graph', (evt: MouseDownEvent) => { thiss.onMouseDown(evt); });\r\n    $graph.off('mouseup.graph').on('mouseup.graph', (evt: MouseUpEvent) => { thiss.onMouseUp(evt); });\r\n    $graph.off('mousemove.graph').on('mousemove.graph', (evt: MouseMoveEvent) => { thiss.onMouseMove(evt); });\r\n    // $graph.off('keydown.graph').on('keydown.graph', (evt: KeyDownEvent) => { thiss.onKeyDown(evt); }); non triggerabile, non ha focus.\r\n    // $graph.off('click.mark').on('click.mark', (e: ClickEvent) => { thiss.markClick(e, true); } );\r\n    $graph.off('mousedown.move').on('mousedown.move', (e: ClickEvent) => {\r\n      switch (this.cursorAction) {\r\n      default: U.pe(true, 'unexpected cursorAction:', this.cursorAction);\r\n      case CursorAction.drag:\r\n      case CursorAction.select:\r\n        const mp: ModelPiece = IVertex.ChangePropertyBarContentClick(e);\r\n        if (mp instanceof IModel) { this.isMoving = Point.fromEvent(e); this.clickedScroll = this.scroll.clone(); }\r\n        break;\r\n      case CursorAction.multiselect: break;\r\n      }\r\n    } );\r\n    $graph.off('mouseup.move').on('mouseup.move', (e: ClickEvent) => {\r\n      if (this.isMoving) { this.isMoving = this.clickedScroll = null; }\r\n    });\r\n    // @ts-ignore\r\n    if (!!ResizeObserver) { // not supported by edge, android firefox.\r\n      if (!window['' + 'resizeobservers']) window['' + 'resizeobservers'] = [];\r\n      // @ts-ignore\r\n      const tmp = new ResizeObserver( (entryes: ResizeObserverEntry[], observer: ResizeObserverr) => { this.onResize(); });\r\n      window['' + 'resizeobservers'] = tmp;\r\n      tmp.observe(this.container.parentElement);\r\n    }\r\n    // @ts-ignore\r\n    if (!ResizeObserver){\r\n      let oldSize: Size = null;\r\n      setInterval(() => {\r\n        U.pif(true, 'setinterval graphsize checker');\r\n        const size: Size = this.getSize();\r\n        if (!size.equals(oldSize)) this.onResize(size);\r\n      }, 100);\r\n    }\r\n    // altre opzioni:\r\n    // 1) MutationObserver (detect dom changes (attributes like \"style\" too)),\r\n    // 2) http://marcj.github.io/css-element-queries/ : sembra simile a mutationObserver, no timers, funziona su flexbox che non cambiano\r\n    // direttamente valori. non ho capito perchè parsa tutti i file css.\r\n    // 3) \"Use a combination of mousedown, mousemove and/or mouseup to tell whether the div is being / has been resized.\r\n    // If you want really fine-grained control you can check in every mousemove event how much / if the div has been resized. If you don't need that,\r\n    // you can simply not use mousemove at all and just measure the div in mousedown and mouseup and figure out if it was resized in the latter.\"\r\n    // PROBLEMA: potrebbe avvenire un resize dovuto a serverEvents, keyboardEvents, timers.\r\n  }\r\n\r\n  onMouseDown(evt: MouseDownEvent): void { }\r\n  onMouseUp(evt: MouseUpEvent): void { }\r\n\r\n  onMouseMoveSetReference(evt: MouseMoveEvent, edge: IEdge): void {\r\n    // console.log('graph.movereference()', edge, edge ? edge.tmpEndVertex : null);\r\n    if (!edge || edge.tmpEndVertex) { return; }\r\n    // const ref: IReference | IClass = edge.logic;\r\n    edge.tmpEnd = GraphPoint.fromEvent(evt);\r\n    U.pe(!edge.tmpEnd, 'failed to get coordinates from event:', evt);\r\n    // console.log('graph.movereference: success!', edge.tmpEnd);\r\n    edge.refreshGui(null, false); }\r\n\r\n  onMouseMoveVertexMove(evt: MouseMoveEvent, v: IVertex): void {\r\n    if (!v) { return; }\r\n    const currentMousePos: Point = new Point(evt.pageX, evt.pageY);\r\n    // console.log('evt:', evt);\r\n    let currentGraphCoord: GraphPoint = this.toGraphCoord(currentMousePos);\r\n    currentGraphCoord = currentGraphCoord.subtract(IVertex.selectedStartPt, false);\r\n    v.moveTo(currentGraphCoord); }\r\n\r\n  onMouseMoveDrag(e: MouseMoveEvent): void {\r\n    if (!this.isMoving) return;\r\n    const offset: Point = Point.fromEvent(e);\r\n    offset.subtract(this.isMoving, false);\r\n    this.scroll.x = this.clickedScroll.x - offset.x;\r\n    this.scroll.y = this.clickedScroll.y - offset.y;\r\n    this.setGridPos();\r\n    // console.log('scroll:', this.scroll, 'offset:', offset, ' scroll0: ', this.clickedScroll, ' currentCursor:', this.isMoving);\r\n    this.updateViewbox(); }\r\n\r\n  edgeChangingAbort(e: KeyDownEvent | MouseDownEvent): void {\r\n    const edge: IEdge = IEdge.edgeChanging;\r\n    if (!edge) { return; }\r\n    IEdge.edgeChanging = null;\r\n\r\n    // unmark hovering vertex\r\n    const hoveringVertex: IVertex[] = IVertex.GetMarkedWith('refhover');\r\n    let i: number;\r\n    U.pw(hoveringVertex.length > 1, 'hovering on more than one target at the same time should be impossible.', hoveringVertex);\r\n    for (i = 0; i < hoveringVertex.length; i++) { hoveringVertex[i].mark(false, 'refhover'); }\r\n\r\n    // restore previous endTarget or delete edge.\r\n    if (!edge.end) { edge.remove(); return; }\r\n    edge.useMidNodes = true;\r\n    edge.useRealEndVertex = true;\r\n    edge.tmpEnd = null;\r\n    edge.refreshGui(); }\r\n\r\n  onMouseMove(evt: MouseMoveEvent): void {\r\n    if (IEdge.edgeChanging) return this.onMouseMoveSetReference(evt, IEdge.edgeChanging);\r\n    if (IVertex.selected) return this.onMouseMoveVertexMove(evt, IVertex.selected);\r\n    if (this.isMoving) return this.onMouseMoveDrag(evt);\r\n  }\r\n\r\n  toGraphCoordS(s: Size): GraphSize {\r\n    const tl = this.toGraphCoord(new Point(s.x, s.y));\r\n    const br = this.toGraphCoord(new Point(s.x + s.w, s.y + s.h));\r\n    const ret = new GraphSize(tl.x, tl.y, br.x - tl.x, br.y - tl.y);\r\n    return ret; }\r\n\r\n  private computeSize(): void { this.size =  U.sizeof(this.container); }\r\n  getSize(): Size {\r\n    if (!this.size ) this.computeSize();\r\n    return this.size; }\r\n\r\n  toGraphCoord(p: Point): GraphPoint {\r\n    const graphSize: Size = this.getSize();\r\n    const ret: GraphPoint = new GraphPoint(p.x, p.y);\r\n    const debug = true;\r\n    ret.x -= graphSize.x;\r\n    ret.y -= graphSize.y;\r\n    ret.x += this.scroll.x;\r\n    ret.y += this.scroll.y;\r\n    ret.x /= this.zoom.x;\r\n    ret.y /= this.zoom.y;\r\n    // console.log('toGraph()  - graphSize:', graphSize, ' + scroll: ', this.scroll, ' / zoom', this.zoom);\r\n    if (debug) {\r\n      const ver: Point = this.toHtmlCoord(ret);\r\n      U.pe( ver.x !== p.x || ver.y !== p.y, 'error in toGraphCoord or toHtmlCoord: inputPt:', p, ', result: ', ret, 'verify:', ver,\r\n        'point:', p, 'scroll:', this.scroll, 'zoom:', this.zoom, 'GraphHtmlSize:', graphSize); }\r\n    return ret; }\r\n  toHtmlCoordS(s: GraphSize): Size {\r\n    if (s === null) { return null; }\r\n    const tl = this.toHtmlCoord(new GraphPoint(s.x, s.y));\r\n    const br = this.toHtmlCoord(new GraphPoint(s.x + s.w, s.y + s.h));\r\n    return new Size(tl.x, tl.y, br.x - tl.x, br.y - tl.y); }\r\n  toHtmlCoord(p: GraphPoint): Point {\r\n    const graphSize: Size = this.getSize();\r\n    const ret: Point = new Point(p.x, p.y);\r\n    // console.log('toHtml()', ' * zoom', this.zoom, ' - scroll: ', this.scroll, ' + graphSize:', graphSize);\r\n    ret.x *= this.zoom.x;\r\n    ret.y *= this.zoom.y;\r\n    ret.x -= this.scroll.x;\r\n    ret.y -= this.scroll.y;\r\n    ret.x += graphSize.x;\r\n    ret.y += graphSize.y;\r\n    return ret; }\r\n\r\n  getAllVertexIsBroke() { return this.vertex; }\r\n\r\n  markClick(e: JQuery.ClickEvent, clean: boolean = true) { return this.mark(new Point(e.pageX, e.pageY), clean); }\r\n  markg(gp: GraphPoint, clean: boolean = false, colorTop: string = 'red'): void {\r\n    return this.mark(this.toHtmlCoord(gp), clean, colorTop); }\r\n  markgS(gs: GraphSize, clean: boolean = false, colorTop: string = 'red', colorBot: string = null): void {\r\n    /*if (!colorBot) { colorBot = colorTop; }\r\n    this.markg(gs.tl(), clean, colorTop);\r\n    this.markg(gs.tr(), false, colorTop);\r\n    this.markg(gs.bl(), false, colorBot);\r\n    this.markg(gs.br(), false, colorBot);*/\r\n    // const htmls: Size = this.owner.toHtmlCoordS(size0);\r\n    return this.markS(this.toHtmlCoordS(gs), clean, colorTop, colorBot);\r\n  }\r\n  markS(s: Size, clean: boolean = false, colorTop: string = 'red', colorBot: string = null): void {\r\n    if (!colorBot) { colorBot = colorTop; }\r\n    U.pe(!s, 'size cannot be null.');\r\n    this.mark(s.tl(), clean, colorTop);\r\n    // color = 'white';\r\n    this.mark(s.tr(), false, colorTop);\r\n    // color = 'purple';\r\n    this.mark(s.bl(), false, colorBot);\r\n    // color = 'orange';\r\n    this.mark(s.br(), false, colorBot);\r\n  }\r\n  mark(p: Point, clean: boolean = false, color: string = 'red'): void {\r\n    const gp: GraphPoint = this.toGraphCoord(p);\r\n    if (clean) {\r\n      let i;\r\n      for (i = 0; i < this.allMarkgp.length; i++) {\r\n        const node: SVGCircleElement = this.allMarkgp[i];\r\n        if (this.container.contains(node)) { this.container.removeChild(node); }\r\n      }\r\n      for (i = 0; i < IGraph.allMarkp.length; i++) {\r\n        const node: HTMLElement = IGraph.allMarkp[i];\r\n        if (document.body.contains(node)) { document.body.removeChild(node); }\r\n      }\r\n    }\r\n    // console.log('mark:', p, gp);\r\n    this.markp = U.toHtml('<div style=\"width:10px; height:10px; top:' + (p.y - 5) + 'px; left:' + (p.x - 5) + 'px;' +\r\n      ' position: absolute; border: 1px solid ' + color + '; z-index:1;\">');\r\n    this.markgp = U.newSvg('circle');\r\n    this.markgp.setAttribute('cx', '' + gp.x);\r\n    this.markgp.setAttribute('cy', '' + gp.y);\r\n    this.markgp.setAttribute('r', '' + 1);\r\n    this.markgp.setAttribute('stroke', color);\r\n    this.allMarkgp.push(this.markgp);\r\n    IGraph.allMarkp.push(this.markp);\r\n    document.body.appendChild(this.markp);\r\n    this.container.appendChild(this.markgp);\r\n  }\r\n\r\n\r\n  setZoom(x: number, y: number): void {\r\n    const oldZoom = this.zoom.clone();\r\n    y = x;\r\n    this.zoom.x = !U.isNumber(x) || x === 0 ? this.zoom.x : +x;\r\n    this.zoom.y = !U.isNumber(y) || y === 0 ? this.zoom.y : +y;\r\n    console.log('zoomOld:', oldZoom, 'x:', x, 'y:', y, ' zoom:', this.zoom);\r\n    this.updateViewbox(); }\r\n\r\n  onResize(currSize: Size = null): void {\r\n    if (currSize) this.size = currSize;\r\n    else this.computeSize();\r\n    this.updateViewbox(); }\r\n\r\n  updateViewbox(): void {\r\n    const vbox: Size = U.getViewBox(this.container);\r\n    vbox.w = this.size.w / this.zoom.x;\r\n    vbox.h = this.size.h / this.zoom.y;\r\n    vbox.x = this.scroll.x;\r\n    vbox.y = this.scroll.y;\r\n    U.setViewBox(this.container, vbox); }\r\n\r\n  setGridPos(): void {\r\n    const biggerSquareX = this.grid.x * 10;\r\n    const biggerSquareY = this.grid.y * 10;\r\n    const safetySquares = 1;\r\n    this.gridHtml.setAttributeNS(null, 'x', '' + ((this.scroll.x - this.scroll.x % biggerSquareX) - biggerSquareX * safetySquares));\r\n    this.gridHtml.setAttributeNS(null, 'y', '' + ((this.scroll.y - this.scroll.y % biggerSquareY) - biggerSquareY * safetySquares));\r\n    const size: Size = this.getSize();\r\n    this.gridHtml.setAttributeNS(null, 'width', ((size.w + biggerSquareX * safetySquares * 2) / this.zoom.x) + '');\r\n    this.gridHtml.setAttributeNS(null, 'height', ((size.h + biggerSquareY * safetySquares * 2) / this.zoom.y) + ''); }\r\n\r\n  ShowGrid(checked: boolean = null) {\r\n    const graph = (this.model === Status.status.mm ? Status.status.mm.graph : Status.status.m.graph);\r\n    if (checked === null) { checked = graph.gridDisplay; }\r\n    if (this.model === Status.status.mm) { graph.gridDisplay = checked; } else { graph.gridDisplay = checked; }\r\n\r\n    const x = isNaN(this.grid.x) || this.grid.x <= 0 ? 10000 : this.grid.x;\r\n    const y = isNaN(this.grid.y) || this.grid.y <= 0 ? 10000 : this.grid.y;\r\n    this.gridDefsHtml.innerHTML =\r\n      '<pattern id=\"smallGrid_' + this.id + '\" width=\"' + x + '\" height=\"' + y + '\" patternUnits=\"userSpaceOnUse\">\\n' +\r\n      '  <path d=\"M ' + x + ' 0 L 0 0 0 ' + y + '\" fill=\"none\" stroke=\"gray\" stroke-width=\"0.5\"/>\\n' +\r\n      '</pattern>\\n' +\r\n      '<pattern id=\"grid_' + this.id + '\" width=\"' + (x * 10) + '\" height=\"' + (y * 10) + '\" patternUnits=\"userSpaceOnUse\">\\n' +\r\n      '  <rect width=\"' + (x * 10) + '\" height=\"' + (y * 10) + '\" fill=\"url(#smallGrid_' + this.id + ')\"/>\\n' +\r\n      '  <path d=\"M ' + (x * 10) + ' 0 L 0 0 0 ' + (y * 10) + '\" fill=\"none\" stroke=\"gray\" stroke-width=\"1\"/>\\n' +\r\n      '</pattern>';\r\n    this.setGridPos();\r\n    // $grid[0].setAttributeNS(null, 'justForRefreshingIt', 'true');\r\n    // $grid.x\r\n    if (checked) { $(this.gridHtml).show(); } else { $(this.gridHtml).hide(); }\r\n\r\n  }\r\n\r\n  addVertex(v: IVertex): void {\r\n    v.owner = this;\r\n    U.ArrayAdd(this.vertex, v);\r\n    // todo: aggiungi edges tra i vertici. in matrix edgeMatrix[vertex][vertex] = edge\r\n  }\r\n/*\r\n  setGrid(grid: GraphPoint): void {\r\n    this.grid = grid;\r\n    this.model.refreshGUI_Alone(); // reallinea tutti i vertici.\r\n  }*/\r\n}\r\n","export default \"::ng-deep foreignObject.Class *{\\r\\n  cursor: default;\\r\\n}\\r\\n::ng-deep foreignObject.Class input, foreignObject.Class *[contenteditable=\\\"true\\\"], foreignObject.Class textarea{\\r\\n  cursor: text;\\r\\n}\\r\\n::ng-deep foreignObject.Class select{\\r\\n  cursor: pointer;\\r\\n}\\r\\n/* viewpoint */\\r\\n::ng-deep .viewpointShell{\\r\\n  max-width: 107px;\\r\\n  overflow: visible;\\r\\n  position: absolute;\\r\\n  right: 10px;\\r\\n  top: 10px; }\\r\\n::ng-deep .viewpointrow.template { display: none; }\\r\\n::ng-deep .viewpointrow button {\\r\\n  display: none;\\r\\n  height: 21px;\\r\\n  width: 21px;\\r\\n  min-width: 21px;\\r\\n  float: right;\\r\\n  margin-left: 5px; }\\r\\n::ng-deep .viewpointrow:hover button { display: inline-block; }\\r\\n::ng-deep .viewpointrow{ background-color: transparent; display: -webkit-box; display: flex; position: relative; }\\r\\n/*::ng-deep .viewpointrow .buttons{ display: none }*/\\r\\n::ng-deep .viewpointrow:hover .buttons{\\r\\n  z-index: 1;\\r\\n  position: absolute;\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  top: 100%;\\r\\n  right: 0; }\\r\\n::ng-deep .viewpointrow > label{\\r\\n  display: -webkit-inline-box;\\r\\n  display: inline-flex;\\r\\n  margin: auto;\\r\\n  margin-left: 0; }\\r\\n::ng-deep .viewpointrow > label.checkbox{ }\\r\\n::ng-deep .viewpointrow > label.name{\\r\\n  -webkit-box-flex: 1;\\r\\n          flex-grow: 1;\\r\\n  flex-basis: 0;\\r\\n  min-width: 0;\\r\\n}\\r\\n::ng-deep .viewpointrow input[type=\\\"text\\\"]{ min-width: 0; height: 21px; background: transparent; border: none; }\\r\\n/* ::ng-deep .viewpointrow:hover input[type=\\\"text\\\"]{ box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25); }*/\\r\\n::ng-deep .viewpointrow input[type='checkbox'], ::ng-deep .viewpointrow input[type='radio']{\\r\\n  width: 17px;\\r\\n  min-width: 17px;\\r\\n  height: 17px;\\r\\n}\\r\\n::ng-deep .viewpointrow button{ margin: auto; background-color: transparent }\\r\\n::ng-deep .viewpointrow input[readonly]{ background-color: transparent; border: none; }\\r\\n::ng-deep .viewpointrow input.name{ opacity: 0.75; }\\r\\n::ng-deep .viewpointrow[islastvp='true'] input.name{ opacity: 1; }\\r\\n/************************************************** statici */\\r\\n.template, .MMDefaultStyles{\\r\\n  display: none;\\r\\n}\\r\\n.tabContent{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  flex-flow: nowrap;/*?*/\\r\\n  /*margin-top: calc( var(--mainBorderWidth) * 2 );*/\\r\\n}\\r\\n/*olds*/\\r\\n.HiddenStructures > *{\\r\\n  display: none;\\r\\n}\\r\\n.property_sidebar, .editorShell, .propertyBarContainer{/*.sidebarShell,*/\\r\\n  flex-basis: 0;/* calc(var(--sidebarW));*/\\r\\n  -webkit-box-flex: 1;\\r\\n          flex-grow: 1;\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  /*border-right: var(--mainBorder);*/\\r\\n  width: calc(var(--sidebarW));\\r\\n  /*height: calc(100vh - (var(--topbarH) + var(--tabH)));*/\\r\\n  overflow: hidden;\\r\\n  /*flex-wrap: wrap;\\r\\n  margin-top: 5px;\\r\\n  border-top: var(--mainBorder);*/\\r\\n}\\r\\n.sidebarShell{ border-right: var(--mainBorder); }\\r\\n.propertyBarContainer{ border-left: var(--mainBorder); }\\r\\n.editorShell{\\r\\n  -webkit-box-flex: 3;\\r\\n          flex-grow: 3;\\r\\n}\\r\\n/*#sidebar, */\\r\\n#metamodel_sidebar, #model_sidebar, .property_sidebar{\\r\\n  -webkit-box-orient: horizontal;\\r\\n  -webkit-box-direction: normal;\\r\\n          flex-direction: row;\\r\\n  flex-wrap: wrap;\\r\\n  -webkit-box-pack: justify;\\r\\n          justify-content: space-between;/*si attiva solo se entra tutto in una riga e avanza pure spazio*/\\r\\n  -webkit-box-align: start;\\r\\n          align-items: flex-start;\\r\\n  align-content: flex-start;/*accatasta tutto verticalmente verso la cima invece di spaziarli.*/\\r\\n  padding-right:5px;\\r\\n}\\r\\n/*\\r\\n#sidebarResizer, .sidebarResizer{\\r\\n    margin: 0px;\\r\\n    padding: 0px;\\r\\n    width: var(--mainBorderWidth);\\r\\n    cursor: ew-resize;\\r\\n    background-color: var(--mainBorderColor);\\r\\n    user-drag: none;\\r\\n    user-select: none;\\r\\n    -moz-user-select: none;\\r\\n    -webkit-user-drag: none;\\r\\n    -webkit-user-select: none;\\r\\n    -ms-user-select: none;\\r\\n}*/\\r\\n#sidebar>*:first-child, #metamodel_sidebar>*:first-child, #model_sidebar>*:first-child{\\r\\n  background-color: var(--mainBorderColor);\\r\\n  width: var(--mainBorderWidth);\\r\\n  right: 0px;\\r\\n}\\r\\n#sidebar>*:not(:first-child), #metamodel_sidebar>*:not(:first-child), #model_sidebar>*:not(:first-child){\\r\\n  padding: 2px;\\r\\n  max-width: 200px;\\r\\n  min-width: 75px;\\r\\n  flex-basis: 75px;/*should === min-width per mantenere l'effetto.*/\\r\\n  -webkit-box-flex: 1;\\r\\n          flex-grow: 1;\\r\\n  flex-shrink: 1;\\r\\n}\\r\\n.sidebarVertex:hover{\\r\\n  background-color: var(--mainBorderColor);\\r\\n  border: 2px solid var(--secondaryBorderColor);\\r\\n  padding: 0px;\\r\\n}\\r\\n.sidebarVertex{\\r\\n  min-width: 50px;\\r\\n  min-height: 50px;\\r\\n  flex-basis:50px;\\r\\n}\\r\\n@media all and (min-width: 200px) {\\r\\n  .sidebarVertex {\\r\\n    -webkit-box-flex: 0;\\r\\n            flex-grow: 0; }\\r\\n}\\r\\n#metamodel_editor, #model_editor{\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n/* property bar raws */\\r\\n::ng-deep .propertyBarContainer .mat-tab-label{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  height: 20px;\\r\\n  -webkit-box-flex: 1;\\r\\n          flex-grow: 1;\\r\\n  flex-basis: 0;\\r\\n  min-width: 0 !important;\\r\\n  /*width: auto !important;*/\\r\\n  max-width: 50% !important\\r\\n}\\r\\n::ng-deep .propertyBarContainer .mat-tab-header-pagination{\\r\\n  display: none !important;\\r\\n}\\r\\n.rawContainer{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n          flex-flow: column;\\r\\n  height: 100%;\\r\\n}\\r\\nh2.rawTitle{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  margin-left: auto;\\r\\n  margin-right: auto;\\r\\n}\\r\\n.rawecore{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  -webkit-box-flex:1;\\r\\n          flex-grow:1;\\r\\n  flex-shrink:1;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ndWlFbGVtZW50cy9tbS1ncmFwaC1odG1sL21tLWdyYXBoLWh0bWwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQWU7QUFDakI7QUFDQTtFQUNFLFlBQVk7QUFDZDtBQUNBO0VBQ0UsZUFBZTtBQUNqQjtBQUVBLGNBQWM7QUFDZDtFQUNFLGdCQUFnQjtFQUNoQixpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxTQUFTLEVBQUU7QUFDYixtQ0FBbUMsYUFBYSxFQUFFO0FBQ2xEO0VBQ0UsYUFBYTtFQUNiLFlBQVk7RUFDWixXQUFXO0VBQ1gsZUFBZTtFQUNmLFlBQVk7RUFDWixnQkFBZ0IsRUFBRTtBQUNwQix1Q0FBdUMscUJBQXFCLEVBQUU7QUFDOUQseUJBQXlCLDZCQUE2QixFQUFFLG9CQUFhLEVBQWIsYUFBYSxFQUFFLGtCQUFrQixFQUFFO0FBQzNGLG9EQUFvRDtBQUNwRDtFQUNFLFVBQVU7RUFDVixrQkFBa0I7RUFDbEIsb0JBQWE7RUFBYixhQUFhO0VBQ2IsU0FBUztFQUNULFFBQVEsRUFBRTtBQUVaO0VBQ0UsMkJBQW9CO0VBQXBCLG9CQUFvQjtFQUNwQixZQUFZO0VBQ1osY0FBYyxFQUFFO0FBQ2xCLDBDQUEwQztBQUMxQztFQUNFLG1CQUFZO1VBQVosWUFBWTtFQUNaLGFBQWE7RUFDYixZQUFZO0FBQ2Q7QUFDQSw0Q0FBNEMsWUFBWSxFQUFFLFlBQVksRUFBRSx1QkFBdUIsRUFBRSxZQUFZLEVBQUU7QUFDL0cscUdBQXFHO0FBQ3JHO0VBQ0UsV0FBVztFQUNYLGVBQWU7RUFDZixZQUFZO0FBQ2Q7QUFDQSxnQ0FBZ0MsWUFBWSxFQUFFLDhCQUE4QjtBQUM1RSx5Q0FBeUMsNkJBQTZCLEVBQUUsWUFBWSxFQUFFO0FBQ3RGLG9DQUFvQyxhQUFhLEVBQUU7QUFDbkQscURBQXFELFVBQVUsRUFBRTtBQUVqRSw2REFBNkQ7QUFDN0Q7RUFDRSxhQUFhO0FBQ2Y7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLGlCQUFpQixDQUFDLElBQUk7RUFDdEIsa0RBQWtEO0FBQ3BEO0FBRUEsT0FBTztBQUlQO0VBQ0UsYUFBYTtBQUNmO0FBRUEsdURBQXVELGlCQUFpQjtFQUN0RSxhQUFhLENBQUMsMEJBQTBCO0VBQ3hDLG1CQUFZO1VBQVosWUFBWTtFQUNaLDRDQUE0QztFQUM1QyxtQ0FBbUM7RUFDbkMsNEJBQTRCO0VBQzVCLHdEQUF3RDtFQUN4RCxnQkFBZ0I7RUFDaEI7O2lDQUUrQjtBQUNqQztBQUNBLGVBQWUsK0JBQStCLEVBQUU7QUFDaEQsdUJBQXVCLDhCQUE4QixFQUFFO0FBQ3ZEO0VBQ0UsbUJBQVk7VUFBWixZQUFZO0FBQ2Q7QUFDQSxhQUFhO0FBQUM7RUFDWiw4QkFBbUI7RUFBbkIsNkJBQW1CO1VBQW5CLG1CQUFtQjtFQUNuQixlQUFlO0VBQ2YseUJBQThCO1VBQTlCLDhCQUE4QixDQUFDLGlFQUFpRTtFQUNoRyx3QkFBdUI7VUFBdkIsdUJBQXVCO0VBQ3ZCLHlCQUF5QixDQUFDLG1FQUFtRTtFQUM3RixpQkFBaUI7QUFDbkI7QUFFQTs7Ozs7Ozs7Ozs7OztFQWFFO0FBRUY7RUFDRSx3Q0FBd0M7RUFDeEMsNkJBQTZCO0VBQzdCLFVBQVU7QUFDWjtBQUNBO0VBQ0UsWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsZ0JBQWdCLENBQUMsZ0RBQWdEO0VBQ2pFLG1CQUFZO1VBQVosWUFBWTtFQUNaLGNBQWM7QUFDaEI7QUFDQTtFQUNFLHdDQUF3QztFQUN4Qyw2Q0FBNkM7RUFDN0MsWUFBWTtBQUNkO0FBRUE7RUFDRSxlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGVBQWU7QUFDakI7QUFFQTtFQUNFO0lBQ0UsbUJBQVk7WUFBWixZQUFZLEVBQUU7QUFDbEI7QUFDQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0FBQ2Q7QUFHQSxzQkFBc0I7QUFDdEI7RUFDRSxvQkFBYTtFQUFiLGFBQWE7RUFDYixZQUFZO0VBQ1osbUJBQVk7VUFBWixZQUFZO0VBQ1osYUFBYTtFQUNiLHVCQUF1QjtFQUN2QiwwQkFBMEI7RUFDMUI7QUFDRjtBQUNBO0VBQ0Usd0JBQXdCO0FBQzFCO0FBQ0E7RUFDRSxvQkFBYTtFQUFiLGFBQWE7RUFDYiw0QkFBaUI7RUFBakIsNkJBQWlCO1VBQWpCLGlCQUFpQjtFQUNqQixZQUFZO0FBQ2Q7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLGlCQUFpQjtFQUNqQixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLGtCQUFXO1VBQVgsV0FBVztFQUNYLGFBQWE7QUFDZiIsImZpbGUiOiJzcmMvZ3VpRWxlbWVudHMvbW0tZ3JhcGgtaHRtbC9tbS1ncmFwaC1odG1sLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6Om5nLWRlZXAgZm9yZWlnbk9iamVjdC5DbGFzcyAqe1xyXG4gIGN1cnNvcjogZGVmYXVsdDtcclxufVxyXG46Om5nLWRlZXAgZm9yZWlnbk9iamVjdC5DbGFzcyBpbnB1dCwgZm9yZWlnbk9iamVjdC5DbGFzcyAqW2NvbnRlbnRlZGl0YWJsZT1cInRydWVcIl0sIGZvcmVpZ25PYmplY3QuQ2xhc3MgdGV4dGFyZWF7XHJcbiAgY3Vyc29yOiB0ZXh0O1xyXG59XHJcbjo6bmctZGVlcCBmb3JlaWduT2JqZWN0LkNsYXNzIHNlbGVjdHtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi8qIHZpZXdwb2ludCAqL1xyXG46Om5nLWRlZXAgLnZpZXdwb2ludFNoZWxse1xyXG4gIG1heC13aWR0aDogMTA3cHg7XHJcbiAgb3ZlcmZsb3c6IHZpc2libGU7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHJpZ2h0OiAxMHB4O1xyXG4gIHRvcDogMTBweDsgfVxyXG46Om5nLWRlZXAgLnZpZXdwb2ludHJvdy50ZW1wbGF0ZSB7IGRpc3BsYXk6IG5vbmU7IH1cclxuOjpuZy1kZWVwIC52aWV3cG9pbnRyb3cgYnV0dG9uIHtcclxuICBkaXNwbGF5OiBub25lO1xyXG4gIGhlaWdodDogMjFweDtcclxuICB3aWR0aDogMjFweDtcclxuICBtaW4td2lkdGg6IDIxcHg7XHJcbiAgZmxvYXQ6IHJpZ2h0O1xyXG4gIG1hcmdpbi1sZWZ0OiA1cHg7IH1cclxuOjpuZy1kZWVwIC52aWV3cG9pbnRyb3c6aG92ZXIgYnV0dG9uIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB9XHJcbjo6bmctZGVlcCAudmlld3BvaW50cm93eyBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsgZGlzcGxheTogZmxleDsgcG9zaXRpb246IHJlbGF0aXZlOyB9XHJcbi8qOjpuZy1kZWVwIC52aWV3cG9pbnRyb3cgLmJ1dHRvbnN7IGRpc3BsYXk6IG5vbmUgfSovXHJcbjo6bmctZGVlcCAudmlld3BvaW50cm93OmhvdmVyIC5idXR0b25ze1xyXG4gIHotaW5kZXg6IDE7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgdG9wOiAxMDAlO1xyXG4gIHJpZ2h0OiAwOyB9XHJcblxyXG46Om5nLWRlZXAgLnZpZXdwb2ludHJvdyA+IGxhYmVse1xyXG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xyXG4gIG1hcmdpbjogYXV0bztcclxuICBtYXJnaW4tbGVmdDogMDsgfVxyXG46Om5nLWRlZXAgLnZpZXdwb2ludHJvdyA+IGxhYmVsLmNoZWNrYm94eyB9XHJcbjo6bmctZGVlcCAudmlld3BvaW50cm93ID4gbGFiZWwubmFtZXtcclxuICBmbGV4LWdyb3c6IDE7XHJcbiAgZmxleC1iYXNpczogMDtcclxuICBtaW4td2lkdGg6IDA7XHJcbn1cclxuOjpuZy1kZWVwIC52aWV3cG9pbnRyb3cgaW5wdXRbdHlwZT1cInRleHRcIl17IG1pbi13aWR0aDogMDsgaGVpZ2h0OiAyMXB4OyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgYm9yZGVyOiBub25lOyB9XHJcbi8qIDo6bmctZGVlcCAudmlld3BvaW50cm93OmhvdmVyIGlucHV0W3R5cGU9XCJ0ZXh0XCJdeyBib3gtc2hhZG93OiAwIDAgMCAwLjJyZW0gcmdiYSgwLDEyMywyNTUsLjI1KTsgfSovXHJcbjo6bmctZGVlcCAudmlld3BvaW50cm93IGlucHV0W3R5cGU9J2NoZWNrYm94J10sIDo6bmctZGVlcCAudmlld3BvaW50cm93IGlucHV0W3R5cGU9J3JhZGlvJ117XHJcbiAgd2lkdGg6IDE3cHg7XHJcbiAgbWluLXdpZHRoOiAxN3B4O1xyXG4gIGhlaWdodDogMTdweDtcclxufVxyXG46Om5nLWRlZXAgLnZpZXdwb2ludHJvdyBidXR0b257IG1hcmdpbjogYXV0bzsgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgfVxyXG46Om5nLWRlZXAgLnZpZXdwb2ludHJvdyBpbnB1dFtyZWFkb25seV17IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyBib3JkZXI6IG5vbmU7IH1cclxuOjpuZy1kZWVwIC52aWV3cG9pbnRyb3cgaW5wdXQubmFtZXsgb3BhY2l0eTogMC43NTsgfVxyXG46Om5nLWRlZXAgLnZpZXdwb2ludHJvd1tpc2xhc3R2cD0ndHJ1ZSddIGlucHV0Lm5hbWV7IG9wYWNpdHk6IDE7IH1cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBzdGF0aWNpICovXHJcbi50ZW1wbGF0ZSwgLk1NRGVmYXVsdFN0eWxlc3tcclxuICBkaXNwbGF5OiBub25lO1xyXG59XHJcbi50YWJDb250ZW50e1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1mbG93OiBub3dyYXA7Lyo/Ki9cclxuICAvKm1hcmdpbi10b3A6IGNhbGMoIHZhcigtLW1haW5Cb3JkZXJXaWR0aCkgKiAyICk7Ki9cclxufVxyXG5cclxuLypvbGRzKi9cclxuXHJcblxyXG5cclxuLkhpZGRlblN0cnVjdHVyZXMgPiAqe1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuXHJcbi5wcm9wZXJ0eV9zaWRlYmFyLCAuZWRpdG9yU2hlbGwsIC5wcm9wZXJ0eUJhckNvbnRhaW5lcnsvKi5zaWRlYmFyU2hlbGwsKi9cclxuICBmbGV4LWJhc2lzOiAwOy8qIGNhbGModmFyKC0tc2lkZWJhclcpKTsqL1xyXG4gIGZsZXgtZ3JvdzogMTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tYWluQmFja2dyb3VuZENvbG9yKTtcclxuICAvKmJvcmRlci1yaWdodDogdmFyKC0tbWFpbkJvcmRlcik7Ki9cclxuICB3aWR0aDogY2FsYyh2YXIoLS1zaWRlYmFyVykpO1xyXG4gIC8qaGVpZ2h0OiBjYWxjKDEwMHZoIC0gKHZhcigtLXRvcGJhckgpICsgdmFyKC0tdGFiSCkpKTsqL1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgLypmbGV4LXdyYXA6IHdyYXA7XHJcbiAgbWFyZ2luLXRvcDogNXB4O1xyXG4gIGJvcmRlci10b3A6IHZhcigtLW1haW5Cb3JkZXIpOyovXHJcbn1cclxuLnNpZGViYXJTaGVsbHsgYm9yZGVyLXJpZ2h0OiB2YXIoLS1tYWluQm9yZGVyKTsgfVxyXG4ucHJvcGVydHlCYXJDb250YWluZXJ7IGJvcmRlci1sZWZ0OiB2YXIoLS1tYWluQm9yZGVyKTsgfVxyXG4uZWRpdG9yU2hlbGx7XHJcbiAgZmxleC1ncm93OiAzO1xyXG59XHJcbi8qI3NpZGViYXIsICovI21ldGFtb2RlbF9zaWRlYmFyLCAjbW9kZWxfc2lkZWJhciwgLnByb3BlcnR5X3NpZGViYXJ7XHJcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcclxuICBmbGV4LXdyYXA6IHdyYXA7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOy8qc2kgYXR0aXZhIHNvbG8gc2UgZW50cmEgdHV0dG8gaW4gdW5hIHJpZ2EgZSBhdmFuemEgcHVyZSBzcGF6aW8qL1xyXG4gIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG4gIGFsaWduLWNvbnRlbnQ6IGZsZXgtc3RhcnQ7LyphY2NhdGFzdGEgdHV0dG8gdmVydGljYWxtZW50ZSB2ZXJzbyBsYSBjaW1hIGludmVjZSBkaSBzcGF6aWFybGkuKi9cclxuICBwYWRkaW5nLXJpZ2h0OjVweDtcclxufVxyXG5cclxuLypcclxuI3NpZGViYXJSZXNpemVyLCAuc2lkZWJhclJlc2l6ZXJ7XHJcbiAgICBtYXJnaW46IDBweDtcclxuICAgIHBhZGRpbmc6IDBweDtcclxuICAgIHdpZHRoOiB2YXIoLS1tYWluQm9yZGVyV2lkdGgpO1xyXG4gICAgY3Vyc29yOiBldy1yZXNpemU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tYWluQm9yZGVyQ29sb3IpO1xyXG4gICAgdXNlci1kcmFnOiBub25lO1xyXG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XHJcbiAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7XHJcbiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xyXG59Ki9cclxuXHJcbiNzaWRlYmFyPio6Zmlyc3QtY2hpbGQsICNtZXRhbW9kZWxfc2lkZWJhcj4qOmZpcnN0LWNoaWxkLCAjbW9kZWxfc2lkZWJhcj4qOmZpcnN0LWNoaWxke1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW1haW5Cb3JkZXJDb2xvcik7XHJcbiAgd2lkdGg6IHZhcigtLW1haW5Cb3JkZXJXaWR0aCk7XHJcbiAgcmlnaHQ6IDBweDtcclxufVxyXG4jc2lkZWJhcj4qOm5vdCg6Zmlyc3QtY2hpbGQpLCAjbWV0YW1vZGVsX3NpZGViYXI+Kjpub3QoOmZpcnN0LWNoaWxkKSwgI21vZGVsX3NpZGViYXI+Kjpub3QoOmZpcnN0LWNoaWxkKXtcclxuICBwYWRkaW5nOiAycHg7XHJcbiAgbWF4LXdpZHRoOiAyMDBweDtcclxuICBtaW4td2lkdGg6IDc1cHg7XHJcbiAgZmxleC1iYXNpczogNzVweDsvKnNob3VsZCA9PT0gbWluLXdpZHRoIHBlciBtYW50ZW5lcmUgbCdlZmZldHRvLiovXHJcbiAgZmxleC1ncm93OiAxO1xyXG4gIGZsZXgtc2hyaW5rOiAxO1xyXG59XHJcbi5zaWRlYmFyVmVydGV4OmhvdmVye1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLW1haW5Cb3JkZXJDb2xvcik7XHJcbiAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tc2Vjb25kYXJ5Qm9yZGVyQ29sb3IpO1xyXG4gIHBhZGRpbmc6IDBweDtcclxufVxyXG5cclxuLnNpZGViYXJWZXJ0ZXh7XHJcbiAgbWluLXdpZHRoOiA1MHB4O1xyXG4gIG1pbi1oZWlnaHQ6IDUwcHg7XHJcbiAgZmxleC1iYXNpczo1MHB4O1xyXG59XHJcblxyXG5AbWVkaWEgYWxsIGFuZCAobWluLXdpZHRoOiAyMDBweCkge1xyXG4gIC5zaWRlYmFyVmVydGV4IHtcclxuICAgIGZsZXgtZ3JvdzogMDsgfVxyXG59XHJcbiNtZXRhbW9kZWxfZWRpdG9yLCAjbW9kZWxfZWRpdG9ye1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxufVxyXG5cclxuXHJcbi8qIHByb3BlcnR5IGJhciByYXdzICovXHJcbjo6bmctZGVlcCAucHJvcGVydHlCYXJDb250YWluZXIgLm1hdC10YWItbGFiZWx7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBoZWlnaHQ6IDIwcHg7XHJcbiAgZmxleC1ncm93OiAxO1xyXG4gIGZsZXgtYmFzaXM6IDA7XHJcbiAgbWluLXdpZHRoOiAwICFpbXBvcnRhbnQ7XHJcbiAgLyp3aWR0aDogYXV0byAhaW1wb3J0YW50OyovXHJcbiAgbWF4LXdpZHRoOiA1MCUgIWltcG9ydGFudFxyXG59XHJcbjo6bmctZGVlcCAucHJvcGVydHlCYXJDb250YWluZXIgLm1hdC10YWItaGVhZGVyLXBhZ2luYXRpb257XHJcbiAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xyXG59XHJcbi5yYXdDb250YWluZXJ7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWZsb3c6IGNvbHVtbjtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuaDIucmF3VGl0bGV7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBtYXJnaW4tbGVmdDogYXV0bztcclxuICBtYXJnaW4tcmlnaHQ6IGF1dG87XHJcbn1cclxuLnJhd2Vjb3Jle1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1ncm93OjE7XHJcbiAgZmxleC1zaHJpbms6MTtcclxufVxyXG4iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport {Status, U} from '../../common/Joiner';\r\n\r\n@Component({\r\n  selector: 'app-mm-graph-html',\r\n  templateUrl: './mm-graph-html.component.html',\r\n  styleUrls: ['./mm-graph-html.component.css']\r\n})\r\nexport class MmGraphHtmlComponent implements OnInit {\r\n  constructor() { }\r\n  static graphMain() {\r\n    if (Status.status === null) {\r\n      setTimeout(MmGraphHtmlComponent.graphMain, 1000);\r\n      return; }\r\n    // real main can start\r\n  }\r\n  ngOnInit() {\r\n    MmGraphHtmlComponent.graphMain();\r\n  }\r\n}\r\n","export default \"#MM_INPUT{\\r\\n  width: 100vw;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ndWlFbGVtZW50cy9tbWlucHV0L21taW5wdXQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQVk7QUFDZCIsImZpbGUiOiJzcmMvZ3VpRWxlbWVudHMvbW1pbnB1dC9tbWlucHV0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjTU1fSU5QVVR7XHJcbiAgd2lkdGg6IDEwMHZ3O1xyXG59XHJcbiJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-mminput',\r\n  templateUrl: './mminput.component.html',\r\n  styleUrls: ['./mminput.component.css']\r\n})\r\nexport class MminputComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvZ3VpRWxlbWVudHMvbW1zaWRlYmFyL21tc2lkZWJhci5jb21wb25lbnQuY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-mmsidebar',\r\n  templateUrl: './mmsidebar.component.html',\r\n  styleUrls: ['./mmsidebar.component.css']\r\n})\r\nexport class MmsidebarComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvZ3VpRWxlbWVudHMvbXNpZGViYXIvbXNpZGViYXIuY29tcG9uZW50LmNzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-msidebar',\r\n  templateUrl: './msidebar.component.html',\r\n  styleUrls: ['./msidebar.component.css']\r\n})\r\nexport class MsidebarComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","export default \"\\r\\ninput, select {\\r\\n  height: 21px;\\r\\n  border-radius: 5px;\\r\\n  border-bottom-right-radius: 12px; }\\r\\ninput:hover, select:hover, input:focus, select:focus {\\r\\n  outline: none;\\r\\n  border: 2px solid dodgerblue;\\r\\n  height: 22px;\\r\\n}\\r\\n/* label > input[type='checkbox']{ height: 21px; } */\\r\\n/* input[type='checkbox']:hover, input[type='checkbox']:focus { height: 23px; }*/\\r\\ninput[disabled]:hover, select[disabled]:hover{\\r\\n  outline: none;\\r\\n  border: 2px solid gray;\\r\\n  /* height: auto; */\\r\\n}\\r\\n/*propertyBar*/\\r\\n#modelTemplate, #packageTemplate, #classTemplate, #attributeTemplate, #referenceTemplate{\\r\\n  width: 100%;\\r\\n}\\r\\n.propertySidebarTemplates{\\r\\n  display: none;\\r\\n}\\r\\n.wastemplate {\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n}\\r\\n.wastemplate > * {\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  margin-bottom: 8px;\\r\\n}\\r\\n.wastemplate > *{\\r\\n  width: 100%;\\r\\n}\\r\\n.minimizer {\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  border-left: 2px dashed dodgerblue;\\r\\n  border-bottom: 2px dashed dodgerblue;\\r\\n  min-width: 8px !important;\\r\\n  height: auto;\\r\\n  width: 8px !important;\\r\\n}\\r\\n.wastemplate.minimized > *{\\r\\n  display: none;\\r\\n}\\r\\n.wastemplate.minimized:hover {\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  border-color: var(--secondary);\\r\\n}\\r\\n.wastemplate.minimized:before {\\r\\n  color: dodgerblue;\\r\\n  content: '+';\\r\\n  font-size: 20px;\\r\\n  margin: auto;\\r\\n  line-height: 0;\\r\\n}\\r\\n.wastemplate.minimized:hover:before {\\r\\n  color: var(--secondary);\\r\\n}\\r\\n.minimizer:hover, .attributeMinimizer:hover{\\r\\n  border-left: 2px dashed var(--secondary);\\r\\n  border-bottom: 2px dashed var(--secondary);\\r\\n}\\r\\n.wastemplate.minimized{\\r\\n  border: 2px solid dodgerblue;\\r\\n  height: 20px;\\r\\n  margin-bottom: 8px;\\r\\n}\\r\\n.wastemplate.minimized.list{\\r\\n  border-style: dashed;\\r\\n}\\r\\n.minimizer.single {\\r\\n  border-style: solid;\\r\\n  border-right: none;\\r\\n  border-top: none;\\r\\n}\\r\\n.content {\\r\\n  margin-left: 8px;\\r\\n  width: 100%;\\r\\n  height: -webkit-min-content;\\r\\n  height: -moz-min-content;\\r\\n  height: min-content;\\r\\n  -webkit-box-orient: vertical;\\r\\n  -webkit-box-direction: normal;\\r\\n          flex-flow: column;\\r\\n  /*width: calc(100% - 16px);*/\\r\\n\\r\\n}\\r\\nlabel{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  width: 100%;\\r\\n  height: 24px;\\r\\n  line-height: 24px;\\r\\n  white-space: nowrap;\\r\\n}\\r\\nlabel > input, label > select{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  margin: auto;\\r\\n  margin-right: 0;\\r\\n  margin-left: 20px;\\r\\n  width: inherit;\\r\\n  min-width: 60px;\\r\\n  /* float: right; */\\r\\n  /*margin-right: 0;*/\\r\\n}\\r\\nlabel > input[type=\\\"number\\\"] {\\r\\n  min-width: 30px;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ndWlFbGVtZW50cy9wcm9wZXJ0eS1iYXJyL3Byb3BlcnR5LWJhcnIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLGdDQUFnQyxFQUFFO0FBQ3BDO0VBQ0UsYUFBYTtFQUNiLDRCQUE0QjtFQUM1QixZQUFZO0FBQ2Q7QUFFQSxvREFBb0Q7QUFFcEQsZ0ZBQWdGO0FBQ2hGO0VBQ0UsYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixrQkFBa0I7QUFDcEI7QUFDQSxjQUFjO0FBQ2Q7RUFDRSxXQUFXO0FBQ2I7QUFDQTtFQUNFLGFBQWE7QUFDZjtBQUNBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0VBQ2IsV0FBVztFQUNYLFlBQVk7QUFDZDtBQUNBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0VBQ2Isa0JBQWtCO0FBQ3BCO0FBRUE7RUFDRSxXQUFXO0FBQ2I7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLGtDQUFrQztFQUNsQyxvQ0FBb0M7RUFDcEMseUJBQXlCO0VBQ3pCLFlBQVk7RUFDWixxQkFBcUI7QUFDdkI7QUFDQTtFQUNFLGFBQWE7QUFDZjtBQUNBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0VBQ2IsOEJBQThCO0FBQ2hDO0FBQ0E7RUFDRSxpQkFBaUI7RUFDakIsWUFBWTtFQUNaLGVBQWU7RUFDZixZQUFZO0VBQ1osY0FBYztBQUNoQjtBQUNBO0VBQ0UsdUJBQXVCO0FBQ3pCO0FBQ0E7RUFDRSx3Q0FBd0M7RUFDeEMsMENBQTBDO0FBQzVDO0FBQ0E7RUFDRSw0QkFBNEI7RUFDNUIsWUFBWTtFQUNaLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0Usb0JBQW9CO0FBQ3RCO0FBQ0E7RUFDRSxtQkFBbUI7RUFDbkIsa0JBQWtCO0VBQ2xCLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLFdBQVc7RUFDWCwyQkFBbUI7RUFBbkIsd0JBQW1CO0VBQW5CLG1CQUFtQjtFQUNuQiw0QkFBaUI7RUFBakIsNkJBQWlCO1VBQWpCLGlCQUFpQjtFQUNqQiw0QkFBNEI7O0FBRTlCO0FBQ0E7RUFDRSxvQkFBYTtFQUFiLGFBQWE7RUFDYixXQUFXO0VBQ1gsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixtQkFBbUI7QUFDckI7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLFlBQVk7RUFDWixlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLGNBQWM7RUFDZCxlQUFlO0VBQ2Ysa0JBQWtCO0VBQ2xCLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsZUFBZTtBQUNqQiIsImZpbGUiOiJzcmMvZ3VpRWxlbWVudHMvcHJvcGVydHktYmFyci9wcm9wZXJ0eS1iYXJyLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuaW5wdXQsIHNlbGVjdCB7XHJcbiAgaGVpZ2h0OiAyMXB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMTJweDsgfVxyXG5pbnB1dDpob3Zlciwgc2VsZWN0OmhvdmVyLCBpbnB1dDpmb2N1cywgc2VsZWN0OmZvY3VzIHtcclxuICBvdXRsaW5lOiBub25lO1xyXG4gIGJvcmRlcjogMnB4IHNvbGlkIGRvZGdlcmJsdWU7XHJcbiAgaGVpZ2h0OiAyMnB4O1xyXG59XHJcblxyXG4vKiBsYWJlbCA+IGlucHV0W3R5cGU9J2NoZWNrYm94J117IGhlaWdodDogMjFweDsgfSAqL1xyXG5cclxuLyogaW5wdXRbdHlwZT0nY2hlY2tib3gnXTpob3ZlciwgaW5wdXRbdHlwZT0nY2hlY2tib3gnXTpmb2N1cyB7IGhlaWdodDogMjNweDsgfSovXHJcbmlucHV0W2Rpc2FibGVkXTpob3Zlciwgc2VsZWN0W2Rpc2FibGVkXTpob3ZlcntcclxuICBvdXRsaW5lOiBub25lO1xyXG4gIGJvcmRlcjogMnB4IHNvbGlkIGdyYXk7XHJcbiAgLyogaGVpZ2h0OiBhdXRvOyAqL1xyXG59XHJcbi8qcHJvcGVydHlCYXIqL1xyXG4jbW9kZWxUZW1wbGF0ZSwgI3BhY2thZ2VUZW1wbGF0ZSwgI2NsYXNzVGVtcGxhdGUsICNhdHRyaWJ1dGVUZW1wbGF0ZSwgI3JlZmVyZW5jZVRlbXBsYXRle1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5wcm9wZXJ0eVNpZGViYXJUZW1wbGF0ZXN7XHJcbiAgZGlzcGxheTogbm9uZTtcclxufVxyXG4ud2FzdGVtcGxhdGUge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcbi53YXN0ZW1wbGF0ZSA+ICoge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xyXG59XHJcblxyXG4ud2FzdGVtcGxhdGUgPiAqe1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5taW5pbWl6ZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYm9yZGVyLWxlZnQ6IDJweCBkYXNoZWQgZG9kZ2VyYmx1ZTtcclxuICBib3JkZXItYm90dG9tOiAycHggZGFzaGVkIGRvZGdlcmJsdWU7XHJcbiAgbWluLXdpZHRoOiA4cHggIWltcG9ydGFudDtcclxuICBoZWlnaHQ6IGF1dG87XHJcbiAgd2lkdGg6IDhweCAhaW1wb3J0YW50O1xyXG59XHJcbi53YXN0ZW1wbGF0ZS5taW5pbWl6ZWQgPiAqe1xyXG4gIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuLndhc3RlbXBsYXRlLm1pbmltaXplZDpob3ZlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBib3JkZXItY29sb3I6IHZhcigtLXNlY29uZGFyeSk7XHJcbn1cclxuLndhc3RlbXBsYXRlLm1pbmltaXplZDpiZWZvcmUge1xyXG4gIGNvbG9yOiBkb2RnZXJibHVlO1xyXG4gIGNvbnRlbnQ6ICcrJztcclxuICBmb250LXNpemU6IDIwcHg7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG4gIGxpbmUtaGVpZ2h0OiAwO1xyXG59XHJcbi53YXN0ZW1wbGF0ZS5taW5pbWl6ZWQ6aG92ZXI6YmVmb3JlIHtcclxuICBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTtcclxufVxyXG4ubWluaW1pemVyOmhvdmVyLCAuYXR0cmlidXRlTWluaW1pemVyOmhvdmVye1xyXG4gIGJvcmRlci1sZWZ0OiAycHggZGFzaGVkIHZhcigtLXNlY29uZGFyeSk7XHJcbiAgYm9yZGVyLWJvdHRvbTogMnB4IGRhc2hlZCB2YXIoLS1zZWNvbmRhcnkpO1xyXG59XHJcbi53YXN0ZW1wbGF0ZS5taW5pbWl6ZWR7XHJcbiAgYm9yZGVyOiAycHggc29saWQgZG9kZ2VyYmx1ZTtcclxuICBoZWlnaHQ6IDIwcHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xyXG59XHJcbi53YXN0ZW1wbGF0ZS5taW5pbWl6ZWQubGlzdHtcclxuICBib3JkZXItc3R5bGU6IGRhc2hlZDtcclxufVxyXG4ubWluaW1pemVyLnNpbmdsZSB7XHJcbiAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuICBib3JkZXItcmlnaHQ6IG5vbmU7XHJcbiAgYm9yZGVyLXRvcDogbm9uZTtcclxufVxyXG4uY29udGVudCB7XHJcbiAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IG1pbi1jb250ZW50O1xyXG4gIGZsZXgtZmxvdzogY29sdW1uO1xyXG4gIC8qd2lkdGg6IGNhbGMoMTAwJSAtIDE2cHgpOyovXHJcblxyXG59XHJcbmxhYmVse1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAyNHB4O1xyXG4gIGxpbmUtaGVpZ2h0OiAyNHB4O1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbn1cclxubGFiZWwgPiBpbnB1dCwgbGFiZWwgPiBzZWxlY3R7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBtYXJnaW46IGF1dG87XHJcbiAgbWFyZ2luLXJpZ2h0OiAwO1xyXG4gIG1hcmdpbi1sZWZ0OiAyMHB4O1xyXG4gIHdpZHRoOiBpbmhlcml0O1xyXG4gIG1pbi13aWR0aDogNjBweDtcclxuICAvKiBmbG9hdDogcmlnaHQ7ICovXHJcbiAgLyptYXJnaW4tcmlnaHQ6IDA7Ki9cclxufVxyXG5sYWJlbCA+IGlucHV0W3R5cGU9XCJudW1iZXJcIl0ge1xyXG4gIG1pbi13aWR0aDogMzBweDtcclxufVxyXG4iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-property-barr',\r\n  templateUrl: './property-barr.component.html',\r\n  styleUrls: ['./property-barr.component.css']\r\n})\r\nexport class PropertyBarrComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","import {\r\n  AttribETypes, EEnum, ELiteral,\r\n  EOperation,\r\n  EParameter,\r\n  IAttribute,\r\n  IClass, Typedd,\r\n  IModel,\r\n  IPackage,\r\n  IReference,\r\n  M2Attribute,\r\n  M2Class,\r\n  M2Package,\r\n  M2Reference,\r\n  MAttribute,\r\n  MClass,\r\n  MetaModel,\r\n  Model,\r\n  ModelPiece,\r\n  MPackage,\r\n  MReference,\r\n  OperationVisibility,\r\n  ShortAttribETypes,\r\n  Status,\r\n  StyleEditor, Type,\r\n  U, IEdge\r\n} from '../../common/Joiner';\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport ContextMenuEvent = JQuery.ContextMenuEvent;\r\n\r\nexport class PropertyBarr {\r\n  model: IModel = null;\r\n  container: HTMLElement;\r\n  rawTextArea: HTMLTextAreaElement;\r\n  templateContainer: HTMLElement;\r\n  selectedModelPiece: ModelPiece;\r\n  styleEditor: StyleEditor = null;\r\n  selectedModelPieceIsEdge: IEdge;\r\n  clickedLevel: Element;\r\n\r\n  private templateMinimizerClick(e: ClickEvent): void {\r\n    const minimizer: HTMLElement = e.currentTarget;\r\n    let templatee: HTMLElement = minimizer;\r\n    while ( !templatee.classList.contains('wastemplate')) { templatee = templatee.parentNode as HTMLElement; }\r\n    templatee.classList.add('minimized');\r\n    $(templatee).off('click.maximizeTemplate').on('click.maximizeTemplate',\r\n      (ee: ClickEvent) => { PropertyBarr.templateMaximizerClick(ee); }).on('contextmenu', (e: ContextMenuEvent) => { this.subTemplateShow(e); });\r\n    e.stopImmediatePropagation();\r\n    e.stopPropagation();\r\n    e.preventDefault(); }\r\n\r\n  private static templateMaximizerClick(e: ClickEvent): void {\r\n    const template: HTMLElement = e.currentTarget;\r\n    template.classList.remove('minimized'); }\r\n\r\n  private static makeVisibilitySelector(selectHtml: HTMLSelectElement, visibility: OperationVisibility): HTMLSelectElement {\r\n    if (selectHtml === null) { selectHtml = document.createElement('select'); }\r\n    U.clear(selectHtml);\r\n    const optgrp: HTMLOptGroupElement = document.createElement('optgroup');\r\n    optgrp.label = 'Access Modifier';\r\n    selectHtml.appendChild(optgrp);\r\n    let optionFound = false;\r\n    for (const key in OperationVisibility) {\r\n      if (!OperationVisibility[key]) { continue; }\r\n      const access: string = OperationVisibility[key];\r\n      const opt: HTMLOptionElement = document.createElement('option');\r\n      opt.value = access;\r\n      opt.innerHTML = access;\r\n      if (visibility === access) { opt.selected = true; optionFound = true; }\r\n      optgrp.appendChild(opt); }\r\n    U.pe(visibility && !optionFound, 'OperationVisibility selected option not found; optgrp:', optgrp,\r\n      'OperationVisibility:', OperationVisibility, ', searchedVal:', visibility);\r\n    return selectHtml; }\r\n\r\n  constructor(model: IModel) {\r\n    this.model = model;\r\n    this.selectedModelPiece = null;\r\n    const $root: JQuery<HTMLElement> = this.get$root();\r\n    this.container = $root.find('.propertySidebarCurrentContent')[0] as HTMLElement;\r\n    this.templateContainer = $root.find('.propertySidebarTemplates')[0] as HTMLElement;\r\n    U.pe( !this.container, 'property bar shell not found in: ', $root);\r\n    U.pe( !this.templateContainer, 'property bar template shell not found in: ', $root);\r\n    this.styleEditor = new StyleEditor(this, $root); }\r\n\r\n  private subTemplateShow(e: ContextMenuEvent): boolean {\r\n    const target: HTMLElement = e.currentTarget;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (target.classList.contains('list')) return false;\r\n    const mp = ModelPiece.getLogic(target);\r\n    this.show(mp, mp.getHtmlOnGraph(), null);\r\n    return false; }\r\n\r\n  private removeOthers($html: JQuery<HTMLElement>, keep: string): void {\r\n    const toremove: string = '.model, .package, .class, .enum, .attribute, .reference, .operation, .parameter, .literal';\r\n    // ['.model', '.package', '.class', '.enum', '.attribute', '.reference', '.operation', '.parameter', '.literal'];\r\n    const index = toremove.indexOf(keep);\r\n    U.pe(index === -1, 'invalid selector to keep:', keep, toremove);\r\n    // toremove = toremove.substr(0, index - 1) + toremove.substr(index + keep.length);\r\n    $html.find(toremove).not(keep).remove(); }\r\n  private getTemplate(o: ModelPiece, selector: string = 'propertySidebarTemplates', root: HTMLElement = null): JQuery<HTMLElement> {\r\n    // selector = '.propertySidebarTemplates';\r\n    // if (!root) { root = this.templateContainer; }\r\n    // const $html = $(U.cloneHtml<HTMLElement>($(root).find(selector)[0]));\r\n    const html = U.cloneHtml<HTMLElement>(this.templateContainer);\r\n    o.linkToLogic(html);\r\n    html.classList.add('linkedWith_' + U.getTSClassName(o));\r\n    html.classList.remove('propertySidebarTemplates');\r\n    html.classList.remove('template');\r\n    html.classList.add('wastemplate');\r\n    const $html = $(html);\r\n    $html.find('.replaceVarOn').each( (ii: number, elem: HTMLElement) => { U.replaceVars(o, elem, false); });\r\n    let namestr: string;\r\n    const model: IModel = o.getModelRoot();\r\n    if (! (o instanceof IModel || model.isMM()) ) { namestr = o.metaParent.name; } else { namestr = o.name; }\r\n    $html.find('input.name').val(namestr)\r\n      .off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const input: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n        console.log('value:', input.value, 'inputHtml:', input, 'evt:', evt);\r\n        input.value = o.setName(input.value, true);\r\n      });\r\n    $html.find('.replaceVarOn').each( (i: number, elem: HTMLElement) => { U.replaceVars(o, elem, false); });\r\n    $html.find((model.isM() ? '.m1' : '.m2') + 'disable').attr('disabled');\r\n    $html.find((model.isM() ? '.m1' : '.m2') + 'hide').remove();\r\n    return $html; }\r\n\r\n  private get$root(): JQuery<HTMLElement> {\r\n    let TabRootHtml: Element = this.model.graph.container;\r\n    // console.log('TabRootHtml:', TabRootHtml);\r\n    while (!TabRootHtml.classList.contains('UtabContent')) { TabRootHtml = TabRootHtml.parentNode as Element; }\r\n    const $ret = $(TabRootHtml).find('.propertyBarContainer') as JQuery<HTMLElement>;\r\n    U.pe($ret.length !== 1, 'pbar container not found:', $ret);\r\n    return $ret; }\r\n\r\n  public updateRaw(o: ModelPiece = null): void {\r\n    // o = o || this.selectedModelPiece;\r\n    // if (!o) { return; }\r\n    const $root = this.get$root();\r\n    const textArea = this.rawTextArea = $root.find('.rawecore')[0] as HTMLTextAreaElement;\r\n    if (!textArea) { return; }\r\n    textArea.value = o.generateModelString(); }\r\n\r\n  public show(o: ModelPiece = null, clickedLevel: Element, isEdge: IEdge, forceRefresh: boolean = true): void {\r\n    if (!forceRefresh && this.selectedModelPiece === o && this.selectedModelPieceIsEdge === isEdge) {\r\n      if (clickedLevel === this.clickedLevel) { return; }\r\n      this.clickedLevel = clickedLevel = clickedLevel || this.clickedLevel;\r\n      if (isEdge) { this.styleEditor.showE(o as IClass | IReference, isEdge); } else { this.styleEditor.show(o, clickedLevel); }\r\n      return; }\r\n    this.selectedModelPiece = o = (o || this.selectedModelPiece);\r\n    this.clickedLevel = clickedLevel = (clickedLevel || this.clickedLevel);\r\n    if (isEdge) { this.styleEditor.showE(o as IClass | IReference, isEdge); } else { this.styleEditor.show(o, clickedLevel); }\r\n\r\n    U.pe(!(o instanceof ModelPiece), 'invalid parameter type:', U.getTSClassName(o), o);\r\n    this.selectedModelPieceIsEdge = isEdge;\r\n    if (!o) { return; }\r\n    // console.log('PropertyBar.show: ', o);\r\n    U.clear(this.container);\r\n    if (false && false) {\r\n    } else if (o instanceof IModel) { this.container.append(this.getM_I(o));\r\n    } else if (o instanceof IPackage) { this.container.append(this.getP_I(o));\r\n    } else if (o instanceof IClass) { this.container.append(this.getC_I(o));\r\n    } else if (o instanceof EEnum) { this.container.append(this.getE_I(o));\r\n    } else if (o instanceof IAttribute) { this.container.append(this.getA_I(o));\r\n    } else if (o instanceof IReference) { this.container.append(this.getR_I(o));\r\n    } else if (o instanceof EOperation) { this.container.append(this.getO(o));\r\n    } else if (o instanceof EParameter) { this.container.append(this.getParam(o));\r\n    } else if (o instanceof ELiteral) { this.container.append(this.getEL(o));\r\n    } else { U.pe(true, 'invalid ModelPiece type instance: ', o); }\r\n    this.updateRaw(o);\r\n    const $container = $(this.container);\r\n    // $container.find('.template').addClass('.wastemplate').removeClass('template');\r\n    Type.updateTypeSelectors($container);\r\n    $container.find('.minimizer').off('click.minimizeTemplate').on('click.minimizeTemplate',\r\n      (e: ClickEvent) => { this.templateMinimizerClick(e); });\r\n\r\n    /// ottimizzazioni di stile.\r\n    while ($container.find('.wastemplate:has(>.content:not(:has(*)))').remove().length) {} // remove empty minimizer-content.\r\n    // rimuove template.minimizer nested con un solo child che è un altro template+minimizer.\r\n    // tipo:  ((1, 2)) --> (1, 2); sopravvive invece: (1, (2)) -> (1, (2));\r\n    const monoChildReplacer = (i: number, h: HTMLElement) => {\r\n      /*\r\n        '<template_1>' +\r\n          '<content_1>' +\r\n            '<template_2>' +\r\n              '<content_2>' +\r\n              '</content_2>' +\r\n            '</template_2>' +\r\n          '</content_1>' +\r\n        '</template_1>';*/\r\n      const content1: HTMLElement = h;\r\n      const template1: HTMLElement = h.parentElement;\r\n      const template2: ChildNode = content1.firstChild;\r\n      const content2: ChildNode = $(template2).find('>.content')[0];\r\n      const parent = template1.parentElement;\r\n      parent.insertBefore(template2, template1);\r\n      parent.removeChild(template1);\r\n      // template1.insertBefore(content2, content1);\r\n      // template1.removeChild(content1);\r\n    };\r\n    // while ($container.find('.content:has(>.wastemplate:only-child)').each(monoChildReplacer).length) {}\r\n    while ($container.find('.content:has(>.wastemplate:only-child)').each(monoChildReplacer).length) {}\r\n    // rimuove il template.minimizer alla radice, non ha senso chiudere tutto e rimanere con la pbar vuota.\r\n    $container.find('.minimizer.single').on('contextmenu', (e: ContextMenuEvent) => { this.subTemplateShow(e); });\r\n    const contentRoot = $container.find('>.wastemplate>.content')[0];\r\n    U.clear(this.container);\r\n    while (contentRoot.firstChild) { this.container.append(contentRoot.firstChild); }\r\n  }\r\n\r\n  private getM_I(o: IModel): HTMLElement {\r\n    const $html: JQuery<HTMLElement> = this.getTemplate(o);\r\n    this.removeOthers($html, '.model'); // $html.find('.model').show();\r\n    const nsHtml = $html.find('input.namespace')[0] as HTMLInputElement;\r\n    const uriHtml = $html.find('input.uri')[0] as HTMLInputElement;\r\n    nsHtml.value = o.namespace();\r\n    uriHtml.value = o.uri();\r\n    $(uriHtml).off('change.pbar').on('change.pbar', (e: Event) => { o.uri(uriHtml.value); });\r\n    $(nsHtml).off('change.pbar').on('change.pbar', (e: Event) => { o.namespace(nsHtml.value); });\r\n    const pkgListHtml = ($html.find('.packageList')[0]);\r\n    let i;\r\n    for (i = 0; i < o.childrens.length; i++) { pkgListHtml.appendChild(this.getP_I(o.childrens[i])); }\r\n    return $html[0]; }\r\n\r\n  private getP_I(o: IPackage): HTMLElement {\r\n    const $html: JQuery<HTMLElement> = this.getTemplate(o);\r\n    this.removeOthers($html, '.package'); // $html.find('.package').show();\r\n    const classListHtml = $html.find('.classList')[0];\r\n    const enumListHtml = $html.find('.enumList')[0];\r\n    let i: number;\r\n    for (i = 0; i < o.classes.length; i++) { classListHtml.appendChild(this.getC_I(o.classes[i])); }\r\n    for (i = 0; i < o.enums.length; i++) { enumListHtml.appendChild(this.getE_I(o.enums[i])); }\r\n    // package own properties (sembra ci sia solo il name)\r\n    return $html[0]; }\r\n\r\n  private getC_I(o: IClass): HTMLElement {\r\n    const $html: JQuery<HTMLElement> = this.getTemplate(o);\r\n    this.removeOthers($html, '.class');\r\n    // $html.find('.class').show();\r\n    let i: number;\r\n    const attribListHtml: HTMLElement = ($html.find('.attributeList')[0]);\r\n    const refListHtml: HTMLElement = ($html.find('.referenceList')[0]);\r\n    const opListHtml: HTMLElement = ($html.find('.operationList')[0]);\r\n    for (i = 0; i < o.attributes.length; i++) { attribListHtml.appendChild(this.getA_I(o.attributes[i])); }\r\n    for (i = 0; i < o.references.length; i++) { refListHtml.appendChild(this.getR_I(o.references[i])); }\r\n    const operations: EOperation[] = o.getOperations();\r\n    for (i = 0; i < operations.length; i++) { opListHtml.appendChild(this.getO(operations[i])); }\r\n    if (!(o instanceof MClass)) { return $html[0]; }\r\n    /// Se MClass\r\n    const classe: MClass = o as MClass;\r\n    const isRoot: HTMLInputElement = ($html.find('input.isRoot')[0]) as HTMLInputElement;\r\n    console.log('this:', o);\r\n    isRoot.disabled = isRoot.checked = classe.isRoot();\r\n    $(isRoot).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const input: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n        if (!input.checked) { input.checked = true; return $html[0]; }\r\n        classe.setRoot(input.checked);\r\n        classe.refreshGUI();\r\n        this.refreshGUI();\r\n      });\r\n    return $html[0]; }\r\n\r\n  private getE_I(o: EEnum): HTMLElement {\r\n    const $html: JQuery<HTMLElement> = this.getTemplate(o);\r\n    this.removeOthers($html, '.enum');//$html.find('.enum').show();\r\n    let i: number;\r\n    const literalsHtml: HTMLElement = ($html.find('.literalList')[0]);\r\n    for (i = 0; i < o.childrens.length; i++) { literalsHtml.appendChild(this.getEL(o.childrens[i])); }\r\n    return $html[0]; }\r\n\r\n  private setClassChild(o: Typedd, $html: JQuery<HTMLElement>): void {\r\n    let upperbound: number = o.getUpperbound();\r\n    let lowerbound: number = o.getLowerbound();\r\n    const htmlUpperBound = ($html.find('input.upperbound')[0] as HTMLInputElement);\r\n    const htmlLowerBound = ($html.find('input.lowerbound')[0] as HTMLInputElement);\r\n    if (!htmlUpperBound || !htmlLowerBound) return;\r\n    if (upperbound === null) { htmlUpperBound.placeholder = '1'; } else { htmlUpperBound.value = '' + upperbound; }\r\n    if (lowerbound === null) { htmlLowerBound.placeholder = '1'; } else { htmlLowerBound.value = '' + lowerbound; }\r\n\r\n    $(htmlUpperBound).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const target: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n        o.setUpperbound(+target.value);\r\n        o.refreshGUI();\r\n      });\r\n    $(htmlLowerBound).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const target: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n        o.setLowerbound(+target.value);\r\n        o.refreshGUI();\r\n      });\r\n  }\r\n\r\n  private getR_I(o: IReference): HTMLElement {\r\n    const $html: JQuery<HTMLElement> = this.getTemplate(o);\r\n    this.removeOthers($html, '.reference'); // $html.find('.reference').show();\r\n    this.setClassChild(o, $html);\r\n    const htmlContainment = ($html.find('input.referenceContainment')[0] as HTMLInputElement);\r\n    htmlContainment.checked = o.isContainment();\r\n    const selectType = $html.find('select')[0] as HTMLSelectElement;\r\n\r\n    if (o instanceof MReference) { return $html[0]; }\r\n    const ref: M2Reference = o as M2Reference;\r\n    $(selectType).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const target: HTMLSelectElement = (evt.currentTarget as HTMLSelectElement);\r\n        ref.type.changeType(target.value); } );\r\n    $(htmlContainment).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const target: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n        ref.setContainment(target.checked);\r\n        ref.refreshGUI();\r\n      });\r\n    return $html[0]; }\r\n\r\n  private getA_I(o: IAttribute): HTMLElement {\r\n    const $html: JQuery<HTMLElement> = this.getTemplate(o);\r\n    this.removeOthers($html, '.attribute');\r\n    // $html.find('.attribute').show();\r\n    this.setClassChild(o, $html);\r\n    // const typeHtml: HTMLSelectElement = ($html.find('select.attributeType')[0] as HTMLSelectElement);\r\n    // Type.makeTypeSelector(typeHtml, o.getType(), true, true, false, false);\r\n    /* $(typeHtml).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const target: HTMLSelectElement = (evt.currentTarget as HTMLSelectElement);\r\n        o.setType(target.value, null, true);} );*/\r\n\r\n    if (o instanceof M2Attribute) { return $html[0]; }\r\n    // Se MAttribute\r\n    const attr: MAttribute = o as MAttribute;\r\n    $html.find('.attributeValue').val(attr.getValueStr()).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const input: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n        attr.setValueStr(input.value);\r\n        attr.refreshGUI();\r\n      });\r\n    return $html[0]; }\r\n\r\n  private getO(o: EOperation): HTMLElement {\r\n    const $html: JQuery<HTMLElement> = this.getTemplate(o);\r\n    this.removeOthers($html, '.operation'); // $html.find('.operation').show();\r\n    this.setClassChild(o, $html);\r\n    let i: number;\r\n    const paramListHtml: HTMLElement = ($html.find('.parameterList')[0]);\r\n    const visibilityHtml: HTMLSelectElement = ($html.find('.visibilitySelector')[0]) as HTMLSelectElement;\r\n    PropertyBarr.makeVisibilitySelector(visibilityHtml, o.visibility);\r\n    let paramHtml: HTMLElement = this.getParam(o, true);\r\n    const returnName: HTMLInputElement = ($(paramHtml).find('input.name')[0] as HTMLInputElement);\r\n    returnName.placeholder = 'Return type.';\r\n    returnName.disabled = true;\r\n    returnName.value = '';\r\n    const templateContainingParamList = paramListHtml;\r\n    // while (!templateContainingParamList.classList.contains('replaceVarOn')) { templateContainingParamList = templateContainingParamList.parentElement; }\r\n    templateContainingParamList.prepend(paramHtml);\r\n\r\n    for (i = 0; i < o.childrens.length; i++) {\r\n      paramHtml = this.getParam(o.childrens[i], false);\r\n      paramListHtml.appendChild(paramHtml); }\r\n\r\n    $html.find('input.exceptions').val(o.exceptionsStr).off('change.pbar').on('change.pbar', (evt: Event) => {\r\n      const input: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n      input.value = o.exceptionsStr = input.value; });\r\n    return $html[0]; }\r\n\r\n  private getEL(eLiteral: ELiteral): HTMLElement{\r\n    const $html: JQuery<HTMLElement> = this.getTemplate(eLiteral);\r\n    this.removeOthers($html, '.literal'); // $html.find('.literal').show();\r\n    this.setClassChild(eLiteral, $html);\r\n    $html.find('.value').val(eLiteral.ordinal).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const input: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n        eLiteral.ordinal = +input.value;\r\n        eLiteral.refreshGUI();\r\n      });\r\n    $html.find('input.literal').val(eLiteral.literal).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const input: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n        eLiteral.setLiteral(input.value);\r\n        eLiteral.refreshGUI();\r\n      });\r\n    $html.find('.name').val(eLiteral.name).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const input: HTMLInputElement = evt.currentTarget as HTMLInputElement;\r\n        eLiteral.setName(input.value);\r\n        eLiteral.refreshGUI();\r\n      });\r\n    return $html[0];\r\n  }\r\n\r\n  public refreshGUI() { this.show(this.selectedModelPiece, this.clickedLevel, this.selectedModelPieceIsEdge); }\r\n\r\n  private getParam(o: EParameter | EOperation, asReturnType: boolean = false) {\r\n    const $html: JQuery<HTMLElement> = this.getTemplate(o);\r\n    this.removeOthers($html, '.parameter'); // $html.find('.parameter').show();\r\n    this.setClassChild(o, $html);\r\n    const typeHtml: HTMLSelectElement = ($html.find('select')[0] as HTMLSelectElement);\r\n    typeHtml.dataset.void = asReturnType ? \"true\" : \"false\";\r\n    const ordered = ($html.find('input.ordered')[0] as HTMLInputElement);\r\n    const unique = ($html.find('input.unique')[0] as HTMLInputElement);\r\n    ordered.checked = o.ordered;\r\n    unique.checked = o.unique;\r\n    $(typeHtml).off('change.pbar').on('change.pbar',\r\n      (evt: Event) => {\r\n        const target: HTMLSelectElement = (evt.currentTarget as HTMLSelectElement);\r\n        o.setType(target.value, null, true); } ); // .trigger('change');\r\n    return $html[0]; }\r\n\r\n  public onShow(isRaw: boolean = false): void { this.styleEditor.onHide(); }\r\n\r\n  public onHide(): void {}\r\n\r\n}\r\n","export default \"\\n.styleContainer{\\n  /*position: relative;\\n  height: 100%;\\n  overflow-y: auto;\\n  overflow-x: auto;\\n  padding: 17px;\\n  padding-right: calc(17px - 10px);*/\\n}\\n.template{\\n  display: none;\\n}\\n.StyleEditorDisplay .template{\\n  display: unset;\\n}\\n.preview{\\n  position: relative;\\n  display: block;\\n  width: 100%;\\n  min-height: 10px;\\n  border: 1px solid red;\\n  background-color: transparent;\\n  margin-bottom: 10px;\\n  margin-top: 10px;\\n}\\n.preview:blank{\\n  background-color: gray;\\n}\\n.separatorShell.top{\\n  margin-top: 30px;\\n}\\ndiv[contenteditable=\\\"true\\\"]:focus {\\n  max-height: unset;\\n}\\ndiv[contenteditable=\\\"true\\\"], div[contenteditable=\\\"false\\\"] {\\n  overflow: auto;\\n  display: -webkit-box;\\n  display: flex;\\n  color: black;\\n  border: 1px solid black;\\n  min-height: 100px;\\n  max-height: 100px;\\n  margin-top: 5px;\\n  margin-bottom: 5px;\\n}\\ndiv[contenteditable=\\\"true\\\"] {\\n  background-color: white;\\n  cursor: text;\\n}\\ndiv[contenteditable=\\\"false\\\"] {\\n  background-color: gray;\\n  cursor: no-drop;\\n}\\nlabel.allowEdit {\\n  color: goldenrod;\\n}\\nbutton {\\n  margin: 5px;\\n}\\n.helpButton{\\n  width: 35px;\\n  height: 35px;\\n}\\n.style.own, .style.instances{\\n  display: -webkit-box;\\n  display: flex;\\n  flex-flow: wrap;\\n}\\n.detail{\\n  border: 3px solid #0084ff;\\n  background: #252525;\\n}\\nbutton.detail {\\n  margin: auto;\\n  margin-top: 0;\\n  margin-bottom: 0;\\n  display: -webkit-box;\\n  display: flex;\\n  height: auto;\\n  border-top-left-radius: 17px;\\n  border-top-right-radius: 17px;\\n  z-index: 1;\\n }\\nbutton.detail:first-child:not(:only-child){ /* first visible child not possible ic pure css */\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n          flex-flow: column;\\n  margin-right: 0;\\n  border-top-right-radius: 0;\\n  border-bottom-right-radius: 0;\\n}\\nbutton.detail:last-child:not(:only-child){\\n  margin-left: -3px;\\n  border-top-left-radius: 0;\\n  border-bottom-left-radius: 0;\\n}\\nbutton.detail:focus {\\n  box-shadow: none !important;\\n  outline: none !important;\\n}\\ndiv.detail{\\n  padding: 5px;\\n  margin-top: -3px;\\n  width: calc(100%);\\n}\\n.saveasrow{\\n  display: -webkit-box;\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\nbutton.delete{\\n  margin: auto;\\n  margin-bottom: 5px;\\n}\\nbutton.saveas{\\n  margin: auto;\\n  margin-bottom: 5px;\\n}\\ninput.saveas {\\n  margin: auto;\\n  margin-bottom: 5px;\\n  flex-basis: 100px;\\n  -webkit-box-flex: 0.6;\\n          flex-grow: 0.6;\\n  width: 0;\\n}\\n.compatibleRow > label > span{\\n  height: -webkit-fit-content;\\n  height: -moz-fit-content;\\n  height: fit-content;\\n  display: -webkit-inline-box;\\n  display: inline-flex;\\n  margin: auto;\\n  -webkit-box-ordinal-group: 3;\\n          order: 2;\\n  margin-left: 0;\\n}\\n.saveasrow, .compatibleRow{\\n  width: 100%;\\n  display: -webkit-box;\\n  display: flex;\\n  flex-flow: wrap;\\n}\\n.compatibleRow > label > input {\\n  -webkit-box-ordinal-group: 2;\\n          order: 1;\\n  margin-left: 0;\\n  margin-right: 5px;\\n}\\n.detail > label {\\n  display: -webkit-inline-box;\\n  display: inline-flex;\\n  margin: auto;\\n  flex-wrap: nowrap;\\n}\\nbutton.detail > .opened, button.detail > .closed{\\n  margin: auto;\\n}\\ntable {\\n  width: 100%;\\n}\\ntd.title {\\n  font-weight: bold;\\n  padding-top: 10px;\\n  text-align: center;\\n}\\nh1 {\\n  text-align: center;\\n}\\nselect{\\n  /* background: inherit;\\n  border: none;\\n  color: inherit;\\n  font: inherit; */\\n  /*flex-basis: 0;*/\\n  flex-shrink: 1;\\n  -webkit-box-flex: 0.9;\\n          flex-grow: 0.9;\\n  max-width: -webkit-max-content;\\n  max-width: -moz-max-content;\\n  max-width: max-content;\\n  min-width: 0;\\n}\\nlabel {display: -webkit-box;display: flex; -webkit-box-flex:1; flex-grow:1;}\\nlabel > *, h6 > * {\\n  display: -webkit-box;\\n  display: flex;\\n  /* flex-grow: 1;*/\\n  margin: auto;\\n  flex-wrap: wrap;\\n}\\nh6{\\n  display: -webkit-inline-box;\\n  display: inline-flex;\\n  margin: auto;\\n\\n}\\n.separator > * {\\n  text-align: center;\\n}\\n/*\\nbutton {\\n  background: #0084ff;\\n  border: none;\\n  border-radius: 5px;\\n  padding: 8px 14px;\\n  font-size: 15px;\\n  color: #fff;\\n}\\n\\nbutton:disabled{\\n  background: gray;\\n}*/\\ninput[type=\\\"number\\\"] {\\n  width: 40px;\\n  margin-right: 5px;\\n}\\n.zoomX, .zoomY, .gridX, .gridY {\\n  margin-left: 5px;\\n  margin-right: 15px;}\\ninput[type=\\\"color\\\"] {\\n  width: 22px;\\n  height: 22px;\\n  margin-right: 5px;\\n  padding: 0;\\n  vertical-align: middle;\\n  /*border: none;*/\\n}\\ninput[type=\\\"color\\\"]::-webkit-color-swatch-wrapper {\\n  /*il \\\"bordo\\\"?*/\\n  padding: 2px;\\n}\\ninput[type=\\\"color\\\"]::-webkit-color-swatch {\\n  /*il centro*/\\n  /*border-radius: 100%;*/\\n  border: none;\\n}\\ninput[type=\\\"checkbox\\\"] {\\n  width: 24px;\\n  height: 24px;\\n  margin: 0;\\n  margin-right: 5px;\\n  vertical-align: middle;\\n}\\nlabel>input[type=\\\"checkbox\\\"],\\nlabel>input[type=\\\"color\\\"] {\\n  margin-bottom: 3px;\\n}\\n#primary_color {\\n  border-radius: 100%;\\n  height: 60px;\\n  width: 60px;\\n  border: none;\\n  outline: none;\\n  -webkit-appearance: none;\\n}\\n[contenteditable=true]:empty:before {\\n  content: attr(placeholder);\\n  display: block;\\n  /* For Firefox */\\n  cursor: text;\\n  vertical-align: middle;\\n  color: darkgray;\\n  text-align: center;\\n  margin: auto;\\n}\\n.separatorShell {\\n  min-height: 33px;\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n          flex-flow: row;\\n  flex-wrap: nowrap;\\n  margin: auto;\\n  margin-top: 10px;\\n  margin-bottom: 10px;\\n  width: 100%;\\n}\\n.roww {\\n  display: -webkit-box;\\n  display: flex;\\n  flex-wrap: wrap;\\n  width: 100%;\\n}\\n.colContainer, .columnContainer {\\n  display: -webkit-box;\\n  display: flex;\\n  flex-flow: nowrap;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n          flex-flow: row;\\n}\\n.colChild, .columnChild {\\n  display: -webkit-inline-box;\\n  display: inline-flex;\\n  flex-flow: wrap;\\n  -webkit-box-flex: 1;\\n          flex-grow: 1;\\n  max-width: 100%;\\n  min-width: 0;\\n}\\n.separator {\\n  margin: auto;\\n  display: inline-block;\\n}\\n.stylelabel{\\n  display: -webkit-inline-box;\\n  display: inline-flex;\\n  margin: auto;\\n  margin-right: 5px;\\n}\\nselect.stylename{\\n  display: -webkit-box;\\n  display: flex;\\n  margin: auto;\\n  margin-left: 0;\\n}\\n.HorizontalContainer{\\n  display: -webkit-box;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n          flex-flow: row;\\n  flex-wrap: wrap;\\n  width: 100%;\\n}\\n.HorizontalChild{\\n  display: -webkit-inline-box;\\n  display: inline-flex;\\n  margin: auto;\\n}\\n.opened{\\n  display: none;\\n}\\n.helpButton {\\n  margin-top: auto;\\n  margin-bottom: auto;\\n  display: -webkit-box;\\n  display: flex;\\n  background: rgb(0, 62, 127);\\n  border-color: rgb(0, 62, 127);\\n}\\n.expressionRoot {\\n  flex-wrap: nowrap !important;\\n  max-width: 100%;\\n}\\ninput.fill{\\n  -webkit-box-flex: 1;\\n          flex-grow: 1;\\n  flex-basis: 0;\\n  margin-left: 7px;\\n}\\n.leftside{\\n  -webkit-box-flex: 3;\\n          flex-grow: 3;\\n  flex-basis: 0;\\n  min-width: 0;\\n  max-width: 150px;\\n}\\n.rightside{\\n  -webkit-box-flex: 7;\\n          flex-grow: 7;\\n  flex-basis: 0;\\n  min-width: 0;\\n}\\n.arrowContainer{\\n  display: -webkit-box;\\n  display: flex;\\n  margin-bottom: 10px;\\n}\\nbutton.arrow{\\n  display: -webkit-box;\\n  display: flex;\\n  line-height: unset;\\n  padding: 0 6px;\\n}\\n.tsclass{\\n  margin: auto;\\n  display: inline;\\n  text-align: center;\\n}\\n/* */\\n/*\\npre {\\n  background:#EEE;\\n  padding:5px;\\n  width: 290px;\\n}*/\\n.addHeader{\\n  display: -webkit-box;\\n  display: flex;\\n}\\n.addHeader > button {\\n  margin-left: 0;\\n  -webkit-box-ordinal-group: 3;\\n          order: 2;\\n}\\nselect.attributetypeadd{\\n  flex-basis: 0;\\n  -webkit-box-flex: 1;\\n          flex-grow: 1;\\n  min-width: 0;\\n  margin-right: 10px;\\n}\\n.previewselector{\\n  height: 23px;\\n  outline: none;\\n  border: 2px dashed #666666;\\n}\\n.showAsEdge{\\n  margin-right: 5px !important;\\n}\\n.showAsEdgeText{\\n  margin-left: 0 !important;\\n}\\nbutton.delete, button.saveas{\\n  font-size: 0.8rem;\\n}\\nbutton.deleteRule{\\n  -webkit-box-flex: 0;\\n          flex-grow: 0;\\n  flex-basis: auto;\\n  min-width: auto;\\n  margin-top: 0;\\n  margin-bottom: 0;\\n  padding: 5px;\\n}\\n.nowrap{\\n  flex-wrap: nowrap;\\n}\\n._root {\\n  margin-bottom: 5px;\\n}\\ndiv.detail.measurable > div.template {\\n  display: none;\\n}\\n.graphColor, .showGrid{\\n  margin-left: 0;\\n}\\nselect.operator{\\n  -moz-text-align-last: center;\\n       text-align-last: center;\\n  margin-left: 5px;\\n  margin-right: 5px;\\n  width: 25px;\\n}\\nspan.operatortext{\\n  margin-left: 5px;\\n  margin-right: 5px;\\n}\\nselect.operator:disabled{\\n  display: none;\\n  /*\\n  background: inherit;\\n  border: none;\\n  -moz-appearance: none;\\n  -webkit-appearance: none;\\n  margin: 0;*/\\n}\\nspan.nameprefix {\\n  margin-left: 7px;\\n  background: white;\\n  border: 2px inset rgb(238, 238, 238);\\n  height: 21px;\\n  border-right: none;\\n  color: black;\\n  line-height: 16px;\\n}\\ninput.name {\\n  margin-left: 0;\\n  border-left: none;\\n  padding-left: 0;\\n}\\nlabel:focus > input.name {\\n  outline: none;\\n  box-shadow: 0 2px 2px 2px rgb(77, 144, 254);\\n}\\ninput.name:focus {\\n  outline: none;\\n  box-shadow: 2px 2px 0px 0px rgb(77, 144, 254), 2px -2px 0px 0px rgb(77, 144, 254);\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ndWlFbGVtZW50cy9zdHlsZS1lZGl0b3Ivc3R5bGUtZWRpdG9yLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0VBQ0U7Ozs7O29DQUtrQztBQUNwQztBQUNBO0VBQ0UsYUFBYTtBQUNmO0FBQ0E7RUFDRSxjQUFjO0FBQ2hCO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsY0FBYztFQUNkLFdBQVc7RUFDWCxnQkFBZ0I7RUFDaEIscUJBQXFCO0VBQ3JCLDZCQUE2QjtFQUM3QixtQkFBbUI7RUFDbkIsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxzQkFBc0I7QUFDeEI7QUFDQTtFQUNFLGdCQUFnQjtBQUNsQjtBQUVBO0VBQ0UsaUJBQWlCO0FBQ25CO0FBQ0E7RUFDRSxjQUFjO0VBQ2Qsb0JBQWE7RUFBYixhQUFhO0VBQ2IsWUFBWTtFQUNaLHVCQUF1QjtFQUN2QixpQkFBaUI7RUFDakIsaUJBQWlCO0VBQ2pCLGVBQWU7RUFDZixrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLHVCQUF1QjtFQUN2QixZQUFZO0FBQ2Q7QUFDQTtFQUNFLHNCQUFzQjtFQUN0QixlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLFdBQVc7QUFDYjtBQUNBO0VBQ0UsV0FBVztFQUNYLFlBQVk7QUFDZDtBQUNBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0VBQ2IsZUFBZTtBQUNqQjtBQUNBO0VBQ0UseUJBQXlCO0VBQ3pCLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYixnQkFBZ0I7RUFDaEIsb0JBQWE7RUFBYixhQUFhO0VBQ2IsWUFBWTtFQUNaLDRCQUE0QjtFQUM1Qiw2QkFBNkI7RUFDN0IsVUFBVTtDQUNYO0FBQ0QsNENBQTRDLGlEQUFpRDtFQUMzRiw0QkFBaUI7RUFBakIsNkJBQWlCO1VBQWpCLGlCQUFpQjtFQUNqQixlQUFlO0VBQ2YsMEJBQTBCO0VBQzFCLDZCQUE2QjtBQUMvQjtBQUNBO0VB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O0VBQ2IsbUJBQVk7VUFBWixZQUFZO0VBQ1osWUFBWTtFQUNaLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYiwwQkFBMEI7QUFDNUI7QUFFQTtFQUNFLDRCQUE0QjtBQUM5QjtBQUNBO0VBQ0UseUJBQXlCO0FBQzNCO0FBQ0E7RUFDRSxpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLG1CQUFZO1VBQVosWUFBWTtFQUNaLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsYUFBYTtFQUNiLGdCQUFnQjtFQUNoQixZQUFZO0FBQ2Q7QUFDQTtFQUNFLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0Usa0JBQWtCO0FBQ3BCO0FBQ0E7RUFDRSxhQUFhO0FBQ2Y7QUFDQTtFQUNFLGNBQWM7QUFDaEI7QUFDQTtFQUNFLDRCQUF1QjtPQUF2Qix1QkFBdUI7RUFDdkIsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQixXQUFXO0FBQ2I7QUFDQTtFQUNFLGdCQUFnQjtFQUNoQixpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGFBQWE7RUFDYjs7Ozs7YUFLVztBQUNiO0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsaUJBQWlCO0VBQ2pCLG9DQUFvQztFQUNwQyxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsZUFBZTtBQUNqQjtBQUVBO0VBQ0UsYUFBYTtFQUNiLDJDQUEyQztBQUM3QztBQUVBO0VBQ0UsYUFBYTtFQUNiLGlGQUFpRjtBQUNuRiIsImZpbGUiOiJzcmMvZ3VpRWxlbWVudHMvc3R5bGUtZWRpdG9yL3N0eWxlLWVkaXRvci5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXG4uc3R5bGVDb250YWluZXJ7XG4gIC8qcG9zaXRpb246IHJlbGF0aXZlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIG92ZXJmbG93LXk6IGF1dG87XG4gIG92ZXJmbG93LXg6IGF1dG87XG4gIHBhZGRpbmc6IDE3cHg7XG4gIHBhZGRpbmctcmlnaHQ6IGNhbGMoMTdweCAtIDEwcHgpOyovXG59XG4udGVtcGxhdGV7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG4uU3R5bGVFZGl0b3JEaXNwbGF5IC50ZW1wbGF0ZXtcbiAgZGlzcGxheTogdW5zZXQ7XG59XG4ucHJldmlld3tcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBibG9jaztcbiAgd2lkdGg6IDEwMCU7XG4gIG1pbi1oZWlnaHQ6IDEwcHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHJlZDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIG1hcmdpbi10b3A6IDEwcHg7XG59XG4ucHJldmlldzpibGFua3tcbiAgYmFja2dyb3VuZC1jb2xvcjogZ3JheTtcbn1cbi5zZXBhcmF0b3JTaGVsbC50b3B7XG4gIG1hcmdpbi10b3A6IDMwcHg7XG59XG5cbmRpdltjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJdOmZvY3VzIHtcbiAgbWF4LWhlaWdodDogdW5zZXQ7XG59XG5kaXZbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXSwgZGl2W2NvbnRlbnRlZGl0YWJsZT1cImZhbHNlXCJdIHtcbiAgb3ZlcmZsb3c6IGF1dG87XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGNvbG9yOiBibGFjaztcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIG1pbi1oZWlnaHQ6IDEwMHB4O1xuICBtYXgtaGVpZ2h0OiAxMDBweDtcbiAgbWFyZ2luLXRvcDogNXB4O1xuICBtYXJnaW4tYm90dG9tOiA1cHg7XG59XG5kaXZbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBjdXJzb3I6IHRleHQ7XG59XG5kaXZbY29udGVudGVkaXRhYmxlPVwiZmFsc2VcIl0ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBncmF5O1xuICBjdXJzb3I6IG5vLWRyb3A7XG59XG5sYWJlbC5hbGxvd0VkaXQge1xuICBjb2xvcjogZ29sZGVucm9kO1xufVxuYnV0dG9uIHtcbiAgbWFyZ2luOiA1cHg7XG59XG4uaGVscEJ1dHRvbntcbiAgd2lkdGg6IDM1cHg7XG4gIGhlaWdodDogMzVweDtcbn1cbi5zdHlsZS5vd24sIC5zdHlsZS5pbnN0YW5jZXN7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZmxvdzogd3JhcDtcbn1cbi5kZXRhaWx7XG4gIGJvcmRlcjogM3B4IHNvbGlkICMwMDg0ZmY7XG4gIGJhY2tncm91bmQ6ICMyNTI1MjU7XG59XG5idXR0b24uZGV0YWlsIHtcbiAgbWFyZ2luOiBhdXRvO1xuICBtYXJnaW4tdG9wOiAwO1xuICBtYXJnaW4tYm90dG9tOiAwO1xuICBkaXNwbGF5OiBmbGV4O1xuICBoZWlnaHQ6IGF1dG87XG4gIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDE3cHg7XG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAxN3B4O1xuICB6LWluZGV4OiAxO1xuIH1cbmJ1dHRvbi5kZXRhaWw6Zmlyc3QtY2hpbGQ6bm90KDpvbmx5LWNoaWxkKXsgLyogZmlyc3QgdmlzaWJsZSBjaGlsZCBub3QgcG9zc2libGUgaWMgcHVyZSBjc3MgKi9cbiAgZmxleC1mbG93OiBjb2x1bW47XG4gIG1hcmdpbi1yaWdodDogMDtcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDA7XG4gIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAwO1xufVxuYnV0dG9uLmRldGFpbDpsYXN0LWNoaWxkOm5vdCg6b25seS1jaGlsZCl7XG4gIG1hcmdpbi1sZWZ0OiAtM3B4O1xuICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAwO1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAwO1xufVxuYnV0dG9uLmRldGFpbDpmb2N1cyB7XG4gIGJveC1zaGFkb3c6IG5vbmUgIWltcG9ydGFudDtcbiAgb3V0bGluZTogbm9uZSAhaW1wb3J0YW50O1xufVxuZGl2LmRldGFpbHtcbiAgcGFkZGluZzogNXB4O1xuICBtYXJnaW4tdG9wOiAtM3B4O1xuICB3aWR0aDogY2FsYygxMDAlKTtcbn1cbi5zYXZlYXNyb3d7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtd3JhcDogd3JhcDtcbn1cbmJ1dHRvbi5kZWxldGV7XG4gIG1hcmdpbjogYXV0bztcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xufVxuYnV0dG9uLnNhdmVhc3tcbiAgbWFyZ2luOiBhdXRvO1xuICBtYXJnaW4tYm90dG9tOiA1cHg7XG59XG5pbnB1dC5zYXZlYXMge1xuICBtYXJnaW46IGF1dG87XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbiAgZmxleC1iYXNpczogMTAwcHg7XG4gIGZsZXgtZ3JvdzogMC42O1xuICB3aWR0aDogMDtcbn1cbi5jb21wYXRpYmxlUm93ID4gbGFiZWwgPiBzcGFue1xuICBoZWlnaHQ6IGZpdC1jb250ZW50O1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgbWFyZ2luOiBhdXRvO1xuICBvcmRlcjogMjtcbiAgbWFyZ2luLWxlZnQ6IDA7XG59XG4uc2F2ZWFzcm93LCAuY29tcGF0aWJsZVJvd3tcbiAgd2lkdGg6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZmxvdzogd3JhcDtcbn1cbi5jb21wYXRpYmxlUm93ID4gbGFiZWwgPiBpbnB1dCB7XG4gIG9yZGVyOiAxO1xuICBtYXJnaW4tbGVmdDogMDtcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XG59XG4uZGV0YWlsID4gbGFiZWwge1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgbWFyZ2luOiBhdXRvO1xuICBmbGV4LXdyYXA6IG5vd3JhcDtcbn1cbmJ1dHRvbi5kZXRhaWwgPiAub3BlbmVkLCBidXR0b24uZGV0YWlsID4gLmNsb3NlZHtcbiAgbWFyZ2luOiBhdXRvO1xufVxudGFibGUge1xuICB3aWR0aDogMTAwJTtcbn1cblxudGQudGl0bGUge1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgcGFkZGluZy10b3A6IDEwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuaDEge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5zZWxlY3R7XG4gIC8qIGJhY2tncm91bmQ6IGluaGVyaXQ7XG4gIGJvcmRlcjogbm9uZTtcbiAgY29sb3I6IGluaGVyaXQ7XG4gIGZvbnQ6IGluaGVyaXQ7ICovXG4gIC8qZmxleC1iYXNpczogMDsqL1xuICBmbGV4LXNocmluazogMTtcbiAgZmxleC1ncm93OiAwLjk7XG4gIG1heC13aWR0aDogbWF4LWNvbnRlbnQ7XG4gIG1pbi13aWR0aDogMDtcbn1cblxubGFiZWwge2Rpc3BsYXk6IGZsZXg7IGZsZXgtZ3JvdzoxO31cbmxhYmVsID4gKiwgaDYgPiAqIHtcbiAgZGlzcGxheTogZmxleDtcbiAgLyogZmxleC1ncm93OiAxOyovXG4gIG1hcmdpbjogYXV0bztcbiAgZmxleC13cmFwOiB3cmFwO1xufVxuXG5oNntcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIG1hcmdpbjogYXV0bztcblxufVxuLnNlcGFyYXRvciA+ICoge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4vKlxuYnV0dG9uIHtcbiAgYmFja2dyb3VuZDogIzAwODRmZjtcbiAgYm9yZGVyOiBub25lO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIHBhZGRpbmc6IDhweCAxNHB4O1xuICBmb250LXNpemU6IDE1cHg7XG4gIGNvbG9yOiAjZmZmO1xufVxuXG5idXR0b246ZGlzYWJsZWR7XG4gIGJhY2tncm91bmQ6IGdyYXk7XG59Ki9cbmlucHV0W3R5cGU9XCJudW1iZXJcIl0ge1xuICB3aWR0aDogNDBweDtcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XG59XG4uem9vbVgsIC56b29tWSwgLmdyaWRYLCAuZ3JpZFkge1xuICBtYXJnaW4tbGVmdDogNXB4O1xuICBtYXJnaW4tcmlnaHQ6IDE1cHg7fVxuXG5pbnB1dFt0eXBlPVwiY29sb3JcIl0ge1xuICB3aWR0aDogMjJweDtcbiAgaGVpZ2h0OiAyMnB4O1xuICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgcGFkZGluZzogMDtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgLypib3JkZXI6IG5vbmU7Ki9cbn1cblxuaW5wdXRbdHlwZT1cImNvbG9yXCJdOjotd2Via2l0LWNvbG9yLXN3YXRjaC13cmFwcGVyIHtcbiAgLyppbCBcImJvcmRvXCI/Ki9cbiAgcGFkZGluZzogMnB4O1xufVxuXG5pbnB1dFt0eXBlPVwiY29sb3JcIl06Oi13ZWJraXQtY29sb3Itc3dhdGNoIHtcbiAgLyppbCBjZW50cm8qL1xuICAvKmJvcmRlci1yYWRpdXM6IDEwMCU7Ki9cbiAgYm9yZGVyOiBub25lO1xufVxuXG5pbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0ge1xuICB3aWR0aDogMjRweDtcbiAgaGVpZ2h0OiAyNHB4O1xuICBtYXJnaW46IDA7XG4gIG1hcmdpbi1yaWdodDogNXB4O1xuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xufVxuXG5sYWJlbD5pbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0sXG5sYWJlbD5pbnB1dFt0eXBlPVwiY29sb3JcIl0ge1xuICBtYXJnaW4tYm90dG9tOiAzcHg7XG59XG5cbiNwcmltYXJ5X2NvbG9yIHtcbiAgYm9yZGVyLXJhZGl1czogMTAwJTtcbiAgaGVpZ2h0OiA2MHB4O1xuICB3aWR0aDogNjBweDtcbiAgYm9yZGVyOiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG59XG5cbltjb250ZW50ZWRpdGFibGU9dHJ1ZV06ZW1wdHk6YmVmb3JlIHtcbiAgY29udGVudDogYXR0cihwbGFjZWhvbGRlcik7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICAvKiBGb3IgRmlyZWZveCAqL1xuICBjdXJzb3I6IHRleHQ7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG4gIGNvbG9yOiBkYXJrZ3JheTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW46IGF1dG87XG59XG5cbi5zZXBhcmF0b3JTaGVsbCB7XG4gIG1pbi1oZWlnaHQ6IDMzcHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZmxvdzogcm93O1xuICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgbWFyZ2luOiBhdXRvO1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xuICB3aWR0aDogMTAwJTtcbn1cbi5yb3d3IHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC13cmFwOiB3cmFwO1xuICB3aWR0aDogMTAwJTtcbn1cbi5jb2xDb250YWluZXIsIC5jb2x1bW5Db250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IG5vd3JhcDtcbiAgZmxleC1mbG93OiByb3c7XG59XG4uY29sQ2hpbGQsIC5jb2x1bW5DaGlsZCB7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBmbGV4LWZsb3c6IHdyYXA7XG4gIGZsZXgtZ3JvdzogMTtcbiAgbWF4LXdpZHRoOiAxMDAlO1xuICBtaW4td2lkdGg6IDA7XG59XG4uc2VwYXJhdG9yIHtcbiAgbWFyZ2luOiBhdXRvO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG59XG4uc3R5bGVsYWJlbHtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIG1hcmdpbjogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XG59XG5zZWxlY3Quc3R5bGVuYW1le1xuICBkaXNwbGF5OiBmbGV4O1xuICBtYXJnaW46IGF1dG87XG4gIG1hcmdpbi1sZWZ0OiAwO1xufVxuLkhvcml6b250YWxDb250YWluZXJ7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZmxvdzogcm93O1xuICBmbGV4LXdyYXA6IHdyYXA7XG4gIHdpZHRoOiAxMDAlO1xufVxuLkhvcml6b250YWxDaGlsZHtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIG1hcmdpbjogYXV0bztcbn1cbi5vcGVuZWR7XG4gIGRpc3BsYXk6IG5vbmU7XG59XG5cbi5oZWxwQnV0dG9uIHtcbiAgbWFyZ2luLXRvcDogYXV0bztcbiAgbWFyZ2luLWJvdHRvbTogYXV0bztcbiAgZGlzcGxheTogZmxleDtcbiAgYmFja2dyb3VuZDogcmdiKDAsIDYyLCAxMjcpO1xuICBib3JkZXItY29sb3I6IHJnYigwLCA2MiwgMTI3KTtcbn1cbi5leHByZXNzaW9uUm9vdCB7XG4gIGZsZXgtd3JhcDogbm93cmFwICFpbXBvcnRhbnQ7XG4gIG1heC13aWR0aDogMTAwJTtcbn1cbmlucHV0LmZpbGx7XG4gIGZsZXgtZ3JvdzogMTtcbiAgZmxleC1iYXNpczogMDtcbiAgbWFyZ2luLWxlZnQ6IDdweDtcbn1cbi5sZWZ0c2lkZXtcbiAgZmxleC1ncm93OiAzO1xuICBmbGV4LWJhc2lzOiAwO1xuICBtaW4td2lkdGg6IDA7XG4gIG1heC13aWR0aDogMTUwcHg7XG59XG4ucmlnaHRzaWRle1xuICBmbGV4LWdyb3c6IDc7XG4gIGZsZXgtYmFzaXM6IDA7XG4gIG1pbi13aWR0aDogMDtcbn1cbi5hcnJvd0NvbnRhaW5lcntcbiAgZGlzcGxheTogZmxleDtcbiAgbWFyZ2luLWJvdHRvbTogMTBweDtcbn1cbmJ1dHRvbi5hcnJvd3tcbiAgZGlzcGxheTogZmxleDtcbiAgbGluZS1oZWlnaHQ6IHVuc2V0O1xuICBwYWRkaW5nOiAwIDZweDtcbn1cbi50c2NsYXNze1xuICBtYXJnaW46IGF1dG87XG4gIGRpc3BsYXk6IGlubGluZTtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuLyogKi9cblxuLypcbnByZSB7XG4gIGJhY2tncm91bmQ6I0VFRTtcbiAgcGFkZGluZzo1cHg7XG4gIHdpZHRoOiAyOTBweDtcbn0qL1xuLmFkZEhlYWRlcntcbiAgZGlzcGxheTogZmxleDtcbn1cbi5hZGRIZWFkZXIgPiBidXR0b24ge1xuICBtYXJnaW4tbGVmdDogMDtcbiAgb3JkZXI6IDI7XG59XG5zZWxlY3QuYXR0cmlidXRldHlwZWFkZHtcbiAgZmxleC1iYXNpczogMDtcbiAgZmxleC1ncm93OiAxO1xuICBtaW4td2lkdGg6IDA7XG4gIG1hcmdpbi1yaWdodDogMTBweDtcbn1cbi5wcmV2aWV3c2VsZWN0b3J7XG4gIGhlaWdodDogMjNweDtcbiAgb3V0bGluZTogbm9uZTtcbiAgYm9yZGVyOiAycHggZGFzaGVkICM2NjY2NjY7XG59XG5cbi5zaG93QXNFZGdle1xuICBtYXJnaW4tcmlnaHQ6IDVweCAhaW1wb3J0YW50O1xufVxuLnNob3dBc0VkZ2VUZXh0e1xuICBtYXJnaW4tbGVmdDogMCAhaW1wb3J0YW50O1xufVxuYnV0dG9uLmRlbGV0ZSwgYnV0dG9uLnNhdmVhc3tcbiAgZm9udC1zaXplOiAwLjhyZW07XG59XG5idXR0b24uZGVsZXRlUnVsZXtcbiAgZmxleC1ncm93OiAwO1xuICBmbGV4LWJhc2lzOiBhdXRvO1xuICBtaW4td2lkdGg6IGF1dG87XG4gIG1hcmdpbi10b3A6IDA7XG4gIG1hcmdpbi1ib3R0b206IDA7XG4gIHBhZGRpbmc6IDVweDtcbn1cbi5ub3dyYXB7XG4gIGZsZXgtd3JhcDogbm93cmFwO1xufVxuLl9yb290IHtcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xufVxuZGl2LmRldGFpbC5tZWFzdXJhYmxlID4gZGl2LnRlbXBsYXRlIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cbi5ncmFwaENvbG9yLCAuc2hvd0dyaWR7XG4gIG1hcmdpbi1sZWZ0OiAwO1xufVxuc2VsZWN0Lm9wZXJhdG9ye1xuICB0ZXh0LWFsaWduLWxhc3Q6IGNlbnRlcjtcbiAgbWFyZ2luLWxlZnQ6IDVweDtcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gIHdpZHRoOiAyNXB4O1xufVxuc3Bhbi5vcGVyYXRvcnRleHR7XG4gIG1hcmdpbi1sZWZ0OiA1cHg7XG4gIG1hcmdpbi1yaWdodDogNXB4O1xufVxuc2VsZWN0Lm9wZXJhdG9yOmRpc2FibGVke1xuICBkaXNwbGF5OiBub25lO1xuICAvKlxuICBiYWNrZ3JvdW5kOiBpbmhlcml0O1xuICBib3JkZXI6IG5vbmU7XG4gIC1tb3otYXBwZWFyYW5jZTogbm9uZTtcbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICBtYXJnaW46IDA7Ki9cbn1cblxuc3Bhbi5uYW1lcHJlZml4IHtcbiAgbWFyZ2luLWxlZnQ6IDdweDtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGJvcmRlcjogMnB4IGluc2V0IHJnYigyMzgsIDIzOCwgMjM4KTtcbiAgaGVpZ2h0OiAyMXB4O1xuICBib3JkZXItcmlnaHQ6IG5vbmU7XG4gIGNvbG9yOiBibGFjaztcbiAgbGluZS1oZWlnaHQ6IDE2cHg7XG59XG5pbnB1dC5uYW1lIHtcbiAgbWFyZ2luLWxlZnQ6IDA7XG4gIGJvcmRlci1sZWZ0OiBub25lO1xuICBwYWRkaW5nLWxlZnQ6IDA7XG59XG5cbmxhYmVsOmZvY3VzID4gaW5wdXQubmFtZSB7XG4gIG91dGxpbmU6IG5vbmU7XG4gIGJveC1zaGFkb3c6IDAgMnB4IDJweCAycHggcmdiKDc3LCAxNDQsIDI1NCk7XG59XG5cbmlucHV0Lm5hbWU6Zm9jdXMge1xuICBvdXRsaW5lOiBub25lO1xuICBib3gtc2hhZG93OiAycHggMnB4IDBweCAwcHggcmdiKDc3LCAxNDQsIDI1NCksIDJweCAtMnB4IDBweCAwcHggcmdiKDc3LCAxNDQsIDI1NCk7XG59XG4iXX0= */\"","import {Component, OnInit} from '@angular/core';\r\nimport {\r\n  IAttribute, M2Class, IEdge, IModel, IPackage, IReference, ModelPiece, PropertyBarr, Status, U, IClass,\r\n  EdgeModes, EOperation, EParameter, Database, Size, AttribETypes, ViewRule, ViewHtmlSettings, StyleComplexEntry, ViewPoint, Type\r\n} from '../../common/Joiner';\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\nimport BlurEvent = JQuery.BlurEvent;\r\nimport KeyDownEvent = JQuery.KeyDownEvent;\r\nimport KeyboardEventBase = JQuery.KeyboardEventBase;\r\nimport KeyUpEvent = JQuery.KeyUpEvent;\r\nimport ClickEvent = JQuery.ClickEvent;\r\nimport SelectEvent = JQuery.SelectEvent;\r\n\r\n@Component({\r\n  selector: 'app-style-editor',\r\n  templateUrl: './style-editor.component.html',\r\n  styleUrls: ['./style-editor.component.css']\r\n})\r\nexport class StyleEditorComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\nexport class StyleEditor {\r\n  private propertyBar: PropertyBarr = null;\r\n  private $root: JQuery<HTMLElement> = null;\r\n  private $templates: JQuery<HTMLElement> = null;\r\n  private $display: JQuery<HTMLElement> = null;\r\n  private root: HTMLElement = null;\r\n  private templates: HTMLElement = null;\r\n  private display: HTMLElement = null;\r\n  private clickedLevel: Element = null;\r\n\r\n  onHide(): void {\r\n    this.updateClickedGUIHighlight();\r\n  }\r\n  onShow(): void {\r\n    this.propertyBar.onHide();\r\n    this.updateClickedGUIHighlight();\r\n  }\r\n\r\n  constructor(propertyBar: PropertyBarr, $root: JQuery<HTMLElement>) {\r\n    this.propertyBar = propertyBar;\r\n    this.$root = $root.find('.styleContainer');\r\n    this.$display = this.$root.find('.StyleEditorDisplay');\r\n    this.$templates = this.$root.find('.styleTemplates');\r\n    this.root = this.$root[0];\r\n    this.display = this.$display[0];\r\n    this.templates = this.$templates[0]; }\r\n\r\n  onPaste(e: any): void { // e: ClipboardEvent\r\n    e.preventDefault();\r\n    const div: HTMLDivElement | HTMLTextAreaElement = e.currentTarget as HTMLDivElement | HTMLTextAreaElement;\r\n    let text: string = (e as unknown as any).originalEvent.clipboardData.getData('text/plain');\r\n    text = U.replaceAll(text, '\\n', ' ');\r\n    div.innerText = U.replaceAll(text, '\\r', ' ');\r\n  }\r\n\r\n  isVisible(): boolean { return this.$root.is(':visible'); }\r\n  show(m: ModelPiece, clickedLevel: Element) {\r\n    this.clickedLevel = clickedLevel;\r\n    // console.log('styleShow(', m, ')');\r\n    if (m instanceof IModel) { this.showM(m); return; }\r\n    if (m instanceof IPackage) { this.showM(m.parent); return; }\r\n    // if (m instanceof IPackage) { this.showP(m); return; }\r\n    this.showMP(m, null, false, null);\r\n    return;/*\r\n    if (m instanceof IClass) { this.showC(m); }\r\n    if (m instanceof IAttribute) { this.showA(m); }\r\n    if (m instanceof IReference) { this.showR(m); }\r\n    if (m instanceof EOperation) { this.showO(m); }\r\n    if (m instanceof EParameter) { this.showParam(m); }*/\r\n  }\r\n\r\n  updateClickedGUIHighlight() {\r\n    $(this.propertyBar.model.graph.container).find('.styleEditorSelected').removeClass('styleEditorSelected');\r\n    if (this.isVisible() && this.clickedLevel) { this.clickedLevel.classList.add('styleEditorSelected'); } }\r\n\r\n  private getCopyOfTemplate(m: ModelPiece, s: string, appendTo: HTMLElement, clear: boolean): HTMLElement {\r\n    let $html: JQuery<HTMLElement> = this.$templates.find('.template' + s);\r\n    const html: HTMLElement = U.cloneHtml<HTMLElement>($html[0]);\r\n    html.classList.remove('template');\r\n    html.dataset.modelPieceID = '' + m.id;\r\n    html.style.display = 'block';\r\n    if (appendTo) {\r\n      if (clear) U.clear(appendTo);\r\n      appendTo.appendChild(html); }\r\n    $html = $(html).find('.' + (m.getModelRoot().isM() ? 'm1' : 'm2') + 'hide').hide();\r\n    return html; }\r\n\r\n  showM(m: IModel) {\r\n    console.log('styleShowM(', m, ')');\r\n    const html: HTMLElement = this.getCopyOfTemplate(m, '.model', this.display, true);\r\n    const $html = $(html);\r\n    const gridX: HTMLInputElement = $html.find('.gridX')[0] as HTMLInputElement;\r\n    const gridY: HTMLInputElement = $html.find('.gridY')[0] as HTMLInputElement;\r\n    const zoomX: HTMLInputElement = $html.find('.zoomX')[0] as HTMLInputElement;\r\n    const zoomY: HTMLInputElement = $html.find('.zoomY')[0] as HTMLInputElement;\r\n    const showGrid: HTMLInputElement = $html.find('.showGrid')[0] as HTMLInputElement;\r\n    const color: HTMLInputElement = $html.find('.graphColor')[0] as HTMLInputElement;\r\n    gridX.value = m.graph.grid ? '' + m.graph.grid.x : '';\r\n    gridY.value = m.graph.grid ? '' + m.graph.grid.y : '';\r\n    zoomX.value = m.graph.zoom.x + '';\r\n    zoomY.value = m.graph.zoom.y + '';\r\n    showGrid.checked = m.graph.gridDisplay;\r\n    color.value = '#000ff'; // todo.\r\n    // event listeners:\r\n    $(gridX).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      const input: HTMLInputElement = e.currentTarget;\r\n      m.graph.grid.x = isNaN(+input.value) ? 0 : +input.value;\r\n      showGrid.checked = true;\r\n      $(showGrid).trigger('change');\r\n      m.refreshGUI();\r\n    });\r\n    $(gridY).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      const input: HTMLInputElement = e.currentTarget;\r\n      m.graph.grid.y = isNaN(+input.value) ? 0 : +input.value;\r\n      showGrid.checked = true;\r\n      $(showGrid).trigger('change');\r\n      m.refreshGUI();\r\n    });\r\n    $(zoomX).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      const input: HTMLInputElement = e.currentTarget;\r\n      m.graph.setZoom(+input.value, null);\r\n    });\r\n    $(zoomY).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      const input: HTMLInputElement = e.currentTarget;\r\n      m.graph.setZoom(null, +input.value);\r\n    });\r\n    $(showGrid).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      const input: HTMLInputElement = e.currentTarget;\r\n      m.graph.ShowGrid(input.checked);\r\n    });\r\n  }\r\n\r\n  showP(m: IPackage) { U.pe(true, 'styles of Package(', m, '): unexpected.'); }\r\n\r\n  setStyleEditor($styleown: JQuery<HTMLElement>, model: IModel, mp: ModelPiece, style: StyleComplexEntry, templateLevel: Element, indexedPath: number[] = null): number[] {\r\n    /// getting the template to fill.\r\n    const debug: boolean = false;\r\n    let i: number;\r\n    let styleowntemplate: HTMLElement = $styleown[0];\r\n    const isInherited: boolean = styleowntemplate.classList.contains('inherited');\r\n    const isInheritable: boolean = styleowntemplate.classList.contains('inheritable');\r\n    const isOwn: boolean = styleowntemplate.classList.contains('own');\r\n    U.pe((isInheritable ? 1 : 0 || isInherited ? 1 : 0 || isOwn ? 1 : 0) !== 1, 'failed to get html styleEditor template');\r\n    let tmp: any = this.getCopyOfTemplate(mp, '.htmlstyle', null, false);\r\n    styleowntemplate.appendChild(tmp);\r\n    styleowntemplate.classList.remove('template');\r\n    // styleowntemplate.parentElement.insertBefore(tmp, styleowntemplate);\r\n    // styleowntemplate.parentElement.removeChild(styleowntemplate);\r\n    styleowntemplate = tmp;\r\n    U.pe(!styleowntemplate.parentElement, 'null parent: ',  styleowntemplate, $styleown);\r\n    $styleown = $(styleowntemplate);\r\n    U.pif(debug, 'styleComplexEntry:', style, 'mp:', mp, styleowntemplate, $styleown);\r\n    const obj: {\r\n      editLabel: HTMLLabelElement;\r\n      editAllowed: HTMLButtonElement;\r\n      selectstyle: HTMLSelectElement,\r\n      previewselect: HTMLSelectElement,\r\n      preview: HTMLElement,\r\n      input: HTMLDivElement | HTMLTextAreaElement,\r\n      detailButton: HTMLButtonElement,\r\n      detailPanel: HTMLElement,\r\n      isM1: HTMLInputElement,\r\n      isM2: HTMLInputElement,\r\n      isClass: HTMLInputElement,\r\n      isReference: HTMLInputElement,\r\n      isAttribute: HTMLInputElement,\r\n      isOperation: HTMLInputElement,\r\n      isParameter: HTMLInputElement,\r\n      stylename: HTMLInputElement,\r\n      forkButton: HTMLButtonElement,\r\n      delete: HTMLButtonElement,\r\n      saveasName: HTMLInputElement,\r\n    } = {\r\n      editLabel: null,\r\n      editAllowed: null,\r\n      selectstyle: null,\r\n      previewselect: null,\r\n      preview: null,\r\n      input: null,\r\n      detailButton: null,\r\n      detailPanel: null,\r\n      isM1: null,\r\n      isM2: null,\r\n      isClass: null,\r\n      isReference: null,\r\n      isAttribute: null,\r\n      isOperation: null,\r\n      isParameter: null,\r\n      stylename: null,\r\n      forkButton: null,\r\n      delete: null,\r\n      saveasName: null\r\n    };\r\n    //// setting up labelAllowEdit (checking if the (own, inherited or inheritable) style exist or a modelpiece local copy is needed.)\r\n    obj.editAllowed = $styleown.find('button.allowEdit')[0] as HTMLButtonElement;\r\n    obj.editLabel = $styleown.find('label.allowEdit')[0] as HTMLLabelElement;\r\n    obj.selectstyle = $styleown.find('select.stylename')[0] as HTMLSelectElement;\r\n    obj.detailButton = $styleown.find('button.detail')[0] as HTMLButtonElement;\r\n    obj.detailPanel = $styleown.find('div.detail')[0] as HTMLElement;\r\n    obj.input = $styleown.find('.html[contenteditable=\"true\"]')[0] as HTMLTextAreaElement | HTMLDivElement;\r\n    obj.preview = $styleown.find('.preview')[0] as HTMLElement;\r\n    obj.previewselect = $styleown.find('select.previewselector')[0] as HTMLSelectElement;\r\n    const $detail = $styleown.find('div.detail');\r\n    obj.isM1 = $detail.find('.model')[0] as HTMLInputElement;\r\n    obj.isM2 = $detail.find('.metamodel')[0] as HTMLInputElement;\r\n    obj.isClass = $detail.find('.class')[0] as HTMLInputElement;\r\n    obj.isAttribute = $detail.find('.attribute')[0] as HTMLInputElement;\r\n    obj.isReference = $detail.find('.reference')[0] as HTMLInputElement;\r\n    obj.isOperation = $detail.find('.operation')[0] as HTMLInputElement;\r\n    obj.isParameter = $detail.find('.parameter')[0] as HTMLInputElement;\r\n    obj.saveasName = $detail.find('input.saveas')[0] as HTMLInputElement;\r\n    obj.delete = $detail.find('button.delete')[0] as HTMLButtonElement;\r\n    obj.forkButton = $detail.find('button.saveas')[0] as HTMLButtonElement;\r\n    // let inheritableStyle: StyleComplexEntry = isInheritable ? mp.getInheritableStyle() : null;\r\n    // let inheritedStyle: StyleComplexEntry = isInherited ? mp.getInheritedStyle() : null;\r\n    const lastvp: ViewPoint = model.getLastView();\r\n    U.pif(debug, 'isOwn && !style.isownhtml || isInherited && !inheritedStyle.html || isInheritable && !inheritableStyle.html)', style);\r\n    U.pif(debug, !style ? '' : isOwn + ' && ' + style.isownhtml + ' || ' + isInherited + ' && ' + style.html + ' || ' + isInheritable + ' && ' + style.html);\r\n    if (!!style && !(isOwn && !style.isownhtml || isInherited && !style.html || isInheritable && !style.html)) {\r\n      $(obj.editLabel).hide();\r\n    } else {\r\n      obj.selectstyle.disabled = obj.detailButton.disabled = true;\r\n      obj.input.setAttribute('disabled', 'true');\r\n      obj.input.contentEditable = 'false';\r\n      if (!lastvp) {\r\n        obj.editLabel.innerText = 'Is required to have at least one non-default viewpoint applied to customize styles.';\r\n        obj.editAllowed.style.display = 'none';\r\n      } else\r\n      $(obj.editAllowed).on('click', (e: ClickEvent) => {\r\n        const mptarget: ModelPiece = isInherited ? mp.metaParent : mp;\r\n        let v: ViewRule = lastvp.viewsDictionary[mptarget.id];\r\n        if (!v) v = new ViewRule(lastvp);\r\n        if (isOwn) {\r\n          U.pe(!!v.htmlo, 'htmlo should be undefined at this point.');\r\n          v.htmlo = new ViewHtmlSettings();\r\n          v.htmlo.setHtmlStr( (style ? style.html : mptarget.getStyle().html).outerHTML ); }\r\n        if (isInheritable) {\r\n          U.pe(!!v.htmli, 'htmli should be undefined at this point.');\r\n          v.htmli = new ViewHtmlSettings();\r\n          const instanceCurrentStyle: Element = ModelPiece.GetStyle(Status.status.m, mp.getInstanceClassName());\r\n          v.htmli.setHtmlStr( instanceCurrentStyle.outerHTML ); }\r\n        if (isInherited) {\r\n          U.pe(!!v.htmli, 'htmli should be undefined at this point.');\r\n          v.htmli = new ViewHtmlSettings();\r\n          v.htmli.setHtmlStr( (style ? style.html : mp.getStyle().html).outerHTML );\r\n        }\r\n        v.apply(mptarget);\r\n        this.showMP(mp);\r\n        // todo: se stylecomplexEntry è null mostra un altro button.editAllowed per inserire lo stile ereditabile che generi htmli.\r\n      });\r\n\r\n      if (!style) {\r\n        if (isInheritable) { obj.editLabel.innerHTML = 'This element does not have a inheritable style.'; }\r\n        if (isInherited) { obj.editLabel.innerHTML = 'The metaParent of this element does not have a inheritable style appliable to this element.'; }\r\n        obj.editLabel.appendChild(obj.editAllowed);\r\n        U.clear(styleowntemplate);\r\n        styleowntemplate.appendChild(obj.editLabel);\r\n        return null; }\r\n    }\r\n    /// start!\r\n\r\n    // obj.is...\r\n    if (model.isM1()) { obj.isM1.disabled = obj.isM1.checked = true; }\r\n    if (model.isM2()) { obj.isM2.disabled = obj.isM2.checked = true; }\r\n    if (mp instanceof IClass) { obj.isClass.disabled = obj.isClass.checked = true; }\r\n    if (mp instanceof IReference) { obj.isReference.disabled = obj.isReference.checked = true; }\r\n    if (mp instanceof IAttribute) { obj.isAttribute.disabled = obj.isAttribute.checked = true; }\r\n    if (mp instanceof EOperation) { obj.isOperation.disabled = obj.isOperation.checked = true; }\r\n    if (mp instanceof EParameter) { obj.isParameter.disabled = obj.isParameter.checked = true; }\r\n    let styleown: ViewHtmlSettings = style.htmlobj;\r\n    if (styleown) {\r\n      obj.isM1.checked = styleown.AllowedOnM1;\r\n      obj.isM2.checked = styleown.AllowedOnM2;\r\n      obj.isClass.checked = styleown.allowedOnClass;\r\n      obj.isReference.checked = styleown.allowedOnReference;\r\n      obj.isAttribute.checked = styleown.allowedOnAttribute;\r\n      obj.isOperation.checked = styleown.allowedOnOperation;\r\n      obj.isParameter.checked = styleown.allowedOnParameter;\r\n      $(obj.isM1).on('change', (e: ChangeEvent) => {\r\n        styleown.AllowedOnM1 = obj.isM1.checked;\r\n        styleown.saveToDB();\r\n      });\r\n      $(obj.isM2).on('change', (e: ChangeEvent) => {\r\n        styleown.AllowedOnM2 = obj.isM2.checked;\r\n        styleown.saveToDB();\r\n      });\r\n      $(obj.isClass).on('change', (e: ChangeEvent) => {\r\n        styleown.allowedOnClass = obj.isClass.checked;\r\n        styleown.saveToDB();\r\n      });\r\n      $(obj.isAttribute).on('change', (e: ChangeEvent) => {\r\n        styleown.allowedOnAttribute = obj.isAttribute.checked;\r\n        styleown.saveToDB();\r\n      });\r\n      $(obj.isReference).on('change', (e: ChangeEvent) => {\r\n        styleown.allowedOnReference = obj.isReference.checked;\r\n        styleown.saveToDB();\r\n      });\r\n      $(obj.isOperation).on('change', (e: ChangeEvent) => {\r\n        styleown.allowedOnOperation = obj.isOperation.checked;\r\n        styleown.saveToDB();\r\n      });\r\n      $(obj.isParameter).on('change', (e: ChangeEvent) => {\r\n        styleown.allowedOnParameter = obj.isParameter.checked;\r\n        styleown.saveToDB();\r\n      });\r\n    } else {\r\n      obj.isM1.disabled =\r\n        obj.isM2.disabled =\r\n          obj.isClass.disabled =\r\n            obj.isReference.disabled =\r\n              obj.isAttribute.disabled =\r\n                obj.isOperation.disabled =\r\n                  obj.isParameter.disabled = true; }\r\n    // main input (html); setup input\r\n    obj.input.setAttribute('placeholder', U.replaceVarsString(mp, obj.input.getAttribute('placeholder')));\r\n    obj.input.innerText = templateLevel.outerHTML;\r\n\r\n    $styleown.find('.htmllevel').html((isInherited ? 'Instances Html' : 'Own html')\r\n      + ' (' + (indexedPath && indexedPath.length ? 'Level&nbsp;' + indexedPath.length : 'Root&nbsp;level') + ')');\r\n    let optgroup: HTMLOptGroupElement;\r\n    /*\r\n    preview removed.\r\n    const updatePreview = () => { obj.preview.innerHTML = obj.input.innerText; };\r\n    optgroup = U.toHtml('<optgroup label=\"' + U.getTSClassName(mp) + '\"></optgroup>');\r\n    obj.previewselect.appendChild(optgroup);\r\n    for (i = 0; i < mp.metaParent.instances.length; i++) {\r\n      const peer: ModelPiece = mp.metaParent.instances[i];\r\n      const opt: HTMLOptionElement = document.createElement('option');\r\n      optgroup.appendChild(opt);\r\n      opt.value = '' + peer.id;\r\n      opt.innerText = peer.printableName();\r\n    }*/\r\n\r\n    optgroup = U.toHtml('<optgroup label=\"Compatible Styles\"></optgroup>');\r\n    let o: HTMLOptionElement = document.createElement('option');\r\n    o.value = 'default';\r\n    o.text = 'default';\r\n    if (style.isGlobalhtml) o.selected = true;\r\n    optgroup.append(o);\r\n    // console.log('viewpointSelect: ', mp.views);\r\n    for (i = 0; i < mp.views.length; i++) {\r\n      const v: ViewRule = mp.views[i];\r\n      o = document.createElement('option');\r\n      o.value = '' + v.id;\r\n      o.text = v.getViewPoint().name + ' (own)';\r\n      if (v === style.view) o.selected = true;\r\n      optgroup.append(o); }\r\n    for (i = 0; mp.metaParent && i < mp.metaParent.views.length; i++) {\r\n      const v: ViewRule = mp.metaParent.views[i];\r\n      o = document.createElement('option');\r\n      o.value = '' + v.id;\r\n      o.text = v.getViewPoint().name + ' (inherited)';\r\n      if (v === style.view) o.selected = true;\r\n      optgroup.append(o); }\r\n\r\n    obj.selectstyle.appendChild(optgroup);\r\n    /*    const styles: ModelPieceStyleEntry[] = Styles.getAllowed(m);\r\n        for (i = 0; i < styles.length; i++) {\r\n          const style: ModelPieceStyleEntry = styles[i];\r\n          const opt: HTMLOptionElement = document.createElement('option');\r\n          optgroup.appendChild(opt);\r\n          opt.innerText = style.name;\r\n          opt.value = style.getKey();\r\n        }\r\n\r\n    */\r\n    const onStyleChange = () => {\r\n      const inputHtml: Element = U.toHtml(obj.input.innerText);\r\n      // console.log('PRE: ', inputHtml, 'outer:', inputHtml.outerHTML, 'innertext:', obj.input.innerText);\r\n      U.pif(debug, '*** setting inheritable PRE. style.htmlobj:', style.htmlobj, ', style:', style, ', templateLevel:', templateLevel,\r\n        'templatelvl.parent:', templateLevel.parentElement, ', inputHtml:', inputHtml);\r\n      if (templateLevel.parentElement) {\r\n        templateLevel.parentElement.insertBefore(inputHtml, templateLevel);\r\n        templateLevel.parentElement.removeChild(templateLevel);\r\n        templateLevel = inputHtml;\r\n      } else {\r\n        U.pe(!style.view || style.isGlobalhtml, 'default html cannot be modified.', style, 'todo: automatically make new ClassVieww');\r\n        // ??old message?: se tutto va bene qui deve dare errore, crea una nuova ClassVieww e applicalo al modelpiece ed edita quello.\r\n        style.htmlobj.setHtml(templateLevel = inputHtml);\r\n        U.pif(debug,'*** setting inheritable POST. style.htmlobj', style.htmlobj, 'style:', style);\r\n      }\r\n      if (isOwn) { mp.refreshGUI(); }\r\n      if (isInheritable) { mp.refreshInstancesGUI(); }\r\n      if (isInherited) { mp.metaParent.refreshInstancesGUI(); }\r\n      if (!isInheritable && indexedPath) this.clickedLevel = U.followIndexesPath(mp.getHtmlOnGraph(), indexedPath);\r\n      this.updateClickedGUIHighlight();\r\n      // obj.input.innerText = inputHtml.outerHTML;\r\n      // DANGER: se lo fai con l'evento onchange() ti sposta il cursore all'inizio e finisci per scrivere rawtext prima dell'html invalidandolo.\r\n      // tenendolo dovresti scrivere i caratteri uno alla volta riposizionando il cursore nel punto giusto ogni volta.\r\n      // console.log('POST: ', inputHtml, 'outer:', inputHtml.outerHTML, 'innertext:', obj.input.innerText);\r\n      // updatePreview();\r\n    };\r\n    $(obj.input).off('paste.set').on('paste.set', (e: any/*ClipboardEvent*/) => { this.onPaste(e); onStyleChange(); })\r\n      // .off('change.set').on('change.set', onStyleChange)\r\n      // .off('input.set').on('input.set', onStyleChange)\r\n      .off('blur.set').on('blur.set', onStyleChange)\r\n      .off('keydown.set').on('keydown.set', (e: KeyDownEvent) => { if (e.key === 'Esc') { this.propertyBar.refreshGUI(); } });\r\n\r\n    obj.selectstyle.disabled = indexedPath && indexedPath.length > 0;\r\n    /*$(obj.selectstyle).on('change', (e: ChangeEvent) => {\r\n      const style: ModelPieceStyleEntry = Styles.getStyleFromKey(obj.selectstyle.value);\r\n      obj.input.innerText = style.htmlstr;\r\n      $(obj.input).trigger('input');\r\n    });*/\r\n\r\n    // setup measurable options.\r\n\r\n    const ownhtmlinput: HTMLDivElement | HTMLTextAreaElement = $styleown.find('.html[contenteditable=\"true\"]')[0] as HTMLDivElement | HTMLTextAreaElement;\r\n    const measurableSelect: HTMLSelectElement = $styleown.find('select.attributetypeadd')[0] as HTMLSelectElement;\r\n    $styleown.find('button.addmeasurable').on('click', () => {\r\n      this.addmeasurableAttributeButton(measurableSelect, $styleown, mp, style, templateLevel as HTMLElement | SVGElement, ownhtmlinput, indexedPath);\r\n    });\r\n    for (i = 0; i < templateLevel.attributes.length; i++) {\r\n      const a: Attr = templateLevel.attributes[i];\r\n      if (a.name[0] === '_' || a.name.indexOf('r_') == 0 || a.name.indexOf('r_') == 0) {\r\n        const val: Attr = this.clickedLevel.attributes.getNamedItem(a.name.substr(1));\r\n        const style = null;\r\n        this.addmeasurableAttributeButton(measurableSelect, $styleown, mp, style, templateLevel as HTMLElement | SVGElement, ownhtmlinput, indexedPath, a, val)\r\n      }\r\n    }\r\n    return indexedPath; }\r\n\r\n  showMP(m: ModelPiece, clickedLevel: Element = null, asMeasurable: boolean = false, asEdge: IEdge = null) {\r\n    // console.log('styleShow(', m, ', ' + U.getTSClassName(m) + ')');\r\n    let i: number;\r\n    this.clickedLevel = clickedLevel = clickedLevel || this.clickedLevel;\r\n    // set htmls\r\n    const style: StyleComplexEntry = m.getStyle();\r\n    const styleinheritable: StyleComplexEntry = m.getInheritableStyle();\r\n    const styleinherited: StyleComplexEntry = m.getInheritedStyle();\r\n    const clickedRoot: Element = ModelPiece.getLogicalRootOfHtml(clickedLevel);\r\n    const templateRoot: Element = style.html;// m.styleobj.html;// m.getStyle();\r\n    // let templateLevel: HTMLElement | SVGElement = templateRoot;\r\n    let indexedPath: number[] = U.getIndexesPath(clickedLevel, 'parentNode', 'childNodes', clickedRoot);\r\n    // console.log('clickedRoot', clickedRoot, 'clickedLevel', clickedLevel, 'path:', indexedPath);\r\n    U.pe(U.followIndexesPath(clickedRoot, indexedPath, 'childNodes') !== clickedLevel, 'mismatch.', indexedPath);\r\n    const realindexfollowed: {indexFollowed: string[] | number[], debugArr: {index: string | number, elem: any}[]} = {indexFollowed: [], debugArr:[]};\r\n    let templateLevel: Element = U.followIndexesPath(templateRoot, indexedPath, 'childNodes', realindexfollowed);\r\n    // console.log('clickedRoot:',clickedRoot, 'clikedLevel:', clickedLevel, 'indexedPath:', indexedPath, 'followed:', realindexfollowed,\r\n    // 'templateRoot:', templateRoot, 'templateLevel:', templateLevel);\r\n    if (realindexfollowed.indexFollowed.length !== indexedPath.length) {\r\n      indexedPath = realindexfollowed.indexFollowed as number[];\r\n      this.clickedLevel = clickedLevel = U.followIndexesPath(clickedRoot, indexedPath);}\r\n    this.updateClickedGUIHighlight();\r\n    // html set END.\r\n    const model: IModel = m.getModelRoot();\r\n    if (asEdge && (m instanceof IClass || m instanceof IReference) && m.shouldBeDisplayedAsEdge()) { return this.showE(m, asEdge); }\r\n    const html: HTMLElement = this.getCopyOfTemplate(m, '.modelpiece', this.display, true);\r\n    const $html = $(html);\r\n    const showAsEdge: HTMLInputElement = $html.find('.showAsEdge')[0] as HTMLInputElement;\r\n    const showAsEdgeText: HTMLElement = $html.find('.showAsEdgeText')[0] as HTMLElement;\r\n    const $styleown = $html.find('.style.own');\r\n    const $styleInherited = $html.find('.style.inherited');\r\n    const $styleInheritable = $html.find('.style.inheritable');\r\n    //const ownhtml = m.getStyle();\r\n    const htmlPath: number[] = this.setStyleEditor($styleown, model, m, style, templateLevel, indexedPath);\r\n    // U.pe(!style.html, $styleown, m, clickedLevel, model, style, instanceshtml);\r\n    // const clickedonStyle: HTMLElement | SVGElement = U.followIndexesPath(style.html, htmlPath) as HTMLElement | SVGElement;\r\n    $html.find('.tsclass').html('' + m.printableName()); // + (htmlDepth === 0 ? ' (root level)' : ' (level&nbsp;' + htmlDepth + ')') );\r\n    // console.log('setStyleEditor inherited, ', styleinherited);\r\n    let inheritedTemplateLevel: Element = null;\r\n    if (styleinherited) {\r\n      const inheritedTemplateRoot: Element = styleinherited.html;\r\n      inheritedTemplateLevel = U.followIndexesPath(inheritedTemplateRoot, indexedPath, 'childNodes', realindexfollowed);\r\n      // se ho cliccato su un non-radice non-ereditato, non posso prendere un frammento dell'ereditato, sarebbe un frammento diverso.\r\n      if (inheritedTemplateLevel !== templateLevel) { inheritedTemplateLevel = inheritedTemplateRoot; }\r\n\r\n    }\r\n    this.setStyleEditor($styleInherited, model, m, styleinherited, inheritedTemplateLevel);\r\n    // console.log('setStyleEditor inheritable, ', styleinheritable);\r\n    const styleInheritableRoot: Element = styleinheritable ? styleinheritable.html : null;\r\n    if (!model.isM1()) { this.setStyleEditor($styleInheritable, model, m, styleinheritable, styleInheritableRoot); }\r\n    else {$styleInheritable[0].innerHTML = '<h5 class=\"text-danger\">M1 elements cannot give inheritance.</h5>'}\r\n    U.detailButtonSetup($html);\r\n    // <meta>\r\n    //     <dependency><attributes><type>double</ </ </\r\n    //     <preview><img src=imgurl</img> or html diretto.</\r\n    // </meta>\r\n\r\n    // pulsanti per settare preview: \"takesnapshotOf / set as example... + select vertex with that style\"\r\n\r\n    const $arrowup: JQuery<HTMLButtonElement> = ($html.find('button.arrow.up') as JQuery<HTMLButtonElement>).on('click', (e: ClickEvent) => {\r\n      $(clickedLevel.parentNode).trigger('click');\r\n    });\r\n    $arrowup[0].disabled = htmlPath.length === 0 && m instanceof IClass;\r\n    ($html.find('button.arrow.down') as JQuery<HTMLButtonElement>)[0].disabled = true;\r\n\r\n    showAsEdge.checked = false;\r\n    if (m instanceof IClass) {\r\n      showAsEdge.disabled = m.references.length < 2;\r\n      showAsEdgeText.innerHTML = 'Show as an edge' + (showAsEdge.disabled ? ' (require&nbsp;>=&nbsp;2&nbsp;references)' : '');\r\n      $(showAsEdge).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n        m.shouldBeDisplayedAsEdge(true);\r\n        this.showE(m, asEdge);\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  addmeasurableAttributeButton(measurableSelect: HTMLSelectElement, $styleeditor: JQuery<HTMLElement | SVGElement>, m: ModelPiece,\r\n                               style: StyleComplexEntry,\r\n                               clickedStyle: HTMLElement | SVGElement,\r\n                               ownhtmlinput: HTMLDivElement | HTMLTextAreaElement,\r\n                               htmlPath: number[], attr: Attr = null, valAttr: Attr = null): void {\r\n    let val: string;\r\n    let i: number;\r\n    const template: HTMLElement = this.getCopyOfTemplate(m, '.measurable._root', null, false);\r\n    const $template = $(template);\r\n    const nameinputprefix: HTMLElement = $template.find('.nameprefix')[0] as HTMLElement;\r\n    const nameinput: HTMLInputElement = $template.find('input.name')[0] as HTMLInputElement;\r\n    const operator: HTMLSelectElement = $template.find('select.operator')[0] as HTMLSelectElement;\r\n    const left: HTMLInputElement = $template.find('input.leftside')[0] as HTMLInputElement;\r\n    const right: HTMLInputElement = $template.find('input.rightside')[0] as HTMLInputElement;\r\n    const evaluation: HTMLInputElement = $template.find('input.evaluation')[0] as HTMLInputElement;\r\n    const outputErrorLeft: HTMLAnchorElement = $template.find('.outputerror.left')[0] as HTMLAnchorElement;\r\n    const outputErrorRight: HTMLAnchorElement = $template.find('.outputerror.right')[0] as HTMLAnchorElement;\r\n    operator.disabled = true;\r\n    operator.selectedIndex = 1;\r\n    right.pattern = '[.]*';\r\n    const setnameinput = (name: string) => {\r\n      template.dataset.printablename = name;\r\n      nameinput.value = name.substr(nameinput.dataset.prefix.length); };\r\n\r\n    if (attr) {\r\n      let pos: number = attr.value.indexOf('=');\r\n      let oplen: number = 1;\r\n      let operatorstr: string;\r\n      if (attr.value[pos] === '>') { operatorstr = '>='; pos--; oplen++; } else\r\n      if (attr.value[pos] === '<') { operatorstr = '<='; pos--; oplen++; } else { operatorstr = '='; }\r\n      for (i = 0; i < operator.options.length; i++) {\r\n        if (operator.options[i].value === operatorstr) { operator.selectedIndex = i; operatorstr = null; } }\r\n      U.pe(!!operatorstr, 'option not found in select.', attr.value, operator);\r\n      left.value = attr.value.substr(0, pos);\r\n      right.value = attr.value.substr(pos + oplen);\r\n      evaluation.value = valAttr ? valAttr.value : '';\r\n      if (attr.name.indexOf('d_') === 0) { val = 'd_'; } else\r\n      if (attr.name.indexOf('r_') === 0) { val = 'r_'; } else\r\n      if (attr.name.indexOf('_chainFinal') === 0) { val = '_chainFinal'; } else\r\n      if (attr.name.indexOf('_chain') === 0) { val = '_chain'; } else\r\n      if (attr.name.indexOf('_rule') === 0) { val = '_rule'; } else\r\n      if (attr.name.indexOf('_export') === 0) { val = '_export'; } else\r\n      if (attr.name.indexOf('_import') === 0) { val = '_import'; } else\r\n      if (attr.name.indexOf('_constraint') === 0) { val = '_constraint'; } else\r\n      if (attr.name.indexOf('_dstyle') === 0) { val = '_dstyle'; } else\r\n      if (attr.name.indexOf('_') === 0) { val = '_'; }\r\n      nameinputprefix.innerText = nameinput.dataset.prefix = val;\r\n      setnameinput(attr.name); }\r\n    else {\r\n      val = measurableSelect.value;\r\n      // if (measurableSelect.value[0] === '_') {\r\n      let name: string = measurableSelect.value + 0;\r\n      name = U.increaseEndingNumber(name, false, false, (x: string) => { return !!clickedStyle.attributes.getNamedItem(x); });\r\n      nameinputprefix.innerText = nameinput.dataset.prefix = measurableSelect.value;\r\n      setnameinput(name);\r\n      // } else { template.dataset.name = measurableSelect.value + left.value; }\r\n    }\r\n    /*const errormsgleft: {r_:string, d_:string, rule:string, constraint:string, dstyle:string, import:string, export:string, chain:string,\r\n     chainfinal:string}\r\n    = {r_:null, d_:null, rule:null, constraint:null, dstyle:null, import:null, export:null, chain:null, chainfinal:null};\r\n    const errormsgright: {r_:string, d_:string, rule:string, constraint:string, dstyle:string, import:string, export:string, chain:string, chainfinal:string}\r\n    = {r_:null, d_:null, rule:null, constraint:null, dstyle:null, import:null, export:null, chain:null, chainfinal:null};\r\n    errormsgleft.rule = */\r\n    const $input = $(ownhtmlinput);\r\n    const changenamewhile = (x: string) => { return !!clickedStyle.attributes.getNamedItem(x); };\r\n    const namechanged = () => {\r\n      const oldname: string = template.dataset.name;\r\n      const oldvalue: string = clickedStyle.getAttribute(oldname);\r\n      let name: string = nameinput.dataset.prefix + nameinput.value;\r\n      if (changenamewhile(name)) { name = U.increaseEndingNumber(name, false, false, changenamewhile); }\r\n      setnameinput(name);\r\n      clickedStyle.removeAttribute(oldname);\r\n      clickedStyle.setAttribute(name, oldvalue);\r\n      style.htmlobj.saveToDB(); };\r\n    const leftIsValid = () => { return new RegExp(left.pattern).test(left.value); };\r\n    // todo: set template.dataset.name nb: nel caso di d_ e d_ possono cambiare nome dinamicamente\r\n    // todo: rimuovi modelpiece.ownhtml e modelpiece.instancesHtml e sostituiscili con oggetti ModelPieceStyleEntry.\r\n    const attrchanged = (isr_: boolean = false) => {\r\n      const is_ = left.value === '';\r\n      const attrStr: string = (isr_ || is_ ? '' : left.value + ' ' + operator.value + ' ') + right.value;\r\n      const templateList: string[] = U.removeDuplicates(U.findTemplateList(attrStr));\r\n      const featuredependency: {template: string, namesArray: string, typesArray: string}[] = [];\r\n      let i: number;\r\n      for (i = 0; i < templateList.length; i++) {\r\n        const template: string = templateList[i];\r\n        const optionsSharp: string = template[1] + template[2];\r\n        if (optionsSharp !== '##') {\r\n          U.pw(true, 'gui debugging of template options different from the default \"##\" is not currently supported: ' + template);\r\n          continue; }\r\n        const replacedArr = U.replaceSingleVarRaw(m, template); // last is the final output\r\n        let j: number;\r\n        let namesArr: string = '';\r\n        let typesArr: string = '';\r\n        for (j = 0; j < replacedArr.length; j++) {\r\n          namesArr += replacedArr[j].token + '.';\r\n          const typeDetail: Type = replacedArr[j].value.typeDetail;\r\n          typesArr += typeDetail.toEcoreString() + '.'; }\r\n        namesArr = namesArr.substr(0, namesArr.length - 2);\r\n        typesArr = typesArr.substr(0, typesArr.length - 2);\r\n        featuredependency.push({template: template, namesArray: namesArr, typesArray: typesArr});\r\n      }\r\n\r\n      style.htmlobj.setDependencyArray(featuredependency);\r\n      if (isr_) {\r\n        clickedStyle.removeAttribute(template.dataset.name);\r\n        template.dataset.printablename = left.value.trim();\r\n        clickedStyle.setAttribute(template.dataset.name, right.value);\r\n      } else { clickedStyle.setAttribute(template.dataset.name, attrStr); }\r\n      $input[0].innerText = clickedStyle.outerHTML;\r\n      $input.trigger('input'); // triggers saveToDB and refreshgui.  style.saveToDB();\r\n    };\r\n    const importleft = () => {\r\n      outputErrorLeft.innerText = '';\r\n      if (leftIsValid()) return;\r\n      outputErrorLeft.href = 'https://github.com/DamianoNaraku/ModelGraph/wiki/measurable-elements#_import';\r\n      outputErrorLeft.innerText = 'Left side must be one of: width, height, positionRelX, positionRelY, positionAbsX, positionAbsY';\r\n    };\r\n    const ruleleft = () => {\r\n      outputErrorLeft.innerText = '';\r\n      if (leftIsValid()) return;\r\n      outputErrorLeft.href = 'https://github.com/DamianoNaraku/ModelGraph/wiki/measurable-elements#_rule';\r\n      outputErrorLeft.innerText = 'Left side must be a $##template$';\r\n    };\r\n    const exportleft = () => {\r\n      outputErrorLeft.innerText = '';\r\n      const selector = left.value;\r\n      let valid: boolean = false;\r\n      try {\r\n        const matches = m.getVertex() ? $(m.getVertex().getHtml()).find(selector) : [];\r\n        console.log('_export matches: ', matches);\r\n        valid = matches.length > 0;\r\n      } catch (e) {\r\n        outputErrorLeft.innerText = ' Exception: ' + JSON.stringify(e);\r\n        console.log('_export or _chain invalid selector: ', e);\r\n        valid = false;\r\n      }\r\n      if (valid) return;\r\n      outputErrorLeft.innerText = 'Left side is not matching any element, it must be a jQuery selector.' + outputErrorLeft.innerText;\r\n    };\r\n    const _right = () => {\r\n      const htmldrew: HTMLElement | SVGElement = m.getHtmlOnGraph();\r\n      const sameElementInGraph: HTMLElement | SVGElement = U.followIndexesPath(htmldrew, htmlPath) as HTMLElement | SVGElement;\r\n      let result: string;\r\n      outputErrorRight.innerText = '';\r\n      // todo: pre-validazione dei $##template$ con suggerimenti per similarity e display di tutti i nomi ammissibili se ne trova invalidi.\r\n      try { result = U.computeMeasurableAttributeRightPart(right.value, sameElementInGraph.getAttributeNode(template.dataset.name), m, sameElementInGraph); }\r\n      catch (e) {\r\n        console.log('Exception on right part:', e);\r\n        outputErrorRight.innerText = 'Exception on right part: ' + e; }\r\n      evaluation.value = '' + result;\r\n      return result; };\r\n    const constraintRight = () => {\r\n      const result: string = _right();\r\n      const sameElementInGraph: HTMLElement | SVGElement = U.followIndexesPath(m.getHtmlOnGraph(), htmlPath) as HTMLElement | SVGElement;\r\n      // todo: valuta anche left part e outputta: \"true: leftpartcalcolata < rightpartcacolata. eventuali exceptions.\";\r\n      // todo: NB: è really incasinato e dovrei cambiare il modo di calcolare il risultato, che non calcola left e right, ma calcola size\r\n      //  required e attuale e vede se sono soddisfacibili con l'operatore.\r\n      return; };\r\n    /*\r\n          r_\t\t      str\t    any\t    /     <-- add dataset to name input.\r\n          d_\t\t      str\t    any\t    /\r\n          _\t\t        /\t      js\t    any\r\n          _rule\t\t    $##a$  \tjs\t    any\r\n          _export\t\t  jq\t    js\t    any\r\n          _chainFinal\texport\r\n          _chain\t\t  export\r\n          _constraint\tsize\t  js\t    bool\tinequality\r\n          _dstyle\t\t  /\t      js->css\tstr\r\n          _import\t\t  size\t  js\t    any*/\r\n    switch (val) {\r\n    default:\r\n      U.pe(true, 'unexpected select.attributetypeadd value:' + val);\r\n      break;\r\n    case 'r_':\r\n    case 'd_':\r\n      left.placeholder = 'parameter name';\r\n      right.placeholder = 'value';\r\n      right.pattern = '[.]+';\r\n      $(left).on('input', () => { attrchanged(); });\r\n      $(right).on('input', () => { attrchanged(); });\r\n      break;\r\n    case '_rule':\r\n      outputErrorLeft.href = 'https://github.com/DamianoNaraku/ModelGraph/wiki/measurable-elements#_rule';\r\n      left.placeholder = '$##template$';\r\n      left.pattern = '^\\$[10#]{2}[.]*\\$$'; //semplificato: questo consente anche $ singoli interni al template, normalmente vietati.\r\n      $(left).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(ruleleft, 1);\r\n      });\r\n      $(right).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(_right, 1);\r\n      });\r\n      break;\r\n    case '_import':\r\n      outputErrorLeft.href = 'https://github.com/DamianoNaraku/ModelGraph/wiki/measurable-elements#_import';\r\n      left.placeholder = 'width | height | positionRelX | positionRelY | positionAbsX | positionAbsY';\r\n      left.pattern = '$width$|^height$|^positionRelX$|^positionRelY$|^positionAbsX$|^positionAbsY$';\r\n      $(left).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(importleft, 1);\r\n      });\r\n      $(right).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(_right, 1);\r\n      });\r\n      break;\r\n    case '_chain':\r\n    case '_chainFinal':\r\n      outputErrorLeft.href = 'https://github.com/DamianoNaraku/ModelGraph/wiki/measurable-elements#_chainfinal-and-_chain';\r\n      left.placeholder = 'jQuery selector';\r\n      left.pattern = '[.]*';\r\n      $(left).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(exportleft, 1);\r\n      });\r\n      break;\r\n    case '_export':\r\n      left.placeholder = 'jQuery selector';\r\n      left.pattern = '[.]*';\r\n      outputErrorLeft.href = 'https://github.com/DamianoNaraku/ModelGraph/wiki/measurable-elements#_export';\r\n      $(left).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(exportleft, 1);\r\n      });\r\n      $(right).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(_right, 1);\r\n      });\r\n      break;\r\n    case '_dstyle':\r\n      $(right).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(_right, 1);\r\n      });\r\n      break;\r\n    case '_':\r\n      $(right).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(_right, 1);\r\n      });\r\n      break;\r\n    case '_constraint':\r\n      left.placeholder = 'width | height | positionRelX | positionRelY | positionAbsX | positionAbsY';\r\n      left.pattern = '$width$|^height$|^positionRelX$|^positionRelY$|^positionAbsX$|^positionAbsY$';\r\n      operator.disabled = false;\r\n      $(left).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(importleft, 1);\r\n        setTimeout(constraintRight, 1);\r\n      });\r\n      $(operator).on('change', () => {\r\n        attrchanged();\r\n        setTimeout(constraintRight, 1);\r\n      });\r\n      $(right).on('input', () => {\r\n        attrchanged();\r\n        setTimeout(constraintRight, 1);\r\n      });\r\n      break;\r\n\r\n    }\r\n    $(nameinput).on('input', namechanged);\r\n    const parent = $styleeditor.find('.' + val + 'Container');\r\n    U.pe(!parent.length, 'parent not found:', val, ', editor:', $styleeditor);\r\n    $template.find('.hideOn.' + val).hide();\r\n    parent[0].appendChild(template);\r\n\r\n    $template.find('button.delete').on('click', () => {\r\n      clickedStyle.removeAttribute(name);\r\n      parent[0].removeChild(template);\r\n    });\r\n  }\r\n\r\n  public showE(m: IClass | IReference, edge: IEdge) {\r\n    const index = edge.getIndex();\r\n    console.log('styleShowE(', m, ')');\r\n    const html: HTMLElement = this.getCopyOfTemplate(m as any, '.edge', this.display, true);\r\n    const $html = $(html);\r\n    const edgeStyle: HTMLSelectElement = $html.find('.edgeStyle')[0] as HTMLSelectElement;\r\n    const eColorCommon: HTMLInputElement = $html.find('.edgeColor.common')[0] as HTMLInputElement;\r\n    const eColorHighlight: HTMLInputElement = $html.find('.edgeColor.highlight')[0] as HTMLInputElement;\r\n    const eColorSelected: HTMLInputElement = $html.find('.edgeColor.selected')[0] as HTMLInputElement;\r\n    const eWidthCommon: HTMLInputElement = $html.find('.edgeWidth.common')[0] as HTMLInputElement;\r\n    const eWidthHighlight: HTMLInputElement = $html.find('.edgeWidth.highlight')[0] as HTMLInputElement;\r\n    const eWidthSelected: HTMLInputElement = $html.find('.edgeWidth.selected')[0] as HTMLInputElement;\r\n    const epRadiusC: HTMLInputElement = $html.find('.edgePoint.radius')[0] as HTMLInputElement;\r\n    const epStrokeWC: HTMLInputElement = $html.find('.edgePoint.strokeW')[0] as HTMLInputElement;\r\n    const epStrokeC: HTMLInputElement = $html.find('.edgePoint.stroke')[0] as HTMLInputElement;\r\n    const epFillC: HTMLInputElement = $html.find('.edgePoint.fill')[0] as HTMLInputElement;\r\n    const epRadiusH: HTMLInputElement = $html.find('.edgePointPreview.radius')[0] as HTMLInputElement;\r\n    const epStrokeWH: HTMLInputElement = $html.find('.edgePointPreview.strokeW')[0] as HTMLInputElement;\r\n    const epStrokeH: HTMLInputElement = $html.find('.edgePointPreview.stroke')[0] as HTMLInputElement;\r\n    const epFillH: HTMLInputElement = $html.find('.edgePointPreview.fill')[0] as HTMLInputElement;\r\n    const epRadiusS: HTMLInputElement = $html.find('.edgePointSelected.radius')[0] as HTMLInputElement;\r\n    const epStrokeWS: HTMLInputElement = $html.find('.edgePointSelected.strokeW')[0] as HTMLInputElement;\r\n    const epStrokeS: HTMLInputElement = $html.find('.edgePointSelected.stroke')[0] as HTMLInputElement;\r\n    const epFillS: HTMLInputElement = $html.find('.edgePointSelected.fill')[0] as HTMLInputElement;\r\n    U.pe(!edgeStyle, 'edgeStyle not found. root:', $html, 'selector: ' + '.edgeStyle');\r\n\r\n    let styleName = '';\r\n    switch (m.edgeStyleCommon.style) {\r\n    default:\r\n      U.pe(true, 'unrecognized EdgeStyle:', m.edgeStyleCommon.style);\r\n      break;\r\n    case EdgeModes.angular23Auto:\r\n      styleName = 'angular23Auto';\r\n      break;\r\n    case EdgeModes.angular2:\r\n      styleName = 'angular2';\r\n      break;\r\n    case EdgeModes.angular3:\r\n      styleName = 'angular3';\r\n      break;\r\n    case EdgeModes.straight:\r\n      styleName = 'straight';\r\n      break;\r\n    }\r\n    U.selectHtml(edgeStyle, styleName, false);\r\n    eWidthCommon.value = '' + m.edgeStyleCommon.width;\r\n    eWidthHighlight.value = '' + m.edgeStyleHighlight.width;\r\n    eWidthSelected.value = '' + m.edgeStyleSelected.width;\r\n    eColorCommon.value = m.edgeStyleCommon.color;\r\n    eColorHighlight.value = m.edgeStyleHighlight.color;\r\n    eColorSelected.value = m.edgeStyleSelected.color;\r\n\r\n    console.log('logic:', m, 'styleCColor:', m.edgeStyleCommon.color, 'output value:', eColorCommon.value);\r\n    epRadiusC.value = '' + m.edgeStyleCommon.edgePointStyle.radius;\r\n    epStrokeWC.value = '' + m.edgeStyleCommon.edgePointStyle.strokeWidth;\r\n    epStrokeC.value = m.edgeStyleCommon.edgePointStyle.strokeColor;\r\n    epFillC.value = m.edgeStyleCommon.edgePointStyle.fillColor;\r\n\r\n    epRadiusH.value = '' + m.edgeStyleHighlight.edgePointStyle.radius;\r\n    epStrokeWH.value = '' + m.edgeStyleHighlight.edgePointStyle.strokeWidth;\r\n    epStrokeH.value = m.edgeStyleHighlight.edgePointStyle.strokeColor;\r\n    epFillH.value = m.edgeStyleHighlight.edgePointStyle.fillColor;\r\n\r\n    epRadiusS.value = '' + m.edgeStyleSelected.edgePointStyle.radius;\r\n    epStrokeWS.value = '' + m.edgeStyleSelected.edgePointStyle.strokeWidth;\r\n    epStrokeS.value = m.edgeStyleSelected.edgePointStyle.strokeColor;\r\n    epFillS.value = m.edgeStyleSelected.edgePointStyle.fillColor;\r\n\r\n    $(edgeStyle).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      let mode: EdgeModes;\r\n      switch (edgeStyle.value) {\r\n      default:\r\n        U.pe(true, 'unrecognized edgeMode(', edgeStyle.value, ') among: ', EdgeModes);\r\n        break;\r\n      case EdgeModes.straight:\r\n      case 'straight':\r\n        mode = EdgeModes.straight;\r\n        break;\r\n      case EdgeModes.angular23Auto:\r\n      case 'angular23Auto':\r\n        mode = EdgeModes.angular23Auto;\r\n        break;\r\n      case EdgeModes.angular2:\r\n      case 'angular2':\r\n        mode = EdgeModes.angular2;\r\n        break;\r\n      case EdgeModes.angular3:\r\n      case 'angular3':\r\n        mode = EdgeModes.angular3;\r\n        break;\r\n      }\r\n      m.edgeStyleCommon.style = mode;\r\n      m.edgeStyleHighlight.style = mode;\r\n      m.edgeStyleSelected.style = mode;\r\n      edge.refreshGui();\r\n    });\r\n    $(eColorCommon).off('change.set').on('change.set',\r\n      (e: ChangeEvent) => {\r\n        m.edgeStyleCommon.color = eColorCommon.value;\r\n        edge.refreshGui();\r\n      });\r\n    $(eWidthCommon).off('change.set').on('change.set',\r\n      (e: ChangeEvent) => {\r\n        m.edgeStyleCommon.width = isNaN(+eWidthCommon.value) ? 0 : +eWidthCommon.value;\r\n        edge.refreshGui();\r\n      });\r\n    $(eColorHighlight).off('change.set').on('change.set',\r\n      (e: ChangeEvent) => {\r\n        m.edgeStyleHighlight.color = eColorHighlight.value;\r\n        edge.refreshGui();\r\n      });\r\n    $(eWidthHighlight).off('change.set').on('change.set',\r\n      (e: ChangeEvent) => {\r\n        m.edgeStyleHighlight.width = isNaN(+eWidthHighlight.value) ? 0 : +eWidthHighlight.value;\r\n        edge.refreshGui();\r\n      });\r\n    $(eColorSelected).off('change.set').on('change.set',\r\n      (e: ChangeEvent) => {\r\n        m.edgeStyleSelected.color = eColorSelected.value;\r\n        edge.refreshGui();\r\n      });\r\n    $(eWidthSelected).off('change.set').on('change.set',\r\n      (e: ChangeEvent) => {\r\n        m.edgeStyleSelected.width = isNaN(+eWidthSelected.value) ? 0 : +eWidthSelected.value;\r\n        edge.refreshGui();\r\n      });\r\n\r\n    $(epRadiusC).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleCommon.edgePointStyle.radius = isNaN(+epRadiusC.value) ? 0 : +epRadiusC.value;\r\n      edge.refreshGui();\r\n    });\r\n    $(epStrokeWC).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleCommon.edgePointStyle.strokeWidth = isNaN(+epStrokeWC.value) ? 0 : +epStrokeWC.value;\r\n      edge.refreshGui();\r\n    });\r\n    $(epStrokeC).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleCommon.edgePointStyle.strokeColor = epStrokeC.value;\r\n      edge.refreshGui();\r\n    });\r\n    $(epFillC).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleCommon.edgePointStyle.fillColor = epFillC.value;\r\n      edge.refreshGui();\r\n    });\r\n\r\n    $(epRadiusH).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleHighlight.edgePointStyle.radius = isNaN(+epRadiusH.value) ? 0 : +epRadiusH.value;\r\n      edge.refreshGui();\r\n    });\r\n    $(epStrokeWH).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleHighlight.edgePointStyle.strokeWidth = isNaN(+epStrokeWH.value) ? 0 : +epStrokeWH.value;\r\n      edge.refreshGui();\r\n    });\r\n    $(epStrokeH).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleHighlight.edgePointStyle.strokeColor = epStrokeH.value;\r\n      edge.refreshGui();\r\n    });\r\n    $(epFillH).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleHighlight.edgePointStyle.fillColor = epFillH.value;\r\n      edge.refreshGui();\r\n    });\r\n\r\n    $(epRadiusS).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleSelected.edgePointStyle.radius = isNaN(+epRadiusS.value) ? 0 : +epRadiusS.value;\r\n      edge.refreshGui();\r\n    });\r\n    $(epStrokeWS).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleSelected.edgePointStyle.strokeWidth = isNaN(+epStrokeWS.value) ? 0 : +epStrokeWS.value;\r\n      edge.refreshGui();\r\n    });\r\n    $(epStrokeS).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleSelected.edgePointStyle.strokeColor = epStrokeS.value;\r\n      edge.refreshGui();\r\n    });\r\n    $(epFillS).off('change.set').on('change.set', (e: ChangeEvent) => {\r\n      m.edgeStyleSelected.edgePointStyle.fillColor = epFillS.value;\r\n      edge.refreshGui();\r\n    });\r\n  }\r\n\r\n}\r\n","export default \"\\r\\n#topbarShell{\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  flex-basis: 100vw;\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  /*border-bottom: var(--mainBorder);*/\\r\\n  width: 100vw;\\r\\n  height: var(--topbarH);\\r\\n  max-height: var(--topbarH);\\r\\n}\\r\\n#topbar {\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n}\\r\\n#topbar > * {\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  /*margin: auto 0 auto 10px; /*T?RB?L*/\\r\\n}\\r\\n#topbar > button{\\r\\n  height: calc(var(--topbarH) - 10px);\\r\\n  flex-basis: 100px;\\r\\n  min-width: 100px;\\r\\n  max-width: 100px;\\r\\n}\\r\\n.closeButton{\\r\\n  /* float: right; */\\r\\n  position: absolute;\\r\\n  right: 10px;\\r\\n  top: 10px;\\r\\n  height: 40px;\\r\\n  width: 40px;\\r\\n  border: 2px solid black;\\r\\n  background-color: transparent; }\\r\\n.closeButton:hover{\\r\\n  right: 5px;\\r\\n  top: 5px;\\r\\n  height: 50px;\\r\\n  width: 50px;\\r\\n  background-color: red; }\\r\\n.screenWideShadow{\\r\\n  position: absolute;\\r\\n  display: none;\\r\\n  top: 0;\\r\\n  z-index: 2;\\r\\n  background-color: rgba(0,0,0,0.5);\\r\\n  border: none;\\r\\n  height: 100vh;\\r\\n  width: 100vw;\\r\\n}\\r\\n.popupContent{\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  -webkit-transform: translate(-50%, -50%);\\r\\n          transform: translate(-50%, -50%);\\r\\n  position: absolute;\\r\\n  display: block;\\r\\n  width: auto;\\r\\n  height: auto;\\r\\n  padding: 30px 60px;\\r\\n  border: 4px solid var(--mainBorderColor);\\r\\n  background-color: #44444c;\\r\\n}\\r\\n::ng-deep .typeRow {\\r\\n  height: 20px;\\r\\n  width: 600px;\\r\\n  margin-bottom: 5px;\\r\\n}\\r\\n::ng-deep .typeRow>*{\\r\\n  margin-top: auto;\\r\\n  margin-bottom: auto;}\\r\\n::ng-deep .alias{\\r\\n  padding-left: 10px;\\r\\n  padding-right: 10px;\\r\\n}\\r\\n::ng-deep .typeRow > *{\\r\\n}\\r\\n::ng-deep .typeName{\\r\\n  color: darkorange;\\r\\n}\\r\\n/************************************************     dropdown style     **********************************************/\\r\\n.dropdownTitle {\\r\\n  background-color: inherit; /*var(--mainBackgroundColor);*/\\r\\n  color: unset;\\r\\n  font-size: 16px;\\r\\n  border: none;\\r\\n  padding: 12px 16px;\\r\\n  cursor: inherit;\\r\\n}\\r\\n.dropdownContainer {\\r\\n  position: relative;\\r\\n  display: inline-block;\\r\\n  /*height: 80%;*/\\r\\n  width: auto;\\r\\n  cursor: pointer;\\r\\n}\\r\\n.dropdownContainer.right {\\r\\n  min-width: 100%;\\r\\n}\\r\\nul.dropdownContent {\\r\\n  display: none;\\r\\n  position: absolute;\\r\\n  background-color: var(--mainBackgroundColor);\\r\\n  min-width: 160px;\\r\\n  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\\r\\n  z-index: 1;\\r\\n  border: 3px solid var(--secondaryBorderColor);\\r\\n  padding: 0;\\r\\n  margin: 0;\\r\\n  top: 100%;\\r\\n}\\r\\nul.dropdownContent.right{\\r\\n  margin:0;\\r\\n  top: 0;\\r\\n  left: 100%;\\r\\n}\\r\\nli.dropdownContent {\\r\\n  padding: 0;\\r\\n  text-decoration: none;\\r\\n  display: block;\\r\\n}\\r\\nul.dropdownContent:not(:empty){\\r\\n  border-bottom-left-radius: 33px;\\r\\n}\\r\\n.dropdownTitle.right, .dropdownpadding{\\r\\n  font-size: inherit;\\r\\n  padding: 12px 16px;\\r\\n}\\r\\n.dropdownTitle.right:hover, .dropdownContainer.right:hover, .dropdownpadding:hover{\\r\\n  border-bottom-left-radius: 23px;\\r\\n}\\r\\n.dropdownTitle.right.todo, .dropdownpadding.todo{ border-bottom-left-radius: 0; }\\r\\n/*.dropdownTitle.right.todo:last-child, .dropdownpadding.todo:last-child{ border-bottom-left-radius: 33px; }*/\\r\\nli.dropdownContent:hover {\\r\\n  background-color: var(--secondaryBorderColor);\\r\\n  /*padding-left: 12px;*/\\r\\n  border-left: 8px solid #ff0000a0;\\r\\n  border-bottom-left-radius: 30px;\\r\\n  /*margin-left: -12px; bottom-round border, trouble con stili sovrapposti che lo ri-squadrano.\\r\\n   border-top-left-radius: 24px;*/\\r\\n}\\r\\n#topbar>.dropdownContainer:hover>.dropdownTitle{\\r\\n  border-top-left-radius: 30px;\\r\\n  border-top-right-radius: 30px;}\\r\\n#topbar>.dropdownContainer:hover>.dropdownTitle {\\r\\n  background-color: var(--secondaryBorderColor);\\r\\n}\\r\\n.buttonGridContainer {\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  flex-wrap: wrap;\\r\\n  /* width: calc(40px * 5 - 1);*/\\r\\n  width: min(25vw, calc(40px * 5 + 10px * 5 - 1px)); /* button size + buttonshell margin, 4 per riga con massimo spazio avanzato prima del 5°*/\\r\\n}\\r\\n.buttonGridMinMargin {\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n  -webkit-box-flex: 0;\\r\\n          flex-grow: 0;\\r\\n  flex-shrink: 0;\\r\\n  margin: auto;\\r\\n  padding: 5px; }\\r\\n.buttonGrid {\\r\\n  width: 45px;\\r\\n  height: 45px;\\r\\n}\\r\\nul.dropdownContent{\\r\\n  min-height: 100%;\\r\\n}\\r\\n.dropdownContainer:hover>ul.dropdownContent {\\r\\n  display: block;\\r\\n}\\r\\n.dropdownContainer:hover > ul.dropdownContent:empty{\\r\\n  display:-webkit-box;\\r\\n  display:flex;\\r\\n}\\r\\nul.dropdownContent:empty:before{\\r\\n  content: '... Empty ...';\\r\\n  margin: auto;\\r\\n  display: -webkit-box;\\r\\n  display: flex;\\r\\n}\\r\\nul.dropdownContent:empty:hover{\\r\\n  background-color: darkred !important;\\r\\n  cursor: not-allowed !important;\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9ndWlFbGVtZW50cy90b3AtYmFyL3RvcC1iYXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0E7RUFDRSxvQkFBYTtFQUFiLGFBQWE7RUFDYixpQkFBaUI7RUFDakIsNENBQTRDO0VBQzVDLG9DQUFvQztFQUNwQyxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLDBCQUEwQjtBQUM1QjtBQUNBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0FBQ2Y7QUFDQTtFQUNFLG9CQUFhO0VBQWIsYUFBYTtFQUNiLHFDQUFxQztBQUN2QztBQUNBO0VBQ0UsbUNBQW1DO0VBQ25DLGlCQUFpQjtFQUNqQixnQkFBZ0I7RUFDaEIsZ0JBQWdCO0FBQ2xCO0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxTQUFTO0VBQ1QsWUFBWTtFQUNaLFdBQVc7RUFDWCx1QkFBdUI7RUFDdkIsNkJBQTZCLEVBQUU7QUFDakM7RUFDRSxVQUFVO0VBQ1YsUUFBUTtFQUNSLFlBQVk7RUFDWixXQUFXO0VBQ1gscUJBQXFCLEVBQUU7QUFFekI7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLE1BQU07RUFDTixVQUFVO0VBQ1YsaUNBQWlDO0VBQ2pDLFlBQVk7RUFDWixhQUFhO0VBQ2IsWUFBWTtBQUNkO0FBQ0E7RUFDRSxRQUFRO0VBQ1IsU0FBUztFQUNULHdDQUFnQztVQUFoQyxnQ0FBZ0M7RUFDaEMsa0JBQWtCO0VBQ2xCLGNBQWM7RUFDZCxXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQix3Q0FBd0M7RUFDeEMseUJBQXlCO0FBQzNCO0FBQ0E7RUFDRSxZQUFZO0VBQ1osWUFBWTtFQUNaLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsZ0JBQWdCO0VBQ2hCLG1CQUFtQixDQUFDO0FBQ3RCO0VBQ0Usa0JBQWtCO0VBQ2xCLG1CQUFtQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtFQUNFLGlCQUFpQjtBQUNuQjtBQUlBLHVIQUF1SDtBQUV2SDtFQUNFLHlCQUF5QixFQUFFLDhCQUE4QjtFQUN6RCxZQUFZO0VBQ1osZUFBZTtFQUNmLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsZUFBZTtBQUNqQjtBQUNBO0VBQ0Usa0JBQWtCO0VBQ2xCLHFCQUFxQjtFQUNyQixlQUFlO0VBQ2YsV0FBVztFQUNYLGVBQWU7QUFDakI7QUFDQTtFQUNFLGVBQWU7QUFDakI7QUFDQTtFQUNFLGFBQWE7RUFDYixrQkFBa0I7RUFDbEIsNENBQTRDO0VBQzVDLGdCQUFnQjtFQUNoQiw0Q0FBNEM7RUFDNUMsVUFBVTtFQUNWLDZDQUE2QztFQUM3QyxVQUFVO0VBQ1YsU0FBUztFQUNULFNBQVM7QUFDWDtBQUNBO0VBQ0UsUUFBUTtFQUNSLE1BQU07RUFDTixVQUFVO0FBQ1o7QUFFQTtFQUNFLFVBQVU7RUFDVixxQkFBcUI7RUFDckIsY0FBYztBQUNoQjtBQUVBO0VBQ0UsK0JBQStCO0FBQ2pDO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsa0JBQWtCO0FBQ3BCO0FBRUE7RUFDRSwrQkFBK0I7QUFDakM7QUFDQSxrREFBa0QsNEJBQTRCLEVBQUU7QUFDaEYsNkdBQTZHO0FBQzdHO0VBQ0UsNkNBQTZDO0VBQzdDLHNCQUFzQjtFQUN0QixnQ0FBZ0M7RUFDaEMsK0JBQStCO0VBQy9CO2lDQUMrQjtBQUNqQztBQUNBO0VBQ0UsNEJBQTRCO0VBQzVCLDZCQUE2QixDQUFDO0FBQ2hDO0VBQ0UsNkNBQTZDO0FBQy9DO0FBRUE7RUFDRSxvQkFBYTtFQUFiLGFBQWE7RUFDYixlQUFlO0VBQ2YsOEJBQThCO0VBQzlCLGlEQUFpRCxFQUFFLHlGQUF5RjtBQUM5STtBQUVBO0VBQ0Usb0JBQWE7RUFBYixhQUFhO0VBQ2IsbUJBQVk7VUFBWixZQUFZO0VBQ1osY0FBYztFQUNkLFlBQVk7RUFDWixZQUFZLEVBQUU7QUFFaEI7RUFDRSxXQUFXO0VBQ1gsWUFBWTtBQUNkO0FBR0E7RUFDRSxnQkFBZ0I7QUFDbEI7QUFDQTtFQUNFLGNBQWM7QUFDaEI7QUFDQTtFQUNFLG1CQUFZO0VBQVosWUFBWTtBQUNkO0FBQ0E7RUFDRSx3QkFBd0I7RUFDeEIsWUFBWTtFQUNaLG9CQUFhO0VBQWIsYUFBYTtBQUNmO0FBQ0E7RUFDRSxvQ0FBb0M7RUFDcEMsOEJBQThCO0FBQ2hDIiwiZmlsZSI6InNyYy9ndWlFbGVtZW50cy90b3AtYmFyL3RvcC1iYXIuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4jdG9wYmFyU2hlbGx7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWJhc2lzOiAxMDB2dztcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tYWluQmFja2dyb3VuZENvbG9yKTtcclxuICAvKmJvcmRlci1ib3R0b206IHZhcigtLW1haW5Cb3JkZXIpOyovXHJcbiAgd2lkdGg6IDEwMHZ3O1xyXG4gIGhlaWdodDogdmFyKC0tdG9wYmFySCk7XHJcbiAgbWF4LWhlaWdodDogdmFyKC0tdG9wYmFySCk7XHJcbn1cclxuI3RvcGJhciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxufVxyXG4jdG9wYmFyID4gKiB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICAvKm1hcmdpbjogYXV0byAwIGF1dG8gMTBweDsgLypUP1JCP0wqL1xyXG59XHJcbiN0b3BiYXIgPiBidXR0b257XHJcbiAgaGVpZ2h0OiBjYWxjKHZhcigtLXRvcGJhckgpIC0gMTBweCk7XHJcbiAgZmxleC1iYXNpczogMTAwcHg7XHJcbiAgbWluLXdpZHRoOiAxMDBweDtcclxuICBtYXgtd2lkdGg6IDEwMHB4O1xyXG59XHJcblxyXG4uY2xvc2VCdXR0b257XHJcbiAgLyogZmxvYXQ6IHJpZ2h0OyAqL1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICByaWdodDogMTBweDtcclxuICB0b3A6IDEwcHg7XHJcbiAgaGVpZ2h0OiA0MHB4O1xyXG4gIHdpZHRoOiA0MHB4O1xyXG4gIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyB9XHJcbi5jbG9zZUJ1dHRvbjpob3ZlcntcclxuICByaWdodDogNXB4O1xyXG4gIHRvcDogNXB4O1xyXG4gIGhlaWdodDogNTBweDtcclxuICB3aWR0aDogNTBweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7IH1cclxuXHJcbi5zY3JlZW5XaWRlU2hhZG93e1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBkaXNwbGF5OiBub25lO1xyXG4gIHRvcDogMDtcclxuICB6LWluZGV4OiAyO1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC41KTtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgaGVpZ2h0OiAxMDB2aDtcclxuICB3aWR0aDogMTAwdnc7XHJcbn1cclxuLnBvcHVwQ29udGVudHtcclxuICB0b3A6IDUwJTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIHdpZHRoOiBhdXRvO1xyXG4gIGhlaWdodDogYXV0bztcclxuICBwYWRkaW5nOiAzMHB4IDYwcHg7XHJcbiAgYm9yZGVyOiA0cHggc29saWQgdmFyKC0tbWFpbkJvcmRlckNvbG9yKTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDQ0NDRjO1xyXG59XHJcbjo6bmctZGVlcCAudHlwZVJvdyB7XHJcbiAgaGVpZ2h0OiAyMHB4O1xyXG4gIHdpZHRoOiA2MDBweDtcclxuICBtYXJnaW4tYm90dG9tOiA1cHg7XHJcbn1cclxuOjpuZy1kZWVwIC50eXBlUm93Pip7XHJcbiAgbWFyZ2luLXRvcDogYXV0bztcclxuICBtYXJnaW4tYm90dG9tOiBhdXRvO31cclxuOjpuZy1kZWVwIC5hbGlhc3tcclxuICBwYWRkaW5nLWxlZnQ6IDEwcHg7XHJcbiAgcGFkZGluZy1yaWdodDogMTBweDtcclxufVxyXG46Om5nLWRlZXAgLnR5cGVSb3cgPiAqe1xyXG59XHJcbjo6bmctZGVlcCAudHlwZU5hbWV7XHJcbiAgY29sb3I6IGRhcmtvcmFuZ2U7XHJcbn1cclxuXHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAgICAgZHJvcGRvd24gc3R5bGUgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4uZHJvcGRvd25UaXRsZSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDsgLyp2YXIoLS1tYWluQmFja2dyb3VuZENvbG9yKTsqL1xyXG4gIGNvbG9yOiB1bnNldDtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIHBhZGRpbmc6IDEycHggMTZweDtcclxuICBjdXJzb3I6IGluaGVyaXQ7XHJcbn1cclxuLmRyb3Bkb3duQ29udGFpbmVyIHtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIC8qaGVpZ2h0OiA4MCU7Ki9cclxuICB3aWR0aDogYXV0bztcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuLmRyb3Bkb3duQ29udGFpbmVyLnJpZ2h0IHtcclxuICBtaW4td2lkdGg6IDEwMCU7XHJcbn1cclxudWwuZHJvcGRvd25Db250ZW50IHtcclxuICBkaXNwbGF5OiBub25lO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tYWluQmFja2dyb3VuZENvbG9yKTtcclxuICBtaW4td2lkdGg6IDE2MHB4O1xyXG4gIGJveC1zaGFkb3c6IDBweCA4cHggMTZweCAwcHggcmdiYSgwLDAsMCwwLjIpO1xyXG4gIHotaW5kZXg6IDE7XHJcbiAgYm9yZGVyOiAzcHggc29saWQgdmFyKC0tc2Vjb25kYXJ5Qm9yZGVyQ29sb3IpO1xyXG4gIHBhZGRpbmc6IDA7XHJcbiAgbWFyZ2luOiAwO1xyXG4gIHRvcDogMTAwJTtcclxufVxyXG51bC5kcm9wZG93bkNvbnRlbnQucmlnaHR7XHJcbiAgbWFyZ2luOjA7XHJcbiAgdG9wOiAwO1xyXG4gIGxlZnQ6IDEwMCU7XHJcbn1cclxuXHJcbmxpLmRyb3Bkb3duQ29udGVudCB7XHJcbiAgcGFkZGluZzogMDtcclxuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuXHJcbnVsLmRyb3Bkb3duQ29udGVudDpub3QoOmVtcHR5KXtcclxuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAzM3B4O1xyXG59XHJcbi5kcm9wZG93blRpdGxlLnJpZ2h0LCAuZHJvcGRvd25wYWRkaW5ne1xyXG4gIGZvbnQtc2l6ZTogaW5oZXJpdDtcclxuICBwYWRkaW5nOiAxMnB4IDE2cHg7XHJcbn1cclxuXHJcbi5kcm9wZG93blRpdGxlLnJpZ2h0OmhvdmVyLCAuZHJvcGRvd25Db250YWluZXIucmlnaHQ6aG92ZXIsIC5kcm9wZG93bnBhZGRpbmc6aG92ZXJ7XHJcbiAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMjNweDtcclxufVxyXG4uZHJvcGRvd25UaXRsZS5yaWdodC50b2RvLCAuZHJvcGRvd25wYWRkaW5nLnRvZG97IGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7IH1cclxuLyouZHJvcGRvd25UaXRsZS5yaWdodC50b2RvOmxhc3QtY2hpbGQsIC5kcm9wZG93bnBhZGRpbmcudG9kbzpsYXN0LWNoaWxkeyBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAzM3B4OyB9Ki9cclxubGkuZHJvcGRvd25Db250ZW50OmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnlCb3JkZXJDb2xvcik7XHJcbiAgLypwYWRkaW5nLWxlZnQ6IDEycHg7Ki9cclxuICBib3JkZXItbGVmdDogOHB4IHNvbGlkICNmZjAwMDBhMDtcclxuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAzMHB4O1xyXG4gIC8qbWFyZ2luLWxlZnQ6IC0xMnB4OyBib3R0b20tcm91bmQgYm9yZGVyLCB0cm91YmxlIGNvbiBzdGlsaSBzb3ZyYXBwb3N0aSBjaGUgbG8gcmktc3F1YWRyYW5vLlxyXG4gICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAyNHB4OyovXHJcbn1cclxuI3RvcGJhcj4uZHJvcGRvd25Db250YWluZXI6aG92ZXI+LmRyb3Bkb3duVGl0bGV7XHJcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMzBweDtcclxuICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMzBweDt9XHJcbiN0b3BiYXI+LmRyb3Bkb3duQ29udGFpbmVyOmhvdmVyPi5kcm9wZG93blRpdGxlIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnlCb3JkZXJDb2xvcik7XHJcbn1cclxuXHJcbi5idXR0b25HcmlkQ29udGFpbmVyIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtd3JhcDogd3JhcDtcclxuICAvKiB3aWR0aDogY2FsYyg0MHB4ICogNSAtIDEpOyovXHJcbiAgd2lkdGg6IG1pbigyNXZ3LCBjYWxjKDQwcHggKiA1ICsgMTBweCAqIDUgLSAxcHgpKTsgLyogYnV0dG9uIHNpemUgKyBidXR0b25zaGVsbCBtYXJnaW4sIDQgcGVyIHJpZ2EgY29uIG1hc3NpbW8gc3BhemlvIGF2YW56YXRvIHByaW1hIGRlbCA1wrAqL1xyXG59XHJcblxyXG4uYnV0dG9uR3JpZE1pbk1hcmdpbiB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWdyb3c6IDA7XHJcbiAgZmxleC1zaHJpbms6IDA7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG4gIHBhZGRpbmc6IDVweDsgfVxyXG5cclxuLmJ1dHRvbkdyaWQge1xyXG4gIHdpZHRoOiA0NXB4O1xyXG4gIGhlaWdodDogNDVweDtcclxufVxyXG5cclxuXHJcbnVsLmRyb3Bkb3duQ29udGVudHtcclxuICBtaW4taGVpZ2h0OiAxMDAlO1xyXG59XHJcbi5kcm9wZG93bkNvbnRhaW5lcjpob3Zlcj51bC5kcm9wZG93bkNvbnRlbnQge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG59XHJcbi5kcm9wZG93bkNvbnRhaW5lcjpob3ZlciA+IHVsLmRyb3Bkb3duQ29udGVudDplbXB0eXtcclxuICBkaXNwbGF5OmZsZXg7XHJcbn1cclxudWwuZHJvcGRvd25Db250ZW50OmVtcHR5OmJlZm9yZXtcclxuICBjb250ZW50OiAnLi4uIEVtcHR5IC4uLic7XHJcbiAgbWFyZ2luOiBhdXRvO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbn1cclxudWwuZHJvcGRvd25Db250ZW50OmVtcHR5OmhvdmVye1xyXG4gIGJhY2tncm91bmQtY29sb3I6IGRhcmtyZWQgIWltcG9ydGFudDtcclxuICBjdXJzb3I6IG5vdC1hbGxvd2VkICFpbXBvcnRhbnQ7XHJcbn1cclxuIl19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  AttribETypes, IModel, Json,\r\n  MClass, MetaModel, Model, Status, U, // Options,\r\n  ShortAttribETypes, InputPopup, myFileReader, prxml2json, EType, LocalStorage, prjson2xml\r\n} from '../../common/Joiner';\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\nimport ClickEvent = JQuery.ClickEvent;\r\n\r\n// @ts-ignore\r\n@Component({\r\n  selector: 'app-top-bar',\r\n  templateUrl: './top-bar.component.html',\r\n  styleUrls: ['./top-bar.component.css']\r\n})\r\nexport class TopBarComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n\r\nexport class TopBar {\r\n  static topbar: TopBar = null;\r\n  $html: JQuery<HTMLElement> = null;\r\n  $topbar: JQuery<HTMLElement> = null;\r\n  html: HTMLElement = null;\r\n  topbar: HTMLElement = null;\r\n  constructor() {\r\n    U.pe(!!TopBar.topbar, 'top bar instantiated twice, but it is a singleton.');\r\n    TopBar.topbar = this;\r\n    this.$html = $('#topbarShell');\r\n    this.html = this.$html[0];\r\n    this.$topbar = this.$html.find('#topbar');\r\n    this.topbar = this.$topbar[0];\r\n    TopBar.topbar.updateRecents();\r\n    this.addEventListeners(); }\r\n\r\n\r\n  static load_empty(e: JQuery.ClickEvent, prefix: string) {\r\n    const empty: string = prefix === 'm' ? Model.emptyModel : MetaModel.emptyModel;\r\n    TopBar.load(empty, prefix); }\r\n\r\n  static load_XMI_File(e: JQuery.ClickEvent, prefix: string) {\r\n    // filename:   rootClass.name + '.' + MetaModel.name;   es: path\\league.bowling\r\n    // open file dialog\r\n    // read file\r\n    // transform in json\r\n    const extension = Status.status.getActiveModel().isM1() ? '.' + Status.status.mm.fullname() : '.ecore';\r\n    let xmistring = '';\r\n    U.fileRead((e: ChangeEvent, files: FileList, fileContents: string[]) => {\r\n      U.pe(!fileContents || !files || fileContents.length !== files.length, 'Failed to get file contents:', files, fileContents);\r\n      U.pe(fileContents.length > 1, 'should not be possible to input multiple files.');\r\n      if (fileContents.length == 0) return;\r\n      xmistring = fileContents[0];\r\n      console.log('xmistr input: ', xmistring);\r\n      const xmlDoc = new DOMParser().parseFromString(xmistring,\"text/xml\");\r\n      console.log('xml:', xmlDoc);\r\n      let  jsonstr = prxml2json.xml2json(xmlDoc, '    ');\r\n      console.log('jsonstr input: ', jsonstr);\r\n      // U.pe(true, 'xml -> json', prxml2json, 'json -> xml', prjson2xml);\r\n      TopBar.load(jsonstr, prefix);\r\n    }, [extension], true);\r\n\r\n\r\n  }\r\n\r\n  static load(json: string, prefix: string) {\r\n    const m: IModel = prefix === 'm' ? Status.status.m : Status.status.mm;\r\n    const num: 1 | 2 = prefix === 'm' ? 1 : 2;\r\n    window['' + 'discardSave']();\r\n    if (m.name) m.save(false);\r\n    if (m.isM2()) {\r\n      Status.status.m.save(false);\r\n      LocalStorage.deleteLastOpened(1); }\r\n    LocalStorage.setLastOpened(num, json, null, null);\r\n    U.refreshPage(); }\r\n\r\n  static load_JSON_Text(e: JQuery.ClickEvent, prefix: string) {\r\n    const onoutput = (ee: Event) => {  finish(); };\r\n    const finish = () => {\r\n      const input: HTMLInputElement = popup.getInputNode()[0] as HTMLInputElement;\r\n      popup.destroy();\r\n      TopBar.load(input.value, prefix); };\r\n    const popup: InputPopup = new InputPopup('paste JSON/string data', '', '',\r\n      [['input', onoutput], ['change', onoutput]], 'paste data here.', '', 'textarea');\r\n    // $(popup).find('.closeButton');\r\n    popup.addOkButton('Load', finish);\r\n    popup.show(); }\r\n\r\n  static download_JSON_String(e: ClickEvent, modelstr: string): void {\r\n    const model: IModel = Status.status[modelstr];\r\n    U.pe(!model, 'invalid modelStr in export-save_str: |' + modelstr + '|, status:', status);\r\n    const savetxt: string = model.generateModelString();\r\n    U.pe(!savetxt || savetxt === '', 'empty str');\r\n    U.clipboardCopy(savetxt);\r\n    const popup: InputPopup = new InputPopup((model.isM() ? 'Model' : 'Metamodel') + ' eCore/JSON',\r\n      '', '<br>Already copied to clipboard.', [], null, '' + savetxt, 'textarea');\r\n    popup.show(); }\r\n\r\n  static download_JSON_File(e: ClickEvent, modelstr: string): void {\r\n    const model: IModel = Status.status[modelstr];\r\n    U.pe(!model, 'invalid modelStr in export-save_json_file: |' + modelstr + '|, status:', status);\r\n    const savetxt: string = model.generateModelString();\r\n    U.download(model.name, savetxt); }\r\n\r\n  static download_XMI_File(e: ClickEvent, modelstr: string): void {\r\n    const model: IModel = Status.status[modelstr];\r\n    U.pe(!model, 'invalid modelStr in export-save_xmi_file: |' + modelstr + '|, status:', status);\r\n    let savetxt: string = model.generateModelString();\r\n    const json: Json = JSON.parse(savetxt);\r\n    /*const parser = new FastXmi.j2xParser(new FastXmiOptions());\r\n    const xml: string = parser.parse(json, new FastXmiOptions());\r\n    savetxt = '' + xml; */\r\n    // savetxt = json2xml(savetxt, { header: true } as JS2XML); // , Options.JS2XML);\r\n    // console.log('xmljson: ', parser.parse(json));\r\n    savetxt = '' + prjson2xml.json2xml(json, ' ');\r\n    savetxt = TopBar.formatXml(savetxt).trim();\r\n    let name: string;\r\n    let extension: string;\r\n    if (model.isM()) {\r\n      const classRoot: MClass = (model as Model).classRoot;\r\n      name = (model.name || (classRoot ? classRoot.metaParent.name : 'M1_unnamed'));\r\n      extension = '.' + (Status.status.mm.childrens[0].name).toLowerCase();\r\n    } else {\r\n      name = (model.name || model.getDefaultPackage().name || 'M2_unnamed');\r\n      extension = '.ecore'; }\r\n    U.download(name + extension, savetxt); }\r\n\r\n  static formatXml(xml: string): string {\r\n    const reg = /(>)\\s*(<)(\\/*)/g; // updated Mar 30, 2015\r\n    const wsexp = / *(.*) +\\n/g;\r\n    const contexp = /(<.+>)(.+\\n)/g;\r\n    xml = xml.replace(reg, '$1\\n$2$3').replace(wsexp, '$1\\n').replace(contexp, '$1\\n$2');\r\n    const pad: string = '' || '\\t';\r\n    let formatted = '';\r\n    const lines = xml.split('\\n');\r\n    let indent = 0;\r\n    let lastType = 'other';\r\n    // 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions\r\n    const transitions = {\r\n      'single->single': 0,\r\n      'single->closing': -1,\r\n      'single->opening': 0,\r\n      'single->other': 0,\r\n      'closing->single': 0,\r\n      'closing->closing': -1,\r\n      'closing->opening': 0,\r\n      'closing->other': 0,\r\n      'opening->single': 1,\r\n      'opening->closing': 0,\r\n      'opening->opening': 1,\r\n      'opening->other': 1,\r\n      'other->single': 0,\r\n      'other->closing': -1,\r\n      'other->opening': 0,\r\n      'other->other': 0\r\n    };\r\n    let i = 0;\r\n    for (i = 0; i < lines.length; i++) {\r\n      const ln = lines[i];\r\n\r\n      // Luca Viggiani 2017-07-03: handle optional <?xml ... ?> declaration\r\n      if (ln.match(/\\s*<\\?xml/)) {\r\n        formatted += ln + '\\n';\r\n        continue;\r\n      }\r\n      // ---\r\n\r\n      const single = Boolean(ln.match(/<.+\\/>/)); // is this line a single tag? ex. <br />\r\n      const closing = Boolean(ln.match(/<\\/.+>/)); // is this a closing tag? ex. </a>\r\n      const opening = Boolean(ln.match(/<[^!].*>/)); // is this even a tag (that's not <!something>)\r\n      const type = single ? 'single' : closing ? 'closing' : opening ? 'opening' : 'other';\r\n      const fromTo = lastType + '->' + type;\r\n      lastType = type;\r\n      let padding = '';\r\n\r\n      indent += transitions[fromTo];\r\n      let j: number;\r\n      for (j = 0; j < indent; j++) {\r\n        padding += pad;\r\n      }\r\n      if (fromTo === 'opening->closing') {\r\n        formatted = formatted.substr(0, formatted.length - 1) + ln + '\\n'; // substr removes line break (\\n) from prev loop\r\n      } else {\r\n        formatted += padding + ln + '\\n';\r\n      }\r\n    }\r\n\r\n    return formatted; }\r\n\r\n  updateRecents(): void {\r\n    let tmp: string;\r\n    tmp = localStorage.getItem('MM_SaveList');\r\n    if (!tmp || tmp === '' || tmp === 'null' || tmp === 'undefined') { tmp = JSON.stringify([]); }\r\n    const mmSaveList: string[] = JSON.parse(tmp);\r\n    tmp = localStorage.getItem('M_SaveList');\r\n    if (!tmp || tmp === '' || tmp === 'null' || tmp === 'undefined') { tmp = JSON.stringify([]); }\r\n    const mSaveList: string[] = JSON.parse(tmp);\r\n    const $metamodelHtml: JQuery<HTMLElement> = this.$html.find('.metamodel');\r\n    const $modelHtml: JQuery<HTMLElement> = this.$html.find('.model');\r\n    const recentContainerMM: HTMLElement = $metamodelHtml.find('.recentSaveContainer')[0];\r\n    const recentContainerM: HTMLElement = $modelHtml.find('.recentSaveContainer')[0];\r\n    console.log(recentContainerM, recentContainerMM);\r\n    const exampleChilds: HTMLElement[] = [recentContainerMM.childNodes[0], recentContainerM.childNodes[0]] as HTMLElement[];\r\n    U.clear(recentContainerMM);\r\n    U.clear(recentContainerM);\r\n    let i = -1;\r\n    let j = -1;\r\n    let child: HTMLElement;\r\n    const prefixarr = ['MM_', 'M_'];\r\n    const containerArr: HTMLElement[] = [recentContainerMM, recentContainerM];\r\n    const saveList: string[][] = [mmSaveList, mSaveList];\r\n\r\n    // U.pw(true, recentContainerM, recentContainerMM, exampleChilds, saveList);\r\n    while (++j < prefixarr.length) {\r\n      i = -1;\r\n      while (++i < saveList[j].length) {\r\n        child = U.cloneHtml(exampleChilds[j]);\r\n        $(child).find('.recentsave')[0].innerText = saveList[j][i];\r\n        // child.dataset.value = prefixarr[j] + mSaveList[i];\r\n        containerArr[j].appendChild(child);\r\n      }\r\n    }\r\n    $metamodelHtml.find('.recentsave').off('click.load').on('click.load', (e: Event) => {\r\n      this.loadRecent((e.currentTarget as HTMLElement).innerText, true); });\r\n    $modelHtml.find('.recentsave').off('click.load').on('click.load', (e: Event) => {\r\n      this.loadRecent((e.currentTarget as HTMLElement).innerText, false); });\r\n  }\r\n\r\n  loadRecent(name: string, isMetaModel: boolean): void {\r\n    const prefix: string = isMetaModel ? 'MM' : 'M';\r\n    const tmp: string = localStorage.getItem(prefix + '_' + name);\r\n    U.pe(!tmp || tmp === '' || tmp === 'null' || tmp === 'undefined', 'uncorrect savename: |' + prefix + '_' + name + '|');\r\n    localStorage.setItem('LastOpened' + prefix, tmp);\r\n    U.refreshPage(); }\r\n\r\n  addEventListeners() {\r\n    const $t = this.$topbar;\r\n    const $m2 = $t.find('.metamodel');\r\n    const $m1 = $t.find('.model');\r\n    $t.find('.TypeMapping').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.topbar.showTypeMap(); });\r\n    $m2.find('.save').off('click.btn').on('click.btn', (e: ClickEvent) => { Status.status.mm.save(false, null); } );\r\n    $m1.find('.save').off('click.btn').on('click.btn', (e: ClickEvent) => { Status.status.m.save(false, null); } );\r\n\r\n    // download\r\n    $m2.find('.download_JSON_String').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.download_JSON_String(e, 'mm'); } );\r\n    $m2.find('.download_JSON').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.download_JSON_File(e, 'mm'); } );\r\n    $m2.find('.download_XMI').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.download_XMI_File(e, 'mm'); } );\r\n    $m1.find('.download_JSON_String').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.download_JSON_String(e, 'm'); } );\r\n    $m1.find('.download_JSON').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.download_JSON_File(e, 'm'); } );\r\n    $m1.find('.download_XMI').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.download_XMI_File(e, 'm'); } );\r\n    //// load\r\n    $m2.find('.loadEmpty').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.load_empty(e, 'mm'); } );\r\n    $m2.find('.loadFile').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.load_XMI_File(e, 'mm'); } );\r\n    $m2.find('.loadTxt').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.load_JSON_Text(e, 'mm'); } );\r\n    $m1.find('.loadEmpty').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.load_empty(e, 'm'); } );\r\n    $m1.find('.loadFile').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.load_XMI_File(e, 'm'); } );\r\n    $m1.find('.loadTxt').off('click.btn').on('click.btn', (e: ClickEvent) => { TopBar.load_JSON_Text(e, 'm'); } ); }\r\n\r\n  showTypeMap(): void {\r\n    const $shell = this.$html.find('#TypeMapper');\r\n    const $html = $shell.find('.TypeList');\r\n    const html = $html[0];\r\n    U.clear(html);\r\n    const table: HTMLTableElement = U.toHtml<HTMLTableElement>('<table class=\"typeTable\"><tbody></tbody></table>');\r\n    const tbody = table.firstChild as HTMLElement;\r\n    for (const m3TypeName in ShortAttribETypes) {\r\n      if ( !ShortAttribETypes[m3TypeName] ) { continue; }\r\n      const type: EType = EType.get(ShortAttribETypes[m3TypeName] as ShortAttribETypes);\r\n      const row: HTMLTableRowElement = U.toHtmlRow('' +\r\n        '<tr class=\"typeRow\">' +\r\n          '<td class=\"typeName\" data-m3name=\"' + type.short + '\">' + type.short + '</td>' +\r\n          '<td class=\"alias\">is aliased to</td>' +\r\n          '<td>' +\r\n             '<input class=\"AliasName form-control\" placeholder=\"Not aliased\" value=\"' + type.name + '\"' +\r\n                ' aria-label=\"Small\" aria-describedby=\"inputGroup-sizing-sm\">' +\r\n          '</td>' +\r\n        '</tr>');\r\n      tbody.appendChild(row);\r\n      console.log('row:', row, ', tbody:', tbody);\r\n    }\r\n    html.appendChild(table);\r\n    $html.find('input.AliasName').off('change').on('change', (e: ChangeEvent) => { TopBar.topbar.aliasChange(e); } );\r\n    $shell.show();\r\n    U.closeButtonSetup($shell); }\r\n\r\n  aliasChange(e: ChangeEvent): void {\r\n    const input: HTMLInputElement = e.target as HTMLInputElement;\r\n    let row: HTMLElement = input;\r\n    while (!row.classList.contains('typeRow')) { row = row.parentNode as HTMLElement; }\r\n    const m3Type = $(row).find('.typeName')[0].dataset.m3name;\r\n    const type: EType = EType.get(m3Type as ShortAttribETypes);\r\n    type.changeAlias(input.value); }\r\n\r\n}\r\n","import {Dictionary, ECoreEnum, ELiteral, EType, IClassifier, IPackage, Json, ModelPiece, ShortAttribETypes, Type, U} from '../common/Joiner';\r\n\r\nexport class EEnum extends IClassifier {\r\n  childrens: ELiteral[];\r\n  serializable: boolean;\r\n\r\n  constructor(parent: IPackage, json: Json) {\r\n    super(parent, null);\r\n    if (this.parent) { U.ArrayAdd(this.parent.enums, this); }\r\n    this.parse(json);\r\n  }\r\n\r\n  fullname(): string { return this.parent.name + '.' + this.name; }\r\n\r\n  refreshGUI_Alone(debug: boolean = false): void { this.getVertex().refreshGUI(); }\r\n\r\n  addLiteral(): ELiteral {\r\n    const attr: ELiteral = new ELiteral(this, null);\r\n    if (attr.ordinal === Number.NEGATIVE_INFINITY) this.autofixEnumValues();\r\n    this.refreshGUI();\r\n    return attr; }\r\n\r\n  parse(json: Json, destructive?: boolean): void {\r\n    /*\r\n  <eClassifiers xsi:type=\"ecore:EEnum\" name=\"EnumNamecustom\" instanceTypeName=\"instanceTypeName\"\r\n      serializable=\"false\">\r\n    <eLiterals name=\"child2name\" value=\"3\" literal=\"child2literal\"/>\r\n    <eLiterals name=\"NameStr\" literal=\"LiteralStr\"/>\r\n  </eClassifiers>*/\r\n    // literal, name sono entrambi unici, ma è possibile che literal1.name === literal2.literal; .name è obbligatorio, .literal può essere null/empty\r\n    this.childrens = [];\r\n    this.instanceTypeName = '';\r\n    let i: number;\r\n    this.setName(Json.read<string>(json, ECoreEnum.namee, 'Enum_1'), false);\r\n\r\n    for (let key in json) {\r\n      const value: Json = json[key];\r\n      switch (key){\r\n        default: U.pe(true, 'Enum.parse() unexpected key:', key, 'in json:', json); break;\r\n        case ECoreEnum.xsitype: case ECoreEnum.namee: break;\r\n        case ECoreEnum.eLiterals: break;\r\n        case ECoreEnum.serializable: this.serializable = value === 'true'; break;\r\n        case ECoreEnum.instanceTypeName: this.instanceTypeName = value + ''; break;\r\n      }\r\n    }\r\n\r\n    const literals: Json[] = Json.getChildrens(json);\r\n    for (i = 0; i < literals.length; i++) { new ELiteral(this, literals[i]); }\r\n    if (!this.childrens.length) new ELiteral(this, null);\r\n    this.autofixEnumValues();\r\n  }\r\n\r\n  duplicate(nameAppend?: string, newParent?: ModelPiece): ModelPiece {\r\n    return undefined;\r\n  }\r\n\r\n  fieldChanged(e: JQuery.ChangeEvent): void {\r\n    const html: HTMLElement = e.currentTarget;\r\n    if (html.classList.contains('AddFieldSelect')) return;\r\n    switch (html.tagName.toLowerCase()) {\r\n    case 'select':\r\n    default: U.pe(true, 'unexpected tag:', html.tagName, ' of:', html, 'in event:', e); break;\r\n    case 'textarea':\r\n    case 'input':\r\n      const input = html as HTMLInputElement;\r\n      input.value = this.setName((input as HTMLInputElement).value); break;\r\n    }\r\n  }\r\n\r\n  generateModel(): Json {\r\n    const arr: Json[] = [];\r\n    const model: Json = {};\r\n    model[ECoreEnum.xsitype] = 'ecore:EEnum';\r\n    model[ECoreEnum.namee] = this.name;\r\n    model[ECoreEnum.serializable] = this.serializable ? \"true\" : \"false\";\r\n    if (this.instanceTypeName) model[ECoreEnum.instanceTypeName] = this.instanceTypeName;\r\n    model[ECoreEnum.eLiterals] = arr;\r\n    let i;\r\n    for (i = 0; i < this.childrens.length; i++) { arr.push(this.childrens[i].generateModel()); }\r\n    return model; }\r\n\r\n  /*must remain private*/ private autofixEnumValues(): void {\r\n    // valori duplicati sono ammessi se esplicitamente inseriti, ma se il campo è vuoto io cerco di generarli\r\n    let i: number;\r\n    let valuesfound: Dictionary<number, boolean> = {};\r\n    let firsthole: number = 0;\r\n    for (i = 0; i < this.childrens.length; i++) {\r\n      const lit: ELiteral = this.childrens[i];\r\n      if (lit.ordinal !== Number.NEGATIVE_INFINITY) {\r\n        valuesfound[lit.ordinal] = true;\r\n        if (lit.ordinal === firsthole) { while (valuesfound[++firsthole]) { ; } } // update first hole.\r\n        continue; }\r\n      lit.ordinal = firsthole;\r\n      if (!lit.name) lit.name = this.name + '_' + lit.ordinal;\r\n    }\r\n  }\r\n\r\n  isChildLiteralTaken(s: string): boolean { // indirectly called by setLiteral(); using this['isChildLiteralTaken']();\r\n    let i;\r\n    for (i = 0; i < this.childrens.length; i++) { if (s === this.childrens[i].literal) { return true; } }\r\n    return false; }\r\n\r\n  delete(): void {\r\n    const oldparent = this.parent;\r\n    super.delete();\r\n    if (oldparent) U.arrayRemoveAll(oldparent.enums, this);\r\n    // todo: che fare con gli attributes che hanno questo enum come tipo? per ora cambio in stringa.\r\n    let i: number = 0;\r\n    for (i = 0; i < Type.all.length; i++) {\r\n      if (Type.all[i].enumType !== this) continue;\r\n      Type.all[i].changeType(null, EType.get(ShortAttribETypes.EString), null, null); }\r\n    Type.updateTypeSelectors(null, false, false, true); }\r\n\r\n  getDefaultValueStr(): string { return this.childrens[0].name; }\r\n\r\n  getAllowedValuesStr(): string[] {\r\n    const arr: string[] = [];\r\n    let i: number;\r\n    for (i = 0; i < this.childrens.length; i++) { arr.push(this.childrens[i].name); }\r\n    return arr; }\r\n\r\n  getAllowedValuesInt(): number[] {\r\n    const arr: number[] = [];\r\n    let i: number;\r\n    for (i = 0; i < this.childrens.length; i++) { arr.push(this.childrens[i].ordinal); }\r\n    return arr; }\r\n\r\n}\r\n\r\n","import {\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  Json,\r\n  U,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  IReference,\r\n  Status,\r\n  DetectZoom,\r\n  Model,\r\n  ECoreAttribute,\r\n  ECoreClass,\r\n  ECorePackage,\r\n  ECoreReference,\r\n  ECoreRoot,\r\n  Point,\r\n  GraphPoint,\r\n  IModel,\r\n  Size,\r\n  MAttribute,\r\n  MReference,\r\n  MClass,\r\n  M2Class,\r\n  EdgeStyle,\r\n  M2Reference,\r\n  M2Attribute,\r\n  M3Package,\r\n  M3Reference,\r\n  M3Attribute,\r\n  M3Feature,\r\n  EdgeModes,\r\n  EdgePointStyle, EOperation, EParameter, Typedd, Type, EEnum, GraphSize, ViewRule,\r\n} from '../common/Joiner';\r\n\r\n\r\nexport abstract class IClassifier extends ModelPiece{\r\n  parent: IPackage;\r\n  childrens: Typedd[];\r\n  vertex: IVertex = null;\r\n  instanceTypeName: string;\r\n  // WITHOUT edges\r\n  private sidebarHtml: HTMLElement;\r\n\r\n  static defaultSidebarHtml(): HTMLElement {\r\n    return U.toHtml<HTMLElement>('<div class=\"sidebarNode class\"><p class=\"sidebarNodeName\">$##name$</p></div>'); }\r\n\r\n  generateVertex(): IVertex {\r\n    if (this.vertex) return;\r\n    const lastView: ViewRule = this.getLastViewWith('vertexSize');\r\n    const size: GraphSize =  lastView ? lastView.vertexSize : null;\r\n    const v: IVertex = this.vertex = new IVertex(this, size);\r\n    return v; }\r\n\r\n  getSidebarHtml(): HTMLElement {\r\n    if (this.sidebarHtml) { return this.sidebarHtml; }\r\n    return IClassifier.defaultSidebarHtml(); }\r\n\r\n  setName(value: string, refreshGUI: boolean = false): string {\r\n    super.setName(value, refreshGUI);\r\n    if (refreshGUI) this.refreshInstancesGUI();\r\n    // for (i = 0; model && i < model.instances.length; i++) { model.instances[i].sidebar.fullnameChanged(oldName, this.name); }\r\n    Type.updateTypeSelectors(null, false, true, true);\r\n    return this.name; }\r\n\r\n  getVertex(): IVertex {\r\n    const displayAsEdge: boolean = this.shouldBeDisplayedAsEdge();\r\n    // U.pw(displayAsEdge, 'getvertex called on a class that should not have a vertex.', this);\r\n    if (!displayAsEdge && this.vertex === null && Status.status.loadedLogic) { this.generateVertex(); }\r\n    return this.vertex; }\r\n\r\n\r\n  refreshGUI_Alone(debug?: boolean): void {\r\n    if (!Status.status.loadedLogic) { return; }\r\n    this.getVertex().refreshGUI();\r\n  }\r\n\r\n  getEcoreTypeName(): string {\r\n    if (this instanceof EEnum || M2Class) return Type.classTypePrefix + this.name;\r\n    return Type.classTypePrefix + this.parent.name;\r\n  }\r\n\r\n}\r\n","import {\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  Json,\r\n  U,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  M2Class,\r\n  IReference,\r\n  Status,\r\n  DetectZoom,\r\n  Model,\r\n  ECoreAttribute,\r\n  ECoreClass,\r\n  ECorePackage,\r\n  ECoreReference,\r\n  ECoreRoot,\r\n  Point,\r\n  GraphPoint,\r\n  IModel,\r\n  Size,\r\n  EdgeStyle, MFeature, M2Attribute, M3Class, IClass,\r\n  Dictionary, GraphSize, MPackage, MReference, MAttribute, M2Reference, M2Feature,\r\n} from '../common/Joiner';\r\n\r\nexport class MClass extends IClass {\r\n  static stylesDatalist: HTMLDataListElement;\r\n  metaParent: M2Class;\r\n  // instances: ModelNone[];\r\n  parent: MPackage;\r\n  childrens: MFeature[];\r\n  attributes: MAttribute[];\r\n  references: MReference[];\r\n  referencesIN: MReference[];\r\n  // external pointers to this class.\r\n  // id: number;\r\n  // instances: ModelPiece[];\r\n  // metaParent: M2Class;\r\n  // parent: MPackage;\r\n  // childrens: ModelPiece[];\r\n  /*attributes: MAttribute[];\r\n  references: MReference[];\r\n  referencesIN: MReference[];\r\n*/\r\n\r\n  static getArrayIndex_ByMetaParentName(name: string, array: ModelPiece[]): number {\r\n    let i = -1;\r\n    while (++i < array.length) { if (name === array[i].metaParent.name) { return i; } }\r\n    return -1; }\r\n\r\n  constructor(pkg: MPackage, json: Json, metaVersion: M2Class) {\r\n    super(pkg, metaVersion);\r\n    if (!pkg && !json && !metaVersion) { return; } // empty constructor for .duplicate();\r\n    U.pe(!metaVersion, 'null metaparent?');\r\n    this.parse(json, true);\r\n  }\r\n\r\n  endingName(valueMaxLength: number = 10): string {\r\n    if (this.attributes.length > 0) { return this.attributes[0].endingName(valueMaxLength); }\r\n    if (this.references.length > 0) { return this.references[0].endingName(valueMaxLength); }\r\n    return ''; }\r\n\r\n  getModelRoot(): Model { return super.getModelRoot() as Model; }\r\n\r\n  isRoot(): boolean { return this === Status.status.m.classRoot; }\r\n  setRoot(value: boolean): void {\r\n    U.pe(!value, 'should only be used to set root. to delete a root choose another one and call setRoot on it.');\r\n    this.getModelRoot().classRoot = this;\r\n  }\r\n\r\n\r\n  conformability(meta: M2Class, outObj?: any): number {\r\n    throw new Error('M.conformability%() todo');\r\n  }\r\n\r\n  duplicate(nameAppend: string = null, newParent: IPackage | ModelPiece = null): MClass {\r\n    const c = new MClass(null, null, null);\r\n    c.copy(this);\r\n    c.refreshGUI_Alone();\r\n    return c; }\r\n\r\n  // linkToMetaParent(meta: M2Class): void { return super.linkToMetaParent(meta); }\r\n  generateModel(root: boolean = false): Json {\r\n    /*\r\n       { \"-name\": \"tizio\", \"attrib2\": value2, ...}\r\n    OR:\r\n       {\r\n        \"-xmlns:xmi\": \"http://www.omg.org/XMI\",\r\n        \"-xmlns:org.eclipse.example.bowling\": \"https://org/eclipse/example/bowling\",\r\n        \"-xmi:version\": \"2.0\",\r\n        \"Players\": [\r\n          { \"-name\": \"tizio\" },\r\n          { \"-name\": \"asd\" }\r\n        ]\r\n      }\r\n    */\r\n    const inlineMarker: string = Status.status.XMLinlineMarker;\r\n    const json: Json = {};\r\n    if (root) {\r\n      json[inlineMarker + 'xmlns:xmi'] =  'http://www.omg.org/XMI';\r\n      json[inlineMarker + 'xmlns:' + this.getModelRoot().namespace()] = this.getModelRoot().uri();\r\n      json[inlineMarker + 'xmi:version'] =  '2.0'; }\r\n    let outi: number;\r\n    let i: number;\r\n    const set = (k: string, v: Json) => { json[k] = v; };\r\n    const arr: ModelPiece[][] = [this.attributes, this.references];\r\n    for (outi = 0; outi < arr.length; outi++) {\r\n      for (i = 0; i < arr[outi].length; i++) {\r\n        const child = arr[outi][i];\r\n        const value: Json | string = (child).generateModel();\r\n        U.pe(value instanceof ModelPiece, 'value returned is modelpiece.', child);\r\n        // some error here, il value = ELIteral viene assegnato alla key .nome\r\n        if (value === '' || value === null || value === undefined || U.isEmptyObject(value)) { continue; }\r\n        const key: string = (U.isPrimitive(value) ? inlineMarker : '') + child.metaParent.name;\r\n        json[key] = value; }\r\n    }\r\n    return json; }\r\n\r\n  parse(json: Json, destructive: boolean = true): void {\r\n    const attributes: M2Attribute[] = (this.metaParent).attributes;\r\n    const references: M2Reference[] = (this.metaParent).references;\r\n    // const childrens: M2Feature[] = (this.metaParent).childrens;\r\n    let i = -1;\r\n    if (destructive) {\r\n      this.attributes = [];\r\n      this.references = [];\r\n      this.childrens = [];\r\n      this.referencesIN = [];\r\n      while (++i < attributes.length) {\r\n        const attr: MAttribute = new MAttribute(this, null, attributes[i]);\r\n        /*U.ArrayAdd(this.childrens, attr);*/\r\n        U.ArrayAdd(this.attributes, attr);\r\n        console.trace();\r\n        console.log('add[' + i + '/' + this.metaParent.attributes.length + ']:', attr, this.attributes, this.attributes.length, this);\r\n      }\r\n      i = -1;\r\n      while (++i < references.length) {\r\n        const ref: MReference = new MReference(this, null, references[i]);\r\n        /*U.ArrayAdd(this.childrens, ref);*/\r\n        U.ArrayAdd(this.references, ref); }\r\n    }\r\n    U.pe(this.attributes.length > 4, this, this.attributes.length);\r\n\r\n    /*{                                                           <--- classRoot\r\n        \"-xmlns:xmi\": \"http://www.omg.org/XMI\",\r\n        \"-xmlns:org.eclipse.example.bowling\": \"https://org/eclipse/example/bowling\",\r\n        \"-xmi:version\": \"2.0\",\r\n        \"Players\": [\r\n          { \"-name\": \"tizio\" },          <-- class[0]\r\n          { \"-name\": \"asd\" }             <-- class[1]\r\n        ]\r\n      }*/\r\n    const inlineMarker: string = Status.status.XMLinlineMarker;\r\n    for (let key in json) {\r\n      if (!json.hasOwnProperty(key)) { continue; }\r\n      const value: Json = json[key];\r\n      switch (key) {\r\n        case inlineMarker + 'xmlns:xmi':\r\n        // case inlineMarker + 'xmlns:' + this.getModelRoot().namespace():\r\n        case inlineMarker + 'xmi:version': this.setRoot(true); break;\r\n        default:\r\n          // todo: usa il ns del modello per caricare il metamodello con quel namespace se quello attuale non è conforme?\r\n          if (key.indexOf(inlineMarker) === 0) { key = key.substr(inlineMarker.length); }\r\n          if (key.indexOf('xmlns:') === 0) {\r\n            key = key.substr('xmlns:'.length);\r\n            this.getModelRoot().namespace(key);\r\n            U.pw(false, 'setns?', key, this, this.metaParent); continue; }\r\n          const metaAttr: M2Attribute = this.metaParent.getAttribute(key);\r\n          const metaRef: M2Reference = this.metaParent.getReference(key);\r\n          if (metaAttr) {\r\n            const cindex: number = this.getChildrenIndex_ByMetaParent(metaAttr);\r\n            const aindex: number = this.getAttributeIndex_ByMetaParent(metaAttr);\r\n            /*const newA: MAttribute = new MAttribute(this, value, metaAttr);\r\n            this.childrens[cindex] = this.attributes[aindex] = newA;*/\r\n            this.attributes[aindex].parse(value, true);\r\n          } else if (metaRef) {\r\n            const cindex: number = this.getChildrenIndex_ByMetaParent(metaRef);\r\n            const rindex: number = this.getReferenceIndex_ByMetaParent(metaRef);\r\n            // const newR: MReference = new MReference(this, value, metaRef);\r\n            // this.childrens[cindex] = this.references[rindex] = newR;\r\n            let j: number;\r\n            let edges: IEdge[] = this.references[rindex].getEdges();\r\n            for (j = 0; j < edges.length; j++) {}\r\n            this.references[rindex].parse(value, true);\r\n\r\n          } else {\r\n            U.pe(true, 'model attribute-or-reference type not found. class:', this, ', json:', json,\r\n              'key/name:', key, ', Iclass:', this.metaParent); }\r\n          break;\r\n      }\r\n    }\r\n    console.log('here2', this, this.attributes.length);\r\n    U.pe(this.attributes.length > 4, this, this.attributes.length);\r\n  }\r\n  modify_Old(json: Json, destructive: boolean = true): void {\r\n    /*{                                                                                           <-- :classroot\r\n        \"-xmlns:xmi\": \"http://www.omg.org/XMI\",\r\n        \"-xmlns:org.eclipse.example.bowling\": \"https://org/eclipse/example/bowling\",\r\n        \"-xmi:version\": \"2.0\",\r\n        \"Players\": [\r\n          { \"-name\": \"tizio\" },          <-- class[0]\r\n          { \"-name\": \"asd\" }             <-- class[1]\r\n        ]\r\n      }*/\r\n    if (destructive) { this.childrens = []; this.references = []; this.attributes = []; this.referencesIN = []; }\r\n    const inlineMarker: string = Status.status.XMLinlineMarker;\r\n    for (let key in json) {\r\n      if (!json.hasOwnProperty(key)) { continue; }\r\n      const value: Json = json[key];\r\n      switch (key) {\r\n        case inlineMarker + 'xmlns:xmi':\r\n        // case inlineMarker + 'xmlns:' + this.getModelRoot().namespace():\r\n        case inlineMarker + 'xmi:version': this.setRoot(true); break;\r\n        default:\r\n          // todo: usa il ns del modello per caricare il metamodello con quel namespace se quello attuale non è conforme?\r\n          if (key.indexOf(inlineMarker) === 0) { key = key.substr(inlineMarker.length); }\r\n          if (key.indexOf('xmlns:') === 0) {\r\n            key = key.substr('xmlns:'.length);\r\n            this.getModelRoot().namespace(key);\r\n            U.pw(false, 'setns?', key, this, this.metaParent); continue; }\r\n          const metaAttr: M2Attribute = this.metaParent.getAttribute(key);\r\n          const metaRef: M2Reference = this.metaParent.getReference(key);\r\n          let newA: MAttribute;\r\n          let newR: MReference;\r\n          if (metaAttr) {\r\n            newA = new MAttribute(this, value, metaAttr);\r\n            U.ArrayAdd(this.childrens, newA);\r\n            U.ArrayAdd(this.attributes, newA);\r\n          } else if (metaRef) {\r\n            newR = new MReference(this, value, metaRef);\r\n            U.ArrayAdd(this.childrens, newR);\r\n            U.ArrayAdd(this.references, newR);\r\n          } else {\r\n            U.pe(true, 'model attribute-or-reference type not found. class:', this, ', json:', json,\r\n              'key/name:', key, ', Iclass:', this.metaParent); }\r\n          break;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n  getChildrenIndex_ByMetaParent(meta: ModelPiece): number { return MClass.getArrayIndex_ByMetaParentName(meta.name, this.childrens); }\r\n  getAttributeIndex_ByMetaParent(meta: IAttribute): number { return MClass.getArrayIndex_ByMetaParentName(meta.name, this.attributes); }\r\n  getReferenceIndex_ByMetaParent(meta: IReference): number { return MClass.getArrayIndex_ByMetaParentName(meta.name, this.references); }\r\n\r\n}\r\n","import {\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  Json,\r\n  U,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  IReference,\r\n  Status,\r\n  DetectZoom,\r\n  Model,\r\n  ECoreAttribute,\r\n  ECoreClass,\r\n  ECorePackage,\r\n  ECoreReference,\r\n  ECoreRoot,\r\n  Point,\r\n  GraphPoint,\r\n  IModel,\r\n  Size,\r\n  MAttribute,\r\n  MReference,\r\n  MClass,\r\n  M2Class,\r\n  EdgeStyle,\r\n  M2Reference,\r\n  M2Attribute,\r\n  M3Package,\r\n  M3Reference,\r\n  M3Attribute,\r\n  M3Feature,\r\n  EdgeModes,\r\n  EdgePointStyle, EOperation, EParameter, Typedd, Type, Dictionary, EEnum,\r\n  IClassifier, ECoreEnum, EcoreLiteral, EType, ShortAttribETypes\r\n} from '../../common/Joiner';\r\n\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\n\r\nexport class ELiteral extends Typedd {\r\n  parent: EEnum;\r\n  literal: string;\r\n  ordinal: number;\r\n\r\n  constructor(parent: EEnum, json: Json) {\r\n    super(parent, null);\r\n    this.parse(json);\r\n  }\r\n  duplicate(nameAppend?: string, newParent?: ModelPiece): ModelPiece {\r\n    return undefined; //todo\r\n  }\r\n\r\n  generateModel(): Json {\r\n    const model: Json = {};\r\n    model[EcoreLiteral.value] = this.ordinal;\r\n    model[EcoreLiteral.literal] = this.literal;\r\n    model[EcoreLiteral.namee] = this.name;\r\n    return model; }\r\n\r\n  getClass(): EEnum { return this.parent; }\r\n\r\n  setLiteral(value: string, refreshGUI: boolean = false, warnDuplicateFix: boolean = true): string {\r\n    if (value === '' || !value) { this.literal = ''; return; }\r\n    return this.setName0(value, refreshGUI, warnDuplicateFix, 'literal', true); }\r\n\r\n  parse(json: Json, destructive: boolean = true): void {\r\n    this.ordinal = Json.read<number>(json, EcoreLiteral.value, Number.NEGATIVE_INFINITY);\r\n    this.setLiteral(Json.read<string>(json, EcoreLiteral.literal, ''), false);\r\n    let name: string = Json.read<string>(json, EcoreLiteral.namee, this.ordinal === Number.NEGATIVE_INFINITY ? null : this.parent.name + '_' + this.ordinal);\r\n    if (name) this.setName(name, false); else this.name = null;\r\n  }\r\n\r\n\r\n  delete(): void {\r\n    super.delete();\r\n    // todo: che fare con gli attributes che hanno questo literal come valore?\r\n    let i: number = 0;\r\n    for (i = 0; i < Type.all.length; i++) {\r\n      if (Type.all[i].enumType !== this.parent) continue;\r\n      if (Type.all[i].owner instanceof MAttribute) (Type.all[i].owner as MAttribute).valuesAutofix();}\r\n  }\r\n\r\n  fieldChanged(e: ChangeEvent) {\r\n    const html: HTMLElement = e.currentTarget;\r\n    switch (html.tagName.toLowerCase()) {\r\n    default: U.pe(true, 'unexpected tag:', html.tagName, ' of:', html, 'in event:', e); break;\r\n    case 'textarea':\r\n    case 'input':\r\n      const input: HTMLInputElement = html as HTMLInputElement;\r\n      if (input.classList.contains('name')) { this.setName(input.value); } else\r\n      if (input.classList.contains('literal')) { this.setLiteral(input.value); } else\r\n      if (input.classList.contains('value')) { this.ordinal = isNaN(+input.value) ? this.ordinal : +input.value; }\r\n      else U.pe(true, 'ELiteral input fields must contain one of the following classes: name, literal, value');\r\n      break;\r\n    case 'select': U.pe(true, 'Unexpected non-disabled select field in a Vertex.ELiteral.'); break;\r\n    }\r\n    super.fieldChanged(e, true);\r\n  }\r\n\r\n  generateModelM1(): string { return this.name; }\r\n}\r\n","import {\r\n  AttribETypes,\r\n  IAttribute,\r\n  M2Class,\r\n  IFeature,\r\n  IReference,\r\n  Json,\r\n  MClass,\r\n  ModelPiece,\r\n  ShortAttribETypes, M2Attribute,\r\n  U, M3Attribute, IVertex, IField, MetaModel, Model, Status, Info, Type, EEnum, ELiteral,\r\n} from '../../../../common/Joiner';\r\nimport {del}   from 'selenium-webdriver/http';\r\nimport {EType} from '../../Type';\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\n\r\n\r\nexport class MAttribute extends IAttribute {\r\n  static stylesDatalist: HTMLDataListElement;\r\n  parent: MClass;\r\n  metaParent: M2Attribute;\r\n  // instances: ModelNone[];\r\n  values: any[];\r\n  valuesStr: string;\r\n\r\n  static typeChange(arr: any[], newType: EType): void {\r\n    let i = -1;\r\n    while (++i < arr.length) {\r\n      if (Array.isArray(arr[i])) { MAttribute.typeChange(arr[i], newType); continue; }\r\n      let newVal: any;\r\n      switch (newType.short) {\r\n        default: U.pe(true, 'unexpected type: ' + newType.short); break;\r\n        case ShortAttribETypes.EDate: newVal = null; break;\r\n        case ShortAttribETypes.EFloat: case ShortAttribETypes.EDouble:\r\n          newVal = parseFloat('' + arr[i]);\r\n          if (newVal === null || newVal === undefined) { newVal = newType.defaultValue; }\r\n          break;\r\n        case ShortAttribETypes.EBoolean: newVal = !!arr[i]; break;\r\n        case ShortAttribETypes.EChar:\r\n          newVal = (arr[i] + '')[0];\r\n          if (newVal === undefined || newVal === null) { newVal = newType.defaultValue; }\r\n          break;\r\n        case ShortAttribETypes.EString: newVal = (arr[i] === null || arr[i] === undefined ? null : '' + arr[i]); break;\r\n        case ShortAttribETypes.EInt: case ShortAttribETypes.EByte: case ShortAttribETypes.EShort: case ShortAttribETypes.ELong:\r\n          let tentativo: number = parseInt('' + arr[i], 10);\r\n          tentativo = !isNaN(+tentativo) ? (+tentativo) : newType.defaultValue;\r\n          tentativo = Math.min(newType.maxValue, Math.max(newType.minValue, tentativo));\r\n          newVal = tentativo;\r\n          break;\r\n      }\r\n      U.pe(newVal === null || newVal === undefined, 'failed to fix value:', arr, newType);\r\n      arr[i] = newVal;\r\n    }\r\n  }\r\n\r\n  constructor(parent: MClass, json: Json, meta: M2Attribute) {\r\n    super(parent, meta);\r\n    this.parse(json, true); }\r\n\r\n    test(){\r\n      // var topp={x:'$##@WallTopX.values.0$',y:0};var bot={x:'$##@WallBotX.values.0$',y:'$##@WallHeight.values.0$'};if(bot.y<=topp.y){return}e.B9=90+DEGREE(Math.atan((topp.x-bot.x)/(topp.y-bot.y)));\r\n\r\n    }\r\n\r\n  getModelRoot(): Model { return super.getModelRoot() as Model; }\r\n\r\n  parse(json: Json, destructive: boolean): void {\r\n    // if (!json) { json = }\r\n    this.setValue(json as any[]);\r\n    if (!this.validate()) {\r\n      this.setValue(null);\r\n      U.pw(true, 'marked attribute (' + this.metaParent.name + ') with type ', this.getType(), 'values:', this.values, 'this:', this);\r\n      this.mark(true, 'errorValue');\r\n    } else { this.mark(false, 'errorValue'); }\r\n    this.refreshGUI();\r\n/*\r\n    this.views = [];\r\n    let i: number;\r\n    for(i = 0; i < this.parent.views.length; i++) {\r\n      const pv: ClassView = this.parent.views[i];\r\n      const v = new AttributeView(pv);\r\n      this.views.push(v);\r\n      pv.attributeViews.push(v); }*/\r\n  }\r\n\r\n  endingName(valueMaxLength: number = 10): string {\r\n    if (this.values && this.values.length > 0) { return (this.values[0] + '').substr(0, valueMaxLength); }\r\n    return ''; }\r\n\r\n  getType(): Type { return (this.metaParent ? this.metaParent.getType() : null); }\r\n\r\n  getInfo(toLower: boolean = false): any {\r\n    const info: any = super.getInfo();\r\n    Info.set(info, 'values', this.values);\r\n    return info; }\r\n/*\r\n  conformability(meta: IAttribute, debug: boolean = true): number {\r\n    let conformability = 0;\r\n    // todo: questo check è totalmente sbagliato, this.getType non può riuscire senza un metaParent assegnato\r\n    conformability += 0.5 * StringSimilarity.compareTwoStrings(this.getType().short, meta.getType().primitiveType.short);\r\n    conformability += 0.5 * StringSimilarity.compareTwoStrings(this.name, meta.name);\r\n    U.pif(debug, 'ATTRIBUTE.comform(', this.name, {0: this}, ', ', meta.name, {0: meta}, ') = ', conformability);\r\n    return conformability; }*/\r\n\r\n  duplicate(nameAppend: string = null, newParent: MClass = null): MAttribute {\r\n    const ret: MAttribute = new MAttribute(newParent, null, this.metaParent);\r\n    ret.copy(this, nameAppend, newParent);\r\n    return ret; }\r\n\r\n  copy(other: MAttribute, nameAppend: string = '_Copy', newParent: MClass = null): void {\r\n    super.copy(other, nameAppend, newParent);\r\n    this.setValueStr(other.getValueStr()); }\r\n\r\n  generateModel(): Json {\r\n    if (this.values.length === 0) { return null; }\r\n    let values: Json[] = this.values;\r\n    if (this.values[0] instanceof ELiteral) {\r\n      values = [];\r\n      let i: number;\r\n      for (i = 0; i < this.values.length; i++) {\r\n        const v = this.values[i];\r\n        if (v instanceof ELiteral) { values.push(v.generateModelM1()); }\r\n      }\r\n    }\r\n    if (values.length === 1) { return values[0]; }\r\n    return values; }\r\n\r\n  validate(): boolean {\r\n    let i: number;\r\n    const primitive: EType = this.getType().primitiveType;\r\n    const enumtype: EEnum = this.getType().enumType;\r\n    if (enumtype) {\r\n      const admittedValues: string[] = enumtype.getAllowedValuesStr();\r\n      for (i = 0; i < this.values.length; i++) {\r\n        if (!U.arrayContains(admittedValues, this.values[i])) { return false; }\r\n      }\r\n      return true; }\r\n    U.pe(!primitive, 'found type in Mattribute that is neither primitive nor enumerative', this);\r\n    // console.log('U.isIntegerArray(values:', this.values, ', minvalue:', primitive.minValue, ' maxval:', primitive.maxValue);\r\n    switch (primitive.long) {\r\n    default: U.pe(true, 'unexpected mattrib type:', this.getType()); return false;\r\n      // case AttribETypes.void: ...\r\n      case AttribETypes.EDate: U.pe(true, 'eDAte: todo'); break;\r\n      case AttribETypes.EBoolean: return true;\r\n      case AttribETypes.EChar: return U.isString(this.values) || U.isCharArray(this.values);\r\n      case AttribETypes.EString: return U.isStringArray(this.values);\r\n      case AttribETypes.EFloat:\r\n      case AttribETypes.EDouble:\r\n        for (i = 0; i < this.values.length; i++) { this.values[i] = +this.values[i]; }\r\n        return U.isNumberArray(this.values, primitive.minValue, primitive.maxValue);\r\n      case AttribETypes.EByte:\r\n      case AttribETypes.EShort:\r\n      case AttribETypes.EInt:\r\n      case AttribETypes.ELong:\r\n        for (i = 0; i < this.values.length; i++) { this.values[i] = +this.values[i]; }\r\n        return U.isIntegerArray(this.values, primitive.minValue, primitive.maxValue);\r\n    }\r\n  }\r\n\r\n  fieldChanged(e: ChangeEvent) {\r\n    const html: HTMLElement = e.currentTarget;\r\n    switch (html.tagName.toLowerCase()) {\r\n      default: U.pe(true, 'unexpected tag:', html.tagName, ' of:', html, 'in event:', e); break;\r\n      case 'textarea':\r\n      case 'input':\r\n        this.setValueStr((html as HTMLInputElement).value);\r\n        (html as HTMLInputElement).value = this.getValueStr();\r\n        break;\r\n      case 'select': U.pe(true, 'Unexpected non-disabled select field in a Vertex.MAttribute.'); break;\r\n    }\r\n    super.fieldChanged(e, true);\r\n  }\r\n\r\n  setValueStr(valStr: string) {\r\n    if (this.metaParent.upperbound === 1) {\r\n      // this.setValue(JSON.parse( '\"' + U.replaceAll(valStr, '\"', '\\\\\"') + '\"'));\r\n      this.setValue([ valStr ]);\r\n      return; }\r\n    try { this.setValue(JSON.parse(valStr)); } catch (e) {\r\n      U.pw(true, 'This attribute have upperbound > 1 and the input is not a valid JSON string: ' + valStr);\r\n      return; } finally {}\r\n  }\r\n  setValue(values: any[] = null, debug: boolean = false, autofix: boolean = true): void {\r\n    const values0 = values;\r\n    if (U.isEmptyObject(values, true, true)\r\n     || (Array.isArray(values) && (values.length === 0 || (values.length === 1 && U.isEmptyObject(values[0]))))) {\r\n      values = this.getType().defaultValue(); } // redundancy, i'm double fixing it. should check if autofix fixes nulls.\r\n    if (!Array.isArray(values)) { values = [values]; }\r\n    // U.pe(values0 === null && values.length === 1 && values[0] === [0], 'wtf?', values0, values, this);\r\n    if (debug) console.trace();\r\n    U.pif(debug, this.metaParent.fullname() +  '.setvalue: |', values0, '| --> ', values, 'defaultv:', this.getType().defaultValue(), 'type:', this.getType());\r\n    this.values = values;\r\n    U.pe('' + values === '' + undefined || '' + values === '' + null, 'undef:', values, this);\r\n    U.pif(debug, 'end value:', values);\r\n    if (autofix) { this.valuesAutofix(debug); }\r\n    U.pif(debug, 'end value post autofix:', this.values);\r\n  }\r\n\r\n  valuesAutofix(debug: boolean = false): void {\r\n    const type: Type = this.getType();\r\n    const conversionType = type.enumType || type.primitiveType;\r\n    let i: number;\r\n    if (type.enumType) {\r\n      // conversionType = null; // EType.get(ShortAttribETypes.EString);\r\n      const defaultValue: string = type.enumType.getDefaultValueStr();\r\n      if (!defaultValue) { this.values = []; return; }\r\n      const admittedValues: string[] = type.enumType.getAllowedValuesStr();\r\n      let j: number;\r\n      for (j = 0; j < this.values.length; j++) {\r\n        this.values[j]+= '';\r\n        if (U.arrayContains(admittedValues,  this.values[j])) { continue; }\r\n        this.values[j] = admittedValues[0];\r\n      }\r\n    }\r\n    if (type.primitiveType) { MAttribute.typeChange(this.values, type.primitiveType); }\r\n  }\r\n  getValueStr(debug: boolean = false): string {\r\n    let ret: any[] | any;\r\n    ret =  this.values;\r\n    U.pif(debug, 'getvaluestr: stage1', ret);\r\n    if (ret === undefined) ret = null;\r\n    let retStr = null;\r\n    if (ret !== null) {\r\n      if (!(Array.isArray(ret))) { ret = [ret]; }\r\n      U.pif(debug, 'stage 1.1:', ret, retStr);\r\n      if (this.metaParent.upperbound === 1) { ret = ret.length ? ret[0] : null; }\r\n      U.pif(debug, 'stage 1.2:', ret, retStr);\r\n      retStr = Array.isArray(ret) ? JSON.stringify(ret) : (ret === null || ret === undefined ? null : '' + ret); }\r\n    U.pif(debug, 'stage2', ret, retStr);\r\n    if (retStr === null) {\r\n      this.setValue(null);\r\n      U.pe(!this.values.length || this.values[0] === null, 'failed to set default val.', this.getType().defaultValue(), this.values );\r\n      retStr = (this.values.length ? '' + this.values[0] : null); }\r\n\r\n    U.pif(debug, 'this.values:', this.values, ', val[0]:', this.values[0], 'retStr:', retStr);\r\n    this.valuesStr = retStr;\r\n    return retStr; }\r\n\r\n  replaceVarsSetup(debug: boolean = false): void {\r\n    super.replaceVarsSetup();\r\n    const old = this.valuesStr;\r\n    U.pif(debug, this.values);\r\n    const val: string = this.getValueStr();\r\n    U.pif(debug, 'val:', val, ', this.values:', this.values, ', this:', this);\r\n    this.valuesStr = val ? U.replaceAll(val, '\\n', '', debug) : '';\r\n    if (this.valuesStr && this.valuesStr[0] === '[') {this.valuesStr = this.valuesStr.substr(1, this.valuesStr.length - 2); }\r\n    U.pif(debug, 'valuesSTR: |' + old + '| --> |' + this.valuesStr + '|'); }\r\n\r\n}\r\n\r\n","import {\r\n  IClass,\r\n  IFeature,\r\n  Json,\r\n  M2Attribute, M3Class, M3Feature, M3Reference, PropertyBarr,\r\n  ShortAttribETypes,\r\n  Status, Type,\r\n  U\r\n} from '../../../../common/Joiner';\r\n\r\nexport abstract class IAttribute extends IFeature {\r\n  metaParent: IAttribute;\r\n  instances: IAttribute[];\r\n\r\n  constructor(parent: IClass, metaParent: IAttribute) {\r\n    super(parent, metaParent);\r\n    if (parent) U.ArrayAdd(parent.attributes, this);\r\n  }\r\n\r\n  /*static GetDefaultStyle(modelRoot: IModel, type: EType = null): HTMLElement | SVGElement {\r\n    return ModelPiece.GetDefaultStyle(modelRoot, 'Attribute', type); }\r\n\r\n  static SetDefaultStyle(type: ShortAttribETypes, modelRoot: IModel, newTemplate: HTMLElement): void {\r\n    const selector = '.' + (modelRoot.isM() ? 'M' : 'MM') + 'DefaultStyles>.Attribute.Template.' + type;\r\n    let $oldTemplate: JQuery<HTMLElement> = $(selector + '.Customized');\r\n    if ($oldTemplate.length === 0) { $oldTemplate = $(selector); }\r\n    U.pe($oldTemplate.length !== 1, 'template not found? (' + $oldTemplate.length + '); selector: \"' + selector + '\"');\r\n    const old = $oldTemplate[0];\r\n    newTemplate.classList.add('template');\r\n    newTemplate.classList.add('Customized');\r\n    old.parentNode.appendChild(newTemplate);\r\n    if (old.classList.contains('Customized')) { old.parentNode.removeChild(old); }\r\n    return; }\r\n\r\n  setDefaultStyle(value: string): void {\r\n    U.pw(true, 'Attribute.setDefaultStyle(): todo.');\r\n  }\r\n*/\r\n\r\n/*\r\n  getStyle(): HTMLElement | SVGElement {\r\n    const htmlRaw: HTMLElement | SVGElement = super.getStyle();\r\n    const $html = $(htmlRaw);\r\n    const $selector = $html.find('select.TypeSelector') as JQuery<HTMLSelectElement>;\r\n    let i: number;\r\n    for (i = 0; i < $selector.length; i++) { PropertyBarr.makePrimitiveTypeSelector($selector[0], this.getType()); }\r\n    // EType.updateTypeSelector($selector[0] as HTMLSelectElement, this.getType());\r\n    return htmlRaw; }*/\r\n\r\n  copy(other: IAttribute, nameAppend: string = '_Copy', newParent: IClass = null): void {\r\n    super.copy(other, nameAppend, newParent);\r\n    if (newParent) { U.ArrayAdd(newParent.attributes, this); }\r\n    this.refreshGUI(); }\r\n\r\n}\r\n\r\nexport class M3Attribute extends IAttribute {\r\n  parent: M3Class;\r\n  metaParent: M3Attribute;\r\n  instances: M2Attribute[]; // | M3Attribute[]\r\n\r\n  constructor(parent: M3Class, meta: IAttribute) {\r\n    super(parent, meta);\r\n    this.parse(null, true); }\r\n\r\n  duplicate(nameAppend: string = '_', newParent: M3Class = null): M3Attribute { U.pe(true, 'Invalid operation: m3Attr.duplicate()'); return this; }\r\n\r\n  generateModel(): Json {\r\n    U.pe(true, 'm3Attr.generateModel()');\r\n    return {}; }\r\n\r\n  // getType(): Type { U.pe(true, 'm3Attr.getType()'); return null; }\r\n\r\n  parse(json: Json, destructive: boolean = true): void {\r\n    this.name = 'Attribute'; }\r\n\r\n\r\n  conformability(metaparent: M3Attribute, outObj?: any, debug?: boolean): number {  return 1; }\r\n\r\n}\r\n","import {\r\n  IAttribute,\r\n  M3Attribute,\r\n  M2Class,\r\n  MAttribute,\r\n  ECoreAttribute,\r\n  Json,\r\n  ShortAttribETypes,\r\n  U,\r\n  MetaModel,\r\n  AttribETypes, Status,\r\n} from '../../../../common/Joiner';\r\n\r\nexport class M2Attribute extends IAttribute {\r\n  static stylesDatalist: HTMLDataListElement;\r\n  parent: M2Class;\r\n  metaParent: M3Attribute;\r\n  instances: MAttribute[];\r\n\r\n  constructor(classe: M2Class, json: Json) {\r\n    super(classe, Status.status.mmm.getAttribute());\r\n    if (!classe && !json) { return; } // empty constructor for .duplicate();\r\n    this.parse(json, true); }\r\n\r\n  getModelRoot(): MetaModel { return super.getModelRoot() as MetaModel; }\r\n\r\n  parse(json: Json, destructive: boolean) {\r\n    this.setName(Json.read<string>(json, ECoreAttribute.namee, 'Attribute_1'));\r\n    this.type.changeType(Json.read<string>(json, ECoreAttribute.eType, AttribETypes.EString));\r\n    /*\r\n    this.views = [];\r\n    let i: number;\r\n    for(i = 0; i < this.parent.views.length; i++) {\r\n      const pv: ClassView = this.parent.views[i];\r\n      const v = new AttributeView(pv);\r\n      this.views.push(v);\r\n      pv.attributeViews.push(v); }*/\r\n  }\r\n\r\n  generateModel(): Json {\r\n    const model = new Json(null);\r\n    Json.write(model, ECoreAttribute.xsitype, 'ecore:EAttribute');\r\n    Json.write(model, ECoreAttribute.eType, this.type.toEcoreString());\r\n    Json.write(model, ECoreAttribute.namee, this.name);\r\n    return model; }\r\n\r\n  duplicate(nameAppend: string = '_Copy', newParent: M2Class = null): M2Attribute {\r\n    const a: M2Attribute = new M2Attribute(null, null);\r\n    a.copy(this, nameAppend, newParent);\r\n    return a; }\r\n\r\n\r\n  replaceVarsSetup(): void { super.replaceVarsSetup(); }\r\n\r\n  conformability(metaparent: M3Attribute, outObj?: any, debug?: boolean): number { return 1; }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n","import {\r\n  AttribETypes,\r\n  GraphPoint,\r\n  GraphSize,\r\n  IAttribute,\r\n  M2Class,\r\n  IEdge,\r\n  IFeature,\r\n  IField,\r\n  IModel,\r\n  IVertex,\r\n  Json,\r\n  Model,\r\n  ModelPiece,\r\n  PropertyBarr,\r\n  Size,\r\n  Status,\r\n  U,\r\n  ECoreAttribute,\r\n  ECoreReference,\r\n  ShortAttribETypes,\r\n  MClass,\r\n  MReference,\r\n  IReference,\r\n  M3Reference,\r\n  EdgeStyle,\r\n  EdgeModes,\r\n  EdgePointStyle, MetaModel, Info, IClass, Type, EEnum,\r\n} from '../../../../common/Joiner';\r\n\r\nexport class M2Reference extends IReference {\r\n  static stylesDatalist: HTMLDataListElement;\r\n  parent: M2Class;\r\n  metaParent: M3Reference;\r\n  instances: MReference[];\r\n\r\n  upperbound: number;\r\n  lowerbound: number;\r\n  containment: boolean = false && false;\r\n\r\n  constructor(classe: M2Class, json: Json) {\r\n    super(classe, Status.status.mmm.getReference());\r\n    if (!classe && !json) { return; } // empty constructor for .duplicate();\r\n    this.parse(json, true); }\r\n\r\n  getModelRoot(): MetaModel { return super.getModelRoot() as MetaModel; }\r\n\r\n  parse(json: Json, destructive: boolean): void {\r\n    /// own attributes.\r\n    this.setName(Json.read<string>(json, ECoreReference.namee, 'Ref_1'));\r\n    this.type.changeType(Json.read<string>(json, ECoreReference.eType, this.parent.getEcoreTypeName() ));\r\n    //const eType = Json.read<string>(json, ECoreReference.eType, '#//' + this.parent.name );\r\n    // this.type = AttribETypes.reference;\r\n    // this.parsePrintableTypeName(eType);\r\n    // this.linkClass();\r\n    this.containment = Json.read<boolean>(json, ECoreReference.containment, false);\r\n    this.setLowerbound(+Json.read<number>(json, ECoreReference.lowerbound, 0));\r\n    this.setUpperbound(+Json.read<number>(json, ECoreReference.upperbound, 1));\r\n    let i: number;/*\r\n    this.views = [];\r\n    for(i = 0; i < this.parent.views.length; i++) {\r\n      const pv: ClassView = this.parent.views[i];\r\n      const v = new ReferenceView(pv);\r\n      this.views.push(v);\r\n      pv.referenceViews.push(v); }*/\r\n  }\r\n\r\n  generateModel(): Json {\r\n    const model = new Json(null);\r\n    model[ECoreReference.xsitype] = 'ecore:EReference';\r\n    model[ECoreReference.eType] = this.type.toEcoreString();\r\n    model[ECoreReference.namee] = this.name;\r\n    if (this.lowerbound != null && !isNaN(+this.lowerbound)) { model[ECoreReference.lowerbound] = +this.lowerbound; }\r\n    if (this.upperbound != null && !isNaN(+this.lowerbound)) { model[ECoreReference.upperbound] = +this.upperbound; }\r\n    if (this.containment != null) { model[ECoreReference.containment] = this.containment; }\r\n    return model; }\r\n\r\n  generateEdges(): IEdge[] {\r\n    if (!this.edges) this.edges = [null]; // size must be 1\r\n    const e: IEdge = new IEdge(this, 0, this.parent.getVertex(), this.type.classType.getVertex());\r\n    return [e]; }\r\n\r\n  useless(): void {}\r\n/*\r\n  fieldChanged(e: JQuery.ChangeEvent) {\r\n    const html: HTMLElement = e.currentTarget;\r\n    switch (html.tagName.toLowerCase()) {\r\n      default: U.pe(true, 'unexpected tag:', html.tagName, ' of:', html, 'in event:', e); break;\r\n      case 'textarea':\r\n      case 'input': this.setName((html as HTMLInputElement).value); break;\r\n      case 'select':\r\n        const select: HTMLSelectElement = html as HTMLSelectElement;\r\n        const m: M2Class = ModelPiece.getByID(+select.value) as any;\r\n        this.linkClass(m); break;\r\n    }\r\n  }*/\r\n\r\n  setContainment(b: boolean): void { this.containment = b; }\r\n\r\n  setUpperbound(n: number): void {\r\n    super.setUpperbound(n);\r\n    let i = -1;\r\n    while (++i < this.instances.length) {\r\n      const mref: MReference = this.instances[i];\r\n      if (n !== -1) { mref.mtarget.length = mref.edges.length = n; }\r\n      mref.delete(n, Number.POSITIVE_INFINITY); } }\r\n\r\n  delete(linkStart: number = null, linkEnd: number = null): void {\r\n    super.delete(linkStart, linkEnd);\r\n    // total deletion\r\n    if (linkStart === null && linkEnd === null) {\r\n      if (this.type.classType) U.arrayRemoveAll(this.type.classType.referencesIN, this);\r\n      return; } }\r\n/*\r\n  getStyle(debug: boolean = true): HTMLElement | SVGElement {\r\n    const raw: HTMLElement | SVGElement = super.getStyle(debug);\r\n    const $raw = $(raw);\r\n    const $selector = $raw.find('select.ClassSelector');\r\n    M2Class.updateMMClassSelector($selector[0] as HTMLSelectElement, this.classType);\r\n    return raw; }*/\r\n\r\n  duplicate(nameAppend: string = '_Copy', newParent: M2Class = null): M2Reference {\r\n    const r: M2Reference = new M2Reference(null, null);\r\n    return r.copy(this, nameAppend, newParent); }\r\n\r\n  copy(r: M2Reference, nameAppend: string = '_Copy', newParent: M2Class = null): M2Reference {\r\n    super.copy(r, nameAppend, newParent);\r\n    this.setLowerbound(r.lowerbound);\r\n    this.setUpperbound(r.upperbound);\r\n    this.containment = r.containment;\r\n    this.type.changeType(r.type.toEcoreString());\r\n    this.refreshGUI();\r\n    return this; }\r\n\r\n\r\n  // linkClass(classe: M2Class = null): void { return this.type.changeType(null, null, classe); }\r\n\r\n  // conformability(meta: M3Reference, debug: boolean = true): number { U.pw(true, 'it\\'s ok but should not be called'); return 1; }\r\n\r\n  getInfo(toLower: boolean = true): any {\r\n    const info: any = super.getInfo();\r\n    // set('typeOriginal', this.type);\r\n    // info['' + 'tsClass'] = (this.getModelRoot().getPrefix()) + 'Reference';\r\n    Info.rename(info, 'type', 'target');\r\n    Info.rename(info, 'typeDetail', 'targetDetail');\r\n    Info.set(info, 'containment', this.containment);\r\n    const targetinfo: Info = this.type.classType ? this.type.classType.getInfo(toLower) : {};\r\n    Info.set(info, 'target', targetinfo);\r\n    Info.merge(info, targetinfo);\r\n    return info; }\r\n\r\n\r\n   canBeLinkedTo(hoveringTarget: M2Class): boolean {\r\n    return (hoveringTarget instanceof M2Class);\r\n  //  return (this.type.classType === hoveringTarget || this.type.classType.isExtending(hoveringTarget));\r\n  }// && !(hoveringTarget instanceof EEnum); }\r\n\r\n}\r\n","import {\r\n  AttribETypes,\r\n  GraphPoint,\r\n  GraphSize,\r\n  IAttribute,\r\n  M2Class,\r\n  IEdge,\r\n  IFeature,\r\n  IField,\r\n  IModel,\r\n  IVertex,\r\n  Json,\r\n  Model,\r\n  ModelPiece,\r\n  PropertyBarr,\r\n  Size,\r\n  Status,\r\n  MClass,\r\n  MAttribute,\r\n  U,\r\n  ECoreAttribute,\r\n  ECoreReference,\r\n  ShortAttribETypes,\r\n  IReference,\r\n  Dictionary,\r\n  MPackage,\r\n  M3Reference,\r\n  M2Reference,\r\n  IClass,\r\n  Info, Type, EEnum,\r\n} from '../../../../common/Joiner';\r\n\r\nexport class MReference extends IReference {\r\n  static stylesDatalist: HTMLDataListElement;\r\n  private static loopDetection: Dictionary<number /*MClass id*/, MClass> = {};\r\n\r\n  parent: MClass;\r\n  metaParent: M2Reference;\r\n  // instances: ModelNone[];\r\n  mtarget: MClass[];\r\n  /*childrens: ModelPiece[];\r\n  instances: ModelPiece[];\r\n  metaParent: IReference;\r\n  // parent: MClass;\r\n  */\r\n  // mtarget: MClass[];\r\n  // targetStr: string;\r\n  // constructor() {}\r\n\r\n  constructor(classe: MClass, json: Json, metaParent: M2Reference) {\r\n    super(classe, metaParent);\r\n    if (!classe && !json && !metaParent) { return; } // empty constructor for .duplicate();\r\n    this.parse(json, true); }\r\n/*\r\n  getStyle(): HTMLElement | SVGElement {\r\n    const htmlRaw: HTMLElement | SVGElement = super.getStyle();\r\n    const $html = $(htmlRaw);\r\n    const $selector = $html.find('select.ClassSelector');\r\n    M2Class.updateMMClassSelector($selector[0] as HTMLSelectElement, this.getm2Target());\r\n    return htmlRaw; }*/\r\n\r\n  getm2Target(): M2Class { return this.metaParent.type.classType; }\r\n\r\n  getfirstEmptyTarget(): number {\r\n    let i:number;\r\n    for (i = 0; i < this.mtarget.length; i++){ if (!this.mtarget[i]) return i; }\r\n    return this.metaParent.upperbound === -1 ? this.mtarget.length : -1; }\r\n\r\n  getfirstFilledTarget(): number {\r\n    let i: number;\r\n    for (i = 0; i < this.mtarget.length; i++){ if (this.mtarget[i]) return i; }\r\n    return -1; }\r\n\r\n  endingName(valueMaxLength: number = 10): string {\r\n    const index = this.getfirstEmptyTarget();\r\n    if (index !== -1) {\r\n      const t: MClass = this.mtarget[index];\r\n      if (t instanceof MClass && t.attributes.length > 0) {\r\n        const a: MAttribute = t.attributes[0];\r\n        return a.endingName(valueMaxLength); } }\r\n    return ''; }\r\n/*\r\n  conformability(meta: M2Reference, debug: boolean = true): number {\r\n    let comformability = 0;\r\n    comformability += 0.1 * StringSimilarity.compareTwoStrings(this.getm2Target().name, meta.classType.name);\r\n    // todo: devi calcolare la 90% conformability in base al tipo dedotto della classe del m1-target.\r\n    // comformability += 0.2 * StringSimilarity.compareTwoStrings(this.name, meta.name);\r\n    // comformability += 0.2 * (this.metaParent.containment === meta.containment ? 1 : 0);\r\n    U.pif(debug, 'REFERENCE.comform(', this.name, {0: this}, ', ', meta.name, {0: meta}, ') = ', comformability);\r\n    return comformability; }*/\r\n\r\n\r\n\r\n  duplicate(nameAppend: string = '_Copy', newParent: MClass = null): MReference {\r\n    const r: MReference = new MReference(null, null, null);\r\n    return r.copy(this, nameAppend, newParent); }\r\n\r\n  getInfo(toLower?: boolean): any {\r\n    const info: Json = {};\r\n    Info.set(info, 'target', this.mtarget);\r\n    Info.unset(info, 'upperbound');\r\n    Info.unset(info, 'lowerbound');\r\n    let i: number;\r\n    for (i = 0; i < this.mtarget.length; i++) {\r\n      const t: MClass = this.mtarget[i];\r\n      if (!t) continue;\r\n      // todo problem: le mClassi non hanno un nome\r\n      Info.set(info, '' + i, t); }\r\n    return info; }\r\n\r\n  delete(linkStart: number = null, linkEnd: number = null): void {\r\n    super.delete(linkStart, linkEnd);\r\n    // total deletion\r\n    let i: number;\r\n    // if (linkStart === null && linkEnd === null) { completely delete? or it is already done by super()? }\r\n    // just cut some edges\r\n    linkEnd = Math.min(this.mtarget.length, linkEnd);\r\n    linkStart = Math.max(0, linkStart);\r\n    for (i = linkStart; i < linkEnd; i++) { this.setTarget(i, null); }\r\n  }\r\n\r\n  getType(): Type { return (this.metaParent ? this.metaParent.getType() : null); }\r\n\r\n  canBeLinkedTo(hoveringTarget: MClass): boolean {\r\n    const c1: M2Class = this.getType().classType;\r\n    const c2: M2Class = hoveringTarget.metaParent;\r\n    return c1 === c2 || c1.isExtending(c2); }\r\n\r\n  // link(targetStr?: string, debug?: boolean): void { throw new Error('mreference.linkByStr() should never be called'); }\r\n\r\n\r\n  // LinkToMetaParent(ref: MReference): void { super.LinkToMetaParent(ref); }\r\n  generateModel(): Json { MReference.loopDetection = {}; return this.generateModelLoop(); }\r\n  generateModelLoop(): Json {\r\n    const ret: Json[] = [];\r\n    let i: number;\r\n    for (i = 0; i < this.mtarget.length; i++) {\r\n      if (!this.mtarget[i]) continue;\r\n      const mclass: MClass = this.mtarget[i];\r\n      if (MReference.loopDetection[mclass.id]) {\r\n        // todo: in caso di loop cosa ci devo mettere nel modello?\r\n        ret.push('LoopingReference');\r\n        U.pw(true, 'looping reference in model');\r\n      } else {\r\n        MReference.loopDetection[mclass.id] = mclass;\r\n        ret.push(mclass.generateModel());\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  generateEdges(): IEdge[] {\r\n    // const arr: IEdge[] = [];\r\n    let i: number;\r\n    // while (this.edges && this.edges.length > 0) { this.edges[0].remove(); U.arrayRemoveAll(this.edges, this.edges[0]); }\r\n    for (i = 0; i < this.mtarget.length; i++) {\r\n      if (this.edges[i] || !this.mtarget[i]) continue;\r\n      this.edges[i] = (new IEdge(this, i, this.parent.getVertex(), this.mtarget[i].getVertex())); }\r\n    return this.edges; }\r\n\r\n  parse(json0: Json, destructive: boolean = true): void {\r\n    /*\r\n        \"ReferenceName\": [\r\n          { \"-name\": \"tizio\" },  <-- reference.target[0]\r\n          { \"-name\": \"asd\" }     <-- reference.target[1]\r\n        ]*/\r\n    U.pe(!destructive, 'non-destructive parse of MReference to do.');\r\n    if (!json0) { json0 = []; }\r\n    const json: Json[] = Array.isArray(json0) ? json0 : [json0];\r\n    const targetMM: M2Class = this.getm2Target();\r\n    let i: number;\r\n    if (!this.mtarget) { this.mtarget = U.newArray(this.metaParent.upperbound); } else this.mtarget.length = this.metaParent.upperbound;\r\n    if (destructive) { this.clearTargets(); }\r\n\r\n    const pkg: MPackage = this.getClass().parent as MPackage;\r\n    for (i = 0; i < json.length; i++) {\r\n      // console.log('mref.parse: ', json0, json, 'i:', json[i]);\r\n      if ($.isEmptyObject(json[i])) { continue; }\r\n      const t: MClass = new MClass(pkg, json[i], targetMM);\r\n      this.mtarget[i] = t;\r\n    }\r\n    U.pe(this.metaParent.upperbound !== -1 && this.mtarget.length !== +this.metaParent.upperbound, 'wrong mtarget length', this.mtarget, this.mtarget.length, this.metaParent.upperbound);\r\n  }\r\n\r\n  validate(): boolean { return true; }\r\n\r\n  copy(r: MReference, nameAppend: string = '_Copy', newParent: MClass = null): MReference {\r\n    this.clearTargets();\r\n    super.copy(r, nameAppend, newParent);\r\n    this.mtarget = U.ArrayCopy(r.mtarget, false);\r\n    this.generateEdges();\r\n    this.refreshGUI();\r\n    return r; }\r\n\r\n  linkClass(classe: MClass, index: number, refreshGUI: boolean = true, debug: boolean = false): void { this.setTarget(index, classe); }\r\n\r\n  setTarget(index: number, val: MClass): void {\r\n    let edge: IEdge = this.edges[index];\r\n    if (val === null) {\r\n      if (!this.edges[index]) return;\r\n      U.arrayRemoveAll(this.mtarget[index].referencesIN, this);\r\n      U.arrayRemoveAll(this.mtarget[index].vertex.edgesEnd, edge);\r\n      this.edges[index].remove();\r\n      this.mtarget[index] = null;\r\n      if (this.metaParent.upperbound === -1 && index === this.mtarget.length - 1) {\r\n        delete this.edges[index];\r\n        delete this.mtarget[index];}\r\n      return; }\r\n    if (this.metaParent.unique && this.mtarget.indexOf(val) >= 0) {\r\n      // basta evitare elementi identici o anche istanze diverse con stessi valori? o con altri concetti di \"uguglianza\" ?\r\n      U.pif(true, 'This reference type is labeled as \"unique\" and is already linked to that element.'); return; }\r\n    // if (this.mtarget[index]) { this.setTarget(index, null); }\r\n    this.mtarget[index] = val;\r\n    U.ArrayAdd(this.mtarget[index].referencesIN, this);\r\n    this.generateEdges();\r\n    edge = this.edges[index];\r\n    U.ArrayAdd(this.mtarget[index].vertex.edgesEnd, edge);}\r\n}\r\n","import {\r\n  EdgeModes,\r\n  EdgePointStyle,\r\n  EdgeStyle,\r\n  IClass, IClassifier,\r\n  IEdge,\r\n  IFeature,\r\n  Json,\r\n  M2Class,\r\n  M2Reference,\r\n  M3Class, MAttribute, MetaMetaModel, MetaModel,\r\n  MReference,\r\n  U\r\n} from '../../../../common/Joiner';\r\nimport {EdgeHeadStyle} from '../../../../guiElements/mGraph/Edge/edgeStyle';\r\n\r\nexport abstract class IReference extends IFeature {\r\n  // static all: any[] = [];\r\n  // type: AttribETypes = null;\r\n  metaParent: IReference;\r\n  instances: IReference[];\r\n\r\n  edges: IEdge[] = [];\r\n  edgeStyleCommon: EdgeStyle;\r\n  edgeStyleHighlight: EdgeStyle;\r\n  edgeStyleSelected: EdgeStyle;\r\n  constructor(parent: IClass, meta: IReference) {\r\n    super(parent, meta);\r\n    if (parent) parent.references.push(this);\r\n    this.edgeStyleCommon = new EdgeStyle(EdgeModes.straight, 2, '#7f7f7f',\r\n      new EdgePointStyle(5, 2, '#ffffff', '#000000'),\r\n      new EdgeHeadStyle(20, 20, '#7f7f7f', '#7f7f7f'));\r\n    this.edgeStyleHighlight = new EdgeStyle(EdgeModes.straight, 2, '#ffffff',\r\n      new EdgePointStyle(5, 2, '#ffffff', '#0077ff'),\r\n      new EdgeHeadStyle(20, 20, '#ffffff', '#ffffff'));\r\n    this.edgeStyleSelected = new EdgeStyle(EdgeModes.straight, 4, '#ffffff', // #ffbb22\r\n      new EdgePointStyle(5, 2, '#ffffff', '#ff0000'),\r\n      new EdgeHeadStyle(25, 25, '#ffffff', '#ffffff'));\r\n  }\r\n\r\n  clearTargets(): void {\r\n    let i: number;\r\n    const thiss: MReference = this instanceof MReference ? this : null;\r\n    for (i = 0; thiss && i < thiss.mtarget.length; i++) { thiss.setTarget(i, null); }\r\n    if (thiss) thiss.mtarget = U.newArray(this.metaParent.upperbound);\r\n    this.edges = U.newArray(this.metaParent.upperbound); }\r\n\r\n  abstract generateEdges(): IEdge[];\r\n\r\n  abstract duplicate(nameAppend?: string, newParent?: IClass): IReference;\r\n\r\n  delete(linkStart: number = null, linkEnd: number = null): void {\r\n    if (linkStart === null && linkEnd === null) {\r\n      super.delete();\r\n      linkStart = 0;\r\n      linkEnd = this.edges.length; }\r\n    const edges: IEdge[] = U.ArrayCopy(this.getEdges(), false);\r\n    let i: number;\r\n    linkEnd = Math.min(edges.length, linkEnd);\r\n    linkStart = Math.max(0, linkStart);\r\n    for (i = linkStart; i < linkEnd; i++) { edges[i].remove(); }\r\n  }\r\n\r\n  // abstract linkClass(classe?: IClass): void;\r\n  getEdges(): IEdge[] { return this.edges; }\r\n\r\n  refreshGUI_Alone(debug: boolean = true): void {\r\n    super.refreshGUI_Alone(debug);\r\n    let i = -1;\r\n    const edges: IEdge[] = this.getEdges();\r\n    while (++i < edges.length) { if (edges[i]) { edges[i].refreshGui(); } }\r\n  }\r\n\r\n  copy(r: IReference, nameAppend: string = '_Copy', newParent: IClass = null): IReference {\r\n    while (this.edges.length) { if (this.edges[0]) this.edges[0].remove(); }\r\n    super.copy(r, nameAppend, newParent);\r\n    this.clearTargets();\r\n    super.copy(r, nameAppend, newParent);\r\n    this.generateEdges();\r\n    this.edgeStyleCommon = r.edgeStyleCommon.clone();\r\n    this.edgeStyleHighlight = r.edgeStyleHighlight.clone();\r\n    this.edgeStyleSelected = r.edgeStyleSelected.clone();\r\n    // this.typeClassFullnameStr = r.typeClassFullnameStr;\r\n    if (newParent) { U.ArrayAdd(newParent.references, this); }\r\n    this.refreshGUI();\r\n    return this; }\r\n\r\n  // abstract link(targetStr?: string, debug?: boolean): void;\r\n  // abstract conformability(meta: IReference, debug?: boolean): number;\r\n  abstract canBeLinkedTo(hoveringTarget: IClass): boolean;\r\n\r\n\r\n/*\r\n  getStartPoint(nextPt: GraphPoint = null, fixOnSides: boolean = true): GraphPoint {\r\n    let html: HTMLElement | SVGElement = this.getField().getHtml();\r\n    // todo: introduzione field con campo html.\r\n    if ( this.html && this.html.style.display !== 'none') {\r\n      html = this.getStartPointHtml();\r\n    } else { html = this.parent.getStartPointHtml(); }\r\n    const vertexSize: GraphSize = this.graph().toGraphCoordS(U.sizeof(this.parent.html.firstChild as HTMLElement | SVGElement ));\r\n    let htmlSize: Size = U.sizeof(html);\r\n    let size: GraphSize = this.getModelRoot().graph.toGraphCoordS(htmlSize);\r\n    if ( size.w === 0 || size.h === 0) {\r\n      html = this.parent.getEndPointHtml();\r\n      htmlSize = U.sizeof(html);\r\n      size = this.getModelRoot().graph.toGraphCoordS(htmlSize); }\r\n\r\n    let ep: GraphPoint = new GraphPoint(size.x + size.w / 2, size.y + size.h / 2);\r\n    // console.log('sizeH:', htmlSize, 'sizeg:', size, ' center: ', ep);\r\n    // this.getModelRoot().graph.markS(htmlSize, false, 'green');\r\n    // this.getModelRoot().graph.markS(htmlSize, false, 'green');\r\n    // ora è corretto, ma va fissato sul bordo vertex più vicino\r\n    let fixOnHorizontalSides = false;\r\n    const oldEpDebug = new GraphPoint(ep.x, ep.y);\r\n    let vicinanzaL;\r\n    let vicinanzaR;\r\n    let vicinanzaT;\r\n    let vicinanzaB;\r\n    if (!nextPt) {\r\n      vicinanzaL = Math.abs(ep.x - (vertexSize.x));\r\n      vicinanzaR = Math.abs(ep.x - (vertexSize.x + vertexSize.w));\r\n      vicinanzaT = Math.abs(ep.y - (vertexSize.y)) + (fixOnHorizontalSides ? Number.POSITIVE_INFINITY : 0);\r\n      vicinanzaB = Math.abs(ep.y - (vertexSize.y + vertexSize.h)) + (fixOnHorizontalSides ? Number.POSITIVE_INFINITY : 0);\r\n      const nearest = Math.min(vicinanzaL, vicinanzaT, vicinanzaR, vicinanzaB);\r\n      // console.log('vicinanze (LRTB)', vicinanzaL, vicinanzaR, vicinanzaT, vicinanzaB, 'vSize: ', vertexSize);\r\n      if ( nearest === vicinanzaT || (false && nextPt.x >= vertexSize.x && nextPt.x <= vertexSize.x + vertexSize.w && nextPt.y < ep.y)) {\r\n        ep.y = vertexSize.y; } else\r\n      if ( nearest === vicinanzaB || (false && nextPt.x >= vertexSize.x && nextPt.x <= vertexSize.x + vertexSize.w && nextPt.y > ep.y)) {\r\n        ep.y = vertexSize.y + vertexSize.h; } else\r\n      if ( nearest === vicinanzaR || (false && nextPt.x >= ep.x)) { ep.x = vertexSize.x + vertexSize.w; } else\r\n      if ( nearest === vicinanzaL) { ep.x = vertexSize.x; }\r\n      console.log('html:', html);\r\n    } else {\r\n      const grid = this.getModelRoot().graph.grid;\r\n      ep = GraphSize.closestIntersection(vertexSize, nextPt, ep, grid); }\r\n    // console.log('StartPoint fissato sul bordo:', oldEpDebug, '-->', ep);\r\n    // return this.parent.vertex.owner.fitToGrid(ep);\r\n    // if (fixOnSides && nextPt) { if (nextPt.x > ep.x) { ep.x += size.w / 2; } else { ep.x -= size.w / 2; }  }\r\n    return ep; // meglio se svincolato dalla grid: il vertica può essere di width ~ height non conforme alla grid e il punto risultare fuori\r\n  }\r\n*/\r\n  setDefaultStyle(value: string): void {\r\n    U.pw(true, 'IReference.setDefaultStyle(): todo.');\r\n  }\r\n\r\n  isContainment(): boolean {\r\n    if (this instanceof M2Reference) { return this.containment; }\r\n    if (this instanceof MReference) { return this.metaParent.containment; }\r\n    U.pe(true, 'unrecognized class.'); }\r\n  /*getM2Target(): M2Class {\r\n    if (this instanceof M2Reference) { return this.classType; }\r\n    if (this instanceof MReference) { return this.metaParent.classType; }\r\n    U.pe(true, 'unrecognized class.'); }*/\r\n  getUpperbound(): number {\r\n    if (this instanceof M2Reference) { return this.upperbound; }\r\n    if (this instanceof MReference) { return this.metaParent.upperbound; }\r\n    U.pe(true, 'unrecognized class.'); }\r\n  getLowerbound(): number {\r\n    if (this instanceof M2Reference) { return this.lowerbound; }\r\n    if (this instanceof MReference) { return this.metaParent.lowerbound; }\r\n    U.pe(true, 'unrecognized class.'); }\r\n\r\n\r\n}\r\n\r\nexport class M3Reference extends IReference {\r\n  parent: M3Class;\r\n  metaParent: M3Reference;\r\n  instances: M2Reference[];\r\n\r\n  constructor(parent: M3Class, meta: M3Reference = null) {\r\n    super(parent, meta);\r\n    this.parse(null); }\r\n\r\n  canBeLinkedTo(hoveringTarget: M3Class): boolean { U.pe(true, 'Invalid operation: m3Reference.canBeLinkedTo()'); return true; }\r\n\r\n  //conformability(meta: IReference, debug?: boolean): number { U.pe(true, 'Invalid operation: m3Reference.comformability()'); return 0; }\r\n\r\n  duplicate(nameAppend?: string, newParent?: IClass): M3Reference {  U.pe(true, 'Invalid operation: m3Reference.duplicate()'); return this; }\r\n\r\n  generateEdges(): IEdge[] { U.pe(true, 'Invalid operation: m3Reference.generateEdges()'); return []; }\r\n\r\n  generateModel(): Json { U.pe(true, 'Invalid operation: m3Reference.generateModel()'); return {}; }\r\n\r\n  parse(json: Json, destructive?: boolean): void { this.name = 'Reference'; }\r\n\r\n  linkClass(classe: IClass = null): void { U.pe(true, 'Invalid operation: M3Reference.linkClass();'); }\r\n  // metaParent: M3Reference;\r\n  // instances: M3Reference[] | M2Reference[];\r\n}\r\n","import {\r\n  Json,\r\n  U,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  M2Class,\r\n  IAttribute,\r\n  AttribETypes,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph, Typedd,\r\n  IModel, IClass, M3Class,\r\n  Status, MClass, IVertex, M3Reference, M3Attribute, M2Reference, MReference, MAttribute, M2Attribute\r\n} from '../../../common/Joiner';\r\n\r\nexport abstract class IFeature extends Typedd {\r\n  metaParent: IFeature;\r\n  instances: IFeature[];\r\n  parent: IClass;\r\n\r\n  // linkToMetaParent<T extends IFeature>(feature: T) { this.metaParent = feature; }\r\n  getClass(): IClass { return this.parent; }\r\n}\r\n\r\nexport type M3Feature = M3Reference | M3Attribute;\r\nexport type M2Feature = M2Reference | M2Attribute;\r\nexport type MFeature = MReference | MAttribute;\r\n/*\r\nexport abstract class M3Feature extends IFeature {\r\n  parent: M3Class;\r\n  metaParent: M3Feature;\r\n  instances: M3Feature[] | M2Feature[];\r\n}\r\nexport abstract class M2Feature extends IFeature {\r\n  parent: M2Class;\r\n  metaParent: M3Feature;\r\n  instances: MFeature[];\r\n}\r\nexport abstract class MFeature extends IFeature {\r\n  parent: MClass;\r\n  metaParent: M2Feature;\r\n  instances: ModelNone;\r\n}*/\r\n","import {\r\n  AttribETypes,\r\n  ECoreOperation,\r\n  EParameter,\r\n  IClass,\r\n  Typedd,\r\n  Info,\r\n  Json,\r\n  M2Class, M3Class,\r\n  ModelPiece,\r\n  ShortAttribETypes, Type,\r\n  U\r\n}                 from '../../../common/Joiner';\r\nimport {ViewRule} from '../../../GuiStyles/viewpoint';\r\n// export abstract class EOperation extends Typedd {}\r\n/*\r\nexport class OperationVisibility {\r\n  static public = 'public';\r\n  static private = 'private';\r\n  static protected = 'protected';\r\n  static internal = 'internal';\r\n  static protectedinternal = 'protected internal';\r\n  static protectedprivate = 'protected private'; }*/\r\n\r\nexport enum OperationVisibility {\r\n  public = 'public',\r\n  private = 'private',\r\n  protected = 'protected',\r\n  internal = 'internal',\r\n  package = 'package',\r\n  protectedinternal = 'protected internal',\r\n  protectedprivate = 'protected private', }\r\n\r\nexport class EOperation extends Typedd {\r\n  static stylesDatalist: HTMLDataListElement;\r\n  // instances: Typedd[] = undefined;\r\n  // metaParent: Typedd = undefined;\r\n  parent: M2Class | M3Class;\r\n  childrens: EParameter[];\r\n  exceptionsStr: string; // classlist to be latera processed and linked.\r\n  visibility: OperationVisibility = OperationVisibility.private;\r\n  detailIsOpened: boolean = false && false;\r\n  // exceptions: IClass[];\r\n  // todo: ha davvero senso processarli e creare anche IClass.Object etc? mi conviene tenerli a stringa.\r\n\r\n  constructor(parent: M2Class | M3Class, json: Json) {\r\n    super(parent, null);\r\n    if (parent instanceof M2Class) parent.operations.push(this);\r\n    this.parse(json); }\r\n\r\n  getVisibilityChar(): string {\r\n    switch (this.visibility) {\r\n      case OperationVisibility.public: return '+';\r\n      case OperationVisibility.private: return '-';\r\n      case OperationVisibility.protected: return '#';\r\n      case OperationVisibility.internal:\r\n      case OperationVisibility.package: return '~';\r\n      case OperationVisibility.protectedinternal: return '#~';\r\n      case OperationVisibility.protectedprivate: return '#-';\r\n      default: return '?'; } }\r\n\r\n  getClass(): IClass { return this.parent; }\r\n  conformability(metaparent: ModelPiece, outObj?: any, debug?: boolean): number { U.pe(true, 'operation.conformability()'); return 0; }\r\n\r\n  duplicate(nameAppend: string = '_Copy', newParent: M2Class = null): EOperation {\r\n    const c: EOperation = new EOperation(this.parent, null);\r\n    c.copy(this); return c; }\r\n\r\n  copy(c: EOperation, nameAppend: string = '_Copy', newParent: M2Class = null): void {\r\n    super.copy(c, nameAppend, newParent);\r\n    this.exceptionsStr = c.exceptionsStr;\r\n    //// set childrens\r\n    // this.arguments = []; for (i = 0; i < this.childrens.length; i++) { U.ArrayAdd(this.arguments, this.childrens[i]); }\r\n    this.refreshGUI(); }\r\n\r\n  generateModel(): Json {\r\n    const parameters: Json[] = [];\r\n    const json: Json = {};\r\n    json[ECoreOperation.eParameters] = parameters;\r\n    /*\r\n\t\t\t\t\t\t\"_name\": \"EExceptionNameCustom\",\r\n\t\t\t\t\t\t\"_ordered\": \"false\",\r\n\t\t\t\t\t\t\"_unique\": \"false\",\r\n\t\t\t\t\t\t\"_lowerBound\": \"5\",\r\n\t\t\t\t\t\t\"_upperBound\": \"7\",\r\n\t\t\t\t\t\t\"_eType\": \"#//Casa\",\r\n\t\t\t\t\t\t\"_eExceptions\": \"#//Casa #//League ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt\",\r\n\t\t\t\t\t\t\"eParameters\": [ ]*/\r\n    Json.write(json, ECoreOperation.namee, this.name);\r\n    Json.write(json, ECoreOperation.eType, this.getType().toEcoreString() );\r\n    Json.write(json, ECoreOperation.lowerBound, '' + this.lowerbound);\r\n    Json.write(json, ECoreOperation.upperBound, '' + this.upperbound);\r\n    Json.write(json, ECoreOperation.eexceptions, this.exceptionsStr);\r\n    Json.write(json, ECoreOperation.ordered, '' + this.ordered);\r\n    Json.write(json, ECoreOperation.unique, '' + this.unique);\r\n    let i: number;\r\n    for (i = 0; i < this.childrens.length; i++) { parameters.push(this.childrens[i].generateModel()); }\r\n    return json; }\r\n\r\n  getInfo(toLower: boolean = false): any {\r\n    const info: any = super.getInfo(toLower);\r\n    Info.unset(info, 'instances');\r\n    Info.rename(info, 'type', 'returnType');\r\n    Info.rename(info, 'typeDetail', 'returnTypeDetail');\r\n    return info; }\r\n\r\n  parse(json: Json, destructive?: boolean): void {\r\n    this.setName( (this.parent instanceof M3Class) ? 'Operation' : Json.read<string>(json, ECoreOperation.namee, 'Func_1'));\r\n    this.setType(Json.read<string>(json, ECoreOperation.eType, AttribETypes.void));\r\n    this.setLowerbound(+Json.read<number>(json, ECoreOperation.lowerBound, 'NAN_Trigger'));\r\n    this.setUpperbound(+Json.read<number>(json, ECoreOperation.upperBound, 'NAN_Trigger'));\r\n    this.exceptionsStr = Json.read<string>(json, ECoreOperation.eexceptions, '');\r\n    this.ordered = 'true' === '' + Json.read<boolean>(json, ECoreOperation.ordered, 'false');\r\n    this.unique = 'true ' === '' + Json.read<boolean>(json, ECoreOperation.unique, 'false');\r\n    this.visibility = OperationVisibility.package;\r\n    const parameters: Json[] = Json.getChildrens(json, false);\r\n    let i: number;\r\n    for (i = 0; i < parameters.length; i++) {\r\n      const param: EParameter = new EParameter(this, parameters[i]);\r\n      // U.ArrayAdd(this.arguments, param);\r\n      U.ArrayAdd(this.childrens, param); }/*\r\n    this.views = [];\r\n    for(i = 0; i < this.parent.views.length; i++) {\r\n      const pv: ClassView = this.parent.views[i];\r\n      const v = new OperationView(pv);\r\n      this.views.push(v);\r\n      pv.operationViews.push(v); }*/\r\n\r\n    /*  https://codebeautify.org/xmltojson\r\n\t\t\t\t\"Operations\": [ {\r\n\t\t\t\t\t\t\"_name\": \"EExceptionNameCustom\",\r\n\t\t\t\t\t\t\"_ordered\": \"false\",\r\n\t\t\t\t\t\t\"_unique\": \"false\",\r\n\t\t\t\t\t\t\"_lowerBound\": \"5\",\r\n\t\t\t\t\t\t\"_upperBound\": \"7\",\r\n\t\t\t\t\t\t\"_eType\": \"#//Casa\",\r\n\t\t\t\t\t\t\"_eExceptions\": \"#//Casa #//League ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EInt\" },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"eParameters\": [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"_eType\": \"#//Casa\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"eAnnotations\": {\r\n\t\t\t\t\t\t\t\t\t\"_source\": \"annotationtext\",\r\n\t\t\t\t\t\t\t\t\t\"_references\": \"#//Umano/anni #//Umano/Attribute_1\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\"_name\": \"dbl\",\r\n\t\t\t\t\t\t\t\t\"_ordered\": \"false\",\r\n\t\t\t\t\t\t\t\t\"_unique\": \"false\",\r\n\t\t\t\t\t\t\t\t\"_lowerBound\": \"1\",\r\n\t\t\t\t\t\t\t\t\"_upperBound\": \"2\",\r\n\t\t\t\t\t\t\t\t\"_eType\": \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\"_name\": \"operationDam\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],*/\r\n  }\r\n\r\nprivate static counter = 0;\r\n  private getSignature(maxarguments: number = Number.POSITIVE_INFINITY): string {\r\n    let parameterStr = '';\r\n    maxarguments = Math.min(maxarguments, this.childrens.length);\r\n    let i: number;\r\n    const debug: boolean = true;\r\n    const separator = ', ';\r\n    for (i = 0; i < maxarguments; i++) {\r\n      if (i !== 0) { parameterStr += separator; }\r\n      U.pif(debug, 'parameter[' + i + '] = ', this.childrens[i]);\r\n      U.pif(debug, 'parameterStr: |' + parameterStr + '| --> |' + parameterStr + this.childrens[i].getType().toShortString() + '|');\r\n      parameterStr += this.childrens[i].getType().toShortString(); }\r\n    return parameterStr; }\r\n\r\n  setSignatureHtml(html: HTMLElement, separator: string, maxargumentchars: number = null, maxarguments: number = null): void {\r\n    const debug: boolean = false && true;\r\n    maxargumentchars = isNaN(+maxargumentchars) ? 10 : +maxargumentchars;\r\n    maxarguments = isNaN(+maxarguments) ? 2 : +maxarguments;\r\n    const fixName = (s: string): string => {\r\n      U.pif(debug, 'fixname: |' + s + '| --> |' + s.substring(0, maxargumentchars - 1) + '…|');\r\n      if (s.length > maxargumentchars) { return s.substring(0, maxargumentchars - 1) + '…'; }\r\n      return s; };\r\n    let i: number;\r\n    let parameterStr = this.getSignature(maxarguments);\r\n    U.pif(debug, 'finalSignature: ', this.getVisibilityChar(), fixName(this.name), parameterStr,\r\n      fixName(this.type.toShortString()), this);\r\n    // todo: innerText is not standard, switch to textContent\r\n    html.innerHTML = '&nbsp'; // == ' '\r\n    html.textContent += this.getVisibilityChar() + '' + fixName(this.name) + '(' + parameterStr + ') → ' // → ⇒\r\n      + this.type.toShortString();\r\n    html.dataset.visibility = this.visibility;\r\n    html.dataset.exceptions = this.exceptionsStr; }\r\n\r\n  // getReturnType(): EParameter { return this.getFakeReturnTypeParameter(); }\r\n/*\r\n  getFakeReturnTypeParameter(): EParameter {\r\n    const fake: EParameter = new EParameter(null, null);\r\n    U.arrayRemoveAll(this.childrens, fake);\r\n    fake.parent = this; // can travel fake -> original, can't original -> fake.\r\n    fake.id = this.id;\r\n    fake.ordered = this.ordered;\r\n    fake.unique = this.unique;\r\n    fake.setLowerbound(this.getLowerbound());\r\n    fake.setUpperbound(this.getUpperbound());\r\n    fake.setType(this.getType().toEcoreString());\r\n    fake.name = '';\r\n    return fake; }*/\r\n\r\n  addParameter(): EParameter {\r\n    const p: EParameter = new EParameter(this, null);\r\n    U.ArrayAdd(this.childrens, p);\r\n    return p; }\r\n\r\n}\r\n","import {\r\n  AttribETypes,\r\n  IAttribute,\r\n  M2Class,\r\n  IFeature,\r\n  IReference,\r\n  Json,\r\n  MClass,\r\n  ModelPiece,\r\n  ShortAttribETypes,\r\n  M2Attribute,\r\n  ECoreParameter,\r\n  U,\r\n  M3Attribute,\r\n  IVertex,\r\n  IField,\r\n  MetaModel,\r\n  Model,\r\n  Status,\r\n  EOperation,\r\n  ECoreOperation,\r\n  Typedd,\r\n  IClass,\r\n  Info,\r\n  M3Class,\r\n} from '../../../common/Joiner';\r\n// export abstract class EParameter extends Typedd {}\r\nexport class EParameter extends Typedd {\r\n  static stylesDatalist: HTMLDataListElement;\r\n  parent: EOperation;\r\n\r\n  constructor(parent: EOperation, json: Json) {\r\n    super(parent, null);\r\n    if (!parent) { return; } // fake constructor will allow to travel fake -> original. can't original -> fake.\r\n    this.parse(json); }\r\n\r\n  fullname(): string { return super.fullname() + ':' + this.name; }\r\n  getField(): IField { return this.parent ? this.parent.getField() : null; }\r\n  getClass(): IClass { return this.parent ? this.parent.parent : null; }\r\n\r\n  conformability(metaparent: ModelPiece, outObj?: any, debug?: boolean): number { U.pe(true, 'eop.conformability'); return 0; }\r\n\r\n  duplicate(nameAppend: string = '_Copy', newParent: EOperation = null): EParameter {\r\n    const c: EParameter = new EParameter(null, null);\r\n    c.copy(this, nameAppend, newParent); return c; }\r\n\r\n  copy(c: EParameter, nameAppend: string = '_Copy', newParent: EOperation = null): void {\r\n    super.copy(c, nameAppend, newParent);\r\n    //// set childrens\r\n    // let i; for (i = 0; i < this.childrens.length; i++) { U.ArrayAdd(this.parent.arguments, this.childrens[i]); }\r\n    this.refreshGUI(); }\r\n\r\n  getInfo(toLower: boolean = false): any {\r\n    const info: any = super.getInfo(toLower);\r\n    Info.unset(info, 'instances');\r\n    return info; }\r\n\r\n  generateModel(): Json {\r\n    const json: Json = {};\r\n    Json.write(json, ECoreOperation.lowerBound, '' + this.lowerbound);\r\n    Json.write(json, ECoreOperation.upperBound, '' + this.upperbound);\r\n    Json.write(json, ECoreOperation.ordered, '' + this.ordered);\r\n    Json.write(json, ECoreOperation.unique, '' + this.unique);\r\n    Json.write(json, ECoreOperation.eType, '' + this.getType().toEcoreString());\r\n    return json; }\r\n\r\n  parse(json: Json, destructive?: boolean): void {\r\n    /* {\"eAnnotations\": {\r\n\t\t\t\t\t\"_source\": \"annotationtext\",\r\n\t\t\t\t\t\"_references\": \"#//Umano/anni #//Umano/Attribute_1\" },\r\n\t\t\t\t\"_name\": \"dbl\",\r\n\t\t\t\t\"_ordered\": \"false\",\r\n\t\t\t\t\"_unique\": \"false\",\r\n\t\t\t\t\"_lowerBound\": \"1\",\r\n\t\t\t\t\"_upperBound\": \"2\",\r\n\t\t\t\t\"_eType\": \"ecore:EDataType http://www.eclipse.org/emf/2002/Ecore#//EDouble\" }*/\r\n    U.pe(!this.parent || !this.parent.parent, 'json:', json, 'this: ', this, 'this.parent:', this.parent, 'this.p.p:', this.parent ? this.parent.parent : undefined);\r\n    this.setName(this.parent.parent instanceof M3Class ? 'Parameter' : Json.read<string>(json, ECoreParameter.namee, 'Param_1'));\r\n    this.setLowerbound(+Json.read<number>(json, ECoreOperation.lowerBound, 'NAN_Trigger'));\r\n    this.setUpperbound(+Json.read<number>(json, ECoreOperation.upperBound, 'NAN_Trigger'));\r\n    this.ordered = 'true' === '' + Json.read<boolean>(json, ECoreOperation.ordered, 'false');\r\n    this.unique = 'true ' === '' + Json.read<boolean>(json, ECoreOperation.unique, 'false');\r\n    this.setType(Json.read<string>(json, ECoreParameter.eType, AttribETypes.EString));\r\n    let i: number;/*\r\n    this.views = [];\r\n    for(i = 0; i < this.parent.views.length; i++) {\r\n      const pv: OperationView = this.parent.views[i];\r\n      const v = new ParameterView(pv);\r\n      this.views.push(v);\r\n      pv.parameterView.push(v); }*/\r\n\r\n  }\r\n\r\n}\r\n","import {\r\n  AttribETypes,\r\n  Dictionary,\r\n  EEnum,\r\n  EOperation,\r\n  EParameter,\r\n  M2Attribute,\r\n  M2Class,\r\n  M2Package,\r\n  M2Reference,\r\n  MAttribute,\r\n  ModelPiece,\r\n  ShortAttribETypes,\r\n  Status,\r\n  Typedd,\r\n  U\r\n} from '../../common/Joiner';\r\nimport ChangeEvent = JQuery.ChangeEvent;\r\n\r\nexport class Type {\r\n  public static all: Type[] = [];\r\n  private static idMax: number = 0;\r\n  private static allByID: Dictionary<number, Type> = {};\r\n  static classTypePrefix: string = '#//';\r\n  private typestr: string;\r\n  public primitiveType: EType = null;\r\n  public classType: M2Class = null;\r\n  public enumType: EEnum = null;\r\n  public owner: ModelPiece = null; // todo: cambia to Typedd\r\n  private id: number;\r\n  public printablename: string;\r\n\r\n  static updateTypeSelectors($searchRoot: JQuery<HTMLElement>, primitives: boolean = true, enums: boolean = true, classes: boolean = true): void{\r\n    if (!$searchRoot) { $searchRoot = $(document.body); }\r\n    let key = U.getStartSeparatorKey();\r\n    const query = (primitives ? U.startSeparator(key) + 'select[data-primitive=\"true\"]' : '') +\r\n      (enums ? U.startSeparator(key) + 'select[data-enum=\"true\"]' : '') +\r\n      (classes ? U.startSeparator(key) + 'select[data-class=\"true\"]' : '');\r\n    key = U.getStartSeparatorKey();\r\n    const notquery = (primitives ? U.startSeparator(key) + '.template select[data-primitive=\"true\"]' : '') +\r\n      (enums ? U.startSeparator(key) + '.template select[data-enum=\"true\"]' : '') +\r\n      (classes ? U.startSeparator(key) + '.template select[data-class=\"true\"]' : '');\r\n//    console.log(query);\r\n    const $selects: JQuery<HTMLSelectElement> = $searchRoot.find(query).not(notquery) as any;\r\n    for (let i = 0; i < $selects.length; i++) { Type.updateTypeSelector($selects[i]); }\r\n    if (classes && Status.status.m &&  Status.status.m.sidebar) { Status.status.m.sidebar.updateAll(); }\r\n  }\r\n  static updateTypeSelector(selectHtml: HTMLSelectElement): void{\r\n    const addPrimitive = selectHtml.dataset.primitive === \"true\";\r\n    const addEnum = selectHtml.dataset.enum === \"true\";\r\n    const addClass = selectHtml.dataset.class === \"true\";\r\n    const addVoid = selectHtml.dataset.void === \"true\";\r\n    const type: Type = Type.get(+selectHtml.dataset.typeid);\r\n    Type.makeTypeSelector(selectHtml, type, addPrimitive, addEnum, addClass, addVoid); }\r\n\r\n  private static selectors: {all: HTMLSelectElement[], primitives: HTMLSelectElement[], classes: HTMLSelectElement[], enums: HTMLSelectElement[]}\r\n    = {all: [], primitives: [], classes: [], enums: []};\r\n\r\n  private static makeTypeSelector(selectHtml: HTMLSelectElement, selectedType: Type, addPrimitive: boolean, addEnum: boolean, addClass: boolean, addVoid: boolean): void {\r\n    U.pe(!selectHtml, 'select is null');\r\n    U.clear(selectHtml);\r\n    const mp: ModelPiece = ModelPiece.getLogic(selectHtml) as Typedd;\r\n    if (mp && mp instanceof Typedd) {\r\n      selectedType = mp.getType();\r\n      $(selectHtml).off('change.type').on('change.type', (e: ChangeEvent) => { mp.fieldChanged(e); });\r\n    } else return; //U.pw(true, 'type selector inserted on non-typed element:', selectHtml, mp);\r\n    selectHtml.dataset.typeid = '' + selectedType.id;\r\n    selectHtml.dataset.primitive = '' + (addPrimitive ? \"true\" : \"false\");\r\n    selectHtml.dataset.enum = '' + (addEnum ? \"true\" : \"false\") ;\r\n    selectHtml.dataset.class = '' + (addClass ? \"true\" : \"false\");\r\n    selectHtml.dataset.void = '' + (addVoid ? \"true\" : \"false\");\r\n\r\n    const grpReturn: HTMLOptGroupElement = document.createElement('optgroup');\r\n    const grpPrimitive: HTMLOptGroupElement = document.createElement('optgroup');\r\n    const grpEnum: HTMLOptGroupElement = document.createElement('optgroup');\r\n    const grpClass: HTMLOptGroupElement = document.createElement('optgroup');\r\n    grpReturn.label = 'Return Types';\r\n    grpPrimitive.label = 'Primitive Types';\r\n    grpEnum.label = 'Enumerative Types';\r\n    grpClass.label = 'ClassReference Types';\r\n    let optionFound = false;\r\n    let key: string;\r\n    let i: number;\r\n    const foundit = (opt: HTMLOptionElement) => { optionFound = true; opt.setAttribute('selected', ''); opt.selected = true; };\r\n    // primitive:\r\n    if (addPrimitive) {\r\n      for (key in EType.shorts) {\r\n        if (!EType.shorts[key]) { continue; }\r\n        const etype: EType = EType.shorts[key];\r\n        if (etype.short === ShortAttribETypes.void && !addVoid) { continue; }\r\n        const opt: HTMLOptionElement = document.createElement('option');\r\n        grpPrimitive.appendChild(opt);\r\n        opt.value = etype.long;\r\n        opt.innerHTML = etype.name;\r\n        if (selectedType && etype === selectedType.primitiveType) { foundit(opt); }} }\r\n    // primitive end\r\n    // Enum Start:\r\n    if (addEnum) {\r\n      const enumarr: EEnum[] = Status.status.mm.getAllEnums();\r\n      for (i = 0; i < enumarr.length; i++) {\r\n        const e: EEnum = enumarr[i];\r\n        const opt: HTMLOptionElement = document.createElement('option');\r\n        grpEnum.appendChild(opt);\r\n        opt.value = e.getEcoreTypeName();\r\n        opt.innerHTML = e.name;\r\n        if (e === selectedType.enumType) { foundit(opt); } }\r\n    }\r\n\r\n    // Enum End:\r\n    // class Start:\r\n    if (addClass) {\r\n      const classarr: M2Class[] = Status.status.mm.getAllClasses();\r\n      for (i = 0; i < classarr.length; i++) {\r\n        const e: M2Class = classarr[i];\r\n        const opt: HTMLOptionElement = document.createElement('option');\r\n        grpClass.appendChild(opt);\r\n        opt.value = e.getEcoreTypeName();\r\n        opt.innerHTML = e.name;\r\n        if (e === selectedType.classType) { foundit(opt); } }\r\n    }\r\n\r\n    // class End:\r\n\r\n    U.ArrayAdd(Type.selectors.all, selectHtml);\r\n    if (addPrimitive) { U.ArrayAdd(Type.selectors.primitives, selectHtml); }\r\n    if (addEnum) { U.ArrayAdd(Type.selectors.enums, selectHtml); }\r\n    if (addClass) { U.ArrayAdd(Type.selectors.classes, selectHtml); }\r\n    if (grpReturn.children.length) selectHtml.appendChild(grpReturn);\r\n    if (grpPrimitive.children.length) selectHtml.appendChild(grpPrimitive);\r\n    if (grpEnum.children.length) selectHtml.appendChild(grpEnum);\r\n    if (grpClass.children.length) selectHtml.appendChild(grpClass);\r\n    U.pe(selectedType && !optionFound, 'selected type option not found; select:', selectHtml,\r\n      ' EType.shorts:', EType, EType.shorts, ', searchedVal:', selectedType);\r\n  }\r\n\r\n\r\n  public static linkAll(): void { for (let i: number = 0; i < Type.all.length; i++) { Type.all[i].applyTypeStr(); } }\r\n\r\n  private static get(id: number): Type { return Type.allByID[id]; }\r\n  constructor(owner: ModelPiece, typestr: string = null) {\r\n    this.owner = owner;\r\n    this.typestr = typestr;\r\n    this.id = Type.idMax++;\r\n    Type.allByID[this.id] = this;\r\n    Type.all.push(this); }\r\n\r\n  changeType(typestr: string = null, primitiveType: EType = null, classType: M2Class = null, enumType: EEnum = null): void {\r\n    U.pe((typestr ? 1 : 0) + (primitiveType ? 1 : 0) + (classType ? 1 : 0) !== 1,\r\n      'changeType(): exactly one argument is required. str:', typestr, 'primitive:', primitiveType, 'classType:', classType);\r\n    if (!(typestr || primitiveType || classType || enumType)) return;\r\n    if (typestr) { this.typestr = typestr; }\r\n    if (primitiveType) { this.typestr = primitiveType.long; }\r\n    if (classType) { this.typestr = classType.getEcoreTypeName(); }\r\n    if (enumType) { this.typestr = enumType.getEcoreTypeName(); }\r\n    this.applyTypeStr(); }\r\n\r\n  defaultValue(): any {\r\n    if (this.primitiveType) return this.primitiveType.defaultValue;\r\n    if (this.enumType) return this.enumType.childrens[0].name;\r\n    return null; }\r\n\r\n  private applyTypeStr(): void {\r\n    if (!this.typestr || !Status.status.mm) return;\r\n    this.applyTypeStr0();\r\n    if (this.primitiveType) this.printablename = this.primitiveType.name;\r\n    if (this.enumType) this.printablename = this.enumType.name;\r\n    if (this.classType) this.printablename = this.classType.name ? this.classType.name : this.classType.metaParent.name;\r\n    if (this.typestr === '???void') this.printablename = 'void';\r\n    U.pe(!this.printablename, this);\r\n  }\r\n  private applyTypeStr0(): void {\r\n    const debug = false;\r\n    let i: number;\r\n    let oldClass = this.classType;\r\n    let oldEnum = this.enumType;\r\n    let oldPrimitive = this.primitiveType;\r\n    this.enumType = this.classType = this.primitiveType = null;\r\n    let typestr: string = this.typestr;\r\n    // this.typestr = null;\r\n    if(debug) { U.cclear(); }\r\n    U.pif(debug, 'changeType()', this, this.typestr);\r\n    this.primitiveType = EType.getFromLongString(typestr, false);\r\n    if (!this.primitiveType) {\r\n      U.pe(typestr.indexOf(Type.classTypePrefix) !== 0, 'allyTypeStr(): found typestr neither primitive nor classifier.', this.typestr, this);\r\n      const s: string = typestr.substr(Type.classTypePrefix.length);\r\n      const packages: M2Package[] = Status.status.mm.childrens;\r\n      for (i = 0; i < packages.length; i++) {\r\n        const pkg: M2Package = packages[i];\r\n        const c: M2Class = pkg.getClass(s);\r\n        if (c) { this.classType = c; break; }\r\n        const e: EEnum = pkg.getEnum(s);\r\n        if (e) { this.enumType = e; break; } }\r\n    }\r\n    U.pe(!this.primitiveType && !this.enumType && !this.classType, 'failed to find target: |' + typestr + '|', Status.status.mm);\r\n\r\n    if (this.owner instanceof M2Reference) {\r\n      if (oldClass === this.classType) return;\r\n      if (oldClass) { U.arrayRemoveAll(oldClass.referencesIN, this.owner); }\r\n      this.classType.referencesIN.push(this.owner);\r\n      if (this.owner.edges && this.owner.edges.length) { this.owner.edges[0].setTarget(this.classType.vertex); this.owner.edges[0].refreshGui(); }\r\n      U.pif(debug, 'ref target changed; type:' + this + 'inside:', this.owner);\r\n      this.owner.refreshGUI();\r\n      U.pif(debug, 'exit2: m2reference');\r\n      return; }\r\n\r\n    U.pif(debug, 'typechanged:', this.owner, this);\r\n    if (this.owner instanceof M2Attribute) {\r\n      for (i = 0; i < this.owner.instances.length; i++) { this.owner.instances[i].valuesAutofix(); }\r\n      this.owner.refreshGUI();\r\n      U.pif(debug, 'exit3: attrib.');\r\n      return; }\r\n    if (this.owner instanceof EOperation) {\r\n      this.owner.refreshGUI();\r\n      return; }\r\n    if (this.owner instanceof EParameter) {\r\n      this.owner.refreshGUI();\r\n      return; }\r\n    U.pe(true, 'unexpected owner instance in changeType():', this);\r\n\r\n  }\r\n\r\n  toEcoreString(): string {\r\n    if (this.classType) return Type.classTypePrefix + this.classType.name;\r\n    if (this.enumType) return Type.classTypePrefix + this.enumType.name;\r\n    if (this.primitiveType) return this.primitiveType.long;\r\n    return null; }\r\n  toShortString(): string {\r\n    if (this.classType) return '' + this.classType.name;\r\n    if (this.enumType) return '' + this.enumType.name;\r\n    if (this.primitiveType) return '' + this.primitiveType.name;\r\n    return null; }\r\n\r\n}\r\n\r\n\r\nexport class EType {\r\n  static shorts: Dictionary<ShortAttribETypes, EType> = {};\r\n  name: string = null;\r\n  long: AttribETypes = null;\r\n  short: ShortAttribETypes = null;\r\n  defaultValue: any = null;\r\n  minValue: number;\r\n  maxValue: number;\r\n  constructor(long: AttribETypes, short: ShortAttribETypes, defaultVal: any, minValue: number = null, maxValue: number = null) {\r\n    U.pe(EType.shorts[short], 'etype created twice:', EType.shorts[short]);\r\n    EType.shorts[short] = this;\r\n    this.long = long;\r\n    this.short = short;\r\n    this.defaultValue = defaultVal;\r\n    this.minValue = minValue;\r\n    this.maxValue = maxValue;\r\n    const alias = Status.status.typeAliasDictionary[short];\r\n    this.name = alias ? alias : short; }\r\n  static staticInit(): Dictionary<ShortAttribETypes, EType> {\r\n    EType.shorts = {};\r\n    let noWarning: EType;\r\n    noWarning = new EType(AttribETypes.void, ShortAttribETypes.void, undefined);\r\n    noWarning = new EType(AttribETypes.EDate, ShortAttribETypes.EDate, ' ');\r\n    noWarning = new EType(AttribETypes.EChar, ShortAttribETypes.EChar, ' ');\r\n    noWarning = new EType(AttribETypes.EString, ShortAttribETypes.EString, '');\r\n    noWarning = new EType(AttribETypes.EBoolean, ShortAttribETypes.EBoolean, true);\r\n    noWarning = new EType(AttribETypes.EByte, ShortAttribETypes.EByte, 0, -128, 127);\r\n    noWarning = new EType(AttribETypes.EShort, ShortAttribETypes.EShort, 0, -32768, 32767);\r\n    noWarning = new EType(AttribETypes.EInt, ShortAttribETypes.EInt, 0, -2147483648, 2147483647);\r\n    noWarning = new EType(AttribETypes.ELong, ShortAttribETypes.ELong, 0, -9223372036854775808, 9223372036854775808);\r\n    noWarning = new EType(AttribETypes.EFloat, ShortAttribETypes.EFloat, 0, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY);\r\n    noWarning = new EType(AttribETypes.EDouble, ShortAttribETypes.EDouble, 0,  Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY);\r\n    return EType.shorts; }\r\n\r\n  static getFromLongString(ecorelongstring: string, throww: boolean = true): EType {\r\n    switch (ecorelongstring) {\r\n    default: U.pe(throww, 'Etype.Get() unrecognized type: ', ecorelongstring, '; string: ', AttribETypes.EString); break;\r\n    case AttribETypes.void: return EType.get(ShortAttribETypes.void);\r\n    case AttribETypes.EChar: return EType.get(ShortAttribETypes.EChar);\r\n    case AttribETypes.EString: return EType.get(ShortAttribETypes.EString);\r\n    case AttribETypes.EBoolean: return EType.get(ShortAttribETypes.EBoolean);\r\n    case AttribETypes.EByte: return EType.get(ShortAttribETypes.EByte);\r\n    case AttribETypes.EShort: return EType.get(ShortAttribETypes.EShort);\r\n    case AttribETypes.EInt: return EType.get(ShortAttribETypes.EInt);\r\n    case AttribETypes.ELong: return EType.get(ShortAttribETypes.ELong);\r\n    case AttribETypes.EFloat: return EType.get(ShortAttribETypes.EFloat);\r\n    case AttribETypes.EDouble: return EType.get(ShortAttribETypes.EDouble);\r\n    case AttribETypes.EDate: return EType.get(ShortAttribETypes.EDate); }\r\n    return null; }\r\n\r\n  static get(a: ShortAttribETypes): EType { return EType.shorts[a]; }\r\n  static getAlias(a: ShortAttribETypes): string {\r\n    const str = Status.status.typeAliasDictionary[a];\r\n    return !str ? '' + a : Status.status.typeAliasDictionary[a]; }\r\n\r\n  changeAlias(value: string) {\r\n    this.name = value;\r\n    Status.status.typeAliasDictionary[this.short] = this.name;\r\n    Status.status.aliasTypeDictionary[this.name] = this.short;\r\n    Status.status.mm.refreshGUI();\r\n    Status.status.m.refreshGUI();\r\n    Status.status.mm.graph.propertyBar.refreshGUI();\r\n    Status.status.m.graph.propertyBar.refreshGUI();\r\n  }\r\n\r\n}\r\n","import {\r\n  EOperation,\r\n  IClass,\r\n  IField,\r\n  IGraph, Info, IPackage,\r\n  IVertex, Json,\r\n  M2Attribute,\r\n  M2Class,\r\n  M2Reference,\r\n  M3Attribute,\r\n  M3Reference,\r\n  MAttribute, MClass,\r\n  ModelPiece,\r\n  MReference,\r\n  ShortAttribETypes,\r\n  Status, Type, IClassifier,\r\n  U\r\n}                    from '../../common/Joiner';\r\n\r\nexport type M1ClassChild = MAttribute | MReference;\r\nexport type M2ClassChild = M2Attribute | M2Reference | EOperation;\r\nexport type M3ClassChild = M3Attribute | M3Reference;\r\nexport abstract class Typedd extends ModelPiece {\r\n  parent: ModelPiece; // parent: IClassifier | EOperation; todo: aggiusta.\r\n  metaParent: Typedd;\r\n  instances: Typedd[];\r\n  // upperbound and lowerbound are defining how much values can be given to a single typed element. (nullable, single value, array)\r\n  upperbound: number = 1 || 1; // to avoid stupid compiler warning on primitive types\r\n  lowerbound: number = 0 || 0;\r\n  // currently unused\r\n  field: IField;\r\n  // tells if the values are ordered. useless if upperbound is <= 1\r\n  ordered: boolean = false && false;\r\n  // tells if the values are a set. useless if upperbound is <= 1\r\n  unique: boolean = false && false;\r\n  // type of the element, the admitted values are restricted by the type.\r\n  type: Type;\r\n  constructor(parent: ModelPiece, metaVersion: ModelPiece){\r\n    super(parent, metaVersion);\r\n    this.type = this.getModelRoot().isM2() || this.getModelRoot().isM3() ? new Type(this) : null; }\r\n  // typeClassFullnameStr: string = null;\r\n/*\r\n  parsePrintableTypeName(eTypeLongStr: string): void {\r\n    this.classType = null;\r\n    this.typeClassFullnameStr = null;\r\n    const pkg: IPackage = this.getPackage();\r\n    const searchStr: string = '#//' || '';\r\n    const pos = eTypeLongStr.lastIndexOf(searchStr);\r\n    if (pos === 0 && pkg) {\r\n      this.typeClassFullnameStr = pkg.name + '.' + eTypeLongStr.substring(pos + searchStr.length);\r\n      return; }\r\n    this.updateTypeAndValue(EType.getFromLongString(eTypeLongStr), false);\r\n    U.pe(!this.getType(), 'found json ecore type that is not a classname or a primitive type.', eTypeLongStr);\r\n    return; }*/\r\n\r\n  fieldChanged(e: JQuery.ChangeEvent, ignoreSwitch: boolean = false): void {\r\n    const html: HTMLElement = e.currentTarget;\r\n    const graph: IGraph = this.getModelRoot().graph;\r\n    const fromGraph: boolean = U.isParentOf(graph.container, html);\r\n    const fromSidebar: boolean = U.isParentOf(graph.propertyBar.container, html);\r\n    if (!ignoreSwitch) switch (html.tagName.toLowerCase()) {\r\n      default: U.pe(true, 'unexpected tag:', html.tagName, ' of:', html, 'in event:', e); break;\r\n      case 'textarea':\r\n      case 'input': this.setName((html as HTMLInputElement).value); break;\r\n      case 'select':\r\n        this.setType((html as HTMLSelectElement).value, true, false); break; }\r\n    if (!fromGraph) { this.refreshGUI(); }\r\n    if (!fromSidebar) { graph.propertyBar.refreshGUI(); }\r\n  }\r\n\r\n  setType(classOrPrimitiveString: string, throwError: boolean = true, refreshGui: boolean = true): boolean {\r\n    const type: Type = this.getType();\r\n    U.pe(type !== this.type, 'attempting to change parent type!', this, type);\r\n    type.changeType(classOrPrimitiveString);\r\n    if (refreshGui) this.refreshGUI();\r\n    return true; }\r\n\r\n  // updateTypeAndValue(primitiveType: EType = null, refreshGui: boolean = true): void {}\r\n/*\r\n  setClassType(classType: M2Class = null, refreshGui: boolean = true): void {\r\n    if (!classType || this.classType === classType) { return; }\r\n    this.classType = classType;\r\n    if (!refreshGui) { return; }\r\n    this.refreshGUI();\r\n    this.refreshInstancesGUI(); }*/\r\n\r\n  getType(): Type { return this.type || this.metaParent.type; }\r\n\r\n  getInfo(toLower: boolean = false): any {\r\n    const info: any = super.getInfo(toLower);\r\n    if (!(this instanceof EOperation)) { Info.unset(info, 'childrens'); }\r\n    Info.set(info, 'lowerBound', this.lowerbound);\r\n    Info.set(info, 'upperBound', this.upperbound);\r\n    const type: Type = this.getType();\r\n    Info.set(info, 'type', type.toEcoreString());\r\n    Info.set(info, 'typeDetail', type);\r\n    return info; }\r\n\r\n  // copy(other: IAttribute, nameAppend: string = '_Copy', newParent: IClass = null): void {\r\n  copy(c: Typedd, nameAppend: string = '_Copy', newParent: ModelPiece = null): void {\r\n    super.copy(c, nameAppend, newParent);\r\n    this.setLowerbound(c.lowerbound);\r\n    this.setUpperbound(c.upperbound);\r\n    this.unique = c.unique;\r\n    this.ordered = c.ordered;\r\n    this.setType(c.getType().toEcoreString(), null, false);\r\n    this.refreshGUI(); }\r\n\r\n  abstract getClass(): IClassifier;\r\n  getPackage(): IPackage { return this.parent ? this.getClass().parent : null; }\r\n  graph(): IGraph { return this.getVertex().owner; }\r\n  getVertex(): IVertex { return this.parent ? this.getClass().getVertex() : null; }\r\n\r\n  /*linkToMetaParent<T extends Typedd>(classChild: T) {\r\n    U.pe(true, 'linkToMetaPrent: todo();');\r\n    this.metaParent = classChild;\r\n    if (!this.metaParent) { return; }\r\n    U.ArrayAdd(this.metaParent.instances, this); }*/\r\n\r\n  fullname(): string { return this.getClass().fullname() + '.' + this.name; }\r\n  generateField(): IField { return this.field = new IField(this); }\r\n  getField(): IField { return this.field ? this.field : this.generateField(); }\r\n\r\n  refreshGUI_Alone(debug: boolean = true): void { this.getField().refreshGUI(true); }\r\n\r\n  delete(): void {\r\n    const oldparent = this.parent;\r\n    super.delete();\r\n    if (oldparent) {\r\n      if (oldparent instanceof IClass) {\r\n        U.arrayRemoveAll(oldparent.attributes, this as any);\r\n        U.arrayRemoveAll(oldparent.references, this as any);\r\n        U.arrayRemoveAll(oldparent.getOperations(), this as any);\r\n      } else if (oldparent instanceof EOperation) {\r\n      } else { U.pe(true, 'unrecognized parent class:' + U.getTSClassName(this) + ':', this); }\r\n    }\r\n  }\r\n\r\n  // getClassType(): M2Class { return this.type.classType; }\r\n  getUpperbound(): number { return this.upperbound; }\r\n  getLowerbound(): number { return this.lowerbound; }\r\n  setUpperbound(val: number): void { this.upperbound = isNaN(+val) ? -1 : +val; }\r\n  setLowerbound(val: number): void { this.lowerbound = isNaN(+val) || +val < 0 ? 0 : +val; }\r\n}\r\n","import {\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  Json,\r\n  U,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  IReference,\r\n  Status,\r\n  DetectZoom,\r\n  Model,\r\n  ECoreAttribute,\r\n  ECoreClass,\r\n  ECorePackage,\r\n  ECoreReference,\r\n  ECoreRoot,\r\n  Point,\r\n  GraphPoint,\r\n  IModel,\r\n  Size,\r\n  MAttribute,\r\n  MReference,\r\n  MClass,\r\n  M2Class,\r\n  EdgeStyle,\r\n  M2Reference,\r\n  M2Attribute,\r\n  M3Package,\r\n  M3Reference,\r\n  M3Attribute,\r\n  M3Feature,\r\n  EdgeModes,\r\n  EdgePointStyle, EOperation, EParameter, Typedd, Type,\r\n}                    from '../common/Joiner';\r\nimport {IClassifier} from './IClassifier';\r\nimport {EdgeHeadStyle} from '../guiElements/mGraph/Edge/edgeStyle';\r\n\r\nexport abstract class IClass extends IClassifier {\r\n  attributes: IAttribute[];\r\n  references: IReference[];\r\n  metaParent: IClass;\r\n  instances: IClass[];\r\n  referencesIN: IReference[] = []; // external pointers to this class.\r\n  shouldBeDisplayedAsEdgeVar: boolean = false && false;\r\n\r\n  edges: IEdge[] = [];\r\n  edgeStyleCommon: EdgeStyle;\r\n  edgeStyleHighlight: EdgeStyle;\r\n  edgeStyleSelected: EdgeStyle;\r\n\r\n  protected constructor(parent: IPackage, meta: IClass) {\r\n    super(parent, meta);\r\n    if (this.parent) { U.ArrayAdd(this.parent.classes, this); }\r\n    this.edgeStyleCommon = new EdgeStyle(EdgeModes.straight, 2, '#7f7f7f',\r\n      new EdgePointStyle(5, 2, '#ffffff', '#000000'),\r\n      new EdgeHeadStyle(20, 20, '#7f7f7f', '#7f7f7f'));\r\n    this.edgeStyleHighlight = new EdgeStyle(EdgeModes.straight, 2, '#ffffff',\r\n      new EdgePointStyle(5, 2, '#ffffff', '#0077ff'),\r\n    new EdgeHeadStyle(20, 20, '#ffffff', '#ffffff'));\r\n    this.edgeStyleSelected = new EdgeStyle(EdgeModes.straight, 4, '#ffffff',\r\n      new EdgePointStyle(5, 2, '#ffffff', '#ff0000'),\r\n      new EdgeHeadStyle(25, 25, '#ffffff', '#ffffff'));\r\n  }\r\n\r\n  fullname(): string { return this.parent.name + '.' + this.name; }\r\n\r\n  generateEdge(): IEdge[] { U.pe(true, 'IClass.generateEdge() todo.'); return null; }\r\n\r\n  canBeLinkedTo(target: IClass): boolean {\r\n    if (!this.shouldBeDisplayedAsEdge()) { return false; }\r\n    return false; }\r\n\r\n  getEdges(): IEdge[] { return this.edges; }\r\n\r\n  delete(): void {\r\n    const oldparent = this.parent;\r\n    super.delete();\r\n    if (oldparent) U.arrayRemoveAll(oldparent.classes, this);\r\n    // todo: che fare con le reference a quella classe? per ora cancello i campi.\r\n    const pointers: IReference[] = this.getReferencePointingHere();\r\n    let i;\r\n    for (i = 0; i < pointers.length; i++) { pointers[i].delete(); }\r\n    if (this.shouldBeDisplayedAsEdge()) {\r\n      const edges: IEdge[] = U.ArrayCopy(this.getEdges(), false);\r\n      for (i = 0; i < edges.length; i++) { edges[i].remove(); }\r\n    } else { this.getVertex().remove(); }\r\n    Type.updateTypeSelectors(null, false, false, true); }\r\n\r\n  refreshGUI_Alone(debug?: boolean): void {\r\n    if (!Status.status.loadedLogic) { return; }\r\n    if (this.shouldBeDisplayedAsEdge()) {\r\n      if (this.vertex) { this.vertex.remove(); this.vertex = null; }\r\n      const edges: IEdge[] = this.getEdges();\r\n      let i: number;\r\n      for (i = 0; i < edges.length; i++) { edges[i].refreshGui(debug); }\r\n      return; }\r\n    this.getVertex().refreshGUI(); }\r\n\r\n  getReferencePointingHere(): IReference[] { return this.referencesIN; }\r\n  /*getStyle_oldhtml(): SVGForeignObjectElement {\r\n    const html: Element = super.getStyle().html; // U.removeemptynodes(super.getStyle(), true);\r\n    const container: SVGForeignObjectElement = html as SVGForeignObjectElement; //U.newSvg<SVGForeignObjectElement>('foreignObject');\r\n    const size: Size = new Size(0, 0, 0, 0);\r\n    // todo: devi specificarlo che x, y, width, height sono attributi speciali assegnabili agli HTMLElement non-svg e vengono trasmessi.\r\n    // todo: pondera l'uso di U.cloneAllAttributes(html, container); per trasferire gli attributi dell' userStyle-root nell'SvgForeignElem.\r\n\r\n    const firstChild: HTMLElement = container.firstChild as HTMLElement;\r\n    if (!firstChild.style.height || firstChild.style.height === '') { firstChild.style.height = 'auto'; }\r\n    if (firstChild.style.height === 'auto') { container.dataset.autosize = 'true'; }\r\n    else if (container.dataset.autosize === 'true') { firstChild.style.height = 'auto'; }\r\n    // (html.firstChild as HTMLElement).style.height = 'auto'; // allows autosize.\r\n\r\n\r\n    container.classList.add('Class');\r\n    container.setAttributeNS(null, 'dinamico', 'true');\r\n    /*\r\n    size.x = +html.getAttribute('x');\r\n    size.y = +html.getAttribute('y');\r\n    size.w = +html.getAttribute('width');\r\n    size.h = +html.getAttribute('height');\r\n    container.setAttributeNS(null, 'x', isNaN(size.x) ? '0' : '' + size.x);\r\n    container.setAttributeNS(null, 'y', isNaN(size.y) ? '0' : '' + size.y);\r\n    container.setAttributeNS(null, 'width', isNaN(size.w) ? '200' : '' + size.w);\r\n    container.setAttributeNS(null, 'height', isNaN(size.h) ? '100' : '' + size.h);\r\n    container.appendChild(html);* /\r\n    return container; }\r\n*/\r\n  getAttribute(name: string, caseSensitive: boolean = false): IAttribute {\r\n    let i: number;\r\n    if (!caseSensitive) { name = name.toLowerCase(); }\r\n    for (i = 0; i < this.attributes.length; i++) {\r\n      const s: string = this.attributes[i].name;\r\n      if ((caseSensitive ? s : s.toLowerCase()) === name) { return this.attributes[i]; } }\r\n    return null; }\r\n\r\n  getReference(name: string, caseSensitive: boolean = false): IReference {\r\n    let i: number;\r\n    if (!caseSensitive) { name = name.toLowerCase(); }\r\n    for (i = 0; i < this.references.length; i++) {\r\n      const s1: string = this.references[i].name;\r\n      console.log('find IReference[' + s1 + '] =?= ' + name + ' ? ' + (caseSensitive ? s1 : s1.toLowerCase()) === name);\r\n      if ((caseSensitive ? s1 : s1.toLowerCase()) === name) { return this.references[i]; } }\r\n    return null; }\r\n\r\n  /*generateEdge(): IEdge[] {\r\n    const e: IEdge = null;\r\n    U.pw(true, 'Class.generateEdge(): todo');\r\n    // todo check questa funzione e pure il shouldbedisplayedasedge\r\n    this.edges = [e];\r\n    return this.edges; }*/\r\n\r\n  copy(other: IClass, nameAppend: string = '_Copy', newParent: IClass = null): void {\r\n    super.copy(other, nameAppend, newParent);\r\n    this.attributes = [];\r\n    this.references = [];\r\n    this.edges = [];\r\n    this.edgeStyleCommon = other.edgeStyleCommon.clone();\r\n    this.edgeStyleHighlight = other.edgeStyleHighlight.clone();\r\n    this.edgeStyleSelected = other.edgeStyleSelected.clone();\r\n    let i: number;\r\n    for ( i = 0; i < this.childrens.length; i++) {\r\n      const child: Typedd = this.childrens[i];\r\n      if (child instanceof IReference) { this.references.push(child); continue; }\r\n      if (child instanceof IAttribute) { this.attributes.push(child); continue; }\r\n      U.pe(true, 'found class.children not reference neither attribute: ', child);\r\n    }\r\n  }\r\n\r\n  /*getEdge(): IEdge[] {\r\n    U.pe(!this.shouldBeDisplayedAsEdge(), 'err');\r\n    if (!this.edges) { this.generateEdge(); }\r\n    return this.edges; }*/\r\n\r\n  /*linkToMetaParent(meta: IClass): void {\r\n    U.pe(true, 'linkToMetaParent: todo.');\r\n    const outObj: any = {};\r\n    const comformability: number = this.conformability(meta, outObj);\r\n    if (comformability !== 1) {\r\n      U.pw(true, 'm2Class: ' + this.name + ' not fully conform to ' + meta.name + '. Conformability: = ' + comformability * 100 + '%' );\r\n      return; }\r\n    this.metaParent = meta;\r\n    let i: number;\r\n    const refPermutation: number[] = outObj.refPermutation;\r\n    const attrPermutation: number[] = outObj.attrPermutation;\r\n    i = -1;\r\n    while (++i < attrPermutation.length) { this.attributes[i].linkToMetaParent(meta.attributes[attrPermutation[i]]); }\r\n    i = -1;\r\n    while (++i < refPermutation.length) { this.references[i].linkToMetaParent(meta.references[refPermutation[i]]); }\r\n  }*/\r\n\r\n  /*conformability(meta: IClass, outObj: any = null/*.refPermutation, .attrPermutation* /, debug: boolean = true): number {\r\n    if (this.attributes > meta.attributes) { return 0; }\r\n    if (this.references > meta.references) { return 0; }\r\n    const refLenArray: number[] = [];\r\n    let i;\r\n    let j;\r\n    // find best references permutation compabilityF\r\n    i = -1;\r\n    while (++i < meta.references.length) { refLenArray.push(i); }\r\n    const refPermut: number[][] = U.permute(refLenArray);\r\n    // console.log('possible class.references permutations[' + meta.references.length + '!]:', refLenArray, ' => ', refPermut);\r\n    const allRefPermutationConformability: number[] = [];\r\n    i = -1;\r\n    let bestRefPermutation: number[] = null;\r\n    let bestRefPermutationValue = -1;\r\n    while (++i < refPermut.length) {\r\n      j = -1;\r\n      const permutation = refPermut[i];\r\n      let permutationComformability = 0;\r\n      while (++j < permutation.length) {\r\n        const Mref: IReference = this.references[j];\r\n        const MMref: IReference = meta.references[permutation[j]];\r\n        const refComf = !Mref ? 0 : Mref.conformability(MMref, debug);\r\n        console.log('ref: permutationComformability:', permutationComformability, ' + ' + refComf + ' / ' + permutation.length,\r\n          '-->', permutationComformability + refComf / permutation.length);\r\n        permutationComformability += refComf / permutation.length; }\r\n\r\n      allRefPermutationConformability.push(permutationComformability);\r\n      if (permutationComformability > bestRefPermutationValue) {\r\n        bestRefPermutation = permutation;\r\n        bestRefPermutationValue = permutationComformability; }\r\n      if (permutationComformability === 1) { break; }\r\n    }\r\n\r\n    // find best attributes permutation compability\r\n    const attLenArray: number[] = [];\r\n    i = -1;\r\n    while (++i < meta.attributes.length) { attLenArray.push(i); }\r\n    const attPermut: number[][] = U.permute(attLenArray, debug);\r\n    // console.log('possible class.attributes permutations[' + meta.attributes.length + '!]:', attLenArray, ' => ', attPermut);\r\n    const allAttPermutationConformability: number[] = [];\r\n    i = -1;\r\n    let bestAttPermutation: number[] = null;\r\n    let bestAttPermutationValue = -1;\r\n    while (++i < attPermut.length) {\r\n      j = -1;\r\n      const permutation = attPermut[i];\r\n      let permutationComformability = 0;\r\n      while (++j < permutation.length) {\r\n        const M2att: IAttribute = this.attributes[j];\r\n        const M3att: IAttribute = meta.attributes[permutation[j]];\r\n        const attComf = !M2att ? 0 : M2att.conformability(M3att, debug);\r\n        console.log('attr: permutationComformability:', permutationComformability, ' + ' + attComf + ' / ' + permutation.length,\r\n          '-->', permutationComformability + attComf / permutation.length);\r\n        permutationComformability += attComf / permutation.length; }\r\n\r\n      allAttPermutationConformability.push(permutationComformability);\r\n      if (permutationComformability > bestRefPermutationValue) {\r\n        bestAttPermutation = permutation;\r\n        bestAttPermutationValue = permutationComformability; }\r\n      if (permutationComformability === 1) { break; }\r\n    }\r\n\r\n    const total = meta.childrens.length + 1; // + name\r\n    const nameComformability = StringSimilarity.compareTwoStrings(this.name, meta.name) / total;\r\n    bestAttPermutationValue = Math.max(0, bestAttPermutationValue * (meta.attributes.length / total));\r\n    bestRefPermutationValue = Math.max(0, bestRefPermutationValue * (meta.references.length / total));\r\n    if (outObj) {\r\n      outObj.refPermutation = bestRefPermutation;\r\n      outObj.attrPermutation = bestAttPermutation; }\r\n\r\n    const ret = nameComformability + bestAttPermutationValue + bestRefPermutationValue;\r\n    U.pif(debug, 'M2CLASS.comform(', this.name, {0: this}, ', ', meta.name, {0: meta}, ') = ', ret,\r\n      ' = ', nameComformability + ' + ' + bestAttPermutationValue + ' + ', bestRefPermutationValue);\r\n    return ret; }*/\r\n\r\n  getOperations(): EOperation[] {\r\n    if (this instanceof M3Class) {\r\n      let i: number;\r\n      for (i = 0; i < this.childrens.length; i++) {\r\n        const c: Typedd = this.childrens[i];\r\n        if (c instanceof EOperation) { return [c]; } }\r\n      U.pe(true, 'failed to find m3Operation'); }\r\n    if (this instanceof M2Class) { return this.operations; }\r\n    if (this instanceof MClass) { return this.metaParent.operations; }\r\n    U.pe(true, 'unexpected class:' + U.getTSClassName(this) + ': ', this);\r\n  }\r\n}\r\nexport class M3Class extends IClass {\r\n  parent: M3Package;\r\n  // childrens: M3Feature[];\r\n  attributes: M3Attribute[];\r\n  references: M3Reference[];\r\n  referencesIN: M3Reference[]; // external pointers to this class.\r\n  metaParent: M3Class;\r\n  instances: M2Class[]; //  | M3Class[] = null;\r\n\r\n  constructor(parent: M3Package, json: Json = null) {\r\n    super(parent, null);\r\n    this.parse(json, true); }\r\n\r\n  duplicate(nameAppend?: string, newParent?: ModelPiece): ModelPiece { U.pe(true, 'Invalid operation: m3Class.duplicate()'); return this; }\r\n\r\n  generateModel(): Json { U.pe(true, 'Invalid operation: m3Class.generateModel()'); return this; }\r\n\r\n  parse(json: Json, destructive?: boolean): void {\r\n    this.name = 'Class';\r\n    this.childrens = [];\r\n    this.attributes = [];\r\n    this.references = [];\r\n    this.instances = [];\r\n    const a: M3Attribute = new M3Attribute(this, null);\r\n    const r: M3Reference = new M3Reference(this, null);\r\n    const o: EOperation = new EOperation(this, null);\r\n    const p: EParameter = new EParameter(o, null);\r\n  }\r\n\r\n  refreshGUI_Alone(debug: boolean = true): void { }\r\n}\r\n","import {\r\n  IVertex,\r\n  IEdge,\r\n  IField,\r\n  IPackage,\r\n  IAttribute,\r\n  AttribETypes,\r\n  IFeature,\r\n  Json,\r\n  U,\r\n  ModelPiece,\r\n  ISidebar,\r\n  IGraph,\r\n  IReference,\r\n  Status,\r\n  DetectZoom,\r\n  Model,\r\n  ECoreAttribute,\r\n  ECoreClass,\r\n  ECorePackage,\r\n  ECoreReference,\r\n  ECoreRoot,\r\n  Point,\r\n  GraphPoint,\r\n  IModel,\r\n  Size,\r\n  MAttribute,\r\n  MReference, MClass, IClass, M2Reference, M2Feature, M3Class, M2Package, M2Attribute, M3Reference, M3Attribute, M3Feature, MetaModel,\r\n  EOperation, EParameter, Typedd, Type, Dictionary, ExtEdge,\r\n}                from '../common/Joiner';\r\n\r\n\r\nexport class M2Class extends IClass {\r\n  static stylesDatalist: HTMLDataListElement;\r\n  // static all: any[] = [];\r\n  parent: M2Package;\r\n  childrens: Array<M2Feature | EOperation>; // M2Feature[];\r\n  // features: M2Feature[]; // M2Feature[];\r\n  operations: EOperation[] = [];\r\n  attributes: M2Attribute[];\r\n  references: M2Reference[];\r\n  referencesIN: M2Reference[]; // external pointers to this class.\r\n  metaParent: M3Class;\r\n  instances: MClass[];\r\n  extends: M2Class[] = [];\r\n  isAbstract: boolean;\r\n  isInterface: boolean;\r\n  private extendsStr: string[];\r\n  public extendEdges: ExtEdge[];\r\n\r\n\r\n  /*\r\n    static updateAllMMClassSelectors(root0: Element = null, updateModel: boolean = false, updateSidebar: boolean = true): void {\r\n      let root: Element = root0;\r\n      if (!Status.status.loadedGUI) { return; }\r\n      if (!root) { root = Status.status.mm.graph.container; }\r\n      // console.log('updateAllMMClassSelectors()', 'selects:', $selectors, root);\r\n      const $selectors = $(root).find('select.ClassSelector');\r\n      let i = -1;\r\n      while (++i < $selectors.length) { M2Class.updateMMClassSelector($selectors[i] as HTMLSelectElement); }\r\n      if (updateSidebar && Status.status.m && Status.status.m.sidebar) { Status.status.m.sidebar.loadDefaultHtmls(); }\r\n      if (!updateModel) { return; }\r\n      // if (Status.status.mm && Status.status.mm.sidebar) { Status.status.mm.sidebar.updateAll(); }\r\n      if (Status.status.m) { Status.statm.refreshGUI(); }\r\n    }\r\n  /*\r\n    static updateMMClassSelector(htmlSelect: HTMLSelectElement, selected: M2Class = null, debug = false,\r\n                                 mustSelect: boolean = true): HTMLSelectElement {\r\n      if (!htmlSelect || !Status.status.loadedGUI) { return; }\r\n      const optGrp: HTMLOptGroupElement = document.createElement('optgroup');\r\n      let toSelect: string;\r\n      if (debug) { console.clear(); }\r\n      if (mustSelect && !selected) {\r\n        const mp: ModelPiece = ModelPiece.getLogic(htmlSelect);\r\n        U.pif(debug, 'ownermp:', mp, 'select:', htmlSelect);\r\n        // if (ownermp instanceof IAttribute || ownermp instanceof MAttribute) { selected = ownermp.parent as M2Class; }\r\n        if (mp instanceof Typedd) { selected = (mp as Typedd).type; }\r\n        U.pw(!selected, 'ClassSelectors must be held inside a m2-reference:', htmlSelect, 'ownermp:', mp) ;\r\n        if (!selected) { return; }\r\n      }\r\n      toSelect = '' + (selected ? selected.id : '');\r\n      U.pif(debug, 'selected:', selected);\r\n      U.clear(htmlSelect);\r\n      htmlSelect.appendChild(optGrp);\r\n      optGrp.setAttribute('label', 'Class list');\r\n      const mmClasses: M2Class[] = Status.status.mm.getAllClasses();\r\n      let i: number;\r\n      let found: boolean = !mustSelect;\r\n      for (i = 0; i < mmClasses.length; i++) {\r\n        const classe: M2Class = mmClasses[i];\r\n        if (classe.shouldBeDisplayedAsEdge()) { continue; }\r\n        const opt: HTMLOptionElement = document.createElement('option');\r\n        opt.value = '' + classe.id;\r\n        if (toSelect && opt.value === toSelect) { opt.setAttribute('selected', ''); opt.selected = found = true; }\r\n        // console.log('mustselect?' + mustSelect + ': ' + toSelect + '&&' + opt.value + ' ? ' + found);\r\n        opt.innerHTML = classe.name;\r\n        optGrp.appendChild(opt); }\r\n      U.pw(debug && !found, 'class not found.', mmClasses, 'searchedClass:', selected,\r\n        'shouldBeEdge?', selected && selected.shouldBeDisplayedAsEdge());\r\n      return htmlSelect; }\r\n  */\r\n  // isRoot(): boolean { U.pe(true, 'm2 class cannot be roots.'); return false; }\r\n  // setRoot(value: boolean): void { U.pe(true, 'only usable in model version'); }\r\n\r\n  constructor(pkg: M2Package, json: Json) {\r\n    super(pkg, Status.status.mmm.getAllClasses()[0]);\r\n    this.instances = [];\r\n    if (!pkg && !json) { return; } // empty constructor for .duplicate();\r\n    this.parse(json, true);\r\n  }\r\n\r\n  getModelRoot(): MetaModel { return super.getModelRoot() as MetaModel; }\r\n\r\n  getNamespaced(): string {\r\n    const str: string = this.getModelRoot().namespace();\r\n    if (this instanceof Model) { return str; }\r\n    return str + ':' + this.name; }\r\n\r\n  parse(json: Json, destructive: boolean) {\r\n//     console.log('M2Class.parse(); json:', json, '; metaVersion: ', this.metaParent, 'this:', this);\r\n    /// own attributes.\r\n    this.extendEdges = [];\r\n    this.setName(Json.read<string>(json, ECoreClass.namee, 'Class_1'), false);\r\n    let key: string;\r\n    for (key in json) {\r\n      switch (key) {\r\n      default: U.pw(true, 'unexpected field in M2Class.parse() |' + key + '|', json); break;\r\n      case ECoreClass.instanceTypeName:\r\n      case ECoreClass.eSuperTypes:\r\n      case ECoreClass.xsitype:\r\n      case ECoreClass.eOperations:\r\n      case ECoreClass.eStructuralFeatures:\r\n      case ECoreClass.abstract:\r\n      case ECoreClass.interface:\r\n      case ECoreClass.namee: break; } }\r\n    this.instanceTypeName = Json.read<string>(json, ECoreClass.instanceTypeName, '');\r\n    this.isInterface = Json.read<string>(json, ECoreClass.interface, 'false') === 'true';\r\n    this.isAbstract = Json.read<string>(json, ECoreClass.abstract, 'false') === 'true';\r\n    let tmps: string = Json.read<string>(json, ECoreClass.eSuperTypes, null);\r\n    this.extendsStr = tmps ? tmps.split(' ') : [];\r\n    // U.pe(true, 'extendsStr:', this.extendsStr, 'tmps', tmps, 'typeof tmps:' + typeof(tmps), 'json:', json);\r\n    /*this.name = Json.read<string>(this.json, ECoreClass.name);\r\n    this.fullname = this.midname = this.parent.fullname + '.' + this.name;*/\r\n    /// childrens\r\n    const features: Json[] = Json.getChildrens(json);\r\n    const functions: Json[] = Json.getChildrens(json, false, true);\r\n    let i: number;\r\n    let newFeature: M2Feature;\r\n    const oldChildrens: Array<M2Feature | EOperation> = this.childrens;\r\n    // let metaParent: M3Feature;\r\n    if (destructive) { this.childrens = []; this.attributes = []; this.references = []; this.operations = []; }\r\n    for (i = 0; i < features.length; i++) {\r\n      // console.log('reading class children[' + i + '/' + childs.length + '] of: ', childs, 'of', json);\r\n      const child: Json = features[i];\r\n      const xsiType = Json.read<string>(child, ECoreAttribute.xsitype);\r\n      U.pe(!destructive, 'Non-destructive class parse: to do');\r\n      switch (xsiType) {\r\n        default: U.pe(true, 'unexpected xsi:type: ', xsiType, ' in feature:', child); break;\r\n        case 'ecore:EAttribute':\r\n          // metaParent = oldChildrens[i] && oldChildrens[i].metaParent ? oldChildrens[i].metaParent : U.findMetaParentA(this, child);\r\n          newFeature = new M2Attribute(this, child);\r\n          U.ArrayAdd(this.attributes, newFeature); break;\r\n        case 'ecore:EReference':\r\n          const metaRef: M3Reference = null;\r\n          // metaParent = oldChildrens[i] && oldChildrens[i].metaParent ? oldChildrens[i].metaParent : U.findMetaParentA(this, child);\r\n          newFeature = new M2Reference(this, child);\r\n          U.ArrayAdd(this.references, newFeature); break;\r\n      }\r\n      U.ArrayAdd(this.childrens, newFeature);\r\n    }\r\n    for (i = 0; i < functions.length; i++) {\r\n      const newFunction: EOperation = new EOperation(this, functions[i]);\r\n      U.ArrayAdd(this.operations, newFunction);\r\n      U.ArrayAdd(this.childrens, newFunction);\r\n    }\r\n  }\r\n\r\n  generateModel(): Json {\r\n    const featurearr: Json[] = [];\r\n    const operationsarr: Json[] = [];\r\n    const model: Json = {};\r\n    let supertypesstr = '';\r\n    const key: any = U.getStartSeparatorKey();\r\n    let i: number;\r\n    for(i = 0; i < this.extends.length; i++) { supertypesstr += U.startSeparator(key, ' ') + this.extends[i].getEcoreTypeName(); }\r\n    for (i = 0; i < this.attributes.length; i++) { featurearr.push(this.attributes[i].generateModel()); }\r\n    for (i = 0; i < this.references.length; i++) { featurearr.push(this.references[i].generateModel()); }\r\n    for (i = 0; i < this.operations.length; i++) { operationsarr.push(this.operations[i].generateModel()); }\r\n\r\n    model[ECoreClass.xsitype] = 'ecore:EClass';\r\n    model[ECoreClass.namee] = this.name;\r\n    model[ECoreClass.interface] = U.toBoolString(this.isInterface);\r\n    model[ECoreClass.abstract] = U.toBoolString(this.isAbstract);\r\n    model[ECoreClass.instanceTypeName] = this.instanceTypeName;\r\n    model[ECoreClass.eSuperTypes] = supertypesstr;\r\n    model[ECoreClass.eStructuralFeatures] = featurearr;\r\n    model[ECoreClass.eOperations] = operationsarr;\r\n    return model; }\r\n\r\n\r\n  addOperation(): EOperation {\r\n    const op: EOperation = new EOperation(this, null);\r\n    let i: number;\r\n    for (i = 0; i < this.instances.length; i++){\r\n      const inst: MClass = this.instances[0];\r\n    }\r\n    this.refreshInstancesGUI();\r\n    this.refreshGUI();\r\n    return op; }\r\n\r\n  addReference(): M2Reference {\r\n    const ref: M2Reference = new M2Reference(this, null);\r\n    ref.type.changeType(null, null, this);\r\n    ref.generateEdges();\r\n    let i: number;\r\n    for (i = 0; i < this.instances.length; i++){\r\n      const inst: MClass = this.instances[i];\r\n      new MReference(inst, null, ref); }\r\n    this.refreshInstancesGUI();\r\n    this.refreshGUI();\r\n    // M2Class.updateAllMMClassSelectors(ref.getHtml());\r\n    return ref; }\r\n\r\n  addAttribute(): M2Attribute {\r\n    console.log('addAttribute: pre', this);\r\n    const attr: M2Attribute = new M2Attribute(this, null);\r\n    let i: number;\r\n    for (i = 0; i < this.instances.length; i++){\r\n      const inst: MClass = this.instances[i];\r\n      new MAttribute(inst, null, attr); }\r\n    this.refreshInstancesGUI();\r\n    this.refreshGUI();\r\n    return attr; }\r\n\r\n  fieldChanged(e: JQuery.ChangeEvent): void {\r\n    const html: HTMLElement = e.currentTarget;\r\n    if (html.classList.contains('AddFieldSelect')) return;\r\n    switch (html.tagName.toLowerCase()) {\r\n    case 'select':\r\n    default: U.pe(true, 'unexpected tag:', html.tagName, ' of:', html, 'in event:', e); break;\r\n    case 'textarea':\r\n    case 'input':\r\n      const input = html as HTMLInputElement;\r\n      input.value = this.setName((input as HTMLInputElement).value); break;\r\n    }\r\n  }\r\n\r\n  /*\r\n    setName(name: string, refreshGUI: boolean = true): void {\r\n      super.setName(name, refreshGUI);\r\n      return;\r\n      this.midname = this.parent.name + '.' + this.name;\r\n      this.fullname = this.midname;\r\n      let i;\r\n      for (i = 0; i < this.childrens.length; i++) {\r\n        this.childrens[i].setName(this.childrens[i].name, false && refreshGUI); // per aggiornare il fullname.\r\n      }\r\n      if (refreshGUI) { this.refreshGUI(); M2Class.updateAllMMClassSelectors(); }\r\n  }*/\r\n\r\n  duplicate(nameAppend: string = '_Copy', newParent: M2Package = null): M2Class {\r\n    const c: M2Class = new M2Class(null, null);\r\n    c.copy(this);\r\n    Type.updateTypeSelectors(null, false, false, true);\r\n    c.refreshGUI();\r\n    return c; }\r\n\r\n  getExtendedClassArray(levelDeep: number = Number.POSITIVE_INFINITY, out: M2Class[] = []): M2Class[] {\r\n    let i: number;\r\n    for (i = 0; i < this.extends.length; i++ ) {\r\n      const curr: M2Class = this.extends[i];\r\n      U.ArrayAdd(out, curr);\r\n      if (levelDeep > 0) { curr.getExtendedClassArray(levelDeep--, out); }\r\n    }\r\n    return out; }\r\n\r\n  // linkToMetaParent(meta: M3Class): void { return super.linkToMetaParent(meta); }\r\n  getReferencePointingHere(): M2Reference[] { return super.getReferencePointingHere() as M2Reference[]; }\r\n  getAttribute(name: string, caseSensitive: boolean = false): M2Attribute { return super.getAttribute(name, caseSensitive) as M2Attribute; }\r\n  getReference(name: string, caseSensitive: boolean = false): M2Reference { return super.getReference(name, caseSensitive) as M2Reference; }\r\n\r\n  isExtending(subclass: M2Class): boolean {\r\n    if (!subclass) return false;\r\n    const extendedTargetClasses: M2Class[] = subclass.getExtendedClassArray();\r\n    let i: number;\r\n    for (i = 0; i < extendedTargetClasses.length; i++) {\r\n      if (this === extendedTargetClasses[i]) { return true; }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  static updateSuperClasses() {\r\n    const dictionary: Dictionary<string, M2Class> = Status.status.mm.getEcoreStr_Class_Dictionary();\r\n    const classes: M2Class[] = Status.status.mm.getAllClasses();\r\n    let j: number;\r\n    let i: number;\r\n    for (i = 0; i < classes.length; i++) {\r\n      const classe: M2Class = classes[i];\r\n      for (j = 0; j < classe.extendsStr.length; j++) {\r\n        const target: M2Class = dictionary[classe.extendsStr[j]];\r\n        U.pe(!target, 'e1, failed to find extended class.extendsStr[' + j + ']:', classe.extendsStr[j], 'in classList:', classes,\r\n          'classe to extend:', classe, 'dictionary:', dictionary);\r\n        classe.extendClass(null, target);\r\n      }\r\n      classe.extendsStr = [];\r\n    }\r\n  }\r\n  public extendClass(targetstr: string, target: M2Class): void {\r\n    if (!target) target = this.getModelRoot().getClassFromEcoreStr(targetstr);\r\n    U.pe(!target, 'e2, failed to find extended class:', targetstr, 'in classList:', Status.status.mm.getAllClasses(), 'this:', this);\r\n    U.ArrayAdd(this.extends, target);\r\n  }\r\n  public unextendClass(targetstr: string, target: M2Class): void {\r\n    if (!target) target = this.getModelRoot().getClassFromEcoreStr(targetstr);\r\n    U.pe(!target, 'e3, failed to find extended class:', targetstr, 'in classList:', Status.status.mm.getAllClasses(), 'this:', this);\r\n    U.arrayRemoveAll(this.extends, target);\r\n  }\r\n\r\n  makeExtendEdge(target: M2Class): ExtEdge {\r\n    const ret: ExtEdge = new ExtEdge(this, this.getVertex(), target.getVertex());\r\n    this.extendEdges.push(ret);\r\n    return ret; }\r\n}\r\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}